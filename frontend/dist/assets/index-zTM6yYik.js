function P_(t,e){for(var r=0;r<e.length;r++){const i=e[r];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in t)){const c=Object.getOwnPropertyDescriptor(i,s);c&&Object.defineProperty(t,s,c.get?c:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function r(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(s){if(s.ep)return;s.ep=!0;const c=r(s);fetch(s.href,c)}})();function Gm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Eh={exports:{}},gl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qb;function z_(){if(Qb)return gl;Qb=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(i,s,c){var d=null;if(c!==void 0&&(d=""+c),s.key!==void 0&&(d=""+s.key),"key"in s){c={};for(var m in s)m!=="key"&&(c[m]=s[m])}else c=s;return s=c.ref,{$$typeof:t,type:i,key:d,ref:s!==void 0?s:null,props:c}}return gl.Fragment=e,gl.jsx=r,gl.jsxs=r,gl}var Jb;function $_(){return Jb||(Jb=1,Eh.exports=z_()),Eh.exports}var l=$_(),Oh={exports:{}},Et={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ey;function U_(){if(ey)return Et;ey=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),x=Symbol.iterator;function w(T){return T===null||typeof T!="object"?null:(T=x&&T[x]||T["@@iterator"],typeof T=="function"?T:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,N={};function j(T,A,F){this.props=T,this.context=A,this.refs=N,this.updater=F||S}j.prototype.isReactComponent={},j.prototype.setState=function(T,A){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,A,"setState")},j.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function _(){}_.prototype=j.prototype;function C(T,A,F){this.props=T,this.context=A,this.refs=N,this.updater=F||S}var E=C.prototype=new _;E.constructor=C,b(E,j.prototype),E.isPureReactComponent=!0;var O=Array.isArray,M={H:null,A:null,T:null,S:null,V:null},R=Object.prototype.hasOwnProperty;function I(T,A,F,V,q,Q){return F=Q.ref,{$$typeof:t,type:T,key:A,ref:F!==void 0?F:null,props:Q}}function H(T,A){return I(T.type,A,void 0,void 0,void 0,T.props)}function D(T){return typeof T=="object"&&T!==null&&T.$$typeof===t}function Y(T){var A={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(F){return A[F]})}var G=/\/+/g;function ie(T,A){return typeof T=="object"&&T!==null&&T.key!=null?Y(""+T.key):A.toString(36)}function Oe(){}function ce(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(Oe,Oe):(T.status="pending",T.then(function(A){T.status==="pending"&&(T.status="fulfilled",T.value=A)},function(A){T.status==="pending"&&(T.status="rejected",T.reason=A)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function te(T,A,F,V,q){var Q=typeof T;(Q==="undefined"||Q==="boolean")&&(T=null);var be=!1;if(T===null)be=!0;else switch(Q){case"bigint":case"string":case"number":be=!0;break;case"object":switch(T.$$typeof){case t:case e:be=!0;break;case v:return be=T._init,te(be(T._payload),A,F,V,q)}}if(be)return q=q(T),be=V===""?"."+ie(T,0):V,O(q)?(F="",be!=null&&(F=be.replace(G,"$&/")+"/"),te(q,A,F,"",function(W){return W})):q!=null&&(D(q)&&(q=H(q,F+(q.key==null||T&&T.key===q.key?"":(""+q.key).replace(G,"$&/")+"/")+be)),A.push(q)),1;be=0;var Ce=V===""?".":V+":";if(O(T))for(var X=0;X<T.length;X++)V=T[X],Q=Ce+ie(V,X),be+=te(V,A,F,Q,q);else if(X=w(T),typeof X=="function")for(T=X.call(T),X=0;!(V=T.next()).done;)V=V.value,Q=Ce+ie(V,X++),be+=te(V,A,F,Q,q);else if(Q==="object"){if(typeof T.then=="function")return te(ce(T),A,F,V,q);throw A=String(T),Error("Objects are not valid as a React child (found: "+(A==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":A)+"). If you meant to render a collection of children, use an array instead.")}return be}function k(T,A,F){if(T==null)return T;var V=[],q=0;return te(T,V,"","",function(Q){return A.call(F,Q,q++)}),V}function z(T){if(T._status===-1){var A=T._result;A=A(),A.then(function(F){(T._status===0||T._status===-1)&&(T._status=1,T._result=F)},function(F){(T._status===0||T._status===-1)&&(T._status=2,T._result=F)}),T._status===-1&&(T._status=0,T._result=A)}if(T._status===1)return T._result.default;throw T._result}var U=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var A=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(A))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)};function K(){}return Et.Children={map:k,forEach:function(T,A,F){k(T,function(){A.apply(this,arguments)},F)},count:function(T){var A=0;return k(T,function(){A++}),A},toArray:function(T){return k(T,function(A){return A})||[]},only:function(T){if(!D(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},Et.Component=j,Et.Fragment=r,Et.Profiler=s,Et.PureComponent=C,Et.StrictMode=i,Et.Suspense=f,Et.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Et.__COMPILER_RUNTIME={__proto__:null,c:function(T){return M.H.useMemoCache(T)}},Et.cache=function(T){return function(){return T.apply(null,arguments)}},Et.cloneElement=function(T,A,F){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var V=b({},T.props),q=T.key,Q=void 0;if(A!=null)for(be in A.ref!==void 0&&(Q=void 0),A.key!==void 0&&(q=""+A.key),A)!R.call(A,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&A.ref===void 0||(V[be]=A[be]);var be=arguments.length-2;if(be===1)V.children=F;else if(1<be){for(var Ce=Array(be),X=0;X<be;X++)Ce[X]=arguments[X+2];V.children=Ce}return I(T.type,q,void 0,void 0,Q,V)},Et.createContext=function(T){return T={$$typeof:d,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:c,_context:T},T},Et.createElement=function(T,A,F){var V,q={},Q=null;if(A!=null)for(V in A.key!==void 0&&(Q=""+A.key),A)R.call(A,V)&&V!=="key"&&V!=="__self"&&V!=="__source"&&(q[V]=A[V]);var be=arguments.length-2;if(be===1)q.children=F;else if(1<be){for(var Ce=Array(be),X=0;X<be;X++)Ce[X]=arguments[X+2];q.children=Ce}if(T&&T.defaultProps)for(V in be=T.defaultProps,be)q[V]===void 0&&(q[V]=be[V]);return I(T,Q,void 0,void 0,null,q)},Et.createRef=function(){return{current:null}},Et.forwardRef=function(T){return{$$typeof:m,render:T}},Et.isValidElement=D,Et.lazy=function(T){return{$$typeof:v,_payload:{_status:-1,_result:T},_init:z}},Et.memo=function(T,A){return{$$typeof:p,type:T,compare:A===void 0?null:A}},Et.startTransition=function(T){var A=M.T,F={};M.T=F;try{var V=T(),q=M.S;q!==null&&q(F,V),typeof V=="object"&&V!==null&&typeof V.then=="function"&&V.then(K,U)}catch(Q){U(Q)}finally{M.T=A}},Et.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Et.use=function(T){return M.H.use(T)},Et.useActionState=function(T,A,F){return M.H.useActionState(T,A,F)},Et.useCallback=function(T,A){return M.H.useCallback(T,A)},Et.useContext=function(T){return M.H.useContext(T)},Et.useDebugValue=function(){},Et.useDeferredValue=function(T,A){return M.H.useDeferredValue(T,A)},Et.useEffect=function(T,A,F){var V=M.H;if(typeof F=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return V.useEffect(T,A)},Et.useId=function(){return M.H.useId()},Et.useImperativeHandle=function(T,A,F){return M.H.useImperativeHandle(T,A,F)},Et.useInsertionEffect=function(T,A){return M.H.useInsertionEffect(T,A)},Et.useLayoutEffect=function(T,A){return M.H.useLayoutEffect(T,A)},Et.useMemo=function(T,A){return M.H.useMemo(T,A)},Et.useOptimistic=function(T,A){return M.H.useOptimistic(T,A)},Et.useReducer=function(T,A,F){return M.H.useReducer(T,A,F)},Et.useRef=function(T){return M.H.useRef(T)},Et.useState=function(T){return M.H.useState(T)},Et.useSyncExternalStore=function(T,A,F){return M.H.useSyncExternalStore(T,A,F)},Et.useTransition=function(){return M.H.useTransition()},Et.version="19.1.0",Et}var ty;function Wm(){return ty||(ty=1,Oh.exports=U_()),Oh.exports}var h=Wm();const Al=Gm(h),ny=P_({__proto__:null,default:Al},[h]);var Mh={exports:{}},vl={},Lh={exports:{}},kh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ry;function V_(){return ry||(ry=1,function(t){function e(k,z){var U=k.length;k.push(z);e:for(;0<U;){var K=U-1>>>1,T=k[K];if(0<s(T,z))k[K]=z,k[U]=T,U=K;else break e}}function r(k){return k.length===0?null:k[0]}function i(k){if(k.length===0)return null;var z=k[0],U=k.pop();if(U!==z){k[0]=U;e:for(var K=0,T=k.length,A=T>>>1;K<A;){var F=2*(K+1)-1,V=k[F],q=F+1,Q=k[q];if(0>s(V,U))q<T&&0>s(Q,V)?(k[K]=Q,k[q]=U,K=q):(k[K]=V,k[F]=U,K=F);else if(q<T&&0>s(Q,U))k[K]=Q,k[q]=U,K=q;else break e}}return z}function s(k,z){var U=k.sortIndex-z.sortIndex;return U!==0?U:k.id-z.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var d=Date,m=d.now();t.unstable_now=function(){return d.now()-m}}var f=[],p=[],v=1,x=null,w=3,S=!1,b=!1,N=!1,j=!1,_=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function O(k){for(var z=r(p);z!==null;){if(z.callback===null)i(p);else if(z.startTime<=k)i(p),z.sortIndex=z.expirationTime,e(f,z);else break;z=r(p)}}function M(k){if(N=!1,O(k),!b)if(r(f)!==null)b=!0,R||(R=!0,ie());else{var z=r(p);z!==null&&te(M,z.startTime-k)}}var R=!1,I=-1,H=5,D=-1;function Y(){return j?!0:!(t.unstable_now()-D<H)}function G(){if(j=!1,R){var k=t.unstable_now();D=k;var z=!0;try{e:{b=!1,N&&(N=!1,C(I),I=-1),S=!0;var U=w;try{t:{for(O(k),x=r(f);x!==null&&!(x.expirationTime>k&&Y());){var K=x.callback;if(typeof K=="function"){x.callback=null,w=x.priorityLevel;var T=K(x.expirationTime<=k);if(k=t.unstable_now(),typeof T=="function"){x.callback=T,O(k),z=!0;break t}x===r(f)&&i(f),O(k)}else i(f);x=r(f)}if(x!==null)z=!0;else{var A=r(p);A!==null&&te(M,A.startTime-k),z=!1}}break e}finally{x=null,w=U,S=!1}z=void 0}}finally{z?ie():R=!1}}}var ie;if(typeof E=="function")ie=function(){E(G)};else if(typeof MessageChannel<"u"){var Oe=new MessageChannel,ce=Oe.port2;Oe.port1.onmessage=G,ie=function(){ce.postMessage(null)}}else ie=function(){_(G,0)};function te(k,z){I=_(function(){k(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(k){k.callback=null},t.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<k?Math.floor(1e3/k):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_next=function(k){switch(w){case 1:case 2:case 3:var z=3;break;default:z=w}var U=w;w=z;try{return k()}finally{w=U}},t.unstable_requestPaint=function(){j=!0},t.unstable_runWithPriority=function(k,z){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var U=w;w=k;try{return z()}finally{w=U}},t.unstable_scheduleCallback=function(k,z,U){var K=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?K+U:K):U=K,k){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=U+T,k={id:v++,callback:z,priorityLevel:k,startTime:U,expirationTime:T,sortIndex:-1},U>K?(k.sortIndex=U,e(p,k),r(f)===null&&k===r(p)&&(N?(C(I),I=-1):N=!0,te(M,U-K))):(k.sortIndex=T,e(f,k),b||S||(b=!0,R||(R=!0,ie()))),k},t.unstable_shouldYield=Y,t.unstable_wrapCallback=function(k){var z=w;return function(){var U=w;w=z;try{return k.apply(this,arguments)}finally{w=U}}}}(kh)),kh}var ay;function I_(){return ay||(ay=1,Lh.exports=V_()),Lh.exports}var Th={exports:{}},Wn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iy;function B_(){if(iy)return Wn;iy=1;var t=Wm();function e(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var i={d:{f:r,r:function(){throw Error(e(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},s=Symbol.for("react.portal");function c(f,p,v){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:x==null?null:""+x,children:f,containerInfo:p,implementation:v}}var d=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(f,p){if(f==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Wn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Wn.createPortal=function(f,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return c(f,p,null,v)},Wn.flushSync=function(f){var p=d.T,v=i.p;try{if(d.T=null,i.p=2,f)return f()}finally{d.T=p,i.p=v,i.d.f()}},Wn.preconnect=function(f,p){typeof f=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(f,p))},Wn.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},Wn.preinit=function(f,p){if(typeof f=="string"&&p&&typeof p.as=="string"){var v=p.as,x=m(v,p.crossOrigin),w=typeof p.integrity=="string"?p.integrity:void 0,S=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?i.d.S(f,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:x,integrity:w,fetchPriority:S}):v==="script"&&i.d.X(f,{crossOrigin:x,integrity:w,fetchPriority:S,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Wn.preinitModule=function(f,p){if(typeof f=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=m(p.as,p.crossOrigin);i.d.M(f,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(f)},Wn.preload=function(f,p){if(typeof f=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,x=m(v,p.crossOrigin);i.d.L(f,v,{crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Wn.preloadModule=function(f,p){if(typeof f=="string")if(p){var v=m(p.as,p.crossOrigin);i.d.m(f,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(f)},Wn.requestFormReset=function(f){i.d.r(f)},Wn.unstable_batchedUpdates=function(f,p){return f(p)},Wn.useFormState=function(f,p,v){return d.H.useFormState(f,p,v)},Wn.useFormStatus=function(){return d.H.useHostTransitionStatus()},Wn.version="19.1.0",Wn}var sy;function pw(){if(sy)return Th.exports;sy=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Th.exports=B_(),Th.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oy;function H_(){if(oy)return vl;oy=1;var t=I_(),e=Wm(),r=pw();function i(n){var a="https://react.dev/errors/"+n;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)a+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var a=n,o=n;if(n.alternate)for(;a.return;)a=a.return;else{n=a;do a=n,(a.flags&4098)!==0&&(o=a.return),n=a.return;while(n)}return a.tag===3?o:null}function d(n){if(n.tag===13){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function m(n){if(c(n)!==n)throw Error(i(188))}function f(n){var a=n.alternate;if(!a){if(a=c(n),a===null)throw Error(i(188));return a!==n?null:n}for(var o=n,u=a;;){var g=o.return;if(g===null)break;var y=g.alternate;if(y===null){if(u=g.return,u!==null){o=u;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===o)return m(g),n;if(y===u)return m(g),a;y=y.sibling}throw Error(i(188))}if(o.return!==u.return)o=g,u=y;else{for(var L=!1,$=g.child;$;){if($===o){L=!0,o=g,u=y;break}if($===u){L=!0,u=g,o=y;break}$=$.sibling}if(!L){for($=y.child;$;){if($===o){L=!0,o=y,u=g;break}if($===u){L=!0,u=y,o=g;break}$=$.sibling}if(!L)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:a}function p(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n;for(n=n.child;n!==null;){if(a=p(n),a!==null)return a;n=n.sibling}return null}var v=Object.assign,x=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),C=Symbol.for("react.consumer"),E=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),Y=Symbol.for("react.memo_cache_sentinel"),G=Symbol.iterator;function ie(n){return n===null||typeof n!="object"?null:(n=G&&n[G]||n["@@iterator"],typeof n=="function"?n:null)}var Oe=Symbol.for("react.client.reference");function ce(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===Oe?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case b:return"Fragment";case j:return"Profiler";case N:return"StrictMode";case M:return"Suspense";case R:return"SuspenseList";case D:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case S:return"Portal";case E:return(n.displayName||"Context")+".Provider";case C:return(n._context.displayName||"Context")+".Consumer";case O:var a=n.render;return n=n.displayName,n||(n=a.displayName||a.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case I:return a=n.displayName||null,a!==null?a:ce(n.type)||"Memo";case H:a=n._payload,n=n._init;try{return ce(n(a))}catch{}}return null}var te=Array.isArray,k=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U={pending:!1,data:null,method:null,action:null},K=[],T=-1;function A(n){return{current:n}}function F(n){0>T||(n.current=K[T],K[T]=null,T--)}function V(n,a){T++,K[T]=n.current,n.current=a}var q=A(null),Q=A(null),be=A(null),Ce=A(null);function X(n,a){switch(V(be,a),V(Q,n),V(q,null),a.nodeType){case 9:case 11:n=(n=a.documentElement)&&(n=n.namespaceURI)?Cb(n):0;break;default:if(n=a.tagName,a=a.namespaceURI)a=Cb(a),n=Eb(a,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}F(q),V(q,n)}function W(){F(q),F(Q),F(be)}function J(n){n.memoizedState!==null&&V(Ce,n);var a=q.current,o=Eb(a,n.type);a!==o&&(V(Q,n),V(q,o))}function ue(n){Q.current===n&&(F(q),F(Q)),Ce.current===n&&(F(Ce),dl._currentValue=U)}var Z=Object.prototype.hasOwnProperty,_e=t.unstable_scheduleCallback,ke=t.unstable_cancelCallback,Be=t.unstable_shouldYield,Se=t.unstable_requestPaint,P=t.unstable_now,le=t.unstable_getCurrentPriorityLevel,se=t.unstable_ImmediatePriority,Me=t.unstable_UserBlockingPriority,pe=t.unstable_NormalPriority,Ue=t.unstable_LowPriority,Ge=t.unstable_IdlePriority,Ke=t.log,We=t.unstable_setDisableYieldValue,et=null,Te=null;function Ve(n){if(typeof Ke=="function"&&We(n),Te&&typeof Te.setStrictMode=="function")try{Te.setStrictMode(et,n)}catch{}}var qe=Math.clz32?Math.clz32:ut,ht=Math.log,wt=Math.LN2;function ut(n){return n>>>=0,n===0?32:31-(ht(n)/wt|0)|0}var St=256,bt=4194304;function Nt(n){var a=n&42;if(a!==0)return a;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function cn(n,a,o){var u=n.pendingLanes;if(u===0)return 0;var g=0,y=n.suspendedLanes,L=n.pingedLanes;n=n.warmLanes;var $=u&134217727;return $!==0?(u=$&~y,u!==0?g=Nt(u):(L&=$,L!==0?g=Nt(L):o||(o=$&~n,o!==0&&(g=Nt(o))))):($=u&~y,$!==0?g=Nt($):L!==0?g=Nt(L):o||(o=u&~n,o!==0&&(g=Nt(o)))),g===0?0:a!==0&&a!==g&&(a&y)===0&&(y=g&-g,o=a&-a,y>=o||y===32&&(o&4194048)!==0)?a:g}function Vt(n,a){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&a)===0}function Qn(n,a){switch(n){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jn(){var n=St;return St<<=1,(St&4194048)===0&&(St=256),n}function Yn(){var n=bt;return bt<<=1,(bt&62914560)===0&&(bt=4194304),n}function He(n){for(var a=[],o=0;31>o;o++)a.push(n);return a}function er(n,a){n.pendingLanes|=a,a!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Ze(n,a,o,u,g,y){var L=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var $=n.entanglements,ee=n.expirationTimes,me=n.hiddenUpdates;for(o=L&~o;0<o;){var Ae=31-qe(o),$e=1<<Ae;$[Ae]=0,ee[Ae]=-1;var ve=me[Ae];if(ve!==null)for(me[Ae]=null,Ae=0;Ae<ve.length;Ae++){var we=ve[Ae];we!==null&&(we.lane&=-536870913)}o&=~$e}u!==0&&ln(n,u,0),y!==0&&g===0&&n.tag!==0&&(n.suspendedLanes|=y&~(L&~a))}function ln(n,a,o){n.pendingLanes|=a,n.suspendedLanes&=~a;var u=31-qe(a);n.entangledLanes|=a,n.entanglements[u]=n.entanglements[u]|1073741824|o&4194090}function An(n,a){var o=n.entangledLanes|=a;for(n=n.entanglements;o;){var u=31-qe(o),g=1<<u;g&a|n[u]&a&&(n[u]|=a),o&=~g}}function $t(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function un(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function hr(){var n=z.p;return n!==0?n:(n=window.event,n===void 0?32:qb(n.type))}function mr(n,a){var o=z.p;try{return z.p=n,a()}finally{z.p=o}}var xe=Math.random().toString(36).slice(2),ge="__reactFiber$"+xe,Ne="__reactProps$"+xe,Xe="__reactContainer$"+xe,Ye="__reactEvents$"+xe,Fe="__reactListeners$"+xe,lt="__reactHandles$"+xe,ot="__reactResources$"+xe,at="__reactMarker$"+xe;function Qe(n){delete n[ge],delete n[Ne],delete n[Ye],delete n[Fe],delete n[lt]}function Xt(n){var a=n[ge];if(a)return a;for(var o=n.parentNode;o;){if(a=o[Xe]||o[ge]){if(o=a.alternate,a.child!==null||o!==null&&o.child!==null)for(n=kb(n);n!==null;){if(o=n[ge])return o;n=kb(n)}return a}n=o,o=n.parentNode}return null}function _t(n){if(n=n[ge]||n[Xe]){var a=n.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return n}return null}function Je(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n.stateNode;throw Error(i(33))}function Mt(n){var a=n[ot];return a||(a=n[ot]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function it(n){n[at]=!0}var Ut=new Set,Yt={};function tr(n,a){ha(n,a),ha(n+"Capture",a)}function ha(n,a){for(Yt[n]=a,n=0;n<a.length;n++)Ut.add(a[n])}var Mi=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ec={},tc={};function nc(n){return Z.call(tc,n)?!0:Z.call(ec,n)?!1:Mi.test(n)?tc[n]=!0:(ec[n]=!0,!1)}function fs(n,a,o){if(nc(a))if(o===null)n.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(a);return;case"boolean":var u=a.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(a);return}}n.setAttribute(a,""+o)}}function Li(n,a,o){if(o===null)n.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttribute(a,""+o)}}function yn(n,a,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(a,o,""+u)}}var Pr,Sn;function jn(n){if(Pr===void 0)try{throw Error()}catch(o){var a=o.stack.trim().match(/\n( *(at )?)/);Pr=a&&a[1]||"",Sn=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Pr+n+Sn}var So=!1;function Wr(n,a){if(!n||So)return"";So=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(a){var $e=function(){throw Error()};if(Object.defineProperty($e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($e,[])}catch(we){var ve=we}Reflect.construct(n,[],$e)}else{try{$e.call()}catch(we){ve=we}n.call($e.prototype)}}else{try{throw Error()}catch(we){ve=we}($e=n())&&typeof $e.catch=="function"&&$e.catch(function(){})}}catch(we){if(we&&ve&&typeof we.stack=="string")return[we.stack,ve.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),L=y[0],$=y[1];if(L&&$){var ee=L.split(`
`),me=$.split(`
`);for(g=u=0;u<ee.length&&!ee[u].includes("DetermineComponentFrameRoot");)u++;for(;g<me.length&&!me[g].includes("DetermineComponentFrameRoot");)g++;if(u===ee.length||g===me.length)for(u=ee.length-1,g=me.length-1;1<=u&&0<=g&&ee[u]!==me[g];)g--;for(;1<=u&&0<=g;u--,g--)if(ee[u]!==me[g]){if(u!==1||g!==1)do if(u--,g--,0>g||ee[u]!==me[g]){var Ae=`
`+ee[u].replace(" at new "," at ");return n.displayName&&Ae.includes("<anonymous>")&&(Ae=Ae.replace("<anonymous>",n.displayName)),Ae}while(1<=u&&0<=g);break}}}finally{So=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?jn(o):""}function rc(n){switch(n.tag){case 26:case 27:case 5:return jn(n.type);case 16:return jn("Lazy");case 13:return jn("Suspense");case 19:return jn("SuspenseList");case 0:case 15:return Wr(n.type,!1);case 11:return Wr(n.type.render,!1);case 1:return Wr(n.type,!0);case 31:return jn("Activity");default:return""}}function hs(n){try{var a="";do a+=rc(n),n=n.return;while(n);return a}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function $n(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ac(n){var a=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function ic(n){var a=ac(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,a),u=""+n[a];if(!n.hasOwnProperty(a)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var g=o.get,y=o.set;return Object.defineProperty(n,a,{configurable:!0,get:function(){return g.call(this)},set:function(L){u=""+L,y.call(this,L)}}),Object.defineProperty(n,a,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(L){u=""+L},stopTracking:function(){n._valueTracker=null,delete n[a]}}}}function ar(n){n._valueTracker||(n._valueTracker=ic(n))}function zr(n){if(!n)return!1;var a=n._valueTracker;if(!a)return!0;var o=a.getValue(),u="";return n&&(u=ac(n)?n.checked?"true":"false":n.value),n=u,n!==o?(a.setValue(n),!0):!1}function ms(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var ps=/[\n"\\]/g;function ir(n){return n.replace(ps,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function gs(n,a,o,u,g,y,L,$){n.name="",L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?n.type=L:n.removeAttribute("type"),a!=null?L==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+$n(a)):n.value!==""+$n(a)&&(n.value=""+$n(a)):L!=="submit"&&L!=="reset"||n.removeAttribute("value"),a!=null?vs(n,L,$n(a)):o!=null?vs(n,L,$n(o)):u!=null&&n.removeAttribute("value"),g==null&&y!=null&&(n.defaultChecked=!!y),g!=null&&(n.checked=g&&typeof g!="function"&&typeof g!="symbol"),$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"?n.name=""+$n($):n.removeAttribute("name")}function Va(n,a,o,u,g,y,L,$){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(n.type=y),a!=null||o!=null){if(!(y!=="submit"&&y!=="reset"||a!=null))return;o=o!=null?""+$n(o):"",a=a!=null?""+$n(a):o,$||a===n.value||(n.value=a),n.defaultValue=a}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=$?n.checked:!!u,n.defaultChecked=!!u,L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"&&(n.name=L)}function vs(n,a,o){a==="number"&&ms(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Ia(n,a,o,u){if(n=n.options,a){a={};for(var g=0;g<o.length;g++)a["$"+o[g]]=!0;for(o=0;o<n.length;o++)g=a.hasOwnProperty("$"+n[o].value),n[o].selected!==g&&(n[o].selected=g),g&&u&&(n[o].defaultSelected=!0)}else{for(o=""+$n(o),a=null,g=0;g<n.length;g++){if(n[g].value===o){n[g].selected=!0,u&&(n[g].defaultSelected=!0);return}a!==null||n[g].disabled||(a=n[g])}a!==null&&(a.selected=!0)}}function Ba(n,a,o){if(a!=null&&(a=""+$n(a),a!==n.value&&(n.value=a),o==null)){n.defaultValue!==a&&(n.defaultValue=a);return}n.defaultValue=o!=null?""+$n(o):""}function jo(n,a,o,u){if(a==null){if(u!=null){if(o!=null)throw Error(i(92));if(te(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),a=o}o=$n(a),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u)}function Ha(n,a){if(a){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=a;return}}n.textContent=a}var bs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function sc(n,a,o){var u=a.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(a,""):a==="float"?n.cssFloat="":n[a]="":u?n.setProperty(a,o):typeof o!="number"||o===0||bs.has(a)?a==="float"?n.cssFloat=o:n[a]=(""+o).trim():n[a]=o+"px"}function oc(n,a,o){if(a!=null&&typeof a!="object")throw Error(i(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||a!=null&&a.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var g in a)u=a[g],a.hasOwnProperty(g)&&o[g]!==u&&sc(n,g,u)}else for(var y in a)a.hasOwnProperty(y)&&sc(n,y,a[y])}function Dn(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Td=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fa(n){return Td.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var _o=null;function Zr(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Xr=null,$r=null;function No(n){var a=_t(n);if(a&&(n=a.stateNode)){var o=n[Ne]||null;e:switch(n=a.stateNode,a.type){case"input":if(gs(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),a=o.name,o.type==="radio"&&a!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+ir(""+a)+'"][type="radio"]'),a=0;a<o.length;a++){var u=o[a];if(u!==n&&u.form===n.form){var g=u[Ne]||null;if(!g)throw Error(i(90));gs(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(a=0;a<o.length;a++)u=o[a],u.form===n.form&&zr(u)}break e;case"textarea":Ba(n,o.value,o.defaultValue);break e;case"select":a=o.value,a!=null&&Ia(n,!!o.multiple,a,!1)}}}var ys=!1;function ki(n,a,o){if(ys)return n(a,o);ys=!0;try{var u=n(a);return u}finally{if(ys=!1,(Xr!==null||$r!==null)&&(qc(),Xr&&(a=Xr,n=$r,$r=Xr=null,No(a),n)))for(a=0;a<n.length;a++)No(n[a])}}function Ur(n,a){var o=n.stateNode;if(o===null)return null;var u=o[Ne]||null;if(u===null)return null;o=u[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,a,typeof o));return o}var _n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ti=!1;if(_n)try{var Ya={};Object.defineProperty(Ya,"passive",{get:function(){Ti=!0}}),window.addEventListener("test",Ya,Ya),window.removeEventListener("test",Ya,Ya)}catch{Ti=!1}var Kr=null,xs=null,Vr=null;function lc(){if(Vr)return Vr;var n,a=xs,o=a.length,u,g="value"in Kr?Kr.value:Kr.textContent,y=g.length;for(n=0;n<o&&a[n]===g[n];n++);var L=o-n;for(u=1;u<=L&&a[o-u]===g[y-u];u++);return Vr=g.slice(n,1<u?1-u:void 0)}function qa(n){var a=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&a===13&&(n=13)):n=a,n===10&&(n=13),32<=n||n===13?n:0}function ws(){return!0}function cc(){return!1}function qn(n){function a(o,u,g,y,L){this._reactName=o,this._targetInst=g,this.type=u,this.nativeEvent=y,this.target=L,this.currentTarget=null;for(var $ in n)n.hasOwnProperty($)&&(o=n[$],this[$]=o?o(y):y[$]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?ws:cc,this.isPropagationStopped=cc,this}return v(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ws)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ws)},persist:function(){},isPersistent:ws}),a}var ma={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ai=qn(ma),Di=v({},ma,{view:0,detail:0}),Rp=qn(Di),Co,Ga,pa,Ri=v({},Di,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:re,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==pa&&(pa&&n.type==="mousemove"?(Co=n.screenX-pa.screenX,Ga=n.screenY-pa.screenY):Ga=Co=0,pa=n),Co)},movementY:function(n){return"movementY"in n?n.movementY:Ga}}),uc=qn(Ri),dc=v({},Ri,{dataTransfer:0}),Eo=qn(dc),Pi=v({},Di,{relatedTarget:0}),Wa=qn(Pi),Za=v({},ma,{animationName:0,elapsedTime:0,pseudoElement:0}),Ad=qn(Za),Dd=v({},ma,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Rd=qn(Dd),fc=v({},ma,{data:0}),Oo=qn(fc),B={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ne={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},de={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ye(n){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(n):(n=de[n])?!!a[n]:!1}function re(){return ye}var oe=v({},Di,{key:function(n){if(n.key){var a=B[n.key]||n.key;if(a!=="Unidentified")return a}return n.type==="keypress"?(n=qa(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?ne[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:re,charCode:function(n){return n.type==="keypress"?qa(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?qa(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ee=qn(oe),Ie=v({},Ri,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),st=qn(Ie),Pe=v({},Di,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:re}),De=qn(Pe),Re=v({},ma,{propertyName:0,elapsedTime:0,pseudoElement:0}),dt=qn(Re),mt=v({},Ri,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Bt=qn(mt),Dt=v({},ma,{newState:0,oldState:0}),qt=qn(Dt),Un=[9,13,27,32],nr=_n&&"CompositionEvent"in window,zi=null;_n&&"documentMode"in document&&(zi=document.documentMode);var ga=_n&&"TextEvent"in window&&!zi,Xa=_n&&(!nr||zi&&8<zi&&11>=zi),Pp=" ",zp=!1;function $p(n,a){switch(n){case"keyup":return Un.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Up(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ss=!1;function lj(n,a){switch(n){case"compositionend":return Up(a);case"keypress":return a.which!==32?null:(zp=!0,Pp);case"textInput":return n=a.data,n===Pp&&zp?null:n;default:return null}}function cj(n,a){if(Ss)return n==="compositionend"||!nr&&$p(n,a)?(n=lc(),Vr=xs=Kr=null,Ss=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Xa&&a.locale!=="ko"?null:a.data;default:return null}}var uj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vp(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a==="input"?!!uj[n.type]:a==="textarea"}function Ip(n,a,o,u){Xr?$r?$r.push(u):$r=[u]:Xr=u,a=Qc(a,"onChange"),0<a.length&&(o=new Ai("onChange","change",null,o,u),n.push({event:o,listeners:a}))}var Mo=null,Lo=null;function dj(n){wb(n,0)}function hc(n){var a=Je(n);if(zr(a))return n}function Bp(n,a){if(n==="change")return a}var Hp=!1;if(_n){var Pd;if(_n){var zd="oninput"in document;if(!zd){var Fp=document.createElement("div");Fp.setAttribute("oninput","return;"),zd=typeof Fp.oninput=="function"}Pd=zd}else Pd=!1;Hp=Pd&&(!document.documentMode||9<document.documentMode)}function Yp(){Mo&&(Mo.detachEvent("onpropertychange",qp),Lo=Mo=null)}function qp(n){if(n.propertyName==="value"&&hc(Lo)){var a=[];Ip(a,Lo,n,Zr(n)),ki(dj,a)}}function fj(n,a,o){n==="focusin"?(Yp(),Mo=a,Lo=o,Mo.attachEvent("onpropertychange",qp)):n==="focusout"&&Yp()}function hj(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return hc(Lo)}function mj(n,a){if(n==="click")return hc(a)}function pj(n,a){if(n==="input"||n==="change")return hc(a)}function gj(n,a){return n===a&&(n!==0||1/n===1/a)||n!==n&&a!==a}var pr=typeof Object.is=="function"?Object.is:gj;function ko(n,a){if(pr(n,a))return!0;if(typeof n!="object"||n===null||typeof a!="object"||a===null)return!1;var o=Object.keys(n),u=Object.keys(a);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var g=o[u];if(!Z.call(a,g)||!pr(n[g],a[g]))return!1}return!0}function Gp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Wp(n,a){var o=Gp(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=a&&u>=a)return{node:o,offset:a-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Gp(o)}}function Zp(n,a){return n&&a?n===a?!0:n&&n.nodeType===3?!1:a&&a.nodeType===3?Zp(n,a.parentNode):"contains"in n?n.contains(a):n.compareDocumentPosition?!!(n.compareDocumentPosition(a)&16):!1:!1}function Xp(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var a=ms(n.document);a instanceof n.HTMLIFrameElement;){try{var o=typeof a.contentWindow.location.href=="string"}catch{o=!1}if(o)n=a.contentWindow;else break;a=ms(n.document)}return a}function $d(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a&&(a==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||a==="textarea"||n.contentEditable==="true")}var vj=_n&&"documentMode"in document&&11>=document.documentMode,js=null,Ud=null,To=null,Vd=!1;function Kp(n,a,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Vd||js==null||js!==ms(u)||(u=js,"selectionStart"in u&&$d(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),To&&ko(To,u)||(To=u,u=Qc(Ud,"onSelect"),0<u.length&&(a=new Ai("onSelect","select",null,a,o),n.push({event:a,listeners:u}),a.target=js)))}function $i(n,a){var o={};return o[n.toLowerCase()]=a.toLowerCase(),o["Webkit"+n]="webkit"+a,o["Moz"+n]="moz"+a,o}var _s={animationend:$i("Animation","AnimationEnd"),animationiteration:$i("Animation","AnimationIteration"),animationstart:$i("Animation","AnimationStart"),transitionrun:$i("Transition","TransitionRun"),transitionstart:$i("Transition","TransitionStart"),transitioncancel:$i("Transition","TransitionCancel"),transitionend:$i("Transition","TransitionEnd")},Id={},Qp={};_n&&(Qp=document.createElement("div").style,"AnimationEvent"in window||(delete _s.animationend.animation,delete _s.animationiteration.animation,delete _s.animationstart.animation),"TransitionEvent"in window||delete _s.transitionend.transition);function Ui(n){if(Id[n])return Id[n];if(!_s[n])return n;var a=_s[n],o;for(o in a)if(a.hasOwnProperty(o)&&o in Qp)return Id[n]=a[o];return n}var Jp=Ui("animationend"),eg=Ui("animationiteration"),tg=Ui("animationstart"),bj=Ui("transitionrun"),yj=Ui("transitionstart"),xj=Ui("transitioncancel"),ng=Ui("transitionend"),rg=new Map,Bd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bd.push("scrollEnd");function Ir(n,a){rg.set(n,a),tr(a,[n])}var ag=new WeakMap;function Nr(n,a){if(typeof n=="object"&&n!==null){var o=ag.get(n);return o!==void 0?o:(a={value:n,source:a,stack:hs(a)},ag.set(n,a),a)}return{value:n,source:a,stack:hs(a)}}var Cr=[],Ns=0,Hd=0;function mc(){for(var n=Ns,a=Hd=Ns=0;a<n;){var o=Cr[a];Cr[a++]=null;var u=Cr[a];Cr[a++]=null;var g=Cr[a];Cr[a++]=null;var y=Cr[a];if(Cr[a++]=null,u!==null&&g!==null){var L=u.pending;L===null?g.next=g:(g.next=L.next,L.next=g),u.pending=g}y!==0&&ig(o,g,y)}}function pc(n,a,o,u){Cr[Ns++]=n,Cr[Ns++]=a,Cr[Ns++]=o,Cr[Ns++]=u,Hd|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Fd(n,a,o,u){return pc(n,a,o,u),gc(n)}function Cs(n,a){return pc(n,null,null,a),gc(n)}function ig(n,a,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var g=!1,y=n.return;y!==null;)y.childLanes|=o,u=y.alternate,u!==null&&(u.childLanes|=o),y.tag===22&&(n=y.stateNode,n===null||n._visibility&1||(g=!0)),n=y,y=y.return;return n.tag===3?(y=n.stateNode,g&&a!==null&&(g=31-qe(o),n=y.hiddenUpdates,u=n[g],u===null?n[g]=[a]:u.push(a),a.lane=o|536870912),y):null}function gc(n){if(50<rl)throw rl=0,Kf=null,Error(i(185));for(var a=n.return;a!==null;)n=a,a=n.return;return n.tag===3?n.stateNode:null}var Es={};function wj(n,a,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gr(n,a,o,u){return new wj(n,a,o,u)}function Yd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function va(n,a){var o=n.alternate;return o===null?(o=gr(n.tag,a,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=a,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,a=n.dependencies,o.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function sg(n,a){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=a,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,a=o.dependencies,n.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),n}function vc(n,a,o,u,g,y){var L=0;if(u=n,typeof n=="function")Yd(n)&&(L=1);else if(typeof n=="string")L=j_(n,o,q.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case D:return n=gr(31,o,a,g),n.elementType=D,n.lanes=y,n;case b:return Vi(o.children,g,y,a);case N:L=8,g|=24;break;case j:return n=gr(12,o,a,g|2),n.elementType=j,n.lanes=y,n;case M:return n=gr(13,o,a,g),n.elementType=M,n.lanes=y,n;case R:return n=gr(19,o,a,g),n.elementType=R,n.lanes=y,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case _:case E:L=10;break e;case C:L=9;break e;case O:L=11;break e;case I:L=14;break e;case H:L=16,u=null;break e}L=29,o=Error(i(130,n===null?"null":typeof n,"")),u=null}return a=gr(L,o,a,g),a.elementType=n,a.type=u,a.lanes=y,a}function Vi(n,a,o,u){return n=gr(7,n,u,a),n.lanes=o,n}function qd(n,a,o){return n=gr(6,n,null,a),n.lanes=o,n}function Gd(n,a,o){return a=gr(4,n.children!==null?n.children:[],n.key,a),a.lanes=o,a.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},a}var Os=[],Ms=0,bc=null,yc=0,Er=[],Or=0,Ii=null,ba=1,ya="";function Bi(n,a){Os[Ms++]=yc,Os[Ms++]=bc,bc=n,yc=a}function og(n,a,o){Er[Or++]=ba,Er[Or++]=ya,Er[Or++]=Ii,Ii=n;var u=ba;n=ya;var g=32-qe(u)-1;u&=~(1<<g),o+=1;var y=32-qe(a)+g;if(30<y){var L=g-g%5;y=(u&(1<<L)-1).toString(32),u>>=L,g-=L,ba=1<<32-qe(a)+g|o<<g|u,ya=y+n}else ba=1<<y|o<<g|u,ya=n}function Wd(n){n.return!==null&&(Bi(n,1),og(n,1,0))}function Zd(n){for(;n===bc;)bc=Os[--Ms],Os[Ms]=null,yc=Os[--Ms],Os[Ms]=null;for(;n===Ii;)Ii=Er[--Or],Er[Or]=null,ya=Er[--Or],Er[Or]=null,ba=Er[--Or],Er[Or]=null}var rr=null,gn=null,Gt=!1,Hi=null,Qr=!1,Xd=Error(i(519));function Fi(n){var a=Error(i(418,""));throw Ro(Nr(a,n)),Xd}function lg(n){var a=n.stateNode,o=n.type,u=n.memoizedProps;switch(a[ge]=n,a[Ne]=u,o){case"dialog":Pt("cancel",a),Pt("close",a);break;case"iframe":case"object":case"embed":Pt("load",a);break;case"video":case"audio":for(o=0;o<il.length;o++)Pt(il[o],a);break;case"source":Pt("error",a);break;case"img":case"image":case"link":Pt("error",a),Pt("load",a);break;case"details":Pt("toggle",a);break;case"input":Pt("invalid",a),Va(a,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),ar(a);break;case"select":Pt("invalid",a);break;case"textarea":Pt("invalid",a),jo(a,u.value,u.defaultValue,u.children),ar(a)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||a.textContent===""+o||u.suppressHydrationWarning===!0||Nb(a.textContent,o)?(u.popover!=null&&(Pt("beforetoggle",a),Pt("toggle",a)),u.onScroll!=null&&Pt("scroll",a),u.onScrollEnd!=null&&Pt("scrollend",a),u.onClick!=null&&(a.onclick=Jc),a=!0):a=!1,a||Fi(n)}function cg(n){for(rr=n.return;rr;)switch(rr.tag){case 5:case 13:Qr=!1;return;case 27:case 3:Qr=!0;return;default:rr=rr.return}}function Ao(n){if(n!==rr)return!1;if(!Gt)return cg(n),Gt=!0,!1;var a=n.tag,o;if((o=a!==3&&a!==27)&&((o=a===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||hh(n.type,n.memoizedProps)),o=!o),o&&gn&&Fi(n),cg(n),a===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));e:{for(n=n.nextSibling,a=0;n;){if(n.nodeType===8)if(o=n.data,o==="/$"){if(a===0){gn=Hr(n.nextSibling);break e}a--}else o!=="$"&&o!=="$!"&&o!=="$?"||a++;n=n.nextSibling}gn=null}}else a===27?(a=gn,fi(n.type)?(n=vh,vh=null,gn=n):gn=a):gn=rr?Hr(n.stateNode.nextSibling):null;return!0}function Do(){gn=rr=null,Gt=!1}function ug(){var n=Hi;return n!==null&&(lr===null?lr=n:lr.push.apply(lr,n),Hi=null),n}function Ro(n){Hi===null?Hi=[n]:Hi.push(n)}var Kd=A(null),Yi=null,xa=null;function Ka(n,a,o){V(Kd,a._currentValue),a._currentValue=o}function wa(n){n._currentValue=Kd.current,F(Kd)}function Qd(n,a,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&a)!==a?(n.childLanes|=a,u!==null&&(u.childLanes|=a)):u!==null&&(u.childLanes&a)!==a&&(u.childLanes|=a),n===o)break;n=n.return}}function Jd(n,a,o,u){var g=n.child;for(g!==null&&(g.return=n);g!==null;){var y=g.dependencies;if(y!==null){var L=g.child;y=y.firstContext;e:for(;y!==null;){var $=y;y=g;for(var ee=0;ee<a.length;ee++)if($.context===a[ee]){y.lanes|=o,$=y.alternate,$!==null&&($.lanes|=o),Qd(y.return,o,n),u||(L=null);break e}y=$.next}}else if(g.tag===18){if(L=g.return,L===null)throw Error(i(341));L.lanes|=o,y=L.alternate,y!==null&&(y.lanes|=o),Qd(L,o,n),L=null}else L=g.child;if(L!==null)L.return=g;else for(L=g;L!==null;){if(L===n){L=null;break}if(g=L.sibling,g!==null){g.return=L.return,L=g;break}L=L.return}g=L}}function Po(n,a,o,u){n=null;for(var g=a,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var L=g.alternate;if(L===null)throw Error(i(387));if(L=L.memoizedProps,L!==null){var $=g.type;pr(g.pendingProps.value,L.value)||(n!==null?n.push($):n=[$])}}else if(g===Ce.current){if(L=g.alternate,L===null)throw Error(i(387));L.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(n!==null?n.push(dl):n=[dl])}g=g.return}n!==null&&Jd(a,n,o,u),a.flags|=262144}function xc(n){for(n=n.firstContext;n!==null;){if(!pr(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function qi(n){Yi=n,xa=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Gn(n){return dg(Yi,n)}function wc(n,a){return Yi===null&&qi(n),dg(n,a)}function dg(n,a){var o=a._currentValue;if(a={context:a,memoizedValue:o,next:null},xa===null){if(n===null)throw Error(i(308));xa=a,n.dependencies={lanes:0,firstContext:a},n.flags|=524288}else xa=xa.next=a;return o}var Sj=typeof AbortController<"u"?AbortController:function(){var n=[],a=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){a.aborted=!0,n.forEach(function(o){return o()})}},jj=t.unstable_scheduleCallback,_j=t.unstable_NormalPriority,On={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ef(){return{controller:new Sj,data:new Map,refCount:0}}function zo(n){n.refCount--,n.refCount===0&&jj(_j,function(){n.controller.abort()})}var $o=null,tf=0,Ls=0,ks=null;function Nj(n,a){if($o===null){var o=$o=[];tf=0,Ls=ah(),ks={status:"pending",value:void 0,then:function(u){o.push(u)}}}return tf++,a.then(fg,fg),a}function fg(){if(--tf===0&&$o!==null){ks!==null&&(ks.status="fulfilled");var n=$o;$o=null,Ls=0,ks=null;for(var a=0;a<n.length;a++)(0,n[a])()}}function Cj(n,a){var o=[],u={status:"pending",value:null,reason:null,then:function(g){o.push(g)}};return n.then(function(){u.status="fulfilled",u.value=a;for(var g=0;g<o.length;g++)(0,o[g])(a)},function(g){for(u.status="rejected",u.reason=g,g=0;g<o.length;g++)(0,o[g])(void 0)}),u}var hg=k.S;k.S=function(n,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&Nj(n,a),hg!==null&&hg(n,a)};var Gi=A(null);function nf(){var n=Gi.current;return n!==null?n:on.pooledCache}function Sc(n,a){a===null?V(Gi,Gi.current):V(Gi,a.pool)}function mg(){var n=nf();return n===null?null:{parent:On._currentValue,pool:n}}var Uo=Error(i(460)),pg=Error(i(474)),jc=Error(i(542)),rf={then:function(){}};function gg(n){return n=n.status,n==="fulfilled"||n==="rejected"}function _c(){}function vg(n,a,o){switch(o=n[o],o===void 0?n.push(a):o!==a&&(a.then(_c,_c),a=o),a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,yg(n),n;default:if(typeof a.status=="string")a.then(_c,_c);else{if(n=on,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=a,n.status="pending",n.then(function(u){if(a.status==="pending"){var g=a;g.status="fulfilled",g.value=u}},function(u){if(a.status==="pending"){var g=a;g.status="rejected",g.reason=u}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,yg(n),n}throw Vo=a,Uo}}var Vo=null;function bg(){if(Vo===null)throw Error(i(459));var n=Vo;return Vo=null,n}function yg(n){if(n===Uo||n===jc)throw Error(i(483))}var Qa=!1;function af(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function sf(n,a){n=n.updateQueue,a.updateQueue===n&&(a.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ja(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ei(n,a,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Qt&2)!==0){var g=u.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),u.pending=a,a=gc(n),ig(n,null,o),a}return pc(n,u,a,o),gc(n)}function Io(n,a,o){if(a=a.updateQueue,a!==null&&(a=a.shared,(o&4194048)!==0)){var u=a.lanes;u&=n.pendingLanes,o|=u,a.lanes=o,An(n,o)}}function of(n,a){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var g=null,y=null;if(o=o.firstBaseUpdate,o!==null){do{var L={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};y===null?g=y=L:y=y.next=L,o=o.next}while(o!==null);y===null?g=y=a:y=y.next=a}else g=y=a;o={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=a:n.next=a,o.lastBaseUpdate=a}var lf=!1;function Bo(){if(lf){var n=ks;if(n!==null)throw n}}function Ho(n,a,o,u){lf=!1;var g=n.updateQueue;Qa=!1;var y=g.firstBaseUpdate,L=g.lastBaseUpdate,$=g.shared.pending;if($!==null){g.shared.pending=null;var ee=$,me=ee.next;ee.next=null,L===null?y=me:L.next=me,L=ee;var Ae=n.alternate;Ae!==null&&(Ae=Ae.updateQueue,$=Ae.lastBaseUpdate,$!==L&&($===null?Ae.firstBaseUpdate=me:$.next=me,Ae.lastBaseUpdate=ee))}if(y!==null){var $e=g.baseState;L=0,Ae=me=ee=null,$=y;do{var ve=$.lane&-536870913,we=ve!==$.lane;if(we?(It&ve)===ve:(u&ve)===ve){ve!==0&&ve===Ls&&(lf=!0),Ae!==null&&(Ae=Ae.next={lane:0,tag:$.tag,payload:$.payload,callback:null,next:null});e:{var jt=n,gt=$;ve=a;var an=o;switch(gt.tag){case 1:if(jt=gt.payload,typeof jt=="function"){$e=jt.call(an,$e,ve);break e}$e=jt;break e;case 3:jt.flags=jt.flags&-65537|128;case 0:if(jt=gt.payload,ve=typeof jt=="function"?jt.call(an,$e,ve):jt,ve==null)break e;$e=v({},$e,ve);break e;case 2:Qa=!0}}ve=$.callback,ve!==null&&(n.flags|=64,we&&(n.flags|=8192),we=g.callbacks,we===null?g.callbacks=[ve]:we.push(ve))}else we={lane:ve,tag:$.tag,payload:$.payload,callback:$.callback,next:null},Ae===null?(me=Ae=we,ee=$e):Ae=Ae.next=we,L|=ve;if($=$.next,$===null){if($=g.shared.pending,$===null)break;we=$,$=we.next,we.next=null,g.lastBaseUpdate=we,g.shared.pending=null}}while(!0);Ae===null&&(ee=$e),g.baseState=ee,g.firstBaseUpdate=me,g.lastBaseUpdate=Ae,y===null&&(g.shared.lanes=0),li|=L,n.lanes=L,n.memoizedState=$e}}function xg(n,a){if(typeof n!="function")throw Error(i(191,n));n.call(a)}function wg(n,a){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)xg(o[n],a)}var Ts=A(null),Nc=A(0);function Sg(n,a){n=Oa,V(Nc,n),V(Ts,a),Oa=n|a.baseLanes}function cf(){V(Nc,Oa),V(Ts,Ts.current)}function uf(){Oa=Nc.current,F(Ts),F(Nc)}var ti=0,Lt=null,nn=null,Nn=null,Cc=!1,As=!1,Wi=!1,Ec=0,Fo=0,Ds=null,Ej=0;function xn(){throw Error(i(321))}function df(n,a){if(a===null)return!1;for(var o=0;o<a.length&&o<n.length;o++)if(!pr(n[o],a[o]))return!1;return!0}function ff(n,a,o,u,g,y){return ti=y,Lt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,k.H=n===null||n.memoizedState===null?iv:sv,Wi=!1,y=o(u,g),Wi=!1,As&&(y=_g(a,o,u,g)),jg(n),y}function jg(n){k.H=Ac;var a=nn!==null&&nn.next!==null;if(ti=0,Nn=nn=Lt=null,Cc=!1,Fo=0,Ds=null,a)throw Error(i(300));n===null||Rn||(n=n.dependencies,n!==null&&xc(n)&&(Rn=!0))}function _g(n,a,o,u){Lt=n;var g=0;do{if(As&&(Ds=null),Fo=0,As=!1,25<=g)throw Error(i(301));if(g+=1,Nn=nn=null,n.updateQueue!=null){var y=n.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}k.H=Dj,y=a(o,u)}while(As);return y}function Oj(){var n=k.H,a=n.useState()[0];return a=typeof a.then=="function"?Yo(a):a,n=n.useState()[0],(nn!==null?nn.memoizedState:null)!==n&&(Lt.flags|=1024),a}function hf(){var n=Ec!==0;return Ec=0,n}function mf(n,a,o){a.updateQueue=n.updateQueue,a.flags&=-2053,n.lanes&=~o}function pf(n){if(Cc){for(n=n.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Cc=!1}ti=0,Nn=nn=Lt=null,As=!1,Fo=Ec=0,Ds=null}function sr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nn===null?Lt.memoizedState=Nn=n:Nn=Nn.next=n,Nn}function Cn(){if(nn===null){var n=Lt.alternate;n=n!==null?n.memoizedState:null}else n=nn.next;var a=Nn===null?Lt.memoizedState:Nn.next;if(a!==null)Nn=a,nn=n;else{if(n===null)throw Lt.alternate===null?Error(i(467)):Error(i(310));nn=n,n={memoizedState:nn.memoizedState,baseState:nn.baseState,baseQueue:nn.baseQueue,queue:nn.queue,next:null},Nn===null?Lt.memoizedState=Nn=n:Nn=Nn.next=n}return Nn}function gf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Yo(n){var a=Fo;return Fo+=1,Ds===null&&(Ds=[]),n=vg(Ds,n,a),a=Lt,(Nn===null?a.memoizedState:Nn.next)===null&&(a=a.alternate,k.H=a===null||a.memoizedState===null?iv:sv),n}function Oc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Yo(n);if(n.$$typeof===E)return Gn(n)}throw Error(i(438,String(n)))}function vf(n){var a=null,o=Lt.updateQueue;if(o!==null&&(a=o.memoCache),a==null){var u=Lt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(a={data:u.data.map(function(g){return g.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),o===null&&(o=gf(),Lt.updateQueue=o),o.memoCache=a,o=a.data[a.index],o===void 0)for(o=a.data[a.index]=Array(n),u=0;u<n;u++)o[u]=Y;return a.index++,o}function Sa(n,a){return typeof a=="function"?a(n):a}function Mc(n){var a=Cn();return bf(a,nn,n)}function bf(n,a,o){var u=n.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var g=n.baseQueue,y=u.pending;if(y!==null){if(g!==null){var L=g.next;g.next=y.next,y.next=L}a.baseQueue=g=y,u.pending=null}if(y=n.baseState,g===null)n.memoizedState=y;else{a=g.next;var $=L=null,ee=null,me=a,Ae=!1;do{var $e=me.lane&-536870913;if($e!==me.lane?(It&$e)===$e:(ti&$e)===$e){var ve=me.revertLane;if(ve===0)ee!==null&&(ee=ee.next={lane:0,revertLane:0,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null}),$e===Ls&&(Ae=!0);else if((ti&ve)===ve){me=me.next,ve===Ls&&(Ae=!0);continue}else $e={lane:0,revertLane:me.revertLane,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null},ee===null?($=ee=$e,L=y):ee=ee.next=$e,Lt.lanes|=ve,li|=ve;$e=me.action,Wi&&o(y,$e),y=me.hasEagerState?me.eagerState:o(y,$e)}else ve={lane:$e,revertLane:me.revertLane,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null},ee===null?($=ee=ve,L=y):ee=ee.next=ve,Lt.lanes|=$e,li|=$e;me=me.next}while(me!==null&&me!==a);if(ee===null?L=y:ee.next=$,!pr(y,n.memoizedState)&&(Rn=!0,Ae&&(o=ks,o!==null)))throw o;n.memoizedState=y,n.baseState=L,n.baseQueue=ee,u.lastRenderedState=y}return g===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function yf(n){var a=Cn(),o=a.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var u=o.dispatch,g=o.pending,y=a.memoizedState;if(g!==null){o.pending=null;var L=g=g.next;do y=n(y,L.action),L=L.next;while(L!==g);pr(y,a.memoizedState)||(Rn=!0),a.memoizedState=y,a.baseQueue===null&&(a.baseState=y),o.lastRenderedState=y}return[y,u]}function Ng(n,a,o){var u=Lt,g=Cn(),y=Gt;if(y){if(o===void 0)throw Error(i(407));o=o()}else o=a();var L=!pr((nn||g).memoizedState,o);L&&(g.memoizedState=o,Rn=!0),g=g.queue;var $=Og.bind(null,u,g,n);if(qo(2048,8,$,[n]),g.getSnapshot!==a||L||Nn!==null&&Nn.memoizedState.tag&1){if(u.flags|=2048,Rs(9,Lc(),Eg.bind(null,u,g,o,a),null),on===null)throw Error(i(349));y||(ti&124)!==0||Cg(u,a,o)}return o}function Cg(n,a,o){n.flags|=16384,n={getSnapshot:a,value:o},a=Lt.updateQueue,a===null?(a=gf(),Lt.updateQueue=a,a.stores=[n]):(o=a.stores,o===null?a.stores=[n]:o.push(n))}function Eg(n,a,o,u){a.value=o,a.getSnapshot=u,Mg(a)&&Lg(n)}function Og(n,a,o){return o(function(){Mg(a)&&Lg(n)})}function Mg(n){var a=n.getSnapshot;n=n.value;try{var o=a();return!pr(n,o)}catch{return!0}}function Lg(n){var a=Cs(n,2);a!==null&&wr(a,n,2)}function xf(n){var a=sr();if(typeof n=="function"){var o=n;if(n=o(),Wi){Ve(!0);try{o()}finally{Ve(!1)}}}return a.memoizedState=a.baseState=n,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:n},a}function kg(n,a,o,u){return n.baseState=o,bf(n,nn,typeof u=="function"?u:Sa)}function Mj(n,a,o,u,g){if(Tc(n))throw Error(i(485));if(n=a.action,n!==null){var y={payload:g,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(L){y.listeners.push(L)}};k.T!==null?o(!0):y.isTransition=!1,u(y),o=a.pending,o===null?(y.next=a.pending=y,Tg(a,y)):(y.next=o.next,a.pending=o.next=y)}}function Tg(n,a){var o=a.action,u=a.payload,g=n.state;if(a.isTransition){var y=k.T,L={};k.T=L;try{var $=o(g,u),ee=k.S;ee!==null&&ee(L,$),Ag(n,a,$)}catch(me){wf(n,a,me)}finally{k.T=y}}else try{y=o(g,u),Ag(n,a,y)}catch(me){wf(n,a,me)}}function Ag(n,a,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Dg(n,a,u)},function(u){return wf(n,a,u)}):Dg(n,a,o)}function Dg(n,a,o){a.status="fulfilled",a.value=o,Rg(a),n.state=o,a=n.pending,a!==null&&(o=a.next,o===a?n.pending=null:(o=o.next,a.next=o,Tg(n,o)))}function wf(n,a,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do a.status="rejected",a.reason=o,Rg(a),a=a.next;while(a!==u)}n.action=null}function Rg(n){n=n.listeners;for(var a=0;a<n.length;a++)(0,n[a])()}function Pg(n,a){return a}function zg(n,a){if(Gt){var o=on.formState;if(o!==null){e:{var u=Lt;if(Gt){if(gn){t:{for(var g=gn,y=Qr;g.nodeType!==8;){if(!y){g=null;break t}if(g=Hr(g.nextSibling),g===null){g=null;break t}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){gn=Hr(g.nextSibling),u=g.data==="F!";break e}}Fi(u)}u=!1}u&&(a=o[0])}}return o=sr(),o.memoizedState=o.baseState=a,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pg,lastRenderedState:a},o.queue=u,o=nv.bind(null,Lt,u),u.dispatch=o,u=xf(!1),y=Cf.bind(null,Lt,!1,u.queue),u=sr(),g={state:a,dispatch:null,action:n,pending:null},u.queue=g,o=Mj.bind(null,Lt,g,y,o),g.dispatch=o,u.memoizedState=n,[a,o,!1]}function $g(n){var a=Cn();return Ug(a,nn,n)}function Ug(n,a,o){if(a=bf(n,a,Pg)[0],n=Mc(Sa)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var u=Yo(a)}catch(L){throw L===Uo?jc:L}else u=a;a=Cn();var g=a.queue,y=g.dispatch;return o!==a.memoizedState&&(Lt.flags|=2048,Rs(9,Lc(),Lj.bind(null,g,o),null)),[u,y,n]}function Lj(n,a){n.action=a}function Vg(n){var a=Cn(),o=nn;if(o!==null)return Ug(a,o,n);Cn(),a=a.memoizedState,o=Cn();var u=o.queue.dispatch;return o.memoizedState=n,[a,u,!1]}function Rs(n,a,o,u){return n={tag:n,create:o,deps:u,inst:a,next:null},a=Lt.updateQueue,a===null&&(a=gf(),Lt.updateQueue=a),o=a.lastEffect,o===null?a.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,a.lastEffect=n),n}function Lc(){return{destroy:void 0,resource:void 0}}function Ig(){return Cn().memoizedState}function kc(n,a,o,u){var g=sr();u=u===void 0?null:u,Lt.flags|=n,g.memoizedState=Rs(1|a,Lc(),o,u)}function qo(n,a,o,u){var g=Cn();u=u===void 0?null:u;var y=g.memoizedState.inst;nn!==null&&u!==null&&df(u,nn.memoizedState.deps)?g.memoizedState=Rs(a,y,o,u):(Lt.flags|=n,g.memoizedState=Rs(1|a,y,o,u))}function Bg(n,a){kc(8390656,8,n,a)}function Hg(n,a){qo(2048,8,n,a)}function Fg(n,a){return qo(4,2,n,a)}function Yg(n,a){return qo(4,4,n,a)}function qg(n,a){if(typeof a=="function"){n=n();var o=a(n);return function(){typeof o=="function"?o():a(null)}}if(a!=null)return n=n(),a.current=n,function(){a.current=null}}function Gg(n,a,o){o=o!=null?o.concat([n]):null,qo(4,4,qg.bind(null,a,n),o)}function Sf(){}function Wg(n,a){var o=Cn();a=a===void 0?null:a;var u=o.memoizedState;return a!==null&&df(a,u[1])?u[0]:(o.memoizedState=[n,a],n)}function Zg(n,a){var o=Cn();a=a===void 0?null:a;var u=o.memoizedState;if(a!==null&&df(a,u[1]))return u[0];if(u=n(),Wi){Ve(!0);try{n()}finally{Ve(!1)}}return o.memoizedState=[u,a],u}function jf(n,a,o){return o===void 0||(ti&1073741824)!==0?n.memoizedState=a:(n.memoizedState=o,n=Qv(),Lt.lanes|=n,li|=n,o)}function Xg(n,a,o,u){return pr(o,a)?o:Ts.current!==null?(n=jf(n,o,u),pr(n,a)||(Rn=!0),n):(ti&42)===0?(Rn=!0,n.memoizedState=o):(n=Qv(),Lt.lanes|=n,li|=n,a)}function Kg(n,a,o,u,g){var y=z.p;z.p=y!==0&&8>y?y:8;var L=k.T,$={};k.T=$,Cf(n,!1,a,o);try{var ee=g(),me=k.S;if(me!==null&&me($,ee),ee!==null&&typeof ee=="object"&&typeof ee.then=="function"){var Ae=Cj(ee,u);Go(n,a,Ae,xr(n))}else Go(n,a,u,xr(n))}catch($e){Go(n,a,{then:function(){},status:"rejected",reason:$e},xr())}finally{z.p=y,k.T=L}}function kj(){}function _f(n,a,o,u){if(n.tag!==5)throw Error(i(476));var g=Qg(n).queue;Kg(n,g,a,U,o===null?kj:function(){return Jg(n),o(u)})}function Qg(n){var a=n.memoizedState;if(a!==null)return a;a={memoizedState:U,baseState:U,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:U},next:null};var o={};return a.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:o},next:null},n.memoizedState=a,n=n.alternate,n!==null&&(n.memoizedState=a),a}function Jg(n){var a=Qg(n).next.queue;Go(n,a,{},xr())}function Nf(){return Gn(dl)}function ev(){return Cn().memoizedState}function tv(){return Cn().memoizedState}function Tj(n){for(var a=n.return;a!==null;){switch(a.tag){case 24:case 3:var o=xr();n=Ja(o);var u=ei(a,n,o);u!==null&&(wr(u,a,o),Io(u,a,o)),a={cache:ef()},n.payload=a;return}a=a.return}}function Aj(n,a,o){var u=xr();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Tc(n)?rv(a,o):(o=Fd(n,a,o,u),o!==null&&(wr(o,n,u),av(o,a,u)))}function nv(n,a,o){var u=xr();Go(n,a,o,u)}function Go(n,a,o,u){var g={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Tc(n))rv(a,g);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=a.lastRenderedReducer,y!==null))try{var L=a.lastRenderedState,$=y(L,o);if(g.hasEagerState=!0,g.eagerState=$,pr($,L))return pc(n,a,g,0),on===null&&mc(),!1}catch{}finally{}if(o=Fd(n,a,g,u),o!==null)return wr(o,n,u),av(o,a,u),!0}return!1}function Cf(n,a,o,u){if(u={lane:2,revertLane:ah(),action:u,hasEagerState:!1,eagerState:null,next:null},Tc(n)){if(a)throw Error(i(479))}else a=Fd(n,o,u,2),a!==null&&wr(a,n,2)}function Tc(n){var a=n.alternate;return n===Lt||a!==null&&a===Lt}function rv(n,a){As=Cc=!0;var o=n.pending;o===null?a.next=a:(a.next=o.next,o.next=a),n.pending=a}function av(n,a,o){if((o&4194048)!==0){var u=a.lanes;u&=n.pendingLanes,o|=u,a.lanes=o,An(n,o)}}var Ac={readContext:Gn,use:Oc,useCallback:xn,useContext:xn,useEffect:xn,useImperativeHandle:xn,useLayoutEffect:xn,useInsertionEffect:xn,useMemo:xn,useReducer:xn,useRef:xn,useState:xn,useDebugValue:xn,useDeferredValue:xn,useTransition:xn,useSyncExternalStore:xn,useId:xn,useHostTransitionStatus:xn,useFormState:xn,useActionState:xn,useOptimistic:xn,useMemoCache:xn,useCacheRefresh:xn},iv={readContext:Gn,use:Oc,useCallback:function(n,a){return sr().memoizedState=[n,a===void 0?null:a],n},useContext:Gn,useEffect:Bg,useImperativeHandle:function(n,a,o){o=o!=null?o.concat([n]):null,kc(4194308,4,qg.bind(null,a,n),o)},useLayoutEffect:function(n,a){return kc(4194308,4,n,a)},useInsertionEffect:function(n,a){kc(4,2,n,a)},useMemo:function(n,a){var o=sr();a=a===void 0?null:a;var u=n();if(Wi){Ve(!0);try{n()}finally{Ve(!1)}}return o.memoizedState=[u,a],u},useReducer:function(n,a,o){var u=sr();if(o!==void 0){var g=o(a);if(Wi){Ve(!0);try{o(a)}finally{Ve(!1)}}}else g=a;return u.memoizedState=u.baseState=g,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:g},u.queue=n,n=n.dispatch=Aj.bind(null,Lt,n),[u.memoizedState,n]},useRef:function(n){var a=sr();return n={current:n},a.memoizedState=n},useState:function(n){n=xf(n);var a=n.queue,o=nv.bind(null,Lt,a);return a.dispatch=o,[n.memoizedState,o]},useDebugValue:Sf,useDeferredValue:function(n,a){var o=sr();return jf(o,n,a)},useTransition:function(){var n=xf(!1);return n=Kg.bind(null,Lt,n.queue,!0,!1),sr().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,a,o){var u=Lt,g=sr();if(Gt){if(o===void 0)throw Error(i(407));o=o()}else{if(o=a(),on===null)throw Error(i(349));(It&124)!==0||Cg(u,a,o)}g.memoizedState=o;var y={value:o,getSnapshot:a};return g.queue=y,Bg(Og.bind(null,u,y,n),[n]),u.flags|=2048,Rs(9,Lc(),Eg.bind(null,u,y,o,a),null),o},useId:function(){var n=sr(),a=on.identifierPrefix;if(Gt){var o=ya,u=ba;o=(u&~(1<<32-qe(u)-1)).toString(32)+o,a=""+a+"R"+o,o=Ec++,0<o&&(a+="H"+o.toString(32)),a+=""}else o=Ej++,a=""+a+"r"+o.toString(32)+"";return n.memoizedState=a},useHostTransitionStatus:Nf,useFormState:zg,useActionState:zg,useOptimistic:function(n){var a=sr();a.memoizedState=a.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=o,a=Cf.bind(null,Lt,!0,o),o.dispatch=a,[n,a]},useMemoCache:vf,useCacheRefresh:function(){return sr().memoizedState=Tj.bind(null,Lt)}},sv={readContext:Gn,use:Oc,useCallback:Wg,useContext:Gn,useEffect:Hg,useImperativeHandle:Gg,useInsertionEffect:Fg,useLayoutEffect:Yg,useMemo:Zg,useReducer:Mc,useRef:Ig,useState:function(){return Mc(Sa)},useDebugValue:Sf,useDeferredValue:function(n,a){var o=Cn();return Xg(o,nn.memoizedState,n,a)},useTransition:function(){var n=Mc(Sa)[0],a=Cn().memoizedState;return[typeof n=="boolean"?n:Yo(n),a]},useSyncExternalStore:Ng,useId:ev,useHostTransitionStatus:Nf,useFormState:$g,useActionState:$g,useOptimistic:function(n,a){var o=Cn();return kg(o,nn,n,a)},useMemoCache:vf,useCacheRefresh:tv},Dj={readContext:Gn,use:Oc,useCallback:Wg,useContext:Gn,useEffect:Hg,useImperativeHandle:Gg,useInsertionEffect:Fg,useLayoutEffect:Yg,useMemo:Zg,useReducer:yf,useRef:Ig,useState:function(){return yf(Sa)},useDebugValue:Sf,useDeferredValue:function(n,a){var o=Cn();return nn===null?jf(o,n,a):Xg(o,nn.memoizedState,n,a)},useTransition:function(){var n=yf(Sa)[0],a=Cn().memoizedState;return[typeof n=="boolean"?n:Yo(n),a]},useSyncExternalStore:Ng,useId:ev,useHostTransitionStatus:Nf,useFormState:Vg,useActionState:Vg,useOptimistic:function(n,a){var o=Cn();return nn!==null?kg(o,nn,n,a):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:vf,useCacheRefresh:tv},Ps=null,Wo=0;function Dc(n){var a=Wo;return Wo+=1,Ps===null&&(Ps=[]),vg(Ps,n,a)}function Zo(n,a){a=a.props.ref,n.ref=a!==void 0?a:null}function Rc(n,a){throw a.$$typeof===x?Error(i(525)):(n=Object.prototype.toString.call(a),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":n)))}function ov(n){var a=n._init;return a(n._payload)}function lv(n){function a(fe,ae){if(n){var he=fe.deletions;he===null?(fe.deletions=[ae],fe.flags|=16):he.push(ae)}}function o(fe,ae){if(!n)return null;for(;ae!==null;)a(fe,ae),ae=ae.sibling;return null}function u(fe){for(var ae=new Map;fe!==null;)fe.key!==null?ae.set(fe.key,fe):ae.set(fe.index,fe),fe=fe.sibling;return ae}function g(fe,ae){return fe=va(fe,ae),fe.index=0,fe.sibling=null,fe}function y(fe,ae,he){return fe.index=he,n?(he=fe.alternate,he!==null?(he=he.index,he<ae?(fe.flags|=67108866,ae):he):(fe.flags|=67108866,ae)):(fe.flags|=1048576,ae)}function L(fe){return n&&fe.alternate===null&&(fe.flags|=67108866),fe}function $(fe,ae,he,ze){return ae===null||ae.tag!==6?(ae=qd(he,fe.mode,ze),ae.return=fe,ae):(ae=g(ae,he),ae.return=fe,ae)}function ee(fe,ae,he,ze){var tt=he.type;return tt===b?Ae(fe,ae,he.props.children,ze,he.key):ae!==null&&(ae.elementType===tt||typeof tt=="object"&&tt!==null&&tt.$$typeof===H&&ov(tt)===ae.type)?(ae=g(ae,he.props),Zo(ae,he),ae.return=fe,ae):(ae=vc(he.type,he.key,he.props,null,fe.mode,ze),Zo(ae,he),ae.return=fe,ae)}function me(fe,ae,he,ze){return ae===null||ae.tag!==4||ae.stateNode.containerInfo!==he.containerInfo||ae.stateNode.implementation!==he.implementation?(ae=Gd(he,fe.mode,ze),ae.return=fe,ae):(ae=g(ae,he.children||[]),ae.return=fe,ae)}function Ae(fe,ae,he,ze,tt){return ae===null||ae.tag!==7?(ae=Vi(he,fe.mode,ze,tt),ae.return=fe,ae):(ae=g(ae,he),ae.return=fe,ae)}function $e(fe,ae,he){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return ae=qd(""+ae,fe.mode,he),ae.return=fe,ae;if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case w:return he=vc(ae.type,ae.key,ae.props,null,fe.mode,he),Zo(he,ae),he.return=fe,he;case S:return ae=Gd(ae,fe.mode,he),ae.return=fe,ae;case H:var ze=ae._init;return ae=ze(ae._payload),$e(fe,ae,he)}if(te(ae)||ie(ae))return ae=Vi(ae,fe.mode,he,null),ae.return=fe,ae;if(typeof ae.then=="function")return $e(fe,Dc(ae),he);if(ae.$$typeof===E)return $e(fe,wc(fe,ae),he);Rc(fe,ae)}return null}function ve(fe,ae,he,ze){var tt=ae!==null?ae.key:null;if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return tt!==null?null:$(fe,ae,""+he,ze);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case w:return he.key===tt?ee(fe,ae,he,ze):null;case S:return he.key===tt?me(fe,ae,he,ze):null;case H:return tt=he._init,he=tt(he._payload),ve(fe,ae,he,ze)}if(te(he)||ie(he))return tt!==null?null:Ae(fe,ae,he,ze,null);if(typeof he.then=="function")return ve(fe,ae,Dc(he),ze);if(he.$$typeof===E)return ve(fe,ae,wc(fe,he),ze);Rc(fe,he)}return null}function we(fe,ae,he,ze,tt){if(typeof ze=="string"&&ze!==""||typeof ze=="number"||typeof ze=="bigint")return fe=fe.get(he)||null,$(ae,fe,""+ze,tt);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case w:return fe=fe.get(ze.key===null?he:ze.key)||null,ee(ae,fe,ze,tt);case S:return fe=fe.get(ze.key===null?he:ze.key)||null,me(ae,fe,ze,tt);case H:var Tt=ze._init;return ze=Tt(ze._payload),we(fe,ae,he,ze,tt)}if(te(ze)||ie(ze))return fe=fe.get(he)||null,Ae(ae,fe,ze,tt,null);if(typeof ze.then=="function")return we(fe,ae,he,Dc(ze),tt);if(ze.$$typeof===E)return we(fe,ae,he,wc(ae,ze),tt);Rc(ae,ze)}return null}function jt(fe,ae,he,ze){for(var tt=null,Tt=null,ct=ae,yt=ae=0,zn=null;ct!==null&&yt<he.length;yt++){ct.index>yt?(zn=ct,ct=null):zn=ct.sibling;var Ht=ve(fe,ct,he[yt],ze);if(Ht===null){ct===null&&(ct=zn);break}n&&ct&&Ht.alternate===null&&a(fe,ct),ae=y(Ht,ae,yt),Tt===null?tt=Ht:Tt.sibling=Ht,Tt=Ht,ct=zn}if(yt===he.length)return o(fe,ct),Gt&&Bi(fe,yt),tt;if(ct===null){for(;yt<he.length;yt++)ct=$e(fe,he[yt],ze),ct!==null&&(ae=y(ct,ae,yt),Tt===null?tt=ct:Tt.sibling=ct,Tt=ct);return Gt&&Bi(fe,yt),tt}for(ct=u(ct);yt<he.length;yt++)zn=we(ct,fe,yt,he[yt],ze),zn!==null&&(n&&zn.alternate!==null&&ct.delete(zn.key===null?yt:zn.key),ae=y(zn,ae,yt),Tt===null?tt=zn:Tt.sibling=zn,Tt=zn);return n&&ct.forEach(function(vi){return a(fe,vi)}),Gt&&Bi(fe,yt),tt}function gt(fe,ae,he,ze){if(he==null)throw Error(i(151));for(var tt=null,Tt=null,ct=ae,yt=ae=0,zn=null,Ht=he.next();ct!==null&&!Ht.done;yt++,Ht=he.next()){ct.index>yt?(zn=ct,ct=null):zn=ct.sibling;var vi=ve(fe,ct,Ht.value,ze);if(vi===null){ct===null&&(ct=zn);break}n&&ct&&vi.alternate===null&&a(fe,ct),ae=y(vi,ae,yt),Tt===null?tt=vi:Tt.sibling=vi,Tt=vi,ct=zn}if(Ht.done)return o(fe,ct),Gt&&Bi(fe,yt),tt;if(ct===null){for(;!Ht.done;yt++,Ht=he.next())Ht=$e(fe,Ht.value,ze),Ht!==null&&(ae=y(Ht,ae,yt),Tt===null?tt=Ht:Tt.sibling=Ht,Tt=Ht);return Gt&&Bi(fe,yt),tt}for(ct=u(ct);!Ht.done;yt++,Ht=he.next())Ht=we(ct,fe,yt,Ht.value,ze),Ht!==null&&(n&&Ht.alternate!==null&&ct.delete(Ht.key===null?yt:Ht.key),ae=y(Ht,ae,yt),Tt===null?tt=Ht:Tt.sibling=Ht,Tt=Ht);return n&&ct.forEach(function(R_){return a(fe,R_)}),Gt&&Bi(fe,yt),tt}function an(fe,ae,he,ze){if(typeof he=="object"&&he!==null&&he.type===b&&he.key===null&&(he=he.props.children),typeof he=="object"&&he!==null){switch(he.$$typeof){case w:e:{for(var tt=he.key;ae!==null;){if(ae.key===tt){if(tt=he.type,tt===b){if(ae.tag===7){o(fe,ae.sibling),ze=g(ae,he.props.children),ze.return=fe,fe=ze;break e}}else if(ae.elementType===tt||typeof tt=="object"&&tt!==null&&tt.$$typeof===H&&ov(tt)===ae.type){o(fe,ae.sibling),ze=g(ae,he.props),Zo(ze,he),ze.return=fe,fe=ze;break e}o(fe,ae);break}else a(fe,ae);ae=ae.sibling}he.type===b?(ze=Vi(he.props.children,fe.mode,ze,he.key),ze.return=fe,fe=ze):(ze=vc(he.type,he.key,he.props,null,fe.mode,ze),Zo(ze,he),ze.return=fe,fe=ze)}return L(fe);case S:e:{for(tt=he.key;ae!==null;){if(ae.key===tt)if(ae.tag===4&&ae.stateNode.containerInfo===he.containerInfo&&ae.stateNode.implementation===he.implementation){o(fe,ae.sibling),ze=g(ae,he.children||[]),ze.return=fe,fe=ze;break e}else{o(fe,ae);break}else a(fe,ae);ae=ae.sibling}ze=Gd(he,fe.mode,ze),ze.return=fe,fe=ze}return L(fe);case H:return tt=he._init,he=tt(he._payload),an(fe,ae,he,ze)}if(te(he))return jt(fe,ae,he,ze);if(ie(he)){if(tt=ie(he),typeof tt!="function")throw Error(i(150));return he=tt.call(he),gt(fe,ae,he,ze)}if(typeof he.then=="function")return an(fe,ae,Dc(he),ze);if(he.$$typeof===E)return an(fe,ae,wc(fe,he),ze);Rc(fe,he)}return typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint"?(he=""+he,ae!==null&&ae.tag===6?(o(fe,ae.sibling),ze=g(ae,he),ze.return=fe,fe=ze):(o(fe,ae),ze=qd(he,fe.mode,ze),ze.return=fe,fe=ze),L(fe)):o(fe,ae)}return function(fe,ae,he,ze){try{Wo=0;var tt=an(fe,ae,he,ze);return Ps=null,tt}catch(ct){if(ct===Uo||ct===jc)throw ct;var Tt=gr(29,ct,null,fe.mode);return Tt.lanes=ze,Tt.return=fe,Tt}finally{}}}var zs=lv(!0),cv=lv(!1),Mr=A(null),Jr=null;function ni(n){var a=n.alternate;V(Mn,Mn.current&1),V(Mr,n),Jr===null&&(a===null||Ts.current!==null||a.memoizedState!==null)&&(Jr=n)}function uv(n){if(n.tag===22){if(V(Mn,Mn.current),V(Mr,n),Jr===null){var a=n.alternate;a!==null&&a.memoizedState!==null&&(Jr=n)}}else ri()}function ri(){V(Mn,Mn.current),V(Mr,Mr.current)}function ja(n){F(Mr),Jr===n&&(Jr=null),F(Mn)}var Mn=A(0);function Pc(n){for(var a=n;a!==null;){if(a.tag===13){var o=a.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||gh(o)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function Ef(n,a,o,u){a=n.memoizedState,o=o(u,a),o=o==null?a:v({},a,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Of={enqueueSetState:function(n,a,o){n=n._reactInternals;var u=xr(),g=Ja(u);g.payload=a,o!=null&&(g.callback=o),a=ei(n,g,u),a!==null&&(wr(a,n,u),Io(a,n,u))},enqueueReplaceState:function(n,a,o){n=n._reactInternals;var u=xr(),g=Ja(u);g.tag=1,g.payload=a,o!=null&&(g.callback=o),a=ei(n,g,u),a!==null&&(wr(a,n,u),Io(a,n,u))},enqueueForceUpdate:function(n,a){n=n._reactInternals;var o=xr(),u=Ja(o);u.tag=2,a!=null&&(u.callback=a),a=ei(n,u,o),a!==null&&(wr(a,n,o),Io(a,n,o))}};function dv(n,a,o,u,g,y,L){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,y,L):a.prototype&&a.prototype.isPureReactComponent?!ko(o,u)||!ko(g,y):!0}function fv(n,a,o,u){n=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(o,u),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(o,u),a.state!==n&&Of.enqueueReplaceState(a,a.state,null)}function Zi(n,a){var o=a;if("ref"in a){o={};for(var u in a)u!=="ref"&&(o[u]=a[u])}if(n=n.defaultProps){o===a&&(o=v({},o));for(var g in n)o[g]===void 0&&(o[g]=n[g])}return o}var zc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function hv(n){zc(n)}function mv(n){console.error(n)}function pv(n){zc(n)}function $c(n,a){try{var o=n.onUncaughtError;o(a.value,{componentStack:a.stack})}catch(u){setTimeout(function(){throw u})}}function gv(n,a,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Mf(n,a,o){return o=Ja(o),o.tag=3,o.payload={element:null},o.callback=function(){$c(n,a)},o}function vv(n){return n=Ja(n),n.tag=3,n}function bv(n,a,o,u){var g=o.type.getDerivedStateFromError;if(typeof g=="function"){var y=u.value;n.payload=function(){return g(y)},n.callback=function(){gv(a,o,u)}}var L=o.stateNode;L!==null&&typeof L.componentDidCatch=="function"&&(n.callback=function(){gv(a,o,u),typeof g!="function"&&(ci===null?ci=new Set([this]):ci.add(this));var $=u.stack;this.componentDidCatch(u.value,{componentStack:$!==null?$:""})})}function Rj(n,a,o,u,g){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(a=o.alternate,a!==null&&Po(a,o,g,!0),o=Mr.current,o!==null){switch(o.tag){case 13:return Jr===null?Jf():o.alternate===null&&vn===0&&(vn=3),o.flags&=-257,o.flags|=65536,o.lanes=g,u===rf?o.flags|=16384:(a=o.updateQueue,a===null?o.updateQueue=new Set([u]):a.add(u),th(n,u,g)),!1;case 22:return o.flags|=65536,u===rf?o.flags|=16384:(a=o.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=a):(o=a.retryQueue,o===null?a.retryQueue=new Set([u]):o.add(u)),th(n,u,g)),!1}throw Error(i(435,o.tag))}return th(n,u,g),Jf(),!1}if(Gt)return a=Mr.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=g,u!==Xd&&(n=Error(i(422),{cause:u}),Ro(Nr(n,o)))):(u!==Xd&&(a=Error(i(423),{cause:u}),Ro(Nr(a,o))),n=n.current.alternate,n.flags|=65536,g&=-g,n.lanes|=g,u=Nr(u,o),g=Mf(n.stateNode,u,g),of(n,g),vn!==4&&(vn=2)),!1;var y=Error(i(520),{cause:u});if(y=Nr(y,o),nl===null?nl=[y]:nl.push(y),vn!==4&&(vn=2),a===null)return!0;u=Nr(u,o),o=a;do{switch(o.tag){case 3:return o.flags|=65536,n=g&-g,o.lanes|=n,n=Mf(o.stateNode,u,n),of(o,n),!1;case 1:if(a=o.type,y=o.stateNode,(o.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ci===null||!ci.has(y))))return o.flags|=65536,g&=-g,o.lanes|=g,g=vv(g),bv(g,n,o,u),of(o,g),!1}o=o.return}while(o!==null);return!1}var yv=Error(i(461)),Rn=!1;function Vn(n,a,o,u){a.child=n===null?cv(a,null,o,u):zs(a,n.child,o,u)}function xv(n,a,o,u,g){o=o.render;var y=a.ref;if("ref"in u){var L={};for(var $ in u)$!=="ref"&&(L[$]=u[$])}else L=u;return qi(a),u=ff(n,a,o,L,y,g),$=hf(),n!==null&&!Rn?(mf(n,a,g),_a(n,a,g)):(Gt&&$&&Wd(a),a.flags|=1,Vn(n,a,u,g),a.child)}function wv(n,a,o,u,g){if(n===null){var y=o.type;return typeof y=="function"&&!Yd(y)&&y.defaultProps===void 0&&o.compare===null?(a.tag=15,a.type=y,Sv(n,a,y,u,g)):(n=vc(o.type,null,u,a,a.mode,g),n.ref=a.ref,n.return=a,a.child=n)}if(y=n.child,!zf(n,g)){var L=y.memoizedProps;if(o=o.compare,o=o!==null?o:ko,o(L,u)&&n.ref===a.ref)return _a(n,a,g)}return a.flags|=1,n=va(y,u),n.ref=a.ref,n.return=a,a.child=n}function Sv(n,a,o,u,g){if(n!==null){var y=n.memoizedProps;if(ko(y,u)&&n.ref===a.ref)if(Rn=!1,a.pendingProps=u=y,zf(n,g))(n.flags&131072)!==0&&(Rn=!0);else return a.lanes=n.lanes,_a(n,a,g)}return Lf(n,a,o,u,g)}function jv(n,a,o){var u=a.pendingProps,g=u.children,y=n!==null?n.memoizedState:null;if(u.mode==="hidden"){if((a.flags&128)!==0){if(u=y!==null?y.baseLanes|o:o,n!==null){for(g=a.child=n.child,y=0;g!==null;)y=y|g.lanes|g.childLanes,g=g.sibling;a.childLanes=y&~u}else a.childLanes=0,a.child=null;return _v(n,a,u,o)}if((o&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},n!==null&&Sc(a,y!==null?y.cachePool:null),y!==null?Sg(a,y):cf(),uv(a);else return a.lanes=a.childLanes=536870912,_v(n,a,y!==null?y.baseLanes|o:o,o)}else y!==null?(Sc(a,y.cachePool),Sg(a,y),ri(),a.memoizedState=null):(n!==null&&Sc(a,null),cf(),ri());return Vn(n,a,g,o),a.child}function _v(n,a,o,u){var g=nf();return g=g===null?null:{parent:On._currentValue,pool:g},a.memoizedState={baseLanes:o,cachePool:g},n!==null&&Sc(a,null),cf(),uv(a),n!==null&&Po(n,a,u,!0),null}function Uc(n,a){var o=a.ref;if(o===null)n!==null&&n.ref!==null&&(a.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(n===null||n.ref!==o)&&(a.flags|=4194816)}}function Lf(n,a,o,u,g){return qi(a),o=ff(n,a,o,u,void 0,g),u=hf(),n!==null&&!Rn?(mf(n,a,g),_a(n,a,g)):(Gt&&u&&Wd(a),a.flags|=1,Vn(n,a,o,g),a.child)}function Nv(n,a,o,u,g,y){return qi(a),a.updateQueue=null,o=_g(a,u,o,g),jg(n),u=hf(),n!==null&&!Rn?(mf(n,a,y),_a(n,a,y)):(Gt&&u&&Wd(a),a.flags|=1,Vn(n,a,o,y),a.child)}function Cv(n,a,o,u,g){if(qi(a),a.stateNode===null){var y=Es,L=o.contextType;typeof L=="object"&&L!==null&&(y=Gn(L)),y=new o(u,y),a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Of,a.stateNode=y,y._reactInternals=a,y=a.stateNode,y.props=u,y.state=a.memoizedState,y.refs={},af(a),L=o.contextType,y.context=typeof L=="object"&&L!==null?Gn(L):Es,y.state=a.memoizedState,L=o.getDerivedStateFromProps,typeof L=="function"&&(Ef(a,o,L,u),y.state=a.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(L=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),L!==y.state&&Of.enqueueReplaceState(y,y.state,null),Ho(a,u,y,g),Bo(),y.state=a.memoizedState),typeof y.componentDidMount=="function"&&(a.flags|=4194308),u=!0}else if(n===null){y=a.stateNode;var $=a.memoizedProps,ee=Zi(o,$);y.props=ee;var me=y.context,Ae=o.contextType;L=Es,typeof Ae=="object"&&Ae!==null&&(L=Gn(Ae));var $e=o.getDerivedStateFromProps;Ae=typeof $e=="function"||typeof y.getSnapshotBeforeUpdate=="function",$=a.pendingProps!==$,Ae||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||($||me!==L)&&fv(a,y,u,L),Qa=!1;var ve=a.memoizedState;y.state=ve,Ho(a,u,y,g),Bo(),me=a.memoizedState,$||ve!==me||Qa?(typeof $e=="function"&&(Ef(a,o,$e,u),me=a.memoizedState),(ee=Qa||dv(a,o,ee,u,ve,me,L))?(Ae||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(a.flags|=4194308)):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=u,a.memoizedState=me),y.props=u,y.state=me,y.context=L,u=ee):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),u=!1)}else{y=a.stateNode,sf(n,a),L=a.memoizedProps,Ae=Zi(o,L),y.props=Ae,$e=a.pendingProps,ve=y.context,me=o.contextType,ee=Es,typeof me=="object"&&me!==null&&(ee=Gn(me)),$=o.getDerivedStateFromProps,(me=typeof $=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(L!==$e||ve!==ee)&&fv(a,y,u,ee),Qa=!1,ve=a.memoizedState,y.state=ve,Ho(a,u,y,g),Bo();var we=a.memoizedState;L!==$e||ve!==we||Qa||n!==null&&n.dependencies!==null&&xc(n.dependencies)?(typeof $=="function"&&(Ef(a,o,$,u),we=a.memoizedState),(Ae=Qa||dv(a,o,Ae,u,ve,we,ee)||n!==null&&n.dependencies!==null&&xc(n.dependencies))?(me||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,we,ee),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,we,ee)),typeof y.componentDidUpdate=="function"&&(a.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof y.componentDidUpdate!="function"||L===n.memoizedProps&&ve===n.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||L===n.memoizedProps&&ve===n.memoizedState||(a.flags|=1024),a.memoizedProps=u,a.memoizedState=we),y.props=u,y.state=we,y.context=ee,u=Ae):(typeof y.componentDidUpdate!="function"||L===n.memoizedProps&&ve===n.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||L===n.memoizedProps&&ve===n.memoizedState||(a.flags|=1024),u=!1)}return y=u,Uc(n,a),u=(a.flags&128)!==0,y||u?(y=a.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:y.render(),a.flags|=1,n!==null&&u?(a.child=zs(a,n.child,null,g),a.child=zs(a,null,o,g)):Vn(n,a,o,g),a.memoizedState=y.state,n=a.child):n=_a(n,a,g),n}function Ev(n,a,o,u){return Do(),a.flags|=256,Vn(n,a,o,u),a.child}var kf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Tf(n){return{baseLanes:n,cachePool:mg()}}function Af(n,a,o){return n=n!==null?n.childLanes&~o:0,a&&(n|=Lr),n}function Ov(n,a,o){var u=a.pendingProps,g=!1,y=(a.flags&128)!==0,L;if((L=y)||(L=n!==null&&n.memoizedState===null?!1:(Mn.current&2)!==0),L&&(g=!0,a.flags&=-129),L=(a.flags&32)!==0,a.flags&=-33,n===null){if(Gt){if(g?ni(a):ri(),Gt){var $=gn,ee;if(ee=$){e:{for(ee=$,$=Qr;ee.nodeType!==8;){if(!$){$=null;break e}if(ee=Hr(ee.nextSibling),ee===null){$=null;break e}}$=ee}$!==null?(a.memoizedState={dehydrated:$,treeContext:Ii!==null?{id:ba,overflow:ya}:null,retryLane:536870912,hydrationErrors:null},ee=gr(18,null,null,0),ee.stateNode=$,ee.return=a,a.child=ee,rr=a,gn=null,ee=!0):ee=!1}ee||Fi(a)}if($=a.memoizedState,$!==null&&($=$.dehydrated,$!==null))return gh($)?a.lanes=32:a.lanes=536870912,null;ja(a)}return $=u.children,u=u.fallback,g?(ri(),g=a.mode,$=Vc({mode:"hidden",children:$},g),u=Vi(u,g,o,null),$.return=a,u.return=a,$.sibling=u,a.child=$,g=a.child,g.memoizedState=Tf(o),g.childLanes=Af(n,L,o),a.memoizedState=kf,u):(ni(a),Df(a,$))}if(ee=n.memoizedState,ee!==null&&($=ee.dehydrated,$!==null)){if(y)a.flags&256?(ni(a),a.flags&=-257,a=Rf(n,a,o)):a.memoizedState!==null?(ri(),a.child=n.child,a.flags|=128,a=null):(ri(),g=u.fallback,$=a.mode,u=Vc({mode:"visible",children:u.children},$),g=Vi(g,$,o,null),g.flags|=2,u.return=a,g.return=a,u.sibling=g,a.child=u,zs(a,n.child,null,o),u=a.child,u.memoizedState=Tf(o),u.childLanes=Af(n,L,o),a.memoizedState=kf,a=g);else if(ni(a),gh($)){if(L=$.nextSibling&&$.nextSibling.dataset,L)var me=L.dgst;L=me,u=Error(i(419)),u.stack="",u.digest=L,Ro({value:u,source:null,stack:null}),a=Rf(n,a,o)}else if(Rn||Po(n,a,o,!1),L=(o&n.childLanes)!==0,Rn||L){if(L=on,L!==null&&(u=o&-o,u=(u&42)!==0?1:$t(u),u=(u&(L.suspendedLanes|o))!==0?0:u,u!==0&&u!==ee.retryLane))throw ee.retryLane=u,Cs(n,u),wr(L,n,u),yv;$.data==="$?"||Jf(),a=Rf(n,a,o)}else $.data==="$?"?(a.flags|=192,a.child=n.child,a=null):(n=ee.treeContext,gn=Hr($.nextSibling),rr=a,Gt=!0,Hi=null,Qr=!1,n!==null&&(Er[Or++]=ba,Er[Or++]=ya,Er[Or++]=Ii,ba=n.id,ya=n.overflow,Ii=a),a=Df(a,u.children),a.flags|=4096);return a}return g?(ri(),g=u.fallback,$=a.mode,ee=n.child,me=ee.sibling,u=va(ee,{mode:"hidden",children:u.children}),u.subtreeFlags=ee.subtreeFlags&65011712,me!==null?g=va(me,g):(g=Vi(g,$,o,null),g.flags|=2),g.return=a,u.return=a,u.sibling=g,a.child=u,u=g,g=a.child,$=n.child.memoizedState,$===null?$=Tf(o):(ee=$.cachePool,ee!==null?(me=On._currentValue,ee=ee.parent!==me?{parent:me,pool:me}:ee):ee=mg(),$={baseLanes:$.baseLanes|o,cachePool:ee}),g.memoizedState=$,g.childLanes=Af(n,L,o),a.memoizedState=kf,u):(ni(a),o=n.child,n=o.sibling,o=va(o,{mode:"visible",children:u.children}),o.return=a,o.sibling=null,n!==null&&(L=a.deletions,L===null?(a.deletions=[n],a.flags|=16):L.push(n)),a.child=o,a.memoizedState=null,o)}function Df(n,a){return a=Vc({mode:"visible",children:a},n.mode),a.return=n,n.child=a}function Vc(n,a){return n=gr(22,n,null,a),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function Rf(n,a,o){return zs(a,n.child,null,o),n=Df(a,a.pendingProps.children),n.flags|=2,a.memoizedState=null,n}function Mv(n,a,o){n.lanes|=a;var u=n.alternate;u!==null&&(u.lanes|=a),Qd(n.return,a,o)}function Pf(n,a,o,u,g){var y=n.memoizedState;y===null?n.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:g}:(y.isBackwards=a,y.rendering=null,y.renderingStartTime=0,y.last=u,y.tail=o,y.tailMode=g)}function Lv(n,a,o){var u=a.pendingProps,g=u.revealOrder,y=u.tail;if(Vn(n,a,u.children,o),u=Mn.current,(u&2)!==0)u=u&1|2,a.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=a.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Mv(n,o,a);else if(n.tag===19)Mv(n,o,a);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===a)break e;for(;n.sibling===null;){if(n.return===null||n.return===a)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}u&=1}switch(V(Mn,u),g){case"forwards":for(o=a.child,g=null;o!==null;)n=o.alternate,n!==null&&Pc(n)===null&&(g=o),o=o.sibling;o=g,o===null?(g=a.child,a.child=null):(g=o.sibling,o.sibling=null),Pf(a,!1,g,o,y);break;case"backwards":for(o=null,g=a.child,a.child=null;g!==null;){if(n=g.alternate,n!==null&&Pc(n)===null){a.child=g;break}n=g.sibling,g.sibling=o,o=g,g=n}Pf(a,!0,o,null,y);break;case"together":Pf(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function _a(n,a,o){if(n!==null&&(a.dependencies=n.dependencies),li|=a.lanes,(o&a.childLanes)===0)if(n!==null){if(Po(n,a,o,!1),(o&a.childLanes)===0)return null}else return null;if(n!==null&&a.child!==n.child)throw Error(i(153));if(a.child!==null){for(n=a.child,o=va(n,n.pendingProps),a.child=o,o.return=a;n.sibling!==null;)n=n.sibling,o=o.sibling=va(n,n.pendingProps),o.return=a;o.sibling=null}return a.child}function zf(n,a){return(n.lanes&a)!==0?!0:(n=n.dependencies,!!(n!==null&&xc(n)))}function Pj(n,a,o){switch(a.tag){case 3:X(a,a.stateNode.containerInfo),Ka(a,On,n.memoizedState.cache),Do();break;case 27:case 5:J(a);break;case 4:X(a,a.stateNode.containerInfo);break;case 10:Ka(a,a.type,a.memoizedProps.value);break;case 13:var u=a.memoizedState;if(u!==null)return u.dehydrated!==null?(ni(a),a.flags|=128,null):(o&a.child.childLanes)!==0?Ov(n,a,o):(ni(a),n=_a(n,a,o),n!==null?n.sibling:null);ni(a);break;case 19:var g=(n.flags&128)!==0;if(u=(o&a.childLanes)!==0,u||(Po(n,a,o,!1),u=(o&a.childLanes)!==0),g){if(u)return Lv(n,a,o);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),V(Mn,Mn.current),u)break;return null;case 22:case 23:return a.lanes=0,jv(n,a,o);case 24:Ka(a,On,n.memoizedState.cache)}return _a(n,a,o)}function kv(n,a,o){if(n!==null)if(n.memoizedProps!==a.pendingProps)Rn=!0;else{if(!zf(n,o)&&(a.flags&128)===0)return Rn=!1,Pj(n,a,o);Rn=(n.flags&131072)!==0}else Rn=!1,Gt&&(a.flags&1048576)!==0&&og(a,yc,a.index);switch(a.lanes=0,a.tag){case 16:e:{n=a.pendingProps;var u=a.elementType,g=u._init;if(u=g(u._payload),a.type=u,typeof u=="function")Yd(u)?(n=Zi(u,n),a.tag=1,a=Cv(null,a,u,n,o)):(a.tag=0,a=Lf(null,a,u,n,o));else{if(u!=null){if(g=u.$$typeof,g===O){a.tag=11,a=xv(null,a,u,n,o);break e}else if(g===I){a.tag=14,a=wv(null,a,u,n,o);break e}}throw a=ce(u)||u,Error(i(306,a,""))}}return a;case 0:return Lf(n,a,a.type,a.pendingProps,o);case 1:return u=a.type,g=Zi(u,a.pendingProps),Cv(n,a,u,g,o);case 3:e:{if(X(a,a.stateNode.containerInfo),n===null)throw Error(i(387));u=a.pendingProps;var y=a.memoizedState;g=y.element,sf(n,a),Ho(a,u,null,o);var L=a.memoizedState;if(u=L.cache,Ka(a,On,u),u!==y.cache&&Jd(a,[On],o,!0),Bo(),u=L.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:L.cache},a.updateQueue.baseState=y,a.memoizedState=y,a.flags&256){a=Ev(n,a,u,o);break e}else if(u!==g){g=Nr(Error(i(424)),a),Ro(g),a=Ev(n,a,u,o);break e}else{switch(n=a.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(gn=Hr(n.firstChild),rr=a,Gt=!0,Hi=null,Qr=!0,o=cv(a,null,u,o),a.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Do(),u===g){a=_a(n,a,o);break e}Vn(n,a,u,o)}a=a.child}return a;case 26:return Uc(n,a),n===null?(o=Rb(a.type,null,a.pendingProps,null))?a.memoizedState=o:Gt||(o=a.type,n=a.pendingProps,u=eu(be.current).createElement(o),u[ge]=a,u[Ne]=n,Bn(u,o,n),it(u),a.stateNode=u):a.memoizedState=Rb(a.type,n.memoizedProps,a.pendingProps,n.memoizedState),null;case 27:return J(a),n===null&&Gt&&(u=a.stateNode=Tb(a.type,a.pendingProps,be.current),rr=a,Qr=!0,g=gn,fi(a.type)?(vh=g,gn=Hr(u.firstChild)):gn=g),Vn(n,a,a.pendingProps.children,o),Uc(n,a),n===null&&(a.flags|=4194304),a.child;case 5:return n===null&&Gt&&((g=u=gn)&&(u=u_(u,a.type,a.pendingProps,Qr),u!==null?(a.stateNode=u,rr=a,gn=Hr(u.firstChild),Qr=!1,g=!0):g=!1),g||Fi(a)),J(a),g=a.type,y=a.pendingProps,L=n!==null?n.memoizedProps:null,u=y.children,hh(g,y)?u=null:L!==null&&hh(g,L)&&(a.flags|=32),a.memoizedState!==null&&(g=ff(n,a,Oj,null,null,o),dl._currentValue=g),Uc(n,a),Vn(n,a,u,o),a.child;case 6:return n===null&&Gt&&((n=o=gn)&&(o=d_(o,a.pendingProps,Qr),o!==null?(a.stateNode=o,rr=a,gn=null,n=!0):n=!1),n||Fi(a)),null;case 13:return Ov(n,a,o);case 4:return X(a,a.stateNode.containerInfo),u=a.pendingProps,n===null?a.child=zs(a,null,u,o):Vn(n,a,u,o),a.child;case 11:return xv(n,a,a.type,a.pendingProps,o);case 7:return Vn(n,a,a.pendingProps,o),a.child;case 8:return Vn(n,a,a.pendingProps.children,o),a.child;case 12:return Vn(n,a,a.pendingProps.children,o),a.child;case 10:return u=a.pendingProps,Ka(a,a.type,u.value),Vn(n,a,u.children,o),a.child;case 9:return g=a.type._context,u=a.pendingProps.children,qi(a),g=Gn(g),u=u(g),a.flags|=1,Vn(n,a,u,o),a.child;case 14:return wv(n,a,a.type,a.pendingProps,o);case 15:return Sv(n,a,a.type,a.pendingProps,o);case 19:return Lv(n,a,o);case 31:return u=a.pendingProps,o=a.mode,u={mode:u.mode,children:u.children},n===null?(o=Vc(u,o),o.ref=a.ref,a.child=o,o.return=a,a=o):(o=va(n.child,u),o.ref=a.ref,a.child=o,o.return=a,a=o),a;case 22:return jv(n,a,o);case 24:return qi(a),u=Gn(On),n===null?(g=nf(),g===null&&(g=on,y=ef(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=o),g=y),a.memoizedState={parent:u,cache:g},af(a),Ka(a,On,g)):((n.lanes&o)!==0&&(sf(n,a),Ho(a,null,null,o),Bo()),g=n.memoizedState,y=a.memoizedState,g.parent!==u?(g={parent:u,cache:u},a.memoizedState=g,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=g),Ka(a,On,u)):(u=y.cache,Ka(a,On,u),u!==g.cache&&Jd(a,[On],o,!0))),Vn(n,a,a.pendingProps.children,o),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function Na(n){n.flags|=4}function Tv(n,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Vb(a)){if(a=Mr.current,a!==null&&((It&4194048)===It?Jr!==null:(It&62914560)!==It&&(It&536870912)===0||a!==Jr))throw Vo=rf,pg;n.flags|=8192}}function Ic(n,a){a!==null&&(n.flags|=4),n.flags&16384&&(a=n.tag!==22?Yn():536870912,n.lanes|=a,Is|=a)}function Xo(n,a){if(!Gt)switch(n.tailMode){case"hidden":a=n.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?a||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function pn(n){var a=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(a)for(var g=n.child;g!==null;)o|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)o|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=u,n.childLanes=o,a}function zj(n,a,o){var u=a.pendingProps;switch(Zd(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pn(a),null;case 1:return pn(a),null;case 3:return o=a.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),wa(On),W(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(Ao(a)?Na(a):n===null||n.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,ug())),pn(a),null;case 26:return o=a.memoizedState,n===null?(Na(a),o!==null?(pn(a),Tv(a,o)):(pn(a),a.flags&=-16777217)):o?o!==n.memoizedState?(Na(a),pn(a),Tv(a,o)):(pn(a),a.flags&=-16777217):(n.memoizedProps!==u&&Na(a),pn(a),a.flags&=-16777217),null;case 27:ue(a),o=be.current;var g=a.type;if(n!==null&&a.stateNode!=null)n.memoizedProps!==u&&Na(a);else{if(!u){if(a.stateNode===null)throw Error(i(166));return pn(a),null}n=q.current,Ao(a)?lg(a):(n=Tb(g,u,o),a.stateNode=n,Na(a))}return pn(a),null;case 5:if(ue(a),o=a.type,n!==null&&a.stateNode!=null)n.memoizedProps!==u&&Na(a);else{if(!u){if(a.stateNode===null)throw Error(i(166));return pn(a),null}if(n=q.current,Ao(a))lg(a);else{switch(g=eu(be.current),n){case 1:n=g.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:n=g.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":n=g.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":n=g.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":n=g.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof u.is=="string"?g.createElement("select",{is:u.is}):g.createElement("select"),u.multiple?n.multiple=!0:u.size&&(n.size=u.size);break;default:n=typeof u.is=="string"?g.createElement(o,{is:u.is}):g.createElement(o)}}n[ge]=a,n[Ne]=u;e:for(g=a.child;g!==null;){if(g.tag===5||g.tag===6)n.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===a)break e;for(;g.sibling===null;){if(g.return===null||g.return===a)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}a.stateNode=n;e:switch(Bn(n,o,u),o){case"button":case"input":case"select":case"textarea":n=!!u.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&Na(a)}}return pn(a),a.flags&=-16777217,null;case 6:if(n&&a.stateNode!=null)n.memoizedProps!==u&&Na(a);else{if(typeof u!="string"&&a.stateNode===null)throw Error(i(166));if(n=be.current,Ao(a)){if(n=a.stateNode,o=a.memoizedProps,u=null,g=rr,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}n[ge]=a,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||Nb(n.nodeValue,o)),n||Fi(a)}else n=eu(n).createTextNode(u),n[ge]=a,a.stateNode=n}return pn(a),null;case 13:if(u=a.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(g=Ao(a),u!==null&&u.dehydrated!==null){if(n===null){if(!g)throw Error(i(318));if(g=a.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[ge]=a}else Do(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;pn(a),g=!1}else g=ug(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=g),g=!0;if(!g)return a.flags&256?(ja(a),a):(ja(a),null)}if(ja(a),(a.flags&128)!==0)return a.lanes=o,a;if(o=u!==null,n=n!==null&&n.memoizedState!==null,o){u=a.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool);var y=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==g&&(u.flags|=2048)}return o!==n&&o&&(a.child.flags|=8192),Ic(a,a.updateQueue),pn(a),null;case 4:return W(),n===null&&lh(a.stateNode.containerInfo),pn(a),null;case 10:return wa(a.type),pn(a),null;case 19:if(F(Mn),g=a.memoizedState,g===null)return pn(a),null;if(u=(a.flags&128)!==0,y=g.rendering,y===null)if(u)Xo(g,!1);else{if(vn!==0||n!==null&&(n.flags&128)!==0)for(n=a.child;n!==null;){if(y=Pc(n),y!==null){for(a.flags|=128,Xo(g,!1),n=y.updateQueue,a.updateQueue=n,Ic(a,n),a.subtreeFlags=0,n=o,o=a.child;o!==null;)sg(o,n),o=o.sibling;return V(Mn,Mn.current&1|2),a.child}n=n.sibling}g.tail!==null&&P()>Fc&&(a.flags|=128,u=!0,Xo(g,!1),a.lanes=4194304)}else{if(!u)if(n=Pc(y),n!==null){if(a.flags|=128,u=!0,n=n.updateQueue,a.updateQueue=n,Ic(a,n),Xo(g,!0),g.tail===null&&g.tailMode==="hidden"&&!y.alternate&&!Gt)return pn(a),null}else 2*P()-g.renderingStartTime>Fc&&o!==536870912&&(a.flags|=128,u=!0,Xo(g,!1),a.lanes=4194304);g.isBackwards?(y.sibling=a.child,a.child=y):(n=g.last,n!==null?n.sibling=y:a.child=y,g.last=y)}return g.tail!==null?(a=g.tail,g.rendering=a,g.tail=a.sibling,g.renderingStartTime=P(),a.sibling=null,n=Mn.current,V(Mn,u?n&1|2:n&1),a):(pn(a),null);case 22:case 23:return ja(a),uf(),u=a.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(a.flags|=8192):u&&(a.flags|=8192),u?(o&536870912)!==0&&(a.flags&128)===0&&(pn(a),a.subtreeFlags&6&&(a.flags|=8192)):pn(a),o=a.updateQueue,o!==null&&Ic(a,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==o&&(a.flags|=2048),n!==null&&F(Gi),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),a.memoizedState.cache!==o&&(a.flags|=2048),wa(On),pn(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function $j(n,a){switch(Zd(a),a.tag){case 1:return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 3:return wa(On),W(),n=a.flags,(n&65536)!==0&&(n&128)===0?(a.flags=n&-65537|128,a):null;case 26:case 27:case 5:return ue(a),null;case 13:if(ja(a),n=a.memoizedState,n!==null&&n.dehydrated!==null){if(a.alternate===null)throw Error(i(340));Do()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 19:return F(Mn),null;case 4:return W(),null;case 10:return wa(a.type),null;case 22:case 23:return ja(a),uf(),n!==null&&F(Gi),n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 24:return wa(On),null;case 25:return null;default:return null}}function Av(n,a){switch(Zd(a),a.tag){case 3:wa(On),W();break;case 26:case 27:case 5:ue(a);break;case 4:W();break;case 13:ja(a);break;case 19:F(Mn);break;case 10:wa(a.type);break;case 22:case 23:ja(a),uf(),n!==null&&F(Gi);break;case 24:wa(On)}}function Ko(n,a){try{var o=a.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var g=u.next;o=g;do{if((o.tag&n)===n){u=void 0;var y=o.create,L=o.inst;u=y(),L.destroy=u}o=o.next}while(o!==g)}}catch($){sn(a,a.return,$)}}function ai(n,a,o){try{var u=a.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var y=g.next;u=y;do{if((u.tag&n)===n){var L=u.inst,$=L.destroy;if($!==void 0){L.destroy=void 0,g=a;var ee=o,me=$;try{me()}catch(Ae){sn(g,ee,Ae)}}}u=u.next}while(u!==y)}}catch(Ae){sn(a,a.return,Ae)}}function Dv(n){var a=n.updateQueue;if(a!==null){var o=n.stateNode;try{wg(a,o)}catch(u){sn(n,n.return,u)}}}function Rv(n,a,o){o.props=Zi(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){sn(n,a,u)}}function Qo(n,a){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(g){sn(n,a,g)}}function ea(n,a){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(g){sn(n,a,g)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(g){sn(n,a,g)}else o.current=null}function Pv(n){var a=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(g){sn(n,n.return,g)}}function $f(n,a,o){try{var u=n.stateNode;i_(u,n.type,o,a),u[Ne]=a}catch(g){sn(n,n.return,g)}}function zv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&fi(n.type)||n.tag===4}function Uf(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||zv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&fi(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Vf(n,a,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,a?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,a):(a=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,a.appendChild(n),o=o._reactRootContainer,o!=null||a.onclick!==null||(a.onclick=Jc));else if(u!==4&&(u===27&&fi(n.type)&&(o=n.stateNode,a=null),n=n.child,n!==null))for(Vf(n,a,o),n=n.sibling;n!==null;)Vf(n,a,o),n=n.sibling}function Bc(n,a,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,a?o.insertBefore(n,a):o.appendChild(n);else if(u!==4&&(u===27&&fi(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Bc(n,a,o),n=n.sibling;n!==null;)Bc(n,a,o),n=n.sibling}function $v(n){var a=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,g=a.attributes;g.length;)a.removeAttributeNode(g[0]);Bn(a,u,o),a[ge]=n,a[Ne]=o}catch(y){sn(n,n.return,y)}}var Ca=!1,wn=!1,If=!1,Uv=typeof WeakSet=="function"?WeakSet:Set,Pn=null;function Uj(n,a){if(n=n.containerInfo,dh=su,n=Xp(n),$d(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var g=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{o.nodeType,y.nodeType}catch{o=null;break e}var L=0,$=-1,ee=-1,me=0,Ae=0,$e=n,ve=null;t:for(;;){for(var we;$e!==o||g!==0&&$e.nodeType!==3||($=L+g),$e!==y||u!==0&&$e.nodeType!==3||(ee=L+u),$e.nodeType===3&&(L+=$e.nodeValue.length),(we=$e.firstChild)!==null;)ve=$e,$e=we;for(;;){if($e===n)break t;if(ve===o&&++me===g&&($=L),ve===y&&++Ae===u&&(ee=L),(we=$e.nextSibling)!==null)break;$e=ve,ve=$e.parentNode}$e=we}o=$===-1||ee===-1?null:{start:$,end:ee}}else o=null}o=o||{start:0,end:0}}else o=null;for(fh={focusedElem:n,selectionRange:o},su=!1,Pn=a;Pn!==null;)if(a=Pn,n=a.child,(a.subtreeFlags&1024)!==0&&n!==null)n.return=a,Pn=n;else for(;Pn!==null;){switch(a=Pn,y=a.alternate,n=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&y!==null){n=void 0,o=a,g=y.memoizedProps,y=y.memoizedState,u=o.stateNode;try{var jt=Zi(o.type,g,o.elementType===o.type);n=u.getSnapshotBeforeUpdate(jt,y),u.__reactInternalSnapshotBeforeUpdate=n}catch(gt){sn(o,o.return,gt)}}break;case 3:if((n&1024)!==0){if(n=a.stateNode.containerInfo,o=n.nodeType,o===9)ph(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":ph(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=a.sibling,n!==null){n.return=a.return,Pn=n;break}Pn=a.return}}function Vv(n,a,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:ii(n,o),u&4&&Ko(5,o);break;case 1:if(ii(n,o),u&4)if(n=o.stateNode,a===null)try{n.componentDidMount()}catch(L){sn(o,o.return,L)}else{var g=Zi(o.type,a.memoizedProps);a=a.memoizedState;try{n.componentDidUpdate(g,a,n.__reactInternalSnapshotBeforeUpdate)}catch(L){sn(o,o.return,L)}}u&64&&Dv(o),u&512&&Qo(o,o.return);break;case 3:if(ii(n,o),u&64&&(n=o.updateQueue,n!==null)){if(a=null,o.child!==null)switch(o.child.tag){case 27:case 5:a=o.child.stateNode;break;case 1:a=o.child.stateNode}try{wg(n,a)}catch(L){sn(o,o.return,L)}}break;case 27:a===null&&u&4&&$v(o);case 26:case 5:ii(n,o),a===null&&u&4&&Pv(o),u&512&&Qo(o,o.return);break;case 12:ii(n,o);break;case 13:ii(n,o),u&4&&Hv(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=Wj.bind(null,o),f_(n,o))));break;case 22:if(u=o.memoizedState!==null||Ca,!u){a=a!==null&&a.memoizedState!==null||wn,g=Ca;var y=wn;Ca=u,(wn=a)&&!y?si(n,o,(o.subtreeFlags&8772)!==0):ii(n,o),Ca=g,wn=y}break;case 30:break;default:ii(n,o)}}function Iv(n){var a=n.alternate;a!==null&&(n.alternate=null,Iv(a)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(a=n.stateNode,a!==null&&Qe(a)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var dn=null,or=!1;function Ea(n,a,o){for(o=o.child;o!==null;)Bv(n,a,o),o=o.sibling}function Bv(n,a,o){if(Te&&typeof Te.onCommitFiberUnmount=="function")try{Te.onCommitFiberUnmount(et,o)}catch{}switch(o.tag){case 26:wn||ea(o,a),Ea(n,a,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:wn||ea(o,a);var u=dn,g=or;fi(o.type)&&(dn=o.stateNode,or=!1),Ea(n,a,o),ol(o.stateNode),dn=u,or=g;break;case 5:wn||ea(o,a);case 6:if(u=dn,g=or,dn=null,Ea(n,a,o),dn=u,or=g,dn!==null)if(or)try{(dn.nodeType===9?dn.body:dn.nodeName==="HTML"?dn.ownerDocument.body:dn).removeChild(o.stateNode)}catch(y){sn(o,a,y)}else try{dn.removeChild(o.stateNode)}catch(y){sn(o,a,y)}break;case 18:dn!==null&&(or?(n=dn,Lb(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),pl(n)):Lb(dn,o.stateNode));break;case 4:u=dn,g=or,dn=o.stateNode.containerInfo,or=!0,Ea(n,a,o),dn=u,or=g;break;case 0:case 11:case 14:case 15:wn||ai(2,o,a),wn||ai(4,o,a),Ea(n,a,o);break;case 1:wn||(ea(o,a),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Rv(o,a,u)),Ea(n,a,o);break;case 21:Ea(n,a,o);break;case 22:wn=(u=wn)||o.memoizedState!==null,Ea(n,a,o),wn=u;break;default:Ea(n,a,o)}}function Hv(n,a){if(a.memoizedState===null&&(n=a.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{pl(n)}catch(o){sn(a,a.return,o)}}function Vj(n){switch(n.tag){case 13:case 19:var a=n.stateNode;return a===null&&(a=n.stateNode=new Uv),a;case 22:return n=n.stateNode,a=n._retryCache,a===null&&(a=n._retryCache=new Uv),a;default:throw Error(i(435,n.tag))}}function Bf(n,a){var o=Vj(n);a.forEach(function(u){var g=Zj.bind(null,n,u);o.has(u)||(o.add(u),u.then(g,g))})}function vr(n,a){var o=a.deletions;if(o!==null)for(var u=0;u<o.length;u++){var g=o[u],y=n,L=a,$=L;e:for(;$!==null;){switch($.tag){case 27:if(fi($.type)){dn=$.stateNode,or=!1;break e}break;case 5:dn=$.stateNode,or=!1;break e;case 3:case 4:dn=$.stateNode.containerInfo,or=!0;break e}$=$.return}if(dn===null)throw Error(i(160));Bv(y,L,g),dn=null,or=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)Fv(a,n),a=a.sibling}var Br=null;function Fv(n,a){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:vr(a,n),br(n),u&4&&(ai(3,n,n.return),Ko(3,n),ai(5,n,n.return));break;case 1:vr(a,n),br(n),u&512&&(wn||o===null||ea(o,o.return)),u&64&&Ca&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var g=Br;if(vr(a,n),br(n),u&512&&(wn||o===null||ea(o,o.return)),u&4){var y=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":y=g.getElementsByTagName("title")[0],(!y||y[at]||y[ge]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(u),g.head.insertBefore(y,g.querySelector("head > title"))),Bn(y,u,o),y[ge]=n,it(y),u=y;break e;case"link":var L=$b("link","href",g).get(u+(o.href||""));if(L){for(var $=0;$<L.length;$++)if(y=L[$],y.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&y.getAttribute("rel")===(o.rel==null?null:o.rel)&&y.getAttribute("title")===(o.title==null?null:o.title)&&y.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){L.splice($,1);break t}}y=g.createElement(u),Bn(y,u,o),g.head.appendChild(y);break;case"meta":if(L=$b("meta","content",g).get(u+(o.content||""))){for($=0;$<L.length;$++)if(y=L[$],y.getAttribute("content")===(o.content==null?null:""+o.content)&&y.getAttribute("name")===(o.name==null?null:o.name)&&y.getAttribute("property")===(o.property==null?null:o.property)&&y.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&y.getAttribute("charset")===(o.charSet==null?null:o.charSet)){L.splice($,1);break t}}y=g.createElement(u),Bn(y,u,o),g.head.appendChild(y);break;default:throw Error(i(468,u))}y[ge]=n,it(y),u=y}n.stateNode=u}else Ub(g,n.type,n.stateNode);else n.stateNode=zb(g,u,n.memoizedProps);else y!==u?(y===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):y.count--,u===null?Ub(g,n.type,n.stateNode):zb(g,u,n.memoizedProps)):u===null&&n.stateNode!==null&&$f(n,n.memoizedProps,o.memoizedProps)}break;case 27:vr(a,n),br(n),u&512&&(wn||o===null||ea(o,o.return)),o!==null&&u&4&&$f(n,n.memoizedProps,o.memoizedProps);break;case 5:if(vr(a,n),br(n),u&512&&(wn||o===null||ea(o,o.return)),n.flags&32){g=n.stateNode;try{Ha(g,"")}catch(we){sn(n,n.return,we)}}u&4&&n.stateNode!=null&&(g=n.memoizedProps,$f(n,g,o!==null?o.memoizedProps:g)),u&1024&&(If=!0);break;case 6:if(vr(a,n),br(n),u&4){if(n.stateNode===null)throw Error(i(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(we){sn(n,n.return,we)}}break;case 3:if(ru=null,g=Br,Br=tu(a.containerInfo),vr(a,n),Br=g,br(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{pl(a.containerInfo)}catch(we){sn(n,n.return,we)}If&&(If=!1,Yv(n));break;case 4:u=Br,Br=tu(n.stateNode.containerInfo),vr(a,n),br(n),Br=u;break;case 12:vr(a,n),br(n);break;case 13:vr(a,n),br(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Wf=P()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Bf(n,u)));break;case 22:g=n.memoizedState!==null;var ee=o!==null&&o.memoizedState!==null,me=Ca,Ae=wn;if(Ca=me||g,wn=Ae||ee,vr(a,n),wn=Ae,Ca=me,br(n),u&8192)e:for(a=n.stateNode,a._visibility=g?a._visibility&-2:a._visibility|1,g&&(o===null||ee||Ca||wn||Xi(n)),o=null,a=n;;){if(a.tag===5||a.tag===26){if(o===null){ee=o=a;try{if(y=ee.stateNode,g)L=y.style,typeof L.setProperty=="function"?L.setProperty("display","none","important"):L.display="none";else{$=ee.stateNode;var $e=ee.memoizedProps.style,ve=$e!=null&&$e.hasOwnProperty("display")?$e.display:null;$.style.display=ve==null||typeof ve=="boolean"?"":(""+ve).trim()}}catch(we){sn(ee,ee.return,we)}}}else if(a.tag===6){if(o===null){ee=a;try{ee.stateNode.nodeValue=g?"":ee.memoizedProps}catch(we){sn(ee,ee.return,we)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===n)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break e;for(;a.sibling===null;){if(a.return===null||a.return===n)break e;o===a&&(o=null),a=a.return}o===a&&(o=null),a.sibling.return=a.return,a=a.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Bf(n,o))));break;case 19:vr(a,n),br(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Bf(n,u)));break;case 30:break;case 21:break;default:vr(a,n),br(n)}}function br(n){var a=n.flags;if(a&2){try{for(var o,u=n.return;u!==null;){if(zv(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var g=o.stateNode,y=Uf(n);Bc(n,y,g);break;case 5:var L=o.stateNode;o.flags&32&&(Ha(L,""),o.flags&=-33);var $=Uf(n);Bc(n,$,L);break;case 3:case 4:var ee=o.stateNode.containerInfo,me=Uf(n);Vf(n,me,ee);break;default:throw Error(i(161))}}catch(Ae){sn(n,n.return,Ae)}n.flags&=-3}a&4096&&(n.flags&=-4097)}function Yv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var a=n;Yv(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),n=n.sibling}}function ii(n,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Vv(n,a.alternate,a),a=a.sibling}function Xi(n){for(n=n.child;n!==null;){var a=n;switch(a.tag){case 0:case 11:case 14:case 15:ai(4,a,a.return),Xi(a);break;case 1:ea(a,a.return);var o=a.stateNode;typeof o.componentWillUnmount=="function"&&Rv(a,a.return,o),Xi(a);break;case 27:ol(a.stateNode);case 26:case 5:ea(a,a.return),Xi(a);break;case 22:a.memoizedState===null&&Xi(a);break;case 30:Xi(a);break;default:Xi(a)}n=n.sibling}}function si(n,a,o){for(o=o&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var u=a.alternate,g=n,y=a,L=y.flags;switch(y.tag){case 0:case 11:case 15:si(g,y,o),Ko(4,y);break;case 1:if(si(g,y,o),u=y,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(me){sn(u,u.return,me)}if(u=y,g=u.updateQueue,g!==null){var $=u.stateNode;try{var ee=g.shared.hiddenCallbacks;if(ee!==null)for(g.shared.hiddenCallbacks=null,g=0;g<ee.length;g++)xg(ee[g],$)}catch(me){sn(u,u.return,me)}}o&&L&64&&Dv(y),Qo(y,y.return);break;case 27:$v(y);case 26:case 5:si(g,y,o),o&&u===null&&L&4&&Pv(y),Qo(y,y.return);break;case 12:si(g,y,o);break;case 13:si(g,y,o),o&&L&4&&Hv(g,y);break;case 22:y.memoizedState===null&&si(g,y,o),Qo(y,y.return);break;case 30:break;default:si(g,y,o)}a=a.sibling}}function Hf(n,a){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(n=a.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&zo(o))}function Ff(n,a){n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&zo(n))}function ta(n,a,o,u){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)qv(n,a,o,u),a=a.sibling}function qv(n,a,o,u){var g=a.flags;switch(a.tag){case 0:case 11:case 15:ta(n,a,o,u),g&2048&&Ko(9,a);break;case 1:ta(n,a,o,u);break;case 3:ta(n,a,o,u),g&2048&&(n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&zo(n)));break;case 12:if(g&2048){ta(n,a,o,u),n=a.stateNode;try{var y=a.memoizedProps,L=y.id,$=y.onPostCommit;typeof $=="function"&&$(L,a.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(ee){sn(a,a.return,ee)}}else ta(n,a,o,u);break;case 13:ta(n,a,o,u);break;case 23:break;case 22:y=a.stateNode,L=a.alternate,a.memoizedState!==null?y._visibility&2?ta(n,a,o,u):Jo(n,a):y._visibility&2?ta(n,a,o,u):(y._visibility|=2,$s(n,a,o,u,(a.subtreeFlags&10256)!==0)),g&2048&&Hf(L,a);break;case 24:ta(n,a,o,u),g&2048&&Ff(a.alternate,a);break;default:ta(n,a,o,u)}}function $s(n,a,o,u,g){for(g=g&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var y=n,L=a,$=o,ee=u,me=L.flags;switch(L.tag){case 0:case 11:case 15:$s(y,L,$,ee,g),Ko(8,L);break;case 23:break;case 22:var Ae=L.stateNode;L.memoizedState!==null?Ae._visibility&2?$s(y,L,$,ee,g):Jo(y,L):(Ae._visibility|=2,$s(y,L,$,ee,g)),g&&me&2048&&Hf(L.alternate,L);break;case 24:$s(y,L,$,ee,g),g&&me&2048&&Ff(L.alternate,L);break;default:$s(y,L,$,ee,g)}a=a.sibling}}function Jo(n,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var o=n,u=a,g=u.flags;switch(u.tag){case 22:Jo(o,u),g&2048&&Hf(u.alternate,u);break;case 24:Jo(o,u),g&2048&&Ff(u.alternate,u);break;default:Jo(o,u)}a=a.sibling}}var el=8192;function Us(n){if(n.subtreeFlags&el)for(n=n.child;n!==null;)Gv(n),n=n.sibling}function Gv(n){switch(n.tag){case 26:Us(n),n.flags&el&&n.memoizedState!==null&&N_(Br,n.memoizedState,n.memoizedProps);break;case 5:Us(n);break;case 3:case 4:var a=Br;Br=tu(n.stateNode.containerInfo),Us(n),Br=a;break;case 22:n.memoizedState===null&&(a=n.alternate,a!==null&&a.memoizedState!==null?(a=el,el=16777216,Us(n),el=a):Us(n));break;default:Us(n)}}function Wv(n){var a=n.alternate;if(a!==null&&(n=a.child,n!==null)){a.child=null;do a=n.sibling,n.sibling=null,n=a;while(n!==null)}}function tl(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var o=0;o<a.length;o++){var u=a[o];Pn=u,Xv(u,n)}Wv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Zv(n),n=n.sibling}function Zv(n){switch(n.tag){case 0:case 11:case 15:tl(n),n.flags&2048&&ai(9,n,n.return);break;case 3:tl(n);break;case 12:tl(n);break;case 22:var a=n.stateNode;n.memoizedState!==null&&a._visibility&2&&(n.return===null||n.return.tag!==13)?(a._visibility&=-3,Hc(n)):tl(n);break;default:tl(n)}}function Hc(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var o=0;o<a.length;o++){var u=a[o];Pn=u,Xv(u,n)}Wv(n)}for(n=n.child;n!==null;){switch(a=n,a.tag){case 0:case 11:case 15:ai(8,a,a.return),Hc(a);break;case 22:o=a.stateNode,o._visibility&2&&(o._visibility&=-3,Hc(a));break;default:Hc(a)}n=n.sibling}}function Xv(n,a){for(;Pn!==null;){var o=Pn;switch(o.tag){case 0:case 11:case 15:ai(8,o,a);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:zo(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Pn=u;else e:for(o=n;Pn!==null;){u=Pn;var g=u.sibling,y=u.return;if(Iv(u),u===o){Pn=null;break e}if(g!==null){g.return=y,Pn=g;break e}Pn=y}}}var Ij={getCacheForType:function(n){var a=Gn(On),o=a.data.get(n);return o===void 0&&(o=n(),a.data.set(n,o)),o}},Bj=typeof WeakMap=="function"?WeakMap:Map,Qt=0,on=null,Rt=null,It=0,Jt=0,yr=null,oi=!1,Vs=!1,Yf=!1,Oa=0,vn=0,li=0,Ki=0,qf=0,Lr=0,Is=0,nl=null,lr=null,Gf=!1,Wf=0,Fc=1/0,Yc=null,ci=null,In=0,ui=null,Bs=null,Hs=0,Zf=0,Xf=null,Kv=null,rl=0,Kf=null;function xr(){if((Qt&2)!==0&&It!==0)return It&-It;if(k.T!==null){var n=Ls;return n!==0?n:ah()}return hr()}function Qv(){Lr===0&&(Lr=(It&536870912)===0||Gt?Jn():536870912);var n=Mr.current;return n!==null&&(n.flags|=32),Lr}function wr(n,a,o){(n===on&&(Jt===2||Jt===9)||n.cancelPendingCommit!==null)&&(Fs(n,0),di(n,It,Lr,!1)),er(n,o),((Qt&2)===0||n!==on)&&(n===on&&((Qt&2)===0&&(Ki|=o),vn===4&&di(n,It,Lr,!1)),na(n))}function Jv(n,a,o){if((Qt&6)!==0)throw Error(i(327));var u=!o&&(a&124)===0&&(a&n.expiredLanes)===0||Vt(n,a),g=u?Yj(n,a):eh(n,a,!0),y=u;do{if(g===0){Vs&&!u&&di(n,a,0,!1);break}else{if(o=n.current.alternate,y&&!Hj(o)){g=eh(n,a,!1),y=!1;continue}if(g===2){if(y=a,n.errorRecoveryDisabledLanes&y)var L=0;else L=n.pendingLanes&-536870913,L=L!==0?L:L&536870912?536870912:0;if(L!==0){a=L;e:{var $=n;g=nl;var ee=$.current.memoizedState.isDehydrated;if(ee&&(Fs($,L).flags|=256),L=eh($,L,!1),L!==2){if(Yf&&!ee){$.errorRecoveryDisabledLanes|=y,Ki|=y,g=4;break e}y=lr,lr=g,y!==null&&(lr===null?lr=y:lr.push.apply(lr,y))}g=L}if(y=!1,g!==2)continue}}if(g===1){Fs(n,0),di(n,a,0,!0);break}e:{switch(u=n,y=g,y){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:di(u,a,Lr,!oi);break e;case 2:lr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(g=Wf+300-P(),10<g)){if(di(u,a,Lr,!oi),cn(u,0,!0)!==0)break e;u.timeoutHandle=Ob(eb.bind(null,u,o,lr,Yc,Gf,a,Lr,Ki,Is,oi,y,2,-0,0),g);break e}eb(u,o,lr,Yc,Gf,a,Lr,Ki,Is,oi,y,0,-0,0)}}break}while(!0);na(n)}function eb(n,a,o,u,g,y,L,$,ee,me,Ae,$e,ve,we){if(n.timeoutHandle=-1,$e=a.subtreeFlags,($e&8192||($e&16785408)===16785408)&&(ul={stylesheets:null,count:0,unsuspend:__},Gv(a),$e=C_(),$e!==null)){n.cancelPendingCommit=$e(ob.bind(null,n,a,y,o,u,g,L,$,ee,Ae,1,ve,we)),di(n,y,L,!me);return}ob(n,a,y,o,u,g,L,$,ee)}function Hj(n){for(var a=n;;){var o=a.tag;if((o===0||o===11||o===15)&&a.flags&16384&&(o=a.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var g=o[u],y=g.getSnapshot;g=g.value;try{if(!pr(y(),g))return!1}catch{return!1}}if(o=a.child,a.subtreeFlags&16384&&o!==null)o.return=a,a=o;else{if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function di(n,a,o,u){a&=~qf,a&=~Ki,n.suspendedLanes|=a,n.pingedLanes&=~a,u&&(n.warmLanes|=a),u=n.expirationTimes;for(var g=a;0<g;){var y=31-qe(g),L=1<<y;u[y]=-1,g&=~L}o!==0&&ln(n,o,a)}function qc(){return(Qt&6)===0?(al(0),!1):!0}function Qf(){if(Rt!==null){if(Jt===0)var n=Rt.return;else n=Rt,xa=Yi=null,pf(n),Ps=null,Wo=0,n=Rt;for(;n!==null;)Av(n.alternate,n),n=n.return;Rt=null}}function Fs(n,a){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,o_(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Qf(),on=n,Rt=o=va(n.current,null),It=a,Jt=0,yr=null,oi=!1,Vs=Vt(n,a),Yf=!1,Is=Lr=qf=Ki=li=vn=0,lr=nl=null,Gf=!1,(a&8)!==0&&(a|=a&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=a;0<u;){var g=31-qe(u),y=1<<g;a|=n[g],u&=~y}return Oa=a,mc(),o}function tb(n,a){Lt=null,k.H=Ac,a===Uo||a===jc?(a=bg(),Jt=3):a===pg?(a=bg(),Jt=4):Jt=a===yv?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,yr=a,Rt===null&&(vn=1,$c(n,Nr(a,n.current)))}function nb(){var n=k.H;return k.H=Ac,n===null?Ac:n}function rb(){var n=k.A;return k.A=Ij,n}function Jf(){vn=4,oi||(It&4194048)!==It&&Mr.current!==null||(Vs=!0),(li&134217727)===0&&(Ki&134217727)===0||on===null||di(on,It,Lr,!1)}function eh(n,a,o){var u=Qt;Qt|=2;var g=nb(),y=rb();(on!==n||It!==a)&&(Yc=null,Fs(n,a)),a=!1;var L=vn;e:do try{if(Jt!==0&&Rt!==null){var $=Rt,ee=yr;switch(Jt){case 8:Qf(),L=6;break e;case 3:case 2:case 9:case 6:Mr.current===null&&(a=!0);var me=Jt;if(Jt=0,yr=null,Ys(n,$,ee,me),o&&Vs){L=0;break e}break;default:me=Jt,Jt=0,yr=null,Ys(n,$,ee,me)}}Fj(),L=vn;break}catch(Ae){tb(n,Ae)}while(!0);return a&&n.shellSuspendCounter++,xa=Yi=null,Qt=u,k.H=g,k.A=y,Rt===null&&(on=null,It=0,mc()),L}function Fj(){for(;Rt!==null;)ab(Rt)}function Yj(n,a){var o=Qt;Qt|=2;var u=nb(),g=rb();on!==n||It!==a?(Yc=null,Fc=P()+500,Fs(n,a)):Vs=Vt(n,a);e:do try{if(Jt!==0&&Rt!==null){a=Rt;var y=yr;t:switch(Jt){case 1:Jt=0,yr=null,Ys(n,a,y,1);break;case 2:case 9:if(gg(y)){Jt=0,yr=null,ib(a);break}a=function(){Jt!==2&&Jt!==9||on!==n||(Jt=7),na(n)},y.then(a,a);break e;case 3:Jt=7;break e;case 4:Jt=5;break e;case 7:gg(y)?(Jt=0,yr=null,ib(a)):(Jt=0,yr=null,Ys(n,a,y,7));break;case 5:var L=null;switch(Rt.tag){case 26:L=Rt.memoizedState;case 5:case 27:var $=Rt;if(!L||Vb(L)){Jt=0,yr=null;var ee=$.sibling;if(ee!==null)Rt=ee;else{var me=$.return;me!==null?(Rt=me,Gc(me)):Rt=null}break t}}Jt=0,yr=null,Ys(n,a,y,5);break;case 6:Jt=0,yr=null,Ys(n,a,y,6);break;case 8:Qf(),vn=6;break e;default:throw Error(i(462))}}qj();break}catch(Ae){tb(n,Ae)}while(!0);return xa=Yi=null,k.H=u,k.A=g,Qt=o,Rt!==null?0:(on=null,It=0,mc(),vn)}function qj(){for(;Rt!==null&&!Be();)ab(Rt)}function ab(n){var a=kv(n.alternate,n,Oa);n.memoizedProps=n.pendingProps,a===null?Gc(n):Rt=a}function ib(n){var a=n,o=a.alternate;switch(a.tag){case 15:case 0:a=Nv(o,a,a.pendingProps,a.type,void 0,It);break;case 11:a=Nv(o,a,a.pendingProps,a.type.render,a.ref,It);break;case 5:pf(a);default:Av(o,a),a=Rt=sg(a,Oa),a=kv(o,a,Oa)}n.memoizedProps=n.pendingProps,a===null?Gc(n):Rt=a}function Ys(n,a,o,u){xa=Yi=null,pf(a),Ps=null,Wo=0;var g=a.return;try{if(Rj(n,g,a,o,It)){vn=1,$c(n,Nr(o,n.current)),Rt=null;return}}catch(y){if(g!==null)throw Rt=g,y;vn=1,$c(n,Nr(o,n.current)),Rt=null;return}a.flags&32768?(Gt||u===1?n=!0:Vs||(It&536870912)!==0?n=!1:(oi=n=!0,(u===2||u===9||u===3||u===6)&&(u=Mr.current,u!==null&&u.tag===13&&(u.flags|=16384))),sb(a,n)):Gc(a)}function Gc(n){var a=n;do{if((a.flags&32768)!==0){sb(a,oi);return}n=a.return;var o=zj(a.alternate,a,Oa);if(o!==null){Rt=o;return}if(a=a.sibling,a!==null){Rt=a;return}Rt=a=n}while(a!==null);vn===0&&(vn=5)}function sb(n,a){do{var o=$j(n.alternate,n);if(o!==null){o.flags&=32767,Rt=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!a&&(n=n.sibling,n!==null)){Rt=n;return}Rt=n=o}while(n!==null);vn=6,Rt=null}function ob(n,a,o,u,g,y,L,$,ee){n.cancelPendingCommit=null;do Wc();while(In!==0);if((Qt&6)!==0)throw Error(i(327));if(a!==null){if(a===n.current)throw Error(i(177));if(y=a.lanes|a.childLanes,y|=Hd,Ze(n,o,y,L,$,ee),n===on&&(Rt=on=null,It=0),Bs=a,ui=n,Hs=o,Zf=y,Xf=g,Kv=u,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,Xj(pe,function(){return fb(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||u){u=k.T,k.T=null,g=z.p,z.p=2,L=Qt,Qt|=4;try{Uj(n,a,o)}finally{Qt=L,z.p=g,k.T=u}}In=1,lb(),cb(),ub()}}function lb(){if(In===1){In=0;var n=ui,a=Bs,o=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||o){o=k.T,k.T=null;var u=z.p;z.p=2;var g=Qt;Qt|=4;try{Fv(a,n);var y=fh,L=Xp(n.containerInfo),$=y.focusedElem,ee=y.selectionRange;if(L!==$&&$&&$.ownerDocument&&Zp($.ownerDocument.documentElement,$)){if(ee!==null&&$d($)){var me=ee.start,Ae=ee.end;if(Ae===void 0&&(Ae=me),"selectionStart"in $)$.selectionStart=me,$.selectionEnd=Math.min(Ae,$.value.length);else{var $e=$.ownerDocument||document,ve=$e&&$e.defaultView||window;if(ve.getSelection){var we=ve.getSelection(),jt=$.textContent.length,gt=Math.min(ee.start,jt),an=ee.end===void 0?gt:Math.min(ee.end,jt);!we.extend&&gt>an&&(L=an,an=gt,gt=L);var fe=Wp($,gt),ae=Wp($,an);if(fe&&ae&&(we.rangeCount!==1||we.anchorNode!==fe.node||we.anchorOffset!==fe.offset||we.focusNode!==ae.node||we.focusOffset!==ae.offset)){var he=$e.createRange();he.setStart(fe.node,fe.offset),we.removeAllRanges(),gt>an?(we.addRange(he),we.extend(ae.node,ae.offset)):(he.setEnd(ae.node,ae.offset),we.addRange(he))}}}}for($e=[],we=$;we=we.parentNode;)we.nodeType===1&&$e.push({element:we,left:we.scrollLeft,top:we.scrollTop});for(typeof $.focus=="function"&&$.focus(),$=0;$<$e.length;$++){var ze=$e[$];ze.element.scrollLeft=ze.left,ze.element.scrollTop=ze.top}}su=!!dh,fh=dh=null}finally{Qt=g,z.p=u,k.T=o}}n.current=a,In=2}}function cb(){if(In===2){In=0;var n=ui,a=Bs,o=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||o){o=k.T,k.T=null;var u=z.p;z.p=2;var g=Qt;Qt|=4;try{Vv(n,a.alternate,a)}finally{Qt=g,z.p=u,k.T=o}}In=3}}function ub(){if(In===4||In===3){In=0,Se();var n=ui,a=Bs,o=Hs,u=Kv;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?In=5:(In=0,Bs=ui=null,db(n,n.pendingLanes));var g=n.pendingLanes;if(g===0&&(ci=null),un(o),a=a.stateNode,Te&&typeof Te.onCommitFiberRoot=="function")try{Te.onCommitFiberRoot(et,a,void 0,(a.current.flags&128)===128)}catch{}if(u!==null){a=k.T,g=z.p,z.p=2,k.T=null;try{for(var y=n.onRecoverableError,L=0;L<u.length;L++){var $=u[L];y($.value,{componentStack:$.stack})}}finally{k.T=a,z.p=g}}(Hs&3)!==0&&Wc(),na(n),g=n.pendingLanes,(o&4194090)!==0&&(g&42)!==0?n===Kf?rl++:(rl=0,Kf=n):rl=0,al(0)}}function db(n,a){(n.pooledCacheLanes&=a)===0&&(a=n.pooledCache,a!=null&&(n.pooledCache=null,zo(a)))}function Wc(n){return lb(),cb(),ub(),fb()}function fb(){if(In!==5)return!1;var n=ui,a=Zf;Zf=0;var o=un(Hs),u=k.T,g=z.p;try{z.p=32>o?32:o,k.T=null,o=Xf,Xf=null;var y=ui,L=Hs;if(In=0,Bs=ui=null,Hs=0,(Qt&6)!==0)throw Error(i(331));var $=Qt;if(Qt|=4,Zv(y.current),qv(y,y.current,L,o),Qt=$,al(0,!1),Te&&typeof Te.onPostCommitFiberRoot=="function")try{Te.onPostCommitFiberRoot(et,y)}catch{}return!0}finally{z.p=g,k.T=u,db(n,a)}}function hb(n,a,o){a=Nr(o,a),a=Mf(n.stateNode,a,2),n=ei(n,a,2),n!==null&&(er(n,2),na(n))}function sn(n,a,o){if(n.tag===3)hb(n,n,o);else for(;a!==null;){if(a.tag===3){hb(a,n,o);break}else if(a.tag===1){var u=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ci===null||!ci.has(u))){n=Nr(o,n),o=vv(2),u=ei(a,o,2),u!==null&&(bv(o,u,a,n),er(u,2),na(u));break}}a=a.return}}function th(n,a,o){var u=n.pingCache;if(u===null){u=n.pingCache=new Bj;var g=new Set;u.set(a,g)}else g=u.get(a),g===void 0&&(g=new Set,u.set(a,g));g.has(o)||(Yf=!0,g.add(o),n=Gj.bind(null,n,a,o),a.then(n,n))}function Gj(n,a,o){var u=n.pingCache;u!==null&&u.delete(a),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,on===n&&(It&o)===o&&(vn===4||vn===3&&(It&62914560)===It&&300>P()-Wf?(Qt&2)===0&&Fs(n,0):qf|=o,Is===It&&(Is=0)),na(n)}function mb(n,a){a===0&&(a=Yn()),n=Cs(n,a),n!==null&&(er(n,a),na(n))}function Wj(n){var a=n.memoizedState,o=0;a!==null&&(o=a.retryLane),mb(n,o)}function Zj(n,a){var o=0;switch(n.tag){case 13:var u=n.stateNode,g=n.memoizedState;g!==null&&(o=g.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(a),mb(n,o)}function Xj(n,a){return _e(n,a)}var Zc=null,qs=null,nh=!1,Xc=!1,rh=!1,Qi=0;function na(n){n!==qs&&n.next===null&&(qs===null?Zc=qs=n:qs=qs.next=n),Xc=!0,nh||(nh=!0,Qj())}function al(n,a){if(!rh&&Xc){rh=!0;do for(var o=!1,u=Zc;u!==null;){if(n!==0){var g=u.pendingLanes;if(g===0)var y=0;else{var L=u.suspendedLanes,$=u.pingedLanes;y=(1<<31-qe(42|n)+1)-1,y&=g&~(L&~$),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(o=!0,bb(u,y))}else y=It,y=cn(u,u===on?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||Vt(u,y)||(o=!0,bb(u,y));u=u.next}while(o);rh=!1}}function Kj(){pb()}function pb(){Xc=nh=!1;var n=0;Qi!==0&&(s_()&&(n=Qi),Qi=0);for(var a=P(),o=null,u=Zc;u!==null;){var g=u.next,y=gb(u,a);y===0?(u.next=null,o===null?Zc=g:o.next=g,g===null&&(qs=o)):(o=u,(n!==0||(y&3)!==0)&&(Xc=!0)),u=g}al(n)}function gb(n,a){for(var o=n.suspendedLanes,u=n.pingedLanes,g=n.expirationTimes,y=n.pendingLanes&-62914561;0<y;){var L=31-qe(y),$=1<<L,ee=g[L];ee===-1?(($&o)===0||($&u)!==0)&&(g[L]=Qn($,a)):ee<=a&&(n.expiredLanes|=$),y&=~$}if(a=on,o=It,o=cn(n,n===a?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===a&&(Jt===2||Jt===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&ke(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Vt(n,o)){if(a=o&-o,a===n.callbackPriority)return a;switch(u!==null&&ke(u),un(o)){case 2:case 8:o=Me;break;case 32:o=pe;break;case 268435456:o=Ge;break;default:o=pe}return u=vb.bind(null,n),o=_e(o,u),n.callbackPriority=a,n.callbackNode=o,a}return u!==null&&u!==null&&ke(u),n.callbackPriority=2,n.callbackNode=null,2}function vb(n,a){if(In!==0&&In!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Wc()&&n.callbackNode!==o)return null;var u=It;return u=cn(n,n===on?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(Jv(n,u,a),gb(n,P()),n.callbackNode!=null&&n.callbackNode===o?vb.bind(null,n):null)}function bb(n,a){if(Wc())return null;Jv(n,a,!0)}function Qj(){l_(function(){(Qt&6)!==0?_e(se,Kj):pb()})}function ah(){return Qi===0&&(Qi=Jn()),Qi}function yb(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Fa(""+n)}function xb(n,a){var o=a.ownerDocument.createElement("input");return o.name=a.name,o.value=a.value,n.id&&o.setAttribute("form",n.id),a.parentNode.insertBefore(o,a),n=new FormData(n),o.parentNode.removeChild(o),n}function Jj(n,a,o,u,g){if(a==="submit"&&o&&o.stateNode===g){var y=yb((g[Ne]||null).action),L=u.submitter;L&&(a=(a=L[Ne]||null)?yb(a.formAction):L.getAttribute("formAction"),a!==null&&(y=a,L=null));var $=new Ai("action","action",null,u,g);n.push({event:$,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Qi!==0){var ee=L?xb(g,L):new FormData(g);_f(o,{pending:!0,data:ee,method:g.method,action:y},null,ee)}}else typeof y=="function"&&($.preventDefault(),ee=L?xb(g,L):new FormData(g),_f(o,{pending:!0,data:ee,method:g.method,action:y},y,ee))},currentTarget:g}]})}}for(var ih=0;ih<Bd.length;ih++){var sh=Bd[ih],e_=sh.toLowerCase(),t_=sh[0].toUpperCase()+sh.slice(1);Ir(e_,"on"+t_)}Ir(Jp,"onAnimationEnd"),Ir(eg,"onAnimationIteration"),Ir(tg,"onAnimationStart"),Ir("dblclick","onDoubleClick"),Ir("focusin","onFocus"),Ir("focusout","onBlur"),Ir(bj,"onTransitionRun"),Ir(yj,"onTransitionStart"),Ir(xj,"onTransitionCancel"),Ir(ng,"onTransitionEnd"),ha("onMouseEnter",["mouseout","mouseover"]),ha("onMouseLeave",["mouseout","mouseover"]),ha("onPointerEnter",["pointerout","pointerover"]),ha("onPointerLeave",["pointerout","pointerover"]),tr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),tr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),tr("onBeforeInput",["compositionend","keypress","textInput","paste"]),tr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),tr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),tr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var il="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),n_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(il));function wb(n,a){a=(a&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],g=u.event;u=u.listeners;e:{var y=void 0;if(a)for(var L=u.length-1;0<=L;L--){var $=u[L],ee=$.instance,me=$.currentTarget;if($=$.listener,ee!==y&&g.isPropagationStopped())break e;y=$,g.currentTarget=me;try{y(g)}catch(Ae){zc(Ae)}g.currentTarget=null,y=ee}else for(L=0;L<u.length;L++){if($=u[L],ee=$.instance,me=$.currentTarget,$=$.listener,ee!==y&&g.isPropagationStopped())break e;y=$,g.currentTarget=me;try{y(g)}catch(Ae){zc(Ae)}g.currentTarget=null,y=ee}}}}function Pt(n,a){var o=a[Ye];o===void 0&&(o=a[Ye]=new Set);var u=n+"__bubble";o.has(u)||(Sb(a,n,2,!1),o.add(u))}function oh(n,a,o){var u=0;a&&(u|=4),Sb(o,n,u,a)}var Kc="_reactListening"+Math.random().toString(36).slice(2);function lh(n){if(!n[Kc]){n[Kc]=!0,Ut.forEach(function(o){o!=="selectionchange"&&(n_.has(o)||oh(o,!1,n),oh(o,!0,n))});var a=n.nodeType===9?n:n.ownerDocument;a===null||a[Kc]||(a[Kc]=!0,oh("selectionchange",!1,a))}}function Sb(n,a,o,u){switch(qb(a)){case 2:var g=M_;break;case 8:g=L_;break;default:g=Sh}o=g.bind(null,a,o,n),g=void 0,!Ti||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),u?g!==void 0?n.addEventListener(a,o,{capture:!0,passive:g}):n.addEventListener(a,o,!0):g!==void 0?n.addEventListener(a,o,{passive:g}):n.addEventListener(a,o,!1)}function ch(n,a,o,u,g){var y=u;if((a&1)===0&&(a&2)===0&&u!==null)e:for(;;){if(u===null)return;var L=u.tag;if(L===3||L===4){var $=u.stateNode.containerInfo;if($===g)break;if(L===4)for(L=u.return;L!==null;){var ee=L.tag;if((ee===3||ee===4)&&L.stateNode.containerInfo===g)return;L=L.return}for(;$!==null;){if(L=Xt($),L===null)return;if(ee=L.tag,ee===5||ee===6||ee===26||ee===27){u=y=L;continue e}$=$.parentNode}}u=u.return}ki(function(){var me=y,Ae=Zr(o),$e=[];e:{var ve=rg.get(n);if(ve!==void 0){var we=Ai,jt=n;switch(n){case"keypress":if(qa(o)===0)break e;case"keydown":case"keyup":we=Ee;break;case"focusin":jt="focus",we=Wa;break;case"focusout":jt="blur",we=Wa;break;case"beforeblur":case"afterblur":we=Wa;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=uc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=Eo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=De;break;case Jp:case eg:case tg:we=Ad;break;case ng:we=dt;break;case"scroll":case"scrollend":we=Rp;break;case"wheel":we=Bt;break;case"copy":case"cut":case"paste":we=Rd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=st;break;case"toggle":case"beforetoggle":we=qt}var gt=(a&4)!==0,an=!gt&&(n==="scroll"||n==="scrollend"),fe=gt?ve!==null?ve+"Capture":null:ve;gt=[];for(var ae=me,he;ae!==null;){var ze=ae;if(he=ze.stateNode,ze=ze.tag,ze!==5&&ze!==26&&ze!==27||he===null||fe===null||(ze=Ur(ae,fe),ze!=null&&gt.push(sl(ae,ze,he))),an)break;ae=ae.return}0<gt.length&&(ve=new we(ve,jt,null,o,Ae),$e.push({event:ve,listeners:gt}))}}if((a&7)===0){e:{if(ve=n==="mouseover"||n==="pointerover",we=n==="mouseout"||n==="pointerout",ve&&o!==_o&&(jt=o.relatedTarget||o.fromElement)&&(Xt(jt)||jt[Xe]))break e;if((we||ve)&&(ve=Ae.window===Ae?Ae:(ve=Ae.ownerDocument)?ve.defaultView||ve.parentWindow:window,we?(jt=o.relatedTarget||o.toElement,we=me,jt=jt?Xt(jt):null,jt!==null&&(an=c(jt),gt=jt.tag,jt!==an||gt!==5&&gt!==27&&gt!==6)&&(jt=null)):(we=null,jt=me),we!==jt)){if(gt=uc,ze="onMouseLeave",fe="onMouseEnter",ae="mouse",(n==="pointerout"||n==="pointerover")&&(gt=st,ze="onPointerLeave",fe="onPointerEnter",ae="pointer"),an=we==null?ve:Je(we),he=jt==null?ve:Je(jt),ve=new gt(ze,ae+"leave",we,o,Ae),ve.target=an,ve.relatedTarget=he,ze=null,Xt(Ae)===me&&(gt=new gt(fe,ae+"enter",jt,o,Ae),gt.target=he,gt.relatedTarget=an,ze=gt),an=ze,we&&jt)t:{for(gt=we,fe=jt,ae=0,he=gt;he;he=Gs(he))ae++;for(he=0,ze=fe;ze;ze=Gs(ze))he++;for(;0<ae-he;)gt=Gs(gt),ae--;for(;0<he-ae;)fe=Gs(fe),he--;for(;ae--;){if(gt===fe||fe!==null&&gt===fe.alternate)break t;gt=Gs(gt),fe=Gs(fe)}gt=null}else gt=null;we!==null&&jb($e,ve,we,gt,!1),jt!==null&&an!==null&&jb($e,an,jt,gt,!0)}}e:{if(ve=me?Je(me):window,we=ve.nodeName&&ve.nodeName.toLowerCase(),we==="select"||we==="input"&&ve.type==="file")var tt=Bp;else if(Vp(ve))if(Hp)tt=pj;else{tt=hj;var Tt=fj}else we=ve.nodeName,!we||we.toLowerCase()!=="input"||ve.type!=="checkbox"&&ve.type!=="radio"?me&&Dn(me.elementType)&&(tt=Bp):tt=mj;if(tt&&(tt=tt(n,me))){Ip($e,tt,o,Ae);break e}Tt&&Tt(n,ve,me),n==="focusout"&&me&&ve.type==="number"&&me.memoizedProps.value!=null&&vs(ve,"number",ve.value)}switch(Tt=me?Je(me):window,n){case"focusin":(Vp(Tt)||Tt.contentEditable==="true")&&(js=Tt,Ud=me,To=null);break;case"focusout":To=Ud=js=null;break;case"mousedown":Vd=!0;break;case"contextmenu":case"mouseup":case"dragend":Vd=!1,Kp($e,o,Ae);break;case"selectionchange":if(vj)break;case"keydown":case"keyup":Kp($e,o,Ae)}var ct;if(nr)e:{switch(n){case"compositionstart":var yt="onCompositionStart";break e;case"compositionend":yt="onCompositionEnd";break e;case"compositionupdate":yt="onCompositionUpdate";break e}yt=void 0}else Ss?$p(n,o)&&(yt="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(yt="onCompositionStart");yt&&(Xa&&o.locale!=="ko"&&(Ss||yt!=="onCompositionStart"?yt==="onCompositionEnd"&&Ss&&(ct=lc()):(Kr=Ae,xs="value"in Kr?Kr.value:Kr.textContent,Ss=!0)),Tt=Qc(me,yt),0<Tt.length&&(yt=new Oo(yt,n,null,o,Ae),$e.push({event:yt,listeners:Tt}),ct?yt.data=ct:(ct=Up(o),ct!==null&&(yt.data=ct)))),(ct=ga?lj(n,o):cj(n,o))&&(yt=Qc(me,"onBeforeInput"),0<yt.length&&(Tt=new Oo("onBeforeInput","beforeinput",null,o,Ae),$e.push({event:Tt,listeners:yt}),Tt.data=ct)),Jj($e,n,me,o,Ae)}wb($e,a)})}function sl(n,a,o){return{instance:n,listener:a,currentTarget:o}}function Qc(n,a){for(var o=a+"Capture",u=[];n!==null;){var g=n,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=Ur(n,o),g!=null&&u.unshift(sl(n,g,y)),g=Ur(n,a),g!=null&&u.push(sl(n,g,y))),n.tag===3)return u;n=n.return}return[]}function Gs(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function jb(n,a,o,u,g){for(var y=a._reactName,L=[];o!==null&&o!==u;){var $=o,ee=$.alternate,me=$.stateNode;if($=$.tag,ee!==null&&ee===u)break;$!==5&&$!==26&&$!==27||me===null||(ee=me,g?(me=Ur(o,y),me!=null&&L.unshift(sl(o,me,ee))):g||(me=Ur(o,y),me!=null&&L.push(sl(o,me,ee)))),o=o.return}L.length!==0&&n.push({event:a,listeners:L})}var r_=/\r\n?/g,a_=/\u0000|\uFFFD/g;function _b(n){return(typeof n=="string"?n:""+n).replace(r_,`
`).replace(a_,"")}function Nb(n,a){return a=_b(a),_b(n)===a}function Jc(){}function rn(n,a,o,u,g,y){switch(o){case"children":typeof u=="string"?a==="body"||a==="textarea"&&u===""||Ha(n,u):(typeof u=="number"||typeof u=="bigint")&&a!=="body"&&Ha(n,""+u);break;case"className":Li(n,"class",u);break;case"tabIndex":Li(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Li(n,o,u);break;case"style":oc(n,u,y);break;case"data":if(a!=="object"){Li(n,"data",u);break}case"src":case"href":if(u===""&&(a!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Fa(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(o==="formAction"?(a!=="input"&&rn(n,a,"name",g.name,g,null),rn(n,a,"formEncType",g.formEncType,g,null),rn(n,a,"formMethod",g.formMethod,g,null),rn(n,a,"formTarget",g.formTarget,g,null)):(rn(n,a,"encType",g.encType,g,null),rn(n,a,"method",g.method,g,null),rn(n,a,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Fa(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=Jc);break;case"onScroll":u!=null&&Pt("scroll",n);break;case"onScrollEnd":u!=null&&Pt("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(g.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=Fa(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Pt("beforetoggle",n),Pt("toggle",n),fs(n,"popover",u);break;case"xlinkActuate":yn(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":yn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":yn(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":yn(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":yn(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":yn(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":yn(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":yn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":yn(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":fs(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=kd.get(o)||o,fs(n,o,u))}}function uh(n,a,o,u,g,y){switch(o){case"style":oc(n,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(g.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"children":typeof u=="string"?Ha(n,u):(typeof u=="number"||typeof u=="bigint")&&Ha(n,""+u);break;case"onScroll":u!=null&&Pt("scroll",n);break;case"onScrollEnd":u!=null&&Pt("scrollend",n);break;case"onClick":u!=null&&(n.onclick=Jc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yt.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(g=o.endsWith("Capture"),a=o.slice(2,g?o.length-7:void 0),y=n[Ne]||null,y=y!=null?y[o]:null,typeof y=="function"&&n.removeEventListener(a,y,g),typeof u=="function")){typeof y!="function"&&y!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(a,u,g);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):fs(n,o,u)}}}function Bn(n,a,o){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pt("error",n),Pt("load",n);var u=!1,g=!1,y;for(y in o)if(o.hasOwnProperty(y)){var L=o[y];if(L!=null)switch(y){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:rn(n,a,y,L,o,null)}}g&&rn(n,a,"srcSet",o.srcSet,o,null),u&&rn(n,a,"src",o.src,o,null);return;case"input":Pt("invalid",n);var $=y=L=g=null,ee=null,me=null;for(u in o)if(o.hasOwnProperty(u)){var Ae=o[u];if(Ae!=null)switch(u){case"name":g=Ae;break;case"type":L=Ae;break;case"checked":ee=Ae;break;case"defaultChecked":me=Ae;break;case"value":y=Ae;break;case"defaultValue":$=Ae;break;case"children":case"dangerouslySetInnerHTML":if(Ae!=null)throw Error(i(137,a));break;default:rn(n,a,u,Ae,o,null)}}Va(n,y,$,ee,me,L,g,!1),ar(n);return;case"select":Pt("invalid",n),u=L=y=null;for(g in o)if(o.hasOwnProperty(g)&&($=o[g],$!=null))switch(g){case"value":y=$;break;case"defaultValue":L=$;break;case"multiple":u=$;default:rn(n,a,g,$,o,null)}a=y,o=L,n.multiple=!!u,a!=null?Ia(n,!!u,a,!1):o!=null&&Ia(n,!!u,o,!0);return;case"textarea":Pt("invalid",n),y=g=u=null;for(L in o)if(o.hasOwnProperty(L)&&($=o[L],$!=null))switch(L){case"value":u=$;break;case"defaultValue":g=$;break;case"children":y=$;break;case"dangerouslySetInnerHTML":if($!=null)throw Error(i(91));break;default:rn(n,a,L,$,o,null)}jo(n,u,g,y),ar(n);return;case"option":for(ee in o)if(o.hasOwnProperty(ee)&&(u=o[ee],u!=null))switch(ee){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:rn(n,a,ee,u,o,null)}return;case"dialog":Pt("beforetoggle",n),Pt("toggle",n),Pt("cancel",n),Pt("close",n);break;case"iframe":case"object":Pt("load",n);break;case"video":case"audio":for(u=0;u<il.length;u++)Pt(il[u],n);break;case"image":Pt("error",n),Pt("load",n);break;case"details":Pt("toggle",n);break;case"embed":case"source":case"link":Pt("error",n),Pt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(me in o)if(o.hasOwnProperty(me)&&(u=o[me],u!=null))switch(me){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:rn(n,a,me,u,o,null)}return;default:if(Dn(a)){for(Ae in o)o.hasOwnProperty(Ae)&&(u=o[Ae],u!==void 0&&uh(n,a,Ae,u,o,void 0));return}}for($ in o)o.hasOwnProperty($)&&(u=o[$],u!=null&&rn(n,a,$,u,o,null))}function i_(n,a,o,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,L=null,$=null,ee=null,me=null,Ae=null;for(we in o){var $e=o[we];if(o.hasOwnProperty(we)&&$e!=null)switch(we){case"checked":break;case"value":break;case"defaultValue":ee=$e;default:u.hasOwnProperty(we)||rn(n,a,we,null,u,$e)}}for(var ve in u){var we=u[ve];if($e=o[ve],u.hasOwnProperty(ve)&&(we!=null||$e!=null))switch(ve){case"type":y=we;break;case"name":g=we;break;case"checked":me=we;break;case"defaultChecked":Ae=we;break;case"value":L=we;break;case"defaultValue":$=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(i(137,a));break;default:we!==$e&&rn(n,a,ve,we,u,$e)}}gs(n,L,$,ee,me,Ae,y,g);return;case"select":we=L=$=ve=null;for(y in o)if(ee=o[y],o.hasOwnProperty(y)&&ee!=null)switch(y){case"value":break;case"multiple":we=ee;default:u.hasOwnProperty(y)||rn(n,a,y,null,u,ee)}for(g in u)if(y=u[g],ee=o[g],u.hasOwnProperty(g)&&(y!=null||ee!=null))switch(g){case"value":ve=y;break;case"defaultValue":$=y;break;case"multiple":L=y;default:y!==ee&&rn(n,a,g,y,u,ee)}a=$,o=L,u=we,ve!=null?Ia(n,!!o,ve,!1):!!u!=!!o&&(a!=null?Ia(n,!!o,a,!0):Ia(n,!!o,o?[]:"",!1));return;case"textarea":we=ve=null;for($ in o)if(g=o[$],o.hasOwnProperty($)&&g!=null&&!u.hasOwnProperty($))switch($){case"value":break;case"children":break;default:rn(n,a,$,null,u,g)}for(L in u)if(g=u[L],y=o[L],u.hasOwnProperty(L)&&(g!=null||y!=null))switch(L){case"value":ve=g;break;case"defaultValue":we=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==y&&rn(n,a,L,g,u,y)}Ba(n,ve,we);return;case"option":for(var jt in o)if(ve=o[jt],o.hasOwnProperty(jt)&&ve!=null&&!u.hasOwnProperty(jt))switch(jt){case"selected":n.selected=!1;break;default:rn(n,a,jt,null,u,ve)}for(ee in u)if(ve=u[ee],we=o[ee],u.hasOwnProperty(ee)&&ve!==we&&(ve!=null||we!=null))switch(ee){case"selected":n.selected=ve&&typeof ve!="function"&&typeof ve!="symbol";break;default:rn(n,a,ee,ve,u,we)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var gt in o)ve=o[gt],o.hasOwnProperty(gt)&&ve!=null&&!u.hasOwnProperty(gt)&&rn(n,a,gt,null,u,ve);for(me in u)if(ve=u[me],we=o[me],u.hasOwnProperty(me)&&ve!==we&&(ve!=null||we!=null))switch(me){case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(i(137,a));break;default:rn(n,a,me,ve,u,we)}return;default:if(Dn(a)){for(var an in o)ve=o[an],o.hasOwnProperty(an)&&ve!==void 0&&!u.hasOwnProperty(an)&&uh(n,a,an,void 0,u,ve);for(Ae in u)ve=u[Ae],we=o[Ae],!u.hasOwnProperty(Ae)||ve===we||ve===void 0&&we===void 0||uh(n,a,Ae,ve,u,we);return}}for(var fe in o)ve=o[fe],o.hasOwnProperty(fe)&&ve!=null&&!u.hasOwnProperty(fe)&&rn(n,a,fe,null,u,ve);for($e in u)ve=u[$e],we=o[$e],!u.hasOwnProperty($e)||ve===we||ve==null&&we==null||rn(n,a,$e,ve,u,we)}var dh=null,fh=null;function eu(n){return n.nodeType===9?n:n.ownerDocument}function Cb(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Eb(n,a){if(n===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&a==="foreignObject"?0:n}function hh(n,a){return n==="textarea"||n==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var mh=null;function s_(){var n=window.event;return n&&n.type==="popstate"?n===mh?!1:(mh=n,!0):(mh=null,!1)}var Ob=typeof setTimeout=="function"?setTimeout:void 0,o_=typeof clearTimeout=="function"?clearTimeout:void 0,Mb=typeof Promise=="function"?Promise:void 0,l_=typeof queueMicrotask=="function"?queueMicrotask:typeof Mb<"u"?function(n){return Mb.resolve(null).then(n).catch(c_)}:Ob;function c_(n){setTimeout(function(){throw n})}function fi(n){return n==="head"}function Lb(n,a){var o=a,u=0,g=0;do{var y=o.nextSibling;if(n.removeChild(o),y&&y.nodeType===8)if(o=y.data,o==="/$"){if(0<u&&8>u){o=u;var L=n.ownerDocument;if(o&1&&ol(L.documentElement),o&2&&ol(L.body),o&4)for(o=L.head,ol(o),L=o.firstChild;L;){var $=L.nextSibling,ee=L.nodeName;L[at]||ee==="SCRIPT"||ee==="STYLE"||ee==="LINK"&&L.rel.toLowerCase()==="stylesheet"||o.removeChild(L),L=$}}if(g===0){n.removeChild(y),pl(a);return}g--}else o==="$"||o==="$?"||o==="$!"?g++:u=o.charCodeAt(0)-48;else u=0;o=y}while(o);pl(a)}function ph(n){var a=n.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var o=a;switch(a=a.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":ph(o),Qe(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function u_(n,a,o,u){for(;n.nodeType===1;){var g=o;if(n.nodeName.toLowerCase()!==a.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[at])switch(a){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(y=n.getAttribute("rel"),y==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(y!==g.rel||n.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||n.getAttribute("title")!==(g.title==null?null:g.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(y=n.getAttribute("src"),(y!==(g.src==null?null:g.src)||n.getAttribute("type")!==(g.type==null?null:g.type)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(a==="input"&&n.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&n.getAttribute("name")===y)return n}else return n;if(n=Hr(n.nextSibling),n===null)break}return null}function d_(n,a,o){if(a==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Hr(n.nextSibling),n===null))return null;return n}function gh(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function f_(n,a){var o=n.ownerDocument;if(n.data!=="$?"||o.readyState==="complete")a();else{var u=function(){a(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Hr(n){for(;n!=null;n=n.nextSibling){var a=n.nodeType;if(a===1||a===3)break;if(a===8){if(a=n.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return n}var vh=null;function kb(n){n=n.previousSibling;for(var a=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(a===0)return n;a--}else o==="/$"&&a++}n=n.previousSibling}return null}function Tb(n,a,o){switch(a=eu(o),n){case"html":if(n=a.documentElement,!n)throw Error(i(452));return n;case"head":if(n=a.head,!n)throw Error(i(453));return n;case"body":if(n=a.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function ol(n){for(var a=n.attributes;a.length;)n.removeAttributeNode(a[0]);Qe(n)}var kr=new Map,Ab=new Set;function tu(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Ma=z.d;z.d={f:h_,r:m_,D:p_,C:g_,L:v_,m:b_,X:x_,S:y_,M:w_};function h_(){var n=Ma.f(),a=qc();return n||a}function m_(n){var a=_t(n);a!==null&&a.tag===5&&a.type==="form"?Jg(a):Ma.r(n)}var Ws=typeof document>"u"?null:document;function Db(n,a,o){var u=Ws;if(u&&typeof a=="string"&&a){var g=ir(a);g='link[rel="'+n+'"][href="'+g+'"]',typeof o=="string"&&(g+='[crossorigin="'+o+'"]'),Ab.has(g)||(Ab.add(g),n={rel:n,crossOrigin:o,href:a},u.querySelector(g)===null&&(a=u.createElement("link"),Bn(a,"link",n),it(a),u.head.appendChild(a)))}}function p_(n){Ma.D(n),Db("dns-prefetch",n,null)}function g_(n,a){Ma.C(n,a),Db("preconnect",n,a)}function v_(n,a,o){Ma.L(n,a,o);var u=Ws;if(u&&n&&a){var g='link[rel="preload"][as="'+ir(a)+'"]';a==="image"&&o&&o.imageSrcSet?(g+='[imagesrcset="'+ir(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(g+='[imagesizes="'+ir(o.imageSizes)+'"]')):g+='[href="'+ir(n)+'"]';var y=g;switch(a){case"style":y=Zs(n);break;case"script":y=Xs(n)}kr.has(y)||(n=v({rel:"preload",href:a==="image"&&o&&o.imageSrcSet?void 0:n,as:a},o),kr.set(y,n),u.querySelector(g)!==null||a==="style"&&u.querySelector(ll(y))||a==="script"&&u.querySelector(cl(y))||(a=u.createElement("link"),Bn(a,"link",n),it(a),u.head.appendChild(a)))}}function b_(n,a){Ma.m(n,a);var o=Ws;if(o&&n){var u=a&&typeof a.as=="string"?a.as:"script",g='link[rel="modulepreload"][as="'+ir(u)+'"][href="'+ir(n)+'"]',y=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Xs(n)}if(!kr.has(y)&&(n=v({rel:"modulepreload",href:n},a),kr.set(y,n),o.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(cl(y)))return}u=o.createElement("link"),Bn(u,"link",n),it(u),o.head.appendChild(u)}}}function y_(n,a,o){Ma.S(n,a,o);var u=Ws;if(u&&n){var g=Mt(u).hoistableStyles,y=Zs(n);a=a||"default";var L=g.get(y);if(!L){var $={loading:0,preload:null};if(L=u.querySelector(ll(y)))$.loading=5;else{n=v({rel:"stylesheet",href:n,"data-precedence":a},o),(o=kr.get(y))&&bh(n,o);var ee=L=u.createElement("link");it(ee),Bn(ee,"link",n),ee._p=new Promise(function(me,Ae){ee.onload=me,ee.onerror=Ae}),ee.addEventListener("load",function(){$.loading|=1}),ee.addEventListener("error",function(){$.loading|=2}),$.loading|=4,nu(L,a,u)}L={type:"stylesheet",instance:L,count:1,state:$},g.set(y,L)}}}function x_(n,a){Ma.X(n,a);var o=Ws;if(o&&n){var u=Mt(o).hoistableScripts,g=Xs(n),y=u.get(g);y||(y=o.querySelector(cl(g)),y||(n=v({src:n,async:!0},a),(a=kr.get(g))&&yh(n,a),y=o.createElement("script"),it(y),Bn(y,"link",n),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(g,y))}}function w_(n,a){Ma.M(n,a);var o=Ws;if(o&&n){var u=Mt(o).hoistableScripts,g=Xs(n),y=u.get(g);y||(y=o.querySelector(cl(g)),y||(n=v({src:n,async:!0,type:"module"},a),(a=kr.get(g))&&yh(n,a),y=o.createElement("script"),it(y),Bn(y,"link",n),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(g,y))}}function Rb(n,a,o,u){var g=(g=be.current)?tu(g):null;if(!g)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(a=Zs(o.href),o=Mt(g).hoistableStyles,u=o.get(a),u||(u={type:"style",instance:null,count:0,state:null},o.set(a,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=Zs(o.href);var y=Mt(g).hoistableStyles,L=y.get(n);if(L||(g=g.ownerDocument||g,L={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(n,L),(y=g.querySelector(ll(n)))&&!y._p&&(L.instance=y,L.state.loading=5),kr.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},kr.set(n,o),y||S_(g,n,o,L.state))),a&&u===null)throw Error(i(528,""));return L}if(a&&u!==null)throw Error(i(529,""));return null;case"script":return a=o.async,o=o.src,typeof o=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Xs(o),o=Mt(g).hoistableScripts,u=o.get(a),u||(u={type:"script",instance:null,count:0,state:null},o.set(a,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function Zs(n){return'href="'+ir(n)+'"'}function ll(n){return'link[rel="stylesheet"]['+n+"]"}function Pb(n){return v({},n,{"data-precedence":n.precedence,precedence:null})}function S_(n,a,o,u){n.querySelector('link[rel="preload"][as="style"]['+a+"]")?u.loading=1:(a=n.createElement("link"),u.preload=a,a.addEventListener("load",function(){return u.loading|=1}),a.addEventListener("error",function(){return u.loading|=2}),Bn(a,"link",o),it(a),n.head.appendChild(a))}function Xs(n){return'[src="'+ir(n)+'"]'}function cl(n){return"script[async]"+n}function zb(n,a,o){if(a.count++,a.instance===null)switch(a.type){case"style":var u=n.querySelector('style[data-href~="'+ir(o.href)+'"]');if(u)return a.instance=u,it(u),u;var g=v({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),it(u),Bn(u,"style",g),nu(u,o.precedence,n),a.instance=u;case"stylesheet":g=Zs(o.href);var y=n.querySelector(ll(g));if(y)return a.state.loading|=4,a.instance=y,it(y),y;u=Pb(o),(g=kr.get(g))&&bh(u,g),y=(n.ownerDocument||n).createElement("link"),it(y);var L=y;return L._p=new Promise(function($,ee){L.onload=$,L.onerror=ee}),Bn(y,"link",u),a.state.loading|=4,nu(y,o.precedence,n),a.instance=y;case"script":return y=Xs(o.src),(g=n.querySelector(cl(y)))?(a.instance=g,it(g),g):(u=o,(g=kr.get(y))&&(u=v({},o),yh(u,g)),n=n.ownerDocument||n,g=n.createElement("script"),it(g),Bn(g,"link",u),n.head.appendChild(g),a.instance=g);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(u=a.instance,a.state.loading|=4,nu(u,o.precedence,n));return a.instance}function nu(n,a,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,y=g,L=0;L<u.length;L++){var $=u[L];if($.dataset.precedence===a)y=$;else if(y!==g)break}y?y.parentNode.insertBefore(n,y.nextSibling):(a=o.nodeType===9?o.head:o,a.insertBefore(n,a.firstChild))}function bh(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.title==null&&(n.title=a.title)}function yh(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.integrity==null&&(n.integrity=a.integrity)}var ru=null;function $b(n,a,o){if(ru===null){var u=new Map,g=ru=new Map;g.set(o,u)}else g=ru,u=g.get(o),u||(u=new Map,g.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),g=0;g<o.length;g++){var y=o[g];if(!(y[at]||y[ge]||n==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var L=y.getAttribute(a)||"";L=n+L;var $=u.get(L);$?$.push(y):u.set(L,[y])}}return u}function Ub(n,a,o){n=n.ownerDocument||n,n.head.insertBefore(o,a==="title"?n.querySelector("head > title"):null)}function j_(n,a,o){if(o===1||a.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return n=a.disabled,typeof a.precedence=="string"&&n==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Vb(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var ul=null;function __(){}function N_(n,a,o){if(ul===null)throw Error(i(475));var u=ul;if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var g=Zs(o.href),y=n.querySelector(ll(g));if(y){n=y._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(u.count++,u=au.bind(u),n.then(u,u)),a.state.loading|=4,a.instance=y,it(y);return}y=n.ownerDocument||n,o=Pb(o),(g=kr.get(g))&&bh(o,g),y=y.createElement("link"),it(y);var L=y;L._p=new Promise(function($,ee){L.onload=$,L.onerror=ee}),Bn(y,"link",o),a.instance=y}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(u.count++,a=au.bind(u),n.addEventListener("load",a),n.addEventListener("error",a))}}function C_(){if(ul===null)throw Error(i(475));var n=ul;return n.stylesheets&&n.count===0&&xh(n,n.stylesheets),0<n.count?function(a){var o=setTimeout(function(){if(n.stylesheets&&xh(n,n.stylesheets),n.unsuspend){var u=n.unsuspend;n.unsuspend=null,u()}},6e4);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(o)}}:null}function au(){if(this.count--,this.count===0){if(this.stylesheets)xh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var iu=null;function xh(n,a){n.stylesheets=null,n.unsuspend!==null&&(n.count++,iu=new Map,a.forEach(E_,n),iu=null,au.call(n))}function E_(n,a){if(!(a.state.loading&4)){var o=iu.get(n);if(o)var u=o.get(null);else{o=new Map,iu.set(n,o);for(var g=n.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var L=g[y];(L.nodeName==="LINK"||L.getAttribute("media")!=="not all")&&(o.set(L.dataset.precedence,L),u=L)}u&&o.set(null,u)}g=a.instance,L=g.getAttribute("data-precedence"),y=o.get(L)||u,y===u&&o.set(null,g),o.set(L,g),this.count++,u=au.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),y?y.parentNode.insertBefore(g,y.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(g,n.firstChild)),a.state.loading|=4}}var dl={$$typeof:E,Provider:null,Consumer:null,_currentValue:U,_currentValue2:U,_threadCount:0};function O_(n,a,o,u,g,y,L,$){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=He(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=He(0),this.hiddenUpdates=He(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=L,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=$,this.incompleteTransitions=new Map}function Ib(n,a,o,u,g,y,L,$,ee,me,Ae,$e){return n=new O_(n,a,o,L,$,ee,me,$e),a=1,y===!0&&(a|=24),y=gr(3,null,null,a),n.current=y,y.stateNode=n,a=ef(),a.refCount++,n.pooledCache=a,a.refCount++,y.memoizedState={element:u,isDehydrated:o,cache:a},af(y),n}function Bb(n){return n?(n=Es,n):Es}function Hb(n,a,o,u,g,y){g=Bb(g),u.context===null?u.context=g:u.pendingContext=g,u=Ja(a),u.payload={element:o},y=y===void 0?null:y,y!==null&&(u.callback=y),o=ei(n,u,a),o!==null&&(wr(o,n,a),Io(o,n,a))}function Fb(n,a){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<a?o:a}}function wh(n,a){Fb(n,a),(n=n.alternate)&&Fb(n,a)}function Yb(n){if(n.tag===13){var a=Cs(n,67108864);a!==null&&wr(a,n,67108864),wh(n,67108864)}}var su=!0;function M_(n,a,o,u){var g=k.T;k.T=null;var y=z.p;try{z.p=2,Sh(n,a,o,u)}finally{z.p=y,k.T=g}}function L_(n,a,o,u){var g=k.T;k.T=null;var y=z.p;try{z.p=8,Sh(n,a,o,u)}finally{z.p=y,k.T=g}}function Sh(n,a,o,u){if(su){var g=jh(u);if(g===null)ch(n,a,u,ou,o),Gb(n,u);else if(T_(g,n,a,o,u))u.stopPropagation();else if(Gb(n,u),a&4&&-1<k_.indexOf(n)){for(;g!==null;){var y=_t(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var L=Nt(y.pendingLanes);if(L!==0){var $=y;for($.pendingLanes|=2,$.entangledLanes|=2;L;){var ee=1<<31-qe(L);$.entanglements[1]|=ee,L&=~ee}na(y),(Qt&6)===0&&(Fc=P()+500,al(0))}}break;case 13:$=Cs(y,2),$!==null&&wr($,y,2),qc(),wh(y,2)}if(y=jh(u),y===null&&ch(n,a,u,ou,o),y===g)break;g=y}g!==null&&u.stopPropagation()}else ch(n,a,u,null,o)}}function jh(n){return n=Zr(n),_h(n)}var ou=null;function _h(n){if(ou=null,n=Xt(n),n!==null){var a=c(n);if(a===null)n=null;else{var o=a.tag;if(o===13){if(n=d(a),n!==null)return n;n=null}else if(o===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;n=null}else a!==n&&(n=null)}}return ou=n,null}function qb(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(le()){case se:return 2;case Me:return 8;case pe:case Ue:return 32;case Ge:return 268435456;default:return 32}default:return 32}}var Nh=!1,hi=null,mi=null,pi=null,fl=new Map,hl=new Map,gi=[],k_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Gb(n,a){switch(n){case"focusin":case"focusout":hi=null;break;case"dragenter":case"dragleave":mi=null;break;case"mouseover":case"mouseout":pi=null;break;case"pointerover":case"pointerout":fl.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":hl.delete(a.pointerId)}}function ml(n,a,o,u,g,y){return n===null||n.nativeEvent!==y?(n={blockedOn:a,domEventName:o,eventSystemFlags:u,nativeEvent:y,targetContainers:[g]},a!==null&&(a=_t(a),a!==null&&Yb(a)),n):(n.eventSystemFlags|=u,a=n.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),n)}function T_(n,a,o,u,g){switch(a){case"focusin":return hi=ml(hi,n,a,o,u,g),!0;case"dragenter":return mi=ml(mi,n,a,o,u,g),!0;case"mouseover":return pi=ml(pi,n,a,o,u,g),!0;case"pointerover":var y=g.pointerId;return fl.set(y,ml(fl.get(y)||null,n,a,o,u,g)),!0;case"gotpointercapture":return y=g.pointerId,hl.set(y,ml(hl.get(y)||null,n,a,o,u,g)),!0}return!1}function Wb(n){var a=Xt(n.target);if(a!==null){var o=c(a);if(o!==null){if(a=o.tag,a===13){if(a=d(o),a!==null){n.blockedOn=a,mr(n.priority,function(){if(o.tag===13){var u=xr();u=$t(u);var g=Cs(o,u);g!==null&&wr(g,o,u),wh(o,u)}});return}}else if(a===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function lu(n){if(n.blockedOn!==null)return!1;for(var a=n.targetContainers;0<a.length;){var o=jh(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);_o=u,o.target.dispatchEvent(u),_o=null}else return a=_t(o),a!==null&&Yb(a),n.blockedOn=o,!1;a.shift()}return!0}function Zb(n,a,o){lu(n)&&o.delete(a)}function A_(){Nh=!1,hi!==null&&lu(hi)&&(hi=null),mi!==null&&lu(mi)&&(mi=null),pi!==null&&lu(pi)&&(pi=null),fl.forEach(Zb),hl.forEach(Zb)}function cu(n,a){n.blockedOn===a&&(n.blockedOn=null,Nh||(Nh=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,A_)))}var uu=null;function Xb(n){uu!==n&&(uu=n,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){uu===n&&(uu=null);for(var a=0;a<n.length;a+=3){var o=n[a],u=n[a+1],g=n[a+2];if(typeof u!="function"){if(_h(u||o)===null)continue;break}var y=_t(o);y!==null&&(n.splice(a,3),a-=3,_f(y,{pending:!0,data:g,method:o.method,action:u},u,g))}}))}function pl(n){function a(ee){return cu(ee,n)}hi!==null&&cu(hi,n),mi!==null&&cu(mi,n),pi!==null&&cu(pi,n),fl.forEach(a),hl.forEach(a);for(var o=0;o<gi.length;o++){var u=gi[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<gi.length&&(o=gi[0],o.blockedOn===null);)Wb(o),o.blockedOn===null&&gi.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var g=o[u],y=o[u+1],L=g[Ne]||null;if(typeof y=="function")L||Xb(o);else if(L){var $=null;if(y&&y.hasAttribute("formAction")){if(g=y,L=y[Ne]||null)$=L.formAction;else if(_h(g)!==null)continue}else $=L.action;typeof $=="function"?o[u+1]=$:(o.splice(u,3),u-=3),Xb(o)}}}function Ch(n){this._internalRoot=n}du.prototype.render=Ch.prototype.render=function(n){var a=this._internalRoot;if(a===null)throw Error(i(409));var o=a.current,u=xr();Hb(o,u,n,a,null,null)},du.prototype.unmount=Ch.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var a=n.containerInfo;Hb(n.current,2,null,n,null,null),qc(),a[Xe]=null}};function du(n){this._internalRoot=n}du.prototype.unstable_scheduleHydration=function(n){if(n){var a=hr();n={blockedOn:null,target:n,priority:a};for(var o=0;o<gi.length&&a!==0&&a<gi[o].priority;o++);gi.splice(o,0,n),o===0&&Wb(n)}};var Kb=e.version;if(Kb!=="19.1.0")throw Error(i(527,Kb,"19.1.0"));z.findDOMNode=function(n){var a=n._reactInternals;if(a===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=f(a),n=n!==null?p(n):null,n=n===null?null:n.stateNode,n};var D_={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fu.isDisabled&&fu.supportsFiber)try{et=fu.inject(D_),Te=fu}catch{}}return vl.createRoot=function(n,a){if(!s(n))throw Error(i(299));var o=!1,u="",g=hv,y=mv,L=pv,$=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(L=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&($=a.unstable_transitionCallbacks)),a=Ib(n,1,!1,null,null,o,u,g,y,L,$,null),n[Xe]=a.current,lh(n),new Ch(a)},vl.hydrateRoot=function(n,a,o){if(!s(n))throw Error(i(299));var u=!1,g="",y=hv,L=mv,$=pv,ee=null,me=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(g=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(L=o.onCaughtError),o.onRecoverableError!==void 0&&($=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(ee=o.unstable_transitionCallbacks),o.formState!==void 0&&(me=o.formState)),a=Ib(n,1,!0,a,o??null,u,g,y,L,$,ee,me),a.context=Bb(null),o=a.current,u=xr(),u=$t(u),g=Ja(u),g.callback=null,ei(o,g,u),o=u,a.current.lanes=o,er(a,o),na(a),n[Xe]=a.current,lh(n),new du(a)},vl.version="19.1.0",vl}var ly;function F_(){if(ly)return Mh.exports;ly=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Mh.exports=H_(),Mh.exports}var Y_=F_(),bl={},cy;function q_(){if(cy)return bl;cy=1,Object.defineProperty(bl,"__esModule",{value:!0}),bl.parse=d,bl.serialize=p;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,r=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,c=(()=>{const w=function(){};return w.prototype=Object.create(null),w})();function d(w,S){const b=new c,N=w.length;if(N<2)return b;const j=(S==null?void 0:S.decode)||v;let _=0;do{const C=w.indexOf("=",_);if(C===-1)break;const E=w.indexOf(";",_),O=E===-1?N:E;if(C>O){_=w.lastIndexOf(";",C-1)+1;continue}const M=m(w,_,C),R=f(w,C,M),I=w.slice(M,R);if(b[I]===void 0){let H=m(w,C+1,O),D=f(w,O,H);const Y=j(w.slice(H,D));b[I]=Y}_=O+1}while(_<N);return b}function m(w,S,b){do{const N=w.charCodeAt(S);if(N!==32&&N!==9)return S}while(++S<b);return b}function f(w,S,b){for(;S>b;){const N=w.charCodeAt(--S);if(N!==32&&N!==9)return S+1}return b}function p(w,S,b){const N=(b==null?void 0:b.encode)||encodeURIComponent;if(!t.test(w))throw new TypeError(`argument name is invalid: ${w}`);const j=N(S);if(!e.test(j))throw new TypeError(`argument val is invalid: ${S}`);let _=w+"="+j;if(!b)return _;if(b.maxAge!==void 0){if(!Number.isInteger(b.maxAge))throw new TypeError(`option maxAge is invalid: ${b.maxAge}`);_+="; Max-Age="+b.maxAge}if(b.domain){if(!r.test(b.domain))throw new TypeError(`option domain is invalid: ${b.domain}`);_+="; Domain="+b.domain}if(b.path){if(!i.test(b.path))throw new TypeError(`option path is invalid: ${b.path}`);_+="; Path="+b.path}if(b.expires){if(!x(b.expires)||!Number.isFinite(b.expires.valueOf()))throw new TypeError(`option expires is invalid: ${b.expires}`);_+="; Expires="+b.expires.toUTCString()}if(b.httpOnly&&(_+="; HttpOnly"),b.secure&&(_+="; Secure"),b.partitioned&&(_+="; Partitioned"),b.priority)switch(typeof b.priority=="string"?b.priority.toLowerCase():void 0){case"low":_+="; Priority=Low";break;case"medium":_+="; Priority=Medium";break;case"high":_+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${b.priority}`)}if(b.sameSite)switch(typeof b.sameSite=="string"?b.sameSite.toLowerCase():b.sameSite){case!0:case"strict":_+="; SameSite=Strict";break;case"lax":_+="; SameSite=Lax";break;case"none":_+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${b.sameSite}`)}return _}function v(w){if(w.indexOf("%")===-1)return w;try{return decodeURIComponent(w)}catch{return w}}function x(w){return s.call(w)==="[object Date]"}return bl}q_();var uy="popstate";function G_(t={}){function e(i,s){let{pathname:c,search:d,hash:m}=i.location;return cm("",{pathname:c,search:d,hash:m},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(i,s){return typeof s=="string"?s:Dl(s)}return Z_(e,r,null,t)}function hn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Fr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function W_(){return Math.random().toString(36).substring(2,10)}function dy(t,e){return{usr:t.state,key:t.key,idx:e}}function cm(t,e,r=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?co(e):e,state:r,key:e&&e.key||i||W_()}}function Dl({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function co(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function Z_(t,e,r,i={}){let{window:s=document.defaultView,v5Compat:c=!1}=i,d=s.history,m="POP",f=null,p=v();p==null&&(p=0,d.replaceState({...d.state,idx:p},""));function v(){return(d.state||{idx:null}).idx}function x(){m="POP";let j=v(),_=j==null?null:j-p;p=j,f&&f({action:m,location:N.location,delta:_})}function w(j,_){m="PUSH";let C=cm(N.location,j,_);p=v()+1;let E=dy(C,p),O=N.createHref(C);try{d.pushState(E,"",O)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;s.location.assign(O)}c&&f&&f({action:m,location:N.location,delta:1})}function S(j,_){m="REPLACE";let C=cm(N.location,j,_);p=v();let E=dy(C,p),O=N.createHref(C);d.replaceState(E,"",O),c&&f&&f({action:m,location:N.location,delta:0})}function b(j){return X_(j)}let N={get action(){return m},get location(){return t(s,d)},listen(j){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(uy,x),f=j,()=>{s.removeEventListener(uy,x),f=null}},createHref(j){return e(s,j)},createURL:b,encodeLocation(j){let _=b(j);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:w,replace:S,go(j){return d.go(j)}};return N}function X_(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),hn(r,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:Dl(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=r+i),new URL(i,r)}function gw(t,e,r="/"){return K_(t,e,r,!1)}function K_(t,e,r,i){let s=typeof e=="string"?co(e):e,c=Da(s.pathname||"/",r);if(c==null)return null;let d=vw(t);Q_(d);let m=null;for(let f=0;m==null&&f<d.length;++f){let p=cN(c);m=oN(d[f],p,i)}return m}function vw(t,e=[],r=[],i=""){let s=(c,d,m)=>{let f={relativePath:m===void 0?c.path||"":m,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};f.relativePath.startsWith("/")&&(hn(f.relativePath.startsWith(i),`Absolute route path "${f.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(i.length));let p=Ta([i,f.relativePath]),v=r.concat(f);c.children&&c.children.length>0&&(hn(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),vw(c.children,e,v,p)),!(c.path==null&&!c.index)&&e.push({path:p,score:iN(p,c.index),routesMeta:v})};return t.forEach((c,d)=>{var m;if(c.path===""||!((m=c.path)!=null&&m.includes("?")))s(c,d);else for(let f of bw(c.path))s(c,d,f)}),e}function bw(t){let e=t.split("/");if(e.length===0)return[];let[r,...i]=e,s=r.endsWith("?"),c=r.replace(/\?$/,"");if(i.length===0)return s?[c,""]:[c];let d=bw(i.join("/")),m=[];return m.push(...d.map(f=>f===""?c:[c,f].join("/"))),s&&m.push(...d),m.map(f=>t.startsWith("/")&&f===""?"/":f)}function Q_(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:sN(e.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}var J_=/^:[\w-]+$/,eN=3,tN=2,nN=1,rN=10,aN=-2,fy=t=>t==="*";function iN(t,e){let r=t.split("/"),i=r.length;return r.some(fy)&&(i+=aN),e&&(i+=tN),r.filter(s=>!fy(s)).reduce((s,c)=>s+(J_.test(c)?eN:c===""?nN:rN),i)}function sN(t,e){return t.length===e.length&&t.slice(0,-1).every((i,s)=>i===e[s])?t[t.length-1]-e[e.length-1]:0}function oN(t,e,r=!1){let{routesMeta:i}=t,s={},c="/",d=[];for(let m=0;m<i.length;++m){let f=i[m],p=m===i.length-1,v=c==="/"?e:e.slice(c.length)||"/",x=Bu({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},v),w=f.route;if(!x&&p&&r&&!i[i.length-1].route.index&&(x=Bu({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},v)),!x)return null;Object.assign(s,x.params),d.push({params:s,pathname:Ta([c,x.pathname]),pathnameBase:hN(Ta([c,x.pathnameBase])),route:w}),x.pathnameBase!=="/"&&(c=Ta([c,x.pathnameBase]))}return d}function Bu(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,i]=lN(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let c=s[0],d=c.replace(/(.)\/+$/,"$1"),m=s.slice(1);return{params:i.reduce((p,{paramName:v,isOptional:x},w)=>{if(v==="*"){let b=m[w]||"";d=c.slice(0,c.length-b.length).replace(/(.)\/+$/,"$1")}const S=m[w];return x&&!S?p[v]=void 0:p[v]=(S||"").replace(/%2F/g,"/"),p},{}),pathname:c,pathnameBase:d,pattern:t}}function lN(t,e=!1,r=!0){Fr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,m,f)=>(i.push({paramName:m,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function cN(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Fr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Da(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,i=t.charAt(r);return i&&i!=="/"?null:t.slice(r)||"/"}function uN(t,e="/"){let{pathname:r,search:i="",hash:s=""}=typeof t=="string"?co(t):t;return{pathname:r?r.startsWith("/")?r:dN(r,e):e,search:mN(i),hash:pN(s)}}function dN(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Ah(t,e,r,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function fN(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Zm(t){let e=fN(t);return e.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase)}function Xm(t,e,r,i=!1){let s;typeof t=="string"?s=co(t):(s={...t},hn(!s.pathname||!s.pathname.includes("?"),Ah("?","pathname","search",s)),hn(!s.pathname||!s.pathname.includes("#"),Ah("#","pathname","hash",s)),hn(!s.search||!s.search.includes("#"),Ah("#","search","hash",s)));let c=t===""||s.pathname==="",d=c?"/":s.pathname,m;if(d==null)m=r;else{let x=e.length-1;if(!i&&d.startsWith("..")){let w=d.split("/");for(;w[0]==="..";)w.shift(),x-=1;s.pathname=w.join("/")}m=x>=0?e[x]:"/"}let f=uN(s,m),p=d&&d!=="/"&&d.endsWith("/"),v=(c||d===".")&&r.endsWith("/");return!f.pathname.endsWith("/")&&(p||v)&&(f.pathname+="/"),f}var Ta=t=>t.join("/").replace(/\/\/+/g,"/"),hN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),mN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,pN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function gN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var yw=["POST","PUT","PATCH","DELETE"];new Set(yw);var vN=["GET",...yw];new Set(vN);var uo=h.createContext(null);uo.displayName="DataRouter";var cd=h.createContext(null);cd.displayName="DataRouterState";var xw=h.createContext({isTransitioning:!1});xw.displayName="ViewTransition";var bN=h.createContext(new Map);bN.displayName="Fetchers";var yN=h.createContext(null);yN.displayName="Await";var Yr=h.createContext(null);Yr.displayName="Navigation";var Hl=h.createContext(null);Hl.displayName="Location";var qr=h.createContext({outlet:null,matches:[],isDataRoute:!1});qr.displayName="Route";var Km=h.createContext(null);Km.displayName="RouteError";function xN(t,{relative:e}={}){hn(fo(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:i}=h.useContext(Yr),{hash:s,pathname:c,search:d}=Fl(t,{relative:e}),m=c;return r!=="/"&&(m=c==="/"?r:Ta([r,c])),i.createHref({pathname:m,search:d,hash:s})}function fo(){return h.useContext(Hl)!=null}function fa(){return hn(fo(),"useLocation() may be used only in the context of a <Router> component."),h.useContext(Hl).location}var ww="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Sw(t){h.useContext(Yr).static||h.useLayoutEffect(t)}function ud(){let{isDataRoute:t}=h.useContext(qr);return t?AN():wN()}function wN(){hn(fo(),"useNavigate() may be used only in the context of a <Router> component.");let t=h.useContext(uo),{basename:e,navigator:r}=h.useContext(Yr),{matches:i}=h.useContext(qr),{pathname:s}=fa(),c=JSON.stringify(Zm(i)),d=h.useRef(!1);return Sw(()=>{d.current=!0}),h.useCallback((f,p={})=>{if(Fr(d.current,ww),!d.current)return;if(typeof f=="number"){r.go(f);return}let v=Xm(f,JSON.parse(c),s,p.relative==="path");t==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Ta([e,v.pathname])),(p.replace?r.replace:r.push)(v,p.state,p)},[e,r,c,s,t])}h.createContext(null);function dd(){let{matches:t}=h.useContext(qr),e=t[t.length-1];return e?e.params:{}}function Fl(t,{relative:e}={}){let{matches:r}=h.useContext(qr),{pathname:i}=fa(),s=JSON.stringify(Zm(r));return h.useMemo(()=>Xm(t,JSON.parse(s),i,e==="path"),[t,s,i,e])}function SN(t,e){return jw(t,e)}function jw(t,e,r,i){var C;hn(fo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:c}=h.useContext(Yr),{matches:d}=h.useContext(qr),m=d[d.length-1],f=m?m.params:{},p=m?m.pathname:"/",v=m?m.pathnameBase:"/",x=m&&m.route;{let E=x&&x.path||"";_w(p,!x||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let w=fa(),S;if(e){let E=typeof e=="string"?co(e):e;hn(v==="/"||((C=E.pathname)==null?void 0:C.startsWith(v)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${E.pathname}" was given in the \`location\` prop.`),S=E}else S=w;let b=S.pathname||"/",N=b;if(v!=="/"){let E=v.replace(/^\//,"").split("/");N="/"+b.replace(/^\//,"").split("/").slice(E.length).join("/")}let j=!c&&r&&r.matches&&r.matches.length>0?r.matches:gw(t,{pathname:N});Fr(x||j!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),Fr(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=EN(j&&j.map(E=>Object.assign({},E,{params:Object.assign({},f,E.params),pathname:Ta([v,s.encodeLocation?s.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?v:Ta([v,s.encodeLocation?s.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),d,r,i);return e&&_?h.createElement(Hl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},_):_}function jN(){let t=TN(),e=gN(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},c={padding:"2px 4px",backgroundColor:i},d=null;return console.error("Error handled by React Router default ErrorBoundary:",t),d=h.createElement(h.Fragment,null,h.createElement("p",null," Hey developer "),h.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",h.createElement("code",{style:c},"ErrorBoundary")," or"," ",h.createElement("code",{style:c},"errorElement")," prop on your route.")),h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},e),r?h.createElement("pre",{style:s},r):null,d)}var _N=h.createElement(jN,null),NN=class extends h.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?h.createElement(qr.Provider,{value:this.props.routeContext},h.createElement(Km.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function CN({routeContext:t,match:e,children:r}){let i=h.useContext(uo);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),h.createElement(qr.Provider,{value:t},r)}function EN(t,e=[],r=null,i=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let s=t,c=r==null?void 0:r.errors;if(c!=null){let f=s.findIndex(p=>p.route.id&&(c==null?void 0:c[p.route.id])!==void 0);hn(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),s=s.slice(0,Math.min(s.length,f+1))}let d=!1,m=-1;if(r)for(let f=0;f<s.length;f++){let p=s[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(m=f),p.route.id){let{loaderData:v,errors:x}=r,w=p.route.loader&&!v.hasOwnProperty(p.route.id)&&(!x||x[p.route.id]===void 0);if(p.route.lazy||w){d=!0,m>=0?s=s.slice(0,m+1):s=[s[0]];break}}}return s.reduceRight((f,p,v)=>{let x,w=!1,S=null,b=null;r&&(x=c&&p.route.id?c[p.route.id]:void 0,S=p.route.errorElement||_N,d&&(m<0&&v===0?(_w("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,b=null):m===v&&(w=!0,b=p.route.hydrateFallbackElement||null)));let N=e.concat(s.slice(0,v+1)),j=()=>{let _;return x?_=S:w?_=b:p.route.Component?_=h.createElement(p.route.Component,null):p.route.element?_=p.route.element:_=f,h.createElement(CN,{match:p,routeContext:{outlet:f,matches:N,isDataRoute:r!=null},children:_})};return r&&(p.route.ErrorBoundary||p.route.errorElement||v===0)?h.createElement(NN,{location:r.location,revalidation:r.revalidation,component:S,error:x,children:j(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):j()},null)}function Qm(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ON(t){let e=h.useContext(uo);return hn(e,Qm(t)),e}function MN(t){let e=h.useContext(cd);return hn(e,Qm(t)),e}function LN(t){let e=h.useContext(qr);return hn(e,Qm(t)),e}function Jm(t){let e=LN(t),r=e.matches[e.matches.length-1];return hn(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function kN(){return Jm("useRouteId")}function TN(){var i;let t=h.useContext(Km),e=MN("useRouteError"),r=Jm("useRouteError");return t!==void 0?t:(i=e.errors)==null?void 0:i[r]}function AN(){let{router:t}=ON("useNavigate"),e=Jm("useNavigate"),r=h.useRef(!1);return Sw(()=>{r.current=!0}),h.useCallback(async(s,c={})=>{Fr(r.current,ww),r.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...c}))},[t,e])}var hy={};function _w(t,e,r){!e&&!hy[t]&&(hy[t]=!0,Fr(!1,r))}h.memo(DN);function DN({routes:t,future:e,state:r}){return jw(t,void 0,r,e)}function RN({to:t,replace:e,state:r,relative:i}){hn(fo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=h.useContext(Yr);Fr(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=h.useContext(qr),{pathname:d}=fa(),m=ud(),f=Xm(t,Zm(c),d,i==="path"),p=JSON.stringify(f);return h.useEffect(()=>{m(JSON.parse(p),{replace:e,state:r,relative:i})},[m,p,i,e,r]),null}function cr(t){hn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function PN({basename:t="/",children:e=null,location:r,navigationType:i="POP",navigator:s,static:c=!1}){hn(!fo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=t.replace(/^\/*/,"/"),m=h.useMemo(()=>({basename:d,navigator:s,static:c,future:{}}),[d,s,c]);typeof r=="string"&&(r=co(r));let{pathname:f="/",search:p="",hash:v="",state:x=null,key:w="default"}=r,S=h.useMemo(()=>{let b=Da(f,d);return b==null?null:{location:{pathname:b,search:p,hash:v,state:x,key:w},navigationType:i}},[d,f,p,v,x,w,i]);return Fr(S!=null,`<Router basename="${d}"> is not able to match the URL "${f}${p}${v}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:h.createElement(Yr.Provider,{value:m},h.createElement(Hl.Provider,{children:e,value:S}))}function zN({children:t,location:e}){return SN(um(t),e)}function um(t,e=[]){let r=[];return h.Children.forEach(t,(i,s)=>{if(!h.isValidElement(i))return;let c=[...e,s];if(i.type===h.Fragment){r.push.apply(r,um(i.props.children,c));return}hn(i.type===cr,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),hn(!i.props.index||!i.props.children,"An index route cannot have child routes.");let d={id:i.props.id||c.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(d.children=um(i.props.children,c)),r.push(d)}),r}var Mu="get",Lu="application/x-www-form-urlencoded";function fd(t){return t!=null&&typeof t.tagName=="string"}function $N(t){return fd(t)&&t.tagName.toLowerCase()==="button"}function UN(t){return fd(t)&&t.tagName.toLowerCase()==="form"}function VN(t){return fd(t)&&t.tagName.toLowerCase()==="input"}function IN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function BN(t,e){return t.button===0&&(!e||e==="_self")&&!IN(t)}var hu=null;function HN(){if(hu===null)try{new FormData(document.createElement("form"),0),hu=!1}catch{hu=!0}return hu}var FN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Dh(t){return t!=null&&!FN.has(t)?(Fr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Lu}"`),null):t}function YN(t,e){let r,i,s,c,d;if(UN(t)){let m=t.getAttribute("action");i=m?Da(m,e):null,r=t.getAttribute("method")||Mu,s=Dh(t.getAttribute("enctype"))||Lu,c=new FormData(t)}else if($N(t)||VN(t)&&(t.type==="submit"||t.type==="image")){let m=t.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=t.getAttribute("formaction")||m.getAttribute("action");if(i=f?Da(f,e):null,r=t.getAttribute("formmethod")||m.getAttribute("method")||Mu,s=Dh(t.getAttribute("formenctype"))||Dh(m.getAttribute("enctype"))||Lu,c=new FormData(m,t),!HN()){let{name:p,type:v,value:x}=t;if(v==="image"){let w=p?`${p}.`:"";c.append(`${w}x`,"0"),c.append(`${w}y`,"0")}else p&&c.append(p,x)}}else{if(fd(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Mu,i=null,s=Lu,d=t}return c&&s==="text/plain"&&(d=c,c=void 0),{action:i,method:r.toLowerCase(),encType:s,formData:c,body:d}}function ep(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function qN(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function GN(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function WN(t,e,r){let i=await Promise.all(t.map(async s=>{let c=e.routes[s.route.id];if(c){let d=await qN(c,r);return d.links?d.links():[]}return[]}));return QN(i.flat(1).filter(GN).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function my(t,e,r,i,s,c){let d=(f,p)=>r[p]?f.route.id!==r[p].route.id:!0,m=(f,p)=>{var v;return r[p].pathname!==f.pathname||((v=r[p].route.path)==null?void 0:v.endsWith("*"))&&r[p].params["*"]!==f.params["*"]};return c==="assets"?e.filter((f,p)=>d(f,p)||m(f,p)):c==="data"?e.filter((f,p)=>{var x;let v=i.routes[f.route.id];if(!v||!v.hasLoader)return!1;if(d(f,p)||m(f,p))return!0;if(f.route.shouldRevalidate){let w=f.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((x=r[0])==null?void 0:x.params)||{},nextUrl:new URL(t,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function ZN(t,e,{includeHydrateFallback:r}={}){return XN(t.map(i=>{let s=e.routes[i.route.id];if(!s)return[];let c=[s.module];return s.clientActionModule&&(c=c.concat(s.clientActionModule)),s.clientLoaderModule&&(c=c.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(c=c.concat(s.hydrateFallbackModule)),s.imports&&(c=c.concat(s.imports)),c}).flat(1))}function XN(t){return[...new Set(t)]}function KN(t){let e={},r=Object.keys(t).sort();for(let i of r)e[i]=t[i];return e}function QN(t,e){let r=new Set;return new Set(e),t.reduce((i,s)=>{let c=JSON.stringify(KN(s));return r.has(c)||(r.add(c),i.push({key:c,link:s})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var JN=new Set([100,101,204,205]);function eC(t,e){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname="_root.data":e&&Da(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.data`:r.pathname=`${r.pathname.replace(/\/$/,"")}.data`,r}function Nw(){let t=h.useContext(uo);return ep(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function tC(){let t=h.useContext(cd);return ep(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var tp=h.createContext(void 0);tp.displayName="FrameworkContext";function Cw(){let t=h.useContext(tp);return ep(t,"You must render this element inside a <HydratedRouter> element"),t}function nC(t,e){let r=h.useContext(tp),[i,s]=h.useState(!1),[c,d]=h.useState(!1),{onFocus:m,onBlur:f,onMouseEnter:p,onMouseLeave:v,onTouchStart:x}=e,w=h.useRef(null);h.useEffect(()=>{if(t==="render"&&d(!0),t==="viewport"){let N=_=>{_.forEach(C=>{d(C.isIntersecting)})},j=new IntersectionObserver(N,{threshold:.5});return w.current&&j.observe(w.current),()=>{j.disconnect()}}},[t]),h.useEffect(()=>{if(i){let N=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(N)}}},[i]);let S=()=>{s(!0)},b=()=>{s(!1),d(!1)};return r?t!=="intent"?[c,w,{}]:[c,w,{onFocus:yl(m,S),onBlur:yl(f,b),onMouseEnter:yl(p,S),onMouseLeave:yl(v,b),onTouchStart:yl(x,S)}]:[!1,w,{}]}function yl(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function rC({page:t,...e}){let{router:r}=Nw(),i=h.useMemo(()=>gw(r.routes,t,r.basename),[r.routes,t,r.basename]);return i?h.createElement(iC,{page:t,matches:i,...e}):null}function aC(t){let{manifest:e,routeModules:r}=Cw(),[i,s]=h.useState([]);return h.useEffect(()=>{let c=!1;return WN(t,e,r).then(d=>{c||s(d)}),()=>{c=!0}},[t,e,r]),i}function iC({page:t,matches:e,...r}){let i=fa(),{manifest:s,routeModules:c}=Cw(),{basename:d}=Nw(),{loaderData:m,matches:f}=tC(),p=h.useMemo(()=>my(t,e,f,s,i,"data"),[t,e,f,s,i]),v=h.useMemo(()=>my(t,e,f,s,i,"assets"),[t,e,f,s,i]),x=h.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let b=new Set,N=!1;if(e.forEach(_=>{var E;let C=s.routes[_.route.id];!C||!C.hasLoader||(!p.some(O=>O.route.id===_.route.id)&&_.route.id in m&&((E=c[_.route.id])!=null&&E.shouldRevalidate)||C.hasClientLoader?N=!0:b.add(_.route.id))}),b.size===0)return[];let j=eC(t,d);return N&&b.size>0&&j.searchParams.set("_routes",e.filter(_=>b.has(_.route.id)).map(_=>_.route.id).join(",")),[j.pathname+j.search]},[d,m,i,s,p,e,t,c]),w=h.useMemo(()=>ZN(v,s),[v,s]),S=aC(v);return h.createElement(h.Fragment,null,x.map(b=>h.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...r})),w.map(b=>h.createElement("link",{key:b,rel:"modulepreload",href:b,...r})),S.map(({key:b,link:N})=>h.createElement("link",{key:b,...N})))}function sC(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var Ew=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ew&&(window.__reactRouterVersion="7.6.0")}catch{}function oC({basename:t,children:e,window:r}){let i=h.useRef();i.current==null&&(i.current=G_({window:r,v5Compat:!0}));let s=i.current,[c,d]=h.useState({action:s.action,location:s.location}),m=h.useCallback(f=>{h.startTransition(()=>d(f))},[d]);return h.useLayoutEffect(()=>s.listen(m),[s,m]),h.createElement(PN,{basename:t,children:e,location:c.location,navigationType:c.action,navigator:s})}var Ow=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Dr=h.forwardRef(function({onClick:e,discover:r="render",prefetch:i="none",relative:s,reloadDocument:c,replace:d,state:m,target:f,to:p,preventScrollReset:v,viewTransition:x,...w},S){let{basename:b}=h.useContext(Yr),N=typeof p=="string"&&Ow.test(p),j,_=!1;if(typeof p=="string"&&N&&(j=p,Ew))try{let D=new URL(window.location.href),Y=p.startsWith("//")?new URL(D.protocol+p):new URL(p),G=Da(Y.pathname,b);Y.origin===D.origin&&G!=null?p=G+Y.search+Y.hash:_=!0}catch{Fr(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=xN(p,{relative:s}),[E,O,M]=nC(i,w),R=dC(p,{replace:d,state:m,target:f,preventScrollReset:v,relative:s,viewTransition:x});function I(D){e&&e(D),D.defaultPrevented||R(D)}let H=h.createElement("a",{...w,...M,href:j||C,onClick:_||c?e:I,ref:sC(S,O),target:f,"data-discover":!N&&r==="render"?"true":void 0});return E&&!N?h.createElement(h.Fragment,null,H,h.createElement(rC,{page:C})):H});Dr.displayName="Link";var lC=h.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:i="",end:s=!1,style:c,to:d,viewTransition:m,children:f,...p},v){let x=Fl(d,{relative:p.relative}),w=fa(),S=h.useContext(cd),{navigator:b,basename:N}=h.useContext(Yr),j=S!=null&&gC(x)&&m===!0,_=b.encodeLocation?b.encodeLocation(x).pathname:x.pathname,C=w.pathname,E=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;r||(C=C.toLowerCase(),E=E?E.toLowerCase():null,_=_.toLowerCase()),E&&N&&(E=Da(E,N)||E);const O=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let M=C===_||!s&&C.startsWith(_)&&C.charAt(O)==="/",R=E!=null&&(E===_||!s&&E.startsWith(_)&&E.charAt(_.length)==="/"),I={isActive:M,isPending:R,isTransitioning:j},H=M?e:void 0,D;typeof i=="function"?D=i(I):D=[i,M?"active":null,R?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let Y=typeof c=="function"?c(I):c;return h.createElement(Dr,{...p,"aria-current":H,className:D,ref:v,style:Y,to:d,viewTransition:m},typeof f=="function"?f(I):f)});lC.displayName="NavLink";var cC=h.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:i,replace:s,state:c,method:d=Mu,action:m,onSubmit:f,relative:p,preventScrollReset:v,viewTransition:x,...w},S)=>{let b=mC(),N=pC(m,{relative:p}),j=d.toLowerCase()==="get"?"get":"post",_=typeof m=="string"&&Ow.test(m),C=E=>{if(f&&f(E),E.defaultPrevented)return;E.preventDefault();let O=E.nativeEvent.submitter,M=(O==null?void 0:O.getAttribute("formmethod"))||d;b(O||E.currentTarget,{fetcherKey:e,method:M,navigate:r,replace:s,state:c,relative:p,preventScrollReset:v,viewTransition:x})};return h.createElement("form",{ref:S,method:j,action:N,onSubmit:i?f:C,...w,"data-discover":!_&&t==="render"?"true":void 0})});cC.displayName="Form";function uC(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Mw(t){let e=h.useContext(uo);return hn(e,uC(t)),e}function dC(t,{target:e,replace:r,state:i,preventScrollReset:s,relative:c,viewTransition:d}={}){let m=ud(),f=fa(),p=Fl(t,{relative:c});return h.useCallback(v=>{if(BN(v,e)){v.preventDefault();let x=r!==void 0?r:Dl(f)===Dl(p);m(t,{replace:x,state:i,preventScrollReset:s,relative:c,viewTransition:d})}},[f,m,p,r,i,e,t,s,c,d])}var fC=0,hC=()=>`__${String(++fC)}__`;function mC(){let{router:t}=Mw("useSubmit"),{basename:e}=h.useContext(Yr),r=kN();return h.useCallback(async(i,s={})=>{let{action:c,method:d,encType:m,formData:f,body:p}=YN(i,e);if(s.navigate===!1){let v=s.fetcherKey||hC();await t.fetch(v,r,s.action||c,{preventScrollReset:s.preventScrollReset,formData:f,body:p,formMethod:s.method||d,formEncType:s.encType||m,flushSync:s.flushSync})}else await t.navigate(s.action||c,{preventScrollReset:s.preventScrollReset,formData:f,body:p,formMethod:s.method||d,formEncType:s.encType||m,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,r])}function pC(t,{relative:e}={}){let{basename:r}=h.useContext(Yr),i=h.useContext(qr);hn(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),c={...Fl(t||".",{relative:e})},d=fa();if(t==null){c.search=d.search;let m=new URLSearchParams(c.search),f=m.getAll("index");if(f.some(v=>v==="")){m.delete("index"),f.filter(x=>x).forEach(x=>m.append("index",x));let v=m.toString();c.search=v?`?${v}`:""}}return(!t||t===".")&&s.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(c.pathname=c.pathname==="/"?r:Ta([r,c.pathname])),Dl(c)}function gC(t,e={}){let r=h.useContext(xw);hn(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Mw("useViewTransitionState"),s=Fl(t,{relative:e.relative});if(!r.isTransitioning)return!1;let c=Da(r.currentLocation.pathname,i)||r.currentLocation.pathname,d=Da(r.nextLocation.pathname,i)||r.nextLocation.pathname;return Bu(s.pathname,d)!=null||Bu(s.pathname,c)!=null}[...JN];var cs=pw();function Lw(t){var e,r,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=Lw(t[e]))&&(i&&(i+=" "),i+=r)}else for(r in t)t[r]&&(i&&(i+=" "),i+=r);return i}function ho(){for(var t,e,r=0,i="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=Lw(t))&&(i&&(i+=" "),i+=e);return i}var Rh,py;function vC(){if(py)return Rh;py=1;const t=(f,p,v,x)=>{if(v==="length"||v==="prototype"||v==="arguments"||v==="caller")return;const w=Object.getOwnPropertyDescriptor(f,v),S=Object.getOwnPropertyDescriptor(p,v);!e(w,S)&&x||Object.defineProperty(f,v,S)},e=function(f,p){return f===void 0||f.configurable||f.writable===p.writable&&f.enumerable===p.enumerable&&f.configurable===p.configurable&&(f.writable||f.value===p.value)},r=(f,p)=>{const v=Object.getPrototypeOf(p);v!==Object.getPrototypeOf(f)&&Object.setPrototypeOf(f,v)},i=(f,p)=>`/* Wrapped ${f}*/
${p}`,s=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),c=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),d=(f,p,v)=>{const x=v===""?"":`with ${v.trim()}() `,w=i.bind(null,x,p.toString());Object.defineProperty(w,"name",c),Object.defineProperty(f,"toString",{...s,value:w})};return Rh=(f,p,{ignoreNonConfigurable:v=!1}={})=>{const{name:x}=f;for(const w of Reflect.ownKeys(p))t(f,p,w,v);return r(f,p),d(f,p,x),f},Rh}var Ol={exports:{}},Ph,gy;function bC(){return gy||(gy=1,Ph=()=>{const t={};return t.promise=new Promise((e,r)=>{t.resolve=e,t.reject=r}),t}),Ph}var mu=Ol.exports,vy;function yC(){return vy||(vy=1,function(t,e){var r=mu&&mu.__awaiter||function(d,m,f,p){return new(f||(f=Promise))(function(v,x){function w(N){try{b(p.next(N))}catch(j){x(j)}}function S(N){try{b(p.throw(N))}catch(j){x(j)}}function b(N){N.done?v(N.value):new f(function(j){j(N.value)}).then(w,S)}b((p=p.apply(d,m||[])).next())})},i=mu&&mu.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0});const s=i(bC());function c(d,m="maxAge"){let f,p,v;const x=()=>r(this,void 0,void 0,function*(){if(f!==void 0)return;const b=N=>r(this,void 0,void 0,function*(){v=s.default();const j=N[1][m]-Date.now();if(j<=0){d.delete(N[0]),v.resolve();return}return f=N[0],p=setTimeout(()=>{d.delete(N[0]),v&&v.resolve()},j),typeof p.unref=="function"&&p.unref(),v.promise});try{for(const N of d)yield b(N)}catch{}f=void 0}),w=()=>{f=void 0,p!==void 0&&(clearTimeout(p),p=void 0),v!==void 0&&(v.reject(void 0),v=void 0)},S=d.set.bind(d);return d.set=(b,N)=>{d.has(b)&&d.delete(b);const j=S(b,N);return f&&f===b&&w(),x(),j},x(),d}e.default=c,t.exports=c,t.exports.default=c}(Ol,Ol.exports)),Ol.exports}var zh,by;function xC(){if(by)return zh;by=1;const t=vC(),e=yC(),r=new WeakMap,i=new WeakMap,s=(c,{cacheKey:d,cache:m=new Map,maxAge:f}={})=>{typeof f=="number"&&e(m);const p=function(...v){const x=d?d(v):v[0],w=m.get(x);if(w)return w.data;const S=c.apply(this,v);return m.set(x,{data:S,maxAge:f?Date.now()+f:Number.POSITIVE_INFINITY}),S};return t(p,c,{ignoreNonConfigurable:!0}),i.set(p,m),p};return s.decorator=(c={})=>(d,m,f)=>{const p=d[m];if(typeof p!="function")throw new TypeError("The decorated value must be a function");delete f.value,delete f.writable,f.get=function(){if(!r.has(this)){const v=s(p,c);return r.set(this,v),v}return r.get(this)}},s.clear=c=>{const d=i.get(c);if(!d)throw new TypeError("Can't clear a function that was not memoized!");if(typeof d.clear!="function")throw new TypeError("The cache Map can't be cleared!");d.clear()},zh=s,zh}var wC=xC();const kw=Gm(wC);function SC(t){return typeof t=="string"}function jC(t,e,r){return r.indexOf(t)===e}function _C(t){return t.toLowerCase()===t}function yy(t){return t.indexOf(",")===-1?t:t.split(",")}function dm(t){if(!t)return t;if(t==="C"||t==="posix"||t==="POSIX")return"en-US";if(t.indexOf(".")!==-1){var e=t.split(".")[0],r=e===void 0?"":e;return dm(r)}if(t.indexOf("@")!==-1){var i=t.split("@")[0],r=i===void 0?"":i;return dm(r)}if(t.indexOf("-")===-1||!_C(t))return t;var s=t.split("-"),c=s[0],d=s[1],m=d===void 0?"":d;return"".concat(c,"-").concat(m.toUpperCase())}function NC(t){var e=t===void 0?{}:t,r=e.useFallbackLocale,i=r===void 0?!0:r,s=e.fallbackLocale,c=s===void 0?"en-US":s,d=[];if(typeof navigator<"u"){for(var m=navigator.languages||[],f=[],p=0,v=m;p<v.length;p++){var x=v[p];f=f.concat(yy(x))}var w=navigator.language,S=w&&yy(w);d=d.concat(f,S)}return i&&d.push(c),d.filter(SC).map(dm).filter(jC)}var CC=kw(NC,{cacheKey:JSON.stringify});function EC(t){return CC(t)[0]||null}var Tw=kw(EC,{cacheKey:JSON.stringify});function za(t,e,r){return function(s,c){c===void 0&&(c=r);var d=t(s)+c;return e(d)}}function Yl(t){return function(r){return new Date(t(r).getTime()-1)}}function ql(t,e){return function(i){return[t(i),e(i)]}}function mn(t){if(t instanceof Date)return t.getFullYear();if(typeof t=="number")return t;var e=parseInt(t,10);if(typeof t=="string"&&!isNaN(e))return e;throw new Error("Failed to get year from date: ".concat(t,"."))}function Ei(t){if(t instanceof Date)return t.getMonth();throw new Error("Failed to get month from date: ".concat(t,"."))}function hd(t){if(t instanceof Date)return t.getDate();throw new Error("Failed to get year from date: ".concat(t,"."))}function mo(t){var e=mn(t),r=e+(-e+1)%100,i=new Date;return i.setFullYear(r,0,1),i.setHours(0,0,0,0),i}var OC=za(mn,mo,-100),Aw=za(mn,mo,100),np=Yl(Aw),MC=za(mn,np,-100),Dw=ql(mo,np);function Oi(t){var e=mn(t),r=e+(-e+1)%10,i=new Date;return i.setFullYear(r,0,1),i.setHours(0,0,0,0),i}var Rw=za(mn,Oi,-10),rp=za(mn,Oi,10),md=Yl(rp),Pw=za(mn,md,-10),zw=ql(Oi,md);function po(t){var e=mn(t),r=new Date;return r.setFullYear(e,0,1),r.setHours(0,0,0,0),r}var $w=za(mn,po,-1),ap=za(mn,po,1),pd=Yl(ap),Uw=za(mn,pd,-1),LC=ql(po,pd);function ip(t,e){return function(i,s){s===void 0&&(s=e);var c=mn(i),d=Ei(i)+s,m=new Date;return m.setFullYear(c,d,1),m.setHours(0,0,0,0),t(m)}}function us(t){var e=mn(t),r=Ei(t),i=new Date;return i.setFullYear(e,r,1),i.setHours(0,0,0,0),i}var Vw=ip(us,-1),sp=ip(us,1),Gl=Yl(sp),Iw=ip(Gl,-1),kC=ql(us,Gl);function TC(t,e){return function(i,s){s===void 0&&(s=e);var c=mn(i),d=Ei(i),m=hd(i)+s,f=new Date;return f.setFullYear(c,d,m),f.setHours(0,0,0,0),t(f)}}function Wl(t){var e=mn(t),r=Ei(t),i=hd(t),s=new Date;return s.setFullYear(e,r,i),s.setHours(0,0,0,0),s}var AC=TC(Wl,1),op=Yl(AC),DC=ql(Wl,op);function Bw(t){return hd(Gl(t))}var Fn={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},RC={gregory:["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],hebrew:["he","he-IL"],islamic:["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"]},lp=[0,1,2,3,4,5,6],$h=new Map;function PC(t){return function(r,i){var s=r||Tw();$h.has(s)||$h.set(s,new Map);var c=$h.get(s);return c.has(t)||c.set(t,new Intl.DateTimeFormat(s||void 0,t).format),c.get(t)(i)}}function zC(t){var e=new Date(t);return new Date(e.setHours(12))}function ds(t){return function(e,r){return PC(t)(e,zC(r))}}var $C={day:"numeric"},UC={day:"numeric",month:"long",year:"numeric"},VC={month:"long"},IC={month:"long",year:"numeric"},BC={weekday:"short"},HC={weekday:"long"},FC={year:"numeric"},YC=ds($C),qC=ds(UC),GC=ds(VC),Hw=ds(IC),WC=ds(BC),ZC=ds(HC),gd=ds(FC),XC=lp[0],KC=lp[5],xy=lp[6];function Rl(t,e){e===void 0&&(e=Fn.ISO_8601);var r=t.getDay();switch(e){case Fn.ISO_8601:return(r+6)%7;case Fn.ISLAMIC:return(r+1)%7;case Fn.HEBREW:case Fn.GREGORY:return r;default:throw new Error("Unsupported calendar type.")}}function QC(t){var e=mo(t);return mn(e)}function JC(t){var e=Oi(t);return mn(e)}function fm(t,e){e===void 0&&(e=Fn.ISO_8601);var r=mn(t),i=Ei(t),s=t.getDate()-Rl(t,e);return new Date(r,i,s)}function eE(t,e){e===void 0&&(e=Fn.ISO_8601);var r=e===Fn.GREGORY?Fn.GREGORY:Fn.ISO_8601,i=fm(t,e),s=mn(t)+1,c,d;do c=new Date(s,0,r===Fn.ISO_8601?4:1),d=fm(c,e),s-=1;while(t<d);return Math.round((i.getTime()-d.getTime())/(864e5*7))+1}function is(t,e){switch(t){case"century":return mo(e);case"decade":return Oi(e);case"year":return po(e);case"month":return us(e);case"day":return Wl(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function tE(t,e){switch(t){case"century":return OC(e);case"decade":return Rw(e);case"year":return $w(e);case"month":return Vw(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function Fw(t,e){switch(t){case"century":return Aw(e);case"decade":return rp(e);case"year":return ap(e);case"month":return sp(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function nE(t,e){switch(t){case"decade":return Rw(e,-100);case"year":return $w(e,-10);case"month":return Vw(e,-12);default:throw new Error("Invalid rangeType: ".concat(t))}}function rE(t,e){switch(t){case"decade":return rp(e,100);case"year":return ap(e,10);case"month":return sp(e,12);default:throw new Error("Invalid rangeType: ".concat(t))}}function Yw(t,e){switch(t){case"century":return np(e);case"decade":return md(e);case"year":return pd(e);case"month":return Gl(e);case"day":return op(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function aE(t,e){switch(t){case"century":return MC(e);case"decade":return Pw(e);case"year":return Uw(e);case"month":return Iw(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function iE(t,e){switch(t){case"decade":return Pw(e,-100);case"year":return Uw(e,-10);case"month":return Iw(e,-12);default:throw new Error("Invalid rangeType: ".concat(t))}}function wy(t,e){switch(t){case"century":return Dw(e);case"decade":return zw(e);case"year":return LC(e);case"month":return kC(e);case"day":return DC(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function sE(t,e,r){var i=[e,r].sort(function(s,c){return s.getTime()-c.getTime()});return[is(t,i[0]),Yw(t,i[1])]}function qw(t,e,r){return r.map(function(i){return(e||gd)(t,i)}).join("  ")}function oE(t,e,r){return qw(t,e,Dw(r))}function Gw(t,e,r){return qw(t,e,zw(r))}function lE(t){return t.getDay()===new Date().getDay()}function Ww(t,e){e===void 0&&(e=Fn.ISO_8601);var r=t.getDay();switch(e){case Fn.ISLAMIC:case Fn.HEBREW:return r===KC||r===xy;case Fn.ISO_8601:case Fn.GREGORY:return r===xy||r===XC;default:throw new Error("Unsupported calendar type.")}}var ra="react-calendar__navigation";function cE(t){var e=t.activeStartDate,r=t.drillUp,i=t.formatMonthYear,s=i===void 0?Hw:i,c=t.formatYear,d=c===void 0?gd:c,m=t.locale,f=t.maxDate,p=t.minDate,v=t.navigationAriaLabel,x=v===void 0?"":v,w=t.navigationAriaLive,S=t.navigationLabel,b=t.next2AriaLabel,N=b===void 0?"":b,j=t.next2Label,_=j===void 0?"":j,C=t.nextAriaLabel,E=C===void 0?"":C,O=t.nextLabel,M=O===void 0?"":O,R=t.prev2AriaLabel,I=R===void 0?"":R,H=t.prev2Label,D=H===void 0?"":H,Y=t.prevAriaLabel,G=Y===void 0?"":Y,ie=t.prevLabel,Oe=ie===void 0?"":ie,ce=t.setActiveStartDate,te=t.showDoubleView,k=t.view,z=t.views,U=z.indexOf(k)>0,K=k!=="century",T=tE(k,e),A=K?nE(k,e):void 0,F=Fw(k,e),V=K?rE(k,e):void 0,q=function(){if(T.getFullYear()<0)return!0;var ke=aE(k,e);return p&&p>=ke}(),Q=K&&function(){if(A.getFullYear()<0)return!0;var ke=iE(k,e);return p&&p>=ke}(),be=f&&f<F,Ce=K&&f&&f<V;function X(){ce(T,"prev")}function W(){ce(A,"prev2")}function J(){ce(F,"next")}function ue(){ce(V,"next2")}function Z(ke){var Be=function(){switch(k){case"century":return oE(m,d,ke);case"decade":return Gw(m,d,ke);case"year":return d(m,ke);case"month":return s(m,ke);default:throw new Error("Invalid view: ".concat(k,"."))}}();return S?S({date:ke,label:Be,locale:m||Tw()||void 0,view:k}):Be}function _e(){var ke="".concat(ra,"__label");return l.jsxs("button",{"aria-label":x,"aria-live":w,className:ke,disabled:!U,onClick:r,style:{flexGrow:1},type:"button",children:[l.jsx("span",{className:"".concat(ke,"__labelText ").concat(ke,"__labelText--from"),children:Z(e)}),te?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"".concat(ke,"__divider"),children:"  "}),l.jsx("span",{className:"".concat(ke,"__labelText ").concat(ke,"__labelText--to"),children:Z(F)})]}):null]})}return l.jsxs("div",{className:ra,children:[D!==null&&K?l.jsx("button",{"aria-label":I,className:"".concat(ra,"__arrow ").concat(ra,"__prev2-button"),disabled:Q,onClick:W,type:"button",children:D}):null,Oe!==null&&l.jsx("button",{"aria-label":G,className:"".concat(ra,"__arrow ").concat(ra,"__prev-button"),disabled:q,onClick:X,type:"button",children:Oe}),_e(),M!==null&&l.jsx("button",{"aria-label":E,className:"".concat(ra,"__arrow ").concat(ra,"__next-button"),disabled:be,onClick:J,type:"button",children:M}),_!==null&&K?l.jsx("button",{"aria-label":N,className:"".concat(ra,"__arrow ").concat(ra,"__next2-button"),disabled:Ce,onClick:ue,type:"button",children:_}):null]})}var eo=function(){return eo=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},eo.apply(this,arguments)},uE=function(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(r[i[s]]=t[i[s]]);return r};function Sy(t){return"".concat(t,"%")}function cp(t){var e=t.children,r=t.className,i=t.count,s=t.direction,c=t.offset,d=t.style,m=t.wrap,f=uE(t,["children","className","count","direction","offset","style","wrap"]);return l.jsx("div",eo({className:r,style:eo({display:"flex",flexDirection:s,flexWrap:m?"wrap":"nowrap"},d)},f,{children:h.Children.map(e,function(p,v){var x=c&&v===0?Sy(100*c/i):null;return h.cloneElement(p,eo(eo({},p.props),{style:{flexBasis:Sy(100/i),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:x,marginInlineStart:x,marginInlineEnd:0}}))})}))}function dE(t,e,r){return e&&e>t?e:r&&r<t?r:t}function Pl(t,e){return e[0]<=t&&e[1]>=t}function fE(t,e){return t[0]<=e[0]&&t[1]>=e[1]}function Zw(t,e){return Pl(t[0],e)||Pl(t[1],e)}function jy(t,e,r){var i=Zw(e,t),s=[];if(i){s.push(r);var c=Pl(t[0],e),d=Pl(t[1],e);c&&s.push("".concat(r,"Start")),d&&s.push("".concat(r,"End")),c&&d&&s.push("".concat(r,"BothEnds"))}return s}function hE(t){return Array.isArray(t)?t[0]!==null&&t[1]!==null:t!==null}function mE(t){if(!t)throw new Error("args is required");var e=t.value,r=t.date,i=t.hover,s="react-calendar__tile",c=[s];if(!r)return c;var d=new Date,m=function(){if(Array.isArray(r))return r;var S=t.dateType;if(!S)throw new Error("dateType is required when date is not an array of two dates");return wy(S,r)}();if(Pl(d,m)&&c.push("".concat(s,"--now")),!e||!hE(e))return c;var f=function(){if(Array.isArray(e))return e;var S=t.valueType;if(!S)throw new Error("valueType is required when value is not an array of two dates");return wy(S,e)}();fE(f,m)?c.push("".concat(s,"--active")):Zw(f,m)&&c.push("".concat(s,"--hasActive"));var p=jy(f,m,"".concat(s,"--range"));c.push.apply(c,p);var v=Array.isArray(e)?e:[e];if(i&&v.length===1){var x=i>f[0]?[f[0],i]:[i,f[0]],w=jy(x,m,"".concat(s,"--hover"));c.push.apply(c,w)}return c}function vd(t){for(var e=t.className,r=t.count,i=r===void 0?3:r,s=t.dateTransform,c=t.dateType,d=t.end,m=t.hover,f=t.offset,p=t.renderTile,v=t.start,x=t.step,w=x===void 0?1:x,S=t.value,b=t.valueType,N=[],j=v;j<=d;j+=w){var _=s(j);N.push(p({classes:mE({date:_,dateType:c,hover:m,value:S,valueType:b}),date:_}))}return l.jsx(cp,{className:e,count:i,offset:f,wrap:!0,children:N})}function bd(t){var e=t.activeStartDate,r=t.children,i=t.classes,s=t.date,c=t.formatAbbr,d=t.locale,m=t.maxDate,f=t.maxDateTransform,p=t.minDate,v=t.minDateTransform,x=t.onClick,w=t.onMouseOver,S=t.style,b=t.tileClassName,N=t.tileContent,j=t.tileDisabled,_=t.view,C=h.useMemo(function(){var O={activeStartDate:e,date:s,view:_};return typeof b=="function"?b(O):b},[e,s,b,_]),E=h.useMemo(function(){var O={activeStartDate:e,date:s,view:_};return typeof N=="function"?N(O):N},[e,s,N,_]);return l.jsxs("button",{className:ho(i,C),disabled:p&&v(p)>s||m&&f(m)<s||(j==null?void 0:j({activeStartDate:e,date:s,view:_})),onClick:x?function(O){return x(s,O)}:void 0,onFocus:w?function(){return w(s)}:void 0,onMouseOver:w?function(){return w(s)}:void 0,style:S,type:"button",children:[c?l.jsx("abbr",{"aria-label":c(d,s),children:r}):r,E]})}var hm=function(){return hm=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},hm.apply(this,arguments)},pE=function(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(r[i[s]]=t[i[s]]);return r},_y="react-calendar__century-view__decades__decade";function gE(t){var e=t.classes,r=e===void 0?[]:e,i=t.currentCentury,s=t.formatYear,c=s===void 0?gd:s,d=pE(t,["classes","currentCentury","formatYear"]),m=d.date,f=d.locale,p=[];return r&&p.push.apply(p,r),p.push(_y),mo(m).getFullYear()!==i&&p.push("".concat(_y,"--neighboringCentury")),l.jsx(bd,hm({},d,{classes:p,maxDateTransform:md,minDateTransform:Oi,view:"century",children:Gw(f,c,m)}))}var mm=function(){return mm=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},mm.apply(this,arguments)},Ny=function(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(r[i[s]]=t[i[s]]);return r};function vE(t){var e=t.activeStartDate,r=t.hover,i=t.showNeighboringCentury,s=t.value,c=t.valueType,d=Ny(t,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),m=QC(e),f=m+(i?119:99);return l.jsx(vd,{className:"react-calendar__century-view__decades",dateTransform:Oi,dateType:"decade",end:f,hover:r,renderTile:function(p){var v=p.date,x=Ny(p,["date"]);return l.jsx(gE,mm({},d,x,{activeStartDate:e,currentCentury:m,date:v}),v.getTime())},start:m,step:10,value:s,valueType:c})}var pm=function(){return pm=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},pm.apply(this,arguments)};function bE(t){function e(){return l.jsx(vE,pm({},t))}return l.jsx("div",{className:"react-calendar__century-view",children:e()})}var gm=function(){return gm=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},gm.apply(this,arguments)},yE=function(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(r[i[s]]=t[i[s]]);return r},Cy="react-calendar__decade-view__years__year";function xE(t){var e=t.classes,r=e===void 0?[]:e,i=t.currentDecade,s=t.formatYear,c=s===void 0?gd:s,d=yE(t,["classes","currentDecade","formatYear"]),m=d.date,f=d.locale,p=[];return r&&p.push.apply(p,r),p.push(Cy),Oi(m).getFullYear()!==i&&p.push("".concat(Cy,"--neighboringDecade")),l.jsx(bd,gm({},d,{classes:p,maxDateTransform:pd,minDateTransform:po,view:"decade",children:c(f,m)}))}var vm=function(){return vm=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},vm.apply(this,arguments)},Ey=function(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(r[i[s]]=t[i[s]]);return r};function wE(t){var e=t.activeStartDate,r=t.hover,i=t.showNeighboringDecade,s=t.value,c=t.valueType,d=Ey(t,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),m=JC(e),f=m+(i?11:9);return l.jsx(vd,{className:"react-calendar__decade-view__years",dateTransform:po,dateType:"year",end:f,hover:r,renderTile:function(p){var v=p.date,x=Ey(p,["date"]);return l.jsx(xE,vm({},d,x,{activeStartDate:e,currentDecade:m,date:v}),v.getTime())},start:m,value:s,valueType:c})}var bm=function(){return bm=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},bm.apply(this,arguments)};function SE(t){function e(){return l.jsx(wE,bm({},t))}return l.jsx("div",{className:"react-calendar__decade-view",children:e()})}var ym=function(){return ym=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},ym.apply(this,arguments)},jE=function(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(r[i[s]]=t[i[s]]);return r},Oy=function(t,e,r){if(r||arguments.length===2)for(var i=0,s=e.length,c;i<s;i++)(c||!(i in e))&&(c||(c=Array.prototype.slice.call(e,0,i)),c[i]=e[i]);return t.concat(c||Array.prototype.slice.call(e))},_E="react-calendar__year-view__months__month";function NE(t){var e=t.classes,r=e===void 0?[]:e,i=t.formatMonth,s=i===void 0?GC:i,c=t.formatMonthYear,d=c===void 0?Hw:c,m=jE(t,["classes","formatMonth","formatMonthYear"]),f=m.date,p=m.locale;return l.jsx(bd,ym({},m,{classes:Oy(Oy([],r,!0),[_E],!1),formatAbbr:d,maxDateTransform:Gl,minDateTransform:us,view:"year",children:s(p,f)}))}var xm=function(){return xm=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},xm.apply(this,arguments)},My=function(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(r[i[s]]=t[i[s]]);return r};function CE(t){var e=t.activeStartDate,r=t.hover,i=t.value,s=t.valueType,c=My(t,["activeStartDate","hover","value","valueType"]),d=0,m=11,f=mn(e);return l.jsx(vd,{className:"react-calendar__year-view__months",dateTransform:function(p){var v=new Date;return v.setFullYear(f,p,1),us(v)},dateType:"month",end:m,hover:r,renderTile:function(p){var v=p.date,x=My(p,["date"]);return l.jsx(NE,xm({},c,x,{activeStartDate:e,date:v}),v.getTime())},start:d,value:i,valueType:s})}var wm=function(){return wm=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},wm.apply(this,arguments)};function EE(t){function e(){return l.jsx(CE,wm({},t))}return l.jsx("div",{className:"react-calendar__year-view",children:e()})}var Sm=function(){return Sm=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Sm.apply(this,arguments)},OE=function(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(r[i[s]]=t[i[s]]);return r},Uh="react-calendar__month-view__days__day";function ME(t){var e=t.calendarType,r=t.classes,i=r===void 0?[]:r,s=t.currentMonthIndex,c=t.formatDay,d=c===void 0?YC:c,m=t.formatLongDate,f=m===void 0?qC:m,p=OE(t,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),v=p.date,x=p.locale,w=[];return i&&w.push.apply(w,i),w.push(Uh),Ww(v,e)&&w.push("".concat(Uh,"--weekend")),v.getMonth()!==s&&w.push("".concat(Uh,"--neighboringMonth")),l.jsx(bd,Sm({},p,{classes:w,formatAbbr:f,maxDateTransform:op,minDateTransform:Wl,view:"month",children:d(x,v)}))}var jm=function(){return jm=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},jm.apply(this,arguments)},Ly=function(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(r[i[s]]=t[i[s]]);return r};function LE(t){var e=t.activeStartDate,r=t.calendarType,i=t.hover,s=t.showFixedNumberOfWeeks,c=t.showNeighboringMonth,d=t.value,m=t.valueType,f=Ly(t,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),p=mn(e),v=Ei(e),x=s||c,w=Rl(e,r),S=x?0:w,b=(x?-w:0)+1,N=function(){if(s)return b+6*7-1;var j=Bw(e);if(c){var _=new Date;_.setFullYear(p,v,j),_.setHours(0,0,0,0);var C=7-Rl(_,r)-1;return j+C}return j}();return l.jsx(vd,{className:"react-calendar__month-view__days",count:7,dateTransform:function(j){var _=new Date;return _.setFullYear(p,v,j),Wl(_)},dateType:"day",hover:i,end:N,renderTile:function(j){var _=j.date,C=Ly(j,["date"]);return l.jsx(ME,jm({},f,C,{activeStartDate:e,calendarType:r,currentMonthIndex:v,date:_}),_.getTime())},offset:S,start:b,value:d,valueType:m})}var Xw="react-calendar__month-view__weekdays",Vh="".concat(Xw,"__weekday");function kE(t){for(var e=t.calendarType,r=t.formatShortWeekday,i=r===void 0?WC:r,s=t.formatWeekday,c=s===void 0?ZC:s,d=t.locale,m=t.onMouseLeave,f=new Date,p=us(f),v=mn(p),x=Ei(p),w=[],S=1;S<=7;S+=1){var b=new Date(v,x,S-Rl(p,e)),N=c(d,b);w.push(l.jsx("div",{className:ho(Vh,lE(b)&&"".concat(Vh,"--current"),Ww(b,e)&&"".concat(Vh,"--weekend")),children:l.jsx("abbr",{"aria-label":N,title:N,children:i(d,b).replace(".","")})},S))}return l.jsx(cp,{className:Xw,count:7,onFocus:m,onMouseOver:m,children:w})}var Hu=function(){return Hu=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Hu.apply(this,arguments)},ky=function(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(r[i[s]]=t[i[s]]);return r},Ty="react-calendar__tile";function TE(t){var e=t.onClickWeekNumber,r=t.weekNumber,i=l.jsx("span",{children:r});if(e){var s=t.date,c=t.onClickWeekNumber,d=t.weekNumber,m=ky(t,["date","onClickWeekNumber","weekNumber"]);return l.jsx("button",Hu({},m,{className:Ty,onClick:function(f){return c(d,s,f)},type:"button",children:i}))}else{t.date,t.onClickWeekNumber,t.weekNumber;var m=ky(t,["date","onClickWeekNumber","weekNumber"]);return l.jsx("div",Hu({},m,{className:Ty,children:i}))}}function AE(t){var e=t.activeStartDate,r=t.calendarType,i=t.onClickWeekNumber,s=t.onMouseLeave,c=t.showFixedNumberOfWeeks,d=function(){if(c)return 6;var p=Bw(e),v=Rl(e,r),x=p-(7-v);return 1+Math.ceil(x/7)}(),m=function(){for(var p=mn(e),v=Ei(e),x=hd(e),w=[],S=0;S<d;S+=1)w.push(fm(new Date(p,v,x+S*7),r));return w}(),f=m.map(function(p){return eE(p,r)});return l.jsx(cp,{className:"react-calendar__month-view__weekNumbers",count:d,direction:"column",onFocus:s,onMouseOver:s,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0},children:f.map(function(p,v){var x=m[v];if(!x)throw new Error("date is not defined");return l.jsx(TE,{date:x,onClickWeekNumber:i,weekNumber:p},p)})})}var _m=function(){return _m=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},_m.apply(this,arguments)},DE=function(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(r[i[s]]=t[i[s]]);return r};function RE(t){if(t)for(var e=0,r=Object.entries(RC);e<r.length;e++){var i=r[e],s=i[0],c=i[1];if(c.includes(t))return s}return Fn.ISO_8601}function PE(t){var e=t.activeStartDate,r=t.locale,i=t.onMouseLeave,s=t.showFixedNumberOfWeeks,c=t.calendarType,d=c===void 0?RE(r):c,m=t.formatShortWeekday,f=t.formatWeekday,p=t.onClickWeekNumber,v=t.showWeekNumbers,x=DE(t,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function w(){return l.jsx(kE,{calendarType:d,formatShortWeekday:m,formatWeekday:f,locale:r,onMouseLeave:i})}function S(){return v?l.jsx(AE,{activeStartDate:e,calendarType:d,onClickWeekNumber:p,onMouseLeave:i,showFixedNumberOfWeeks:s}):null}function b(){return l.jsx(LE,_m({calendarType:d},x))}var N="react-calendar__month-view";return l.jsx("div",{className:ho(N,v?"".concat(N,"--weekNumbers"):""),children:l.jsxs("div",{style:{display:"flex",alignItems:"flex-end"},children:[S(),l.jsxs("div",{style:{flexGrow:1,width:"100%"},children:[w(),b()]})]})})}var to=function(){return to=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},to.apply(this,arguments)},pu="react-calendar",ku=["century","decade","year","month"],zE=["decade","year","month","day"],up=new Date;up.setFullYear(1,0,1);up.setHours(0,0,0,0);var $E=new Date(864e13);function Ml(t){return t instanceof Date?t:new Date(t)}function Kw(t,e){return ku.slice(ku.indexOf(t),ku.indexOf(e)+1)}function UE(t,e,r){var i=Kw(e,r);return i.indexOf(t)!==-1}function dp(t,e,r){return t&&UE(t,e,r)?t:r}function Qw(t){var e=ku.indexOf(t);return zE[e]}function VE(t,e){var r=Array.isArray(t)?t[e]:t;if(!r)return null;var i=Ml(r);if(Number.isNaN(i.getTime()))throw new Error("Invalid date: ".concat(t));return i}function Jw(t,e){var r=t.value,i=t.minDate,s=t.maxDate,c=t.maxDetail,d=VE(r,e);if(!d)return null;var m=Qw(c),f=function(){switch(e){case 0:return is(m,d);case 1:return Yw(m,d);default:throw new Error("Invalid index value: ".concat(e))}}();return dE(f,i,s)}var fp=function(t){return Jw(t,0)},eS=function(t){return Jw(t,1)},IE=function(t){return[fp,eS].map(function(e){return e(t)})};function tS(t){var e=t.maxDate,r=t.maxDetail,i=t.minDate,s=t.minDetail,c=t.value,d=t.view,m=dp(d,s,r),f=fp({value:c,minDate:i,maxDate:e,maxDetail:r})||new Date;return is(m,f)}function BE(t){var e=t.activeStartDate,r=t.defaultActiveStartDate,i=t.defaultValue,s=t.defaultView,c=t.maxDate,d=t.maxDetail,m=t.minDate,f=t.minDetail,p=t.value,v=t.view,x=dp(v,f,d),w=e||r;return w?is(x,w):tS({maxDate:c,maxDetail:d,minDate:m,minDetail:f,value:p||i,view:v||s})}function Ih(t){return t&&(!Array.isArray(t)||t.length===1)}function gu(t,e){return t instanceof Date&&e instanceof Date&&t.getTime()===e.getTime()}var HE=h.forwardRef(function(e,r){var i=e.activeStartDate,s=e.allowPartialRange,c=e.calendarType,d=e.className,m=e.defaultActiveStartDate,f=e.defaultValue,p=e.defaultView,v=e.formatDay,x=e.formatLongDate,w=e.formatMonth,S=e.formatMonthYear,b=e.formatShortWeekday,N=e.formatWeekday,j=e.formatYear,_=e.goToRangeStartOnSelect,C=_===void 0?!0:_,E=e.inputRef,O=e.locale,M=e.maxDate,R=M===void 0?$E:M,I=e.maxDetail,H=I===void 0?"month":I,D=e.minDate,Y=D===void 0?up:D,G=e.minDetail,ie=G===void 0?"century":G,Oe=e.navigationAriaLabel,ce=e.navigationAriaLive,te=e.navigationLabel,k=e.next2AriaLabel,z=e.next2Label,U=e.nextAriaLabel,K=e.nextLabel,T=e.onActiveStartDateChange,A=e.onChange,F=e.onClickDay,V=e.onClickDecade,q=e.onClickMonth,Q=e.onClickWeekNumber,be=e.onClickYear,Ce=e.onDrillDown,X=e.onDrillUp,W=e.onViewChange,J=e.prev2AriaLabel,ue=e.prev2Label,Z=e.prevAriaLabel,_e=e.prevLabel,ke=e.returnValue,Be=ke===void 0?"start":ke,Se=e.selectRange,P=e.showDoubleView,le=e.showFixedNumberOfWeeks,se=e.showNavigation,Me=se===void 0?!0:se,pe=e.showNeighboringCentury,Ue=e.showNeighboringDecade,Ge=e.showNeighboringMonth,Ke=Ge===void 0?!0:Ge,We=e.showWeekNumbers,et=e.tileClassName,Te=e.tileContent,Ve=e.tileDisabled,qe=e.value,ht=e.view,wt=h.useState(m),ut=wt[0],St=wt[1],bt=h.useState(null),Nt=bt[0],cn=bt[1],Vt=h.useState(Array.isArray(f)?f.map(function(Je){return Je!==null?Ml(Je):null}):f!=null?Ml(f):null),Qn=Vt[0],Jn=Vt[1],Yn=h.useState(p),He=Yn[0],er=Yn[1],Ze=i||ut||BE({activeStartDate:i,defaultActiveStartDate:m,defaultValue:f,defaultView:p,maxDate:R,maxDetail:H,minDate:Y,minDetail:ie,value:qe,view:ht}),ln=function(){var Je=function(){return Se&&Ih(Qn)?Qn:qe!==void 0?qe:Qn}();return Je?Array.isArray(Je)?Je.map(function(Mt){return Mt!==null?Ml(Mt):null}):Je!==null?Ml(Je):null:null}(),An=Qw(H),$t=dp(ht||He,ie,H),un=Kw(ie,H),hr=Se?Nt:null,mr=un.indexOf($t)<un.length-1,xe=un.indexOf($t)>0,ge=h.useCallback(function(Je){var Mt=function(){switch(Be){case"start":return fp;case"end":return eS;case"range":return IE;default:throw new Error("Invalid returnValue.")}}();return Mt({maxDate:R,maxDetail:H,minDate:Y,value:Je})},[R,H,Y,Be]),Ne=h.useCallback(function(Je,Mt){St(Je);var it={action:Mt,activeStartDate:Je,value:ln,view:$t};T&&!gu(Ze,Je)&&T(it)},[Ze,T,ln,$t]),Xe=h.useCallback(function(Je,Mt){var it=function(){switch($t){case"century":return V;case"decade":return be;case"year":return q;case"month":return F;default:throw new Error("Invalid view: ".concat($t,"."))}}();it&&it(Je,Mt)},[F,V,q,be,$t]),Ye=h.useCallback(function(Je,Mt){if(mr){Xe(Je,Mt);var it=un[un.indexOf($t)+1];if(!it)throw new Error("Attempted to drill down from the lowest view.");St(Je),er(it);var Ut={action:"drillDown",activeStartDate:Je,value:ln,view:it};T&&!gu(Ze,Je)&&T(Ut),W&&$t!==it&&W(Ut),Ce&&Ce(Ut)}},[Ze,mr,T,Xe,Ce,W,ln,$t,un]),Fe=h.useCallback(function(){if(xe){var Je=un[un.indexOf($t)-1];if(!Je)throw new Error("Attempted to drill up from the highest view.");var Mt=is(Je,Ze);St(Mt),er(Je);var it={action:"drillUp",activeStartDate:Mt,value:ln,view:Je};T&&!gu(Ze,Mt)&&T(it),W&&$t!==Je&&W(it),X&&X(it)}},[Ze,xe,T,X,W,ln,$t,un]),lt=h.useCallback(function(Je,Mt){var it=ln;Xe(Je,Mt);var Ut=Se&&!Ih(it),Yt;if(Se)if(Ut)Yt=is(An,Je);else{if(!it)throw new Error("previousValue is required");if(Array.isArray(it))throw new Error("previousValue must not be an array");Yt=sE(An,it,Je)}else Yt=ge(Je);var tr=!Se||Ut||C?tS({maxDate:R,maxDetail:H,minDate:Y,minDetail:ie,value:Yt,view:$t}):null;Mt.persist(),St(tr),Jn(Yt);var ha={action:"onChange",activeStartDate:tr,value:Yt,view:$t};if(T&&!gu(Ze,tr)&&T(ha),A)if(Se){var Mi=Ih(Yt);if(!Mi)A(Yt||null,Mt);else if(s){if(Array.isArray(Yt))throw new Error("value must not be an array");A([Yt||null,null],Mt)}}else A(Yt||null,Mt)},[Ze,s,ge,C,R,H,Y,ie,T,A,Xe,Se,ln,An,$t]);function ot(Je){cn(Je)}function at(){cn(null)}h.useImperativeHandle(r,function(){return{activeStartDate:Ze,drillDown:Ye,drillUp:Fe,onChange:lt,setActiveStartDate:Ne,value:ln,view:$t}},[Ze,Ye,Fe,lt,Ne,ln,$t]);function Qe(Je){var Mt=Je?Fw($t,Ze):is($t,Ze),it=mr?Ye:lt,Ut={activeStartDate:Mt,hover:hr,locale:O,maxDate:R,minDate:Y,onClick:it,onMouseOver:Se?ot:void 0,tileClassName:et,tileContent:Te,tileDisabled:Ve,value:ln,valueType:An};switch($t){case"century":return l.jsx(bE,to({formatYear:j,showNeighboringCentury:pe},Ut));case"decade":return l.jsx(SE,to({formatYear:j,showNeighboringDecade:Ue},Ut));case"year":return l.jsx(EE,to({formatMonth:w,formatMonthYear:S},Ut));case"month":return l.jsx(PE,to({calendarType:c,formatDay:v,formatLongDate:x,formatShortWeekday:b,formatWeekday:N,onClickWeekNumber:Q,onMouseLeave:Se?at:void 0,showFixedNumberOfWeeks:typeof le<"u"?le:P,showNeighboringMonth:Ke,showWeekNumbers:We},Ut));default:throw new Error("Invalid view: ".concat($t,"."))}}function Xt(){return Me?l.jsx(cE,{activeStartDate:Ze,drillUp:Fe,formatMonthYear:S,formatYear:j,locale:O,maxDate:R,minDate:Y,navigationAriaLabel:Oe,navigationAriaLive:ce,navigationLabel:te,next2AriaLabel:k,next2Label:z,nextAriaLabel:U,nextLabel:K,prev2AriaLabel:J,prev2Label:ue,prevAriaLabel:Z,prevLabel:_e,setActiveStartDate:Ne,showDoubleView:P,view:$t,views:un}):null}var _t=Array.isArray(ln)?ln:[ln];return l.jsxs("div",{className:ho(pu,Se&&_t.length===1&&"".concat(pu,"--selectRange"),P&&"".concat(pu,"--doubleView"),d),ref:E,children:[Xt(),l.jsxs("div",{className:"".concat(pu,"__viewContainer"),onBlur:Se?at:void 0,onMouseLeave:Se?at:void 0,children:[Qe(),P?Qe(!0):null]})]})});const nS=6048e5,FE=864e5,Ay=Symbol.for("constructDateFrom");function Ra(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&Ay in t?t[Ay](e):t instanceof Date?new t.constructor(e):new Date(e)}function Rr(t,e){return Ra(e||t,t)}function YE(t,e,r){const i=Rr(t,r==null?void 0:r.in);return isNaN(e)?Ra(t,NaN):(e&&i.setDate(i.getDate()+e),i)}let qE={};function yd(){return qE}function zl(t,e){var m,f,p,v;const r=yd(),i=(e==null?void 0:e.weekStartsOn)??((f=(m=e==null?void 0:e.locale)==null?void 0:m.options)==null?void 0:f.weekStartsOn)??r.weekStartsOn??((v=(p=r.locale)==null?void 0:p.options)==null?void 0:v.weekStartsOn)??0,s=Rr(t,e==null?void 0:e.in),c=s.getDay(),d=(c<i?7:0)+c-i;return s.setDate(s.getDate()-d),s.setHours(0,0,0,0),s}function Fu(t,e){return zl(t,{...e,weekStartsOn:1})}function rS(t,e){const r=Rr(t,e==null?void 0:e.in),i=r.getFullYear(),s=Ra(r,0);s.setFullYear(i+1,0,4),s.setHours(0,0,0,0);const c=Fu(s),d=Ra(r,0);d.setFullYear(i,0,4),d.setHours(0,0,0,0);const m=Fu(d);return r.getTime()>=c.getTime()?i+1:r.getTime()>=m.getTime()?i:i-1}function Dy(t){const e=Rr(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function GE(t,...e){const r=Ra.bind(null,e.find(i=>typeof i=="object"));return e.map(r)}function Ry(t,e){const r=Rr(t,e==null?void 0:e.in);return r.setHours(0,0,0,0),r}function WE(t,e,r){const[i,s]=GE(r==null?void 0:r.in,t,e),c=Ry(i),d=Ry(s),m=+c-Dy(c),f=+d-Dy(d);return Math.round((m-f)/FE)}function ZE(t,e){const r=rS(t,e),i=Ra(t,0);return i.setFullYear(r,0,4),i.setHours(0,0,0,0),Fu(i)}function XE(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function KE(t){return!(!XE(t)&&typeof t!="number"||isNaN(+Rr(t)))}function QE(t,e){const r=Rr(t,e==null?void 0:e.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}const JE={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},eO=(t,e,r)=>{let i;const s=JE[t];return typeof s=="string"?i=s:e===1?i=s.one:i=s.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};function ro(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const tO={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},nO={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},rO={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},aO={date:ro({formats:tO,defaultWidth:"full"}),time:ro({formats:nO,defaultWidth:"full"}),dateTime:ro({formats:rO,defaultWidth:"full"})},iO={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},sO=(t,e,r,i)=>iO[t];function ca(t){return(e,r)=>{const i=r!=null&&r.context?String(r.context):"standalone";let s;if(i==="formatting"&&t.formattingValues){const d=t.defaultFormattingWidth||t.defaultWidth,m=r!=null&&r.width?String(r.width):d;s=t.formattingValues[m]||t.formattingValues[d]}else{const d=t.defaultWidth,m=r!=null&&r.width?String(r.width):t.defaultWidth;s=t.values[m]||t.values[d]}const c=t.argumentCallback?t.argumentCallback(e):e;return s[c]}}const oO={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},lO={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},cO={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},uO={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dO={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},fO={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},hO=(t,e)=>{const r=Number(t),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},mO={ordinalNumber:hO,era:ca({values:oO,defaultWidth:"wide"}),quarter:ca({values:lO,defaultWidth:"wide",argumentCallback:t=>t-1}),month:ca({values:cO,defaultWidth:"wide"}),day:ca({values:uO,defaultWidth:"wide"}),dayPeriod:ca({values:dO,defaultWidth:"wide",formattingValues:fO,defaultFormattingWidth:"wide"})};function ua(t){return(e,r={})=>{const i=r.width,s=i&&t.matchPatterns[i]||t.matchPatterns[t.defaultMatchWidth],c=e.match(s);if(!c)return null;const d=c[0],m=i&&t.parsePatterns[i]||t.parsePatterns[t.defaultParseWidth],f=Array.isArray(m)?gO(m,x=>x.test(d)):pO(m,x=>x.test(d));let p;p=t.valueCallback?t.valueCallback(f):f,p=r.valueCallback?r.valueCallback(p):p;const v=e.slice(d.length);return{value:p,rest:v}}}function pO(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function gO(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function aS(t){return(e,r={})=>{const i=e.match(t.matchPattern);if(!i)return null;const s=i[0],c=e.match(t.parsePattern);if(!c)return null;let d=t.valueCallback?t.valueCallback(c[0]):c[0];d=r.valueCallback?r.valueCallback(d):d;const m=e.slice(s.length);return{value:d,rest:m}}}const vO=/^(\d+)(th|st|nd|rd)?/i,bO=/\d+/i,yO={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},xO={any:[/^b/i,/^(a|c)/i]},wO={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},SO={any:[/1/i,/2/i,/3/i,/4/i]},jO={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},_O={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},NO={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},CO={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},EO={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},OO={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},MO={ordinalNumber:aS({matchPattern:vO,parsePattern:bO,valueCallback:t=>parseInt(t,10)}),era:ua({matchPatterns:yO,defaultMatchWidth:"wide",parsePatterns:xO,defaultParseWidth:"any"}),quarter:ua({matchPatterns:wO,defaultMatchWidth:"wide",parsePatterns:SO,defaultParseWidth:"any",valueCallback:t=>t+1}),month:ua({matchPatterns:jO,defaultMatchWidth:"wide",parsePatterns:_O,defaultParseWidth:"any"}),day:ua({matchPatterns:NO,defaultMatchWidth:"wide",parsePatterns:CO,defaultParseWidth:"any"}),dayPeriod:ua({matchPatterns:EO,defaultMatchWidth:"any",parsePatterns:OO,defaultParseWidth:"any"})},LO={code:"en-US",formatDistance:eO,formatLong:aO,formatRelative:sO,localize:mO,match:MO,options:{weekStartsOn:0,firstWeekContainsDate:1}};function kO(t,e){const r=Rr(t,e==null?void 0:e.in);return WE(r,QE(r))+1}function TO(t,e){const r=Rr(t,e==null?void 0:e.in),i=+Fu(r)-+ZE(r);return Math.round(i/nS)+1}function iS(t,e){var v,x,w,S;const r=Rr(t,e==null?void 0:e.in),i=r.getFullYear(),s=yd(),c=(e==null?void 0:e.firstWeekContainsDate)??((x=(v=e==null?void 0:e.locale)==null?void 0:v.options)==null?void 0:x.firstWeekContainsDate)??s.firstWeekContainsDate??((S=(w=s.locale)==null?void 0:w.options)==null?void 0:S.firstWeekContainsDate)??1,d=Ra((e==null?void 0:e.in)||t,0);d.setFullYear(i+1,0,c),d.setHours(0,0,0,0);const m=zl(d,e),f=Ra((e==null?void 0:e.in)||t,0);f.setFullYear(i,0,c),f.setHours(0,0,0,0);const p=zl(f,e);return+r>=+m?i+1:+r>=+p?i:i-1}function AO(t,e){var m,f,p,v;const r=yd(),i=(e==null?void 0:e.firstWeekContainsDate)??((f=(m=e==null?void 0:e.locale)==null?void 0:m.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((v=(p=r.locale)==null?void 0:p.options)==null?void 0:v.firstWeekContainsDate)??1,s=iS(t,e),c=Ra((e==null?void 0:e.in)||t,0);return c.setFullYear(s,0,i),c.setHours(0,0,0,0),zl(c,e)}function DO(t,e){const r=Rr(t,e==null?void 0:e.in),i=+zl(r,e)-+AO(r,e);return Math.round(i/nS)+1}function tn(t,e){const r=t<0?"-":"",i=Math.abs(t).toString().padStart(e,"0");return r+i}const bi={y(t,e){const r=t.getFullYear(),i=r>0?r:1-r;return tn(e==="yy"?i%100:i,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):tn(r+1,2)},d(t,e){return tn(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return tn(t.getHours()%12||12,e.length)},H(t,e){return tn(t.getHours(),e.length)},m(t,e){return tn(t.getMinutes(),e.length)},s(t,e){return tn(t.getSeconds(),e.length)},S(t,e){const r=e.length,i=t.getMilliseconds(),s=Math.trunc(i*Math.pow(10,r-3));return tn(s,e.length)}},Ks={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Py={G:function(t,e,r){const i=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(i,{width:"abbreviated"});case"GGGGG":return r.era(i,{width:"narrow"});case"GGGG":default:return r.era(i,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const i=t.getFullYear(),s=i>0?i:1-i;return r.ordinalNumber(s,{unit:"year"})}return bi.y(t,e)},Y:function(t,e,r,i){const s=iS(t,i),c=s>0?s:1-s;if(e==="YY"){const d=c%100;return tn(d,2)}return e==="Yo"?r.ordinalNumber(c,{unit:"year"}):tn(c,e.length)},R:function(t,e){const r=rS(t);return tn(r,e.length)},u:function(t,e){const r=t.getFullYear();return tn(r,e.length)},Q:function(t,e,r){const i=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(i);case"QQ":return tn(i,2);case"Qo":return r.ordinalNumber(i,{unit:"quarter"});case"QQQ":return r.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,e,r){const i=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(i);case"qq":return tn(i,2);case"qo":return r.ordinalNumber(i,{unit:"quarter"});case"qqq":return r.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,e,r){const i=t.getMonth();switch(e){case"M":case"MM":return bi.M(t,e);case"Mo":return r.ordinalNumber(i+1,{unit:"month"});case"MMM":return r.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(i,{width:"wide",context:"formatting"})}},L:function(t,e,r){const i=t.getMonth();switch(e){case"L":return String(i+1);case"LL":return tn(i+1,2);case"Lo":return r.ordinalNumber(i+1,{unit:"month"});case"LLL":return r.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(i,{width:"wide",context:"standalone"})}},w:function(t,e,r,i){const s=DO(t,i);return e==="wo"?r.ordinalNumber(s,{unit:"week"}):tn(s,e.length)},I:function(t,e,r){const i=TO(t);return e==="Io"?r.ordinalNumber(i,{unit:"week"}):tn(i,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):bi.d(t,e)},D:function(t,e,r){const i=kO(t);return e==="Do"?r.ordinalNumber(i,{unit:"dayOfYear"}):tn(i,e.length)},E:function(t,e,r){const i=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(i,{width:"short",context:"formatting"});case"EEEE":default:return r.day(i,{width:"wide",context:"formatting"})}},e:function(t,e,r,i){const s=t.getDay(),c=(s-i.weekStartsOn+8)%7||7;switch(e){case"e":return String(c);case"ee":return tn(c,2);case"eo":return r.ordinalNumber(c,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,r,i){const s=t.getDay(),c=(s-i.weekStartsOn+8)%7||7;switch(e){case"c":return String(c);case"cc":return tn(c,e.length);case"co":return r.ordinalNumber(c,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,r){const i=t.getDay(),s=i===0?7:i;switch(e){case"i":return String(s);case"ii":return tn(s,e.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(i,{width:"short",context:"formatting"});case"iiii":default:return r.day(i,{width:"wide",context:"formatting"})}},a:function(t,e,r){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,r){const i=t.getHours();let s;switch(i===12?s=Ks.noon:i===0?s=Ks.midnight:s=i/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,r){const i=t.getHours();let s;switch(i>=17?s=Ks.evening:i>=12?s=Ks.afternoon:i>=4?s=Ks.morning:s=Ks.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let i=t.getHours()%12;return i===0&&(i=12),r.ordinalNumber(i,{unit:"hour"})}return bi.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):bi.H(t,e)},K:function(t,e,r){const i=t.getHours()%12;return e==="Ko"?r.ordinalNumber(i,{unit:"hour"}):tn(i,e.length)},k:function(t,e,r){let i=t.getHours();return i===0&&(i=24),e==="ko"?r.ordinalNumber(i,{unit:"hour"}):tn(i,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):bi.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):bi.s(t,e)},S:function(t,e){return bi.S(t,e)},X:function(t,e,r){const i=t.getTimezoneOffset();if(i===0)return"Z";switch(e){case"X":return $y(i);case"XXXX":case"XX":return ts(i);case"XXXXX":case"XXX":default:return ts(i,":")}},x:function(t,e,r){const i=t.getTimezoneOffset();switch(e){case"x":return $y(i);case"xxxx":case"xx":return ts(i);case"xxxxx":case"xxx":default:return ts(i,":")}},O:function(t,e,r){const i=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+zy(i,":");case"OOOO":default:return"GMT"+ts(i,":")}},z:function(t,e,r){const i=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+zy(i,":");case"zzzz":default:return"GMT"+ts(i,":")}},t:function(t,e,r){const i=Math.trunc(+t/1e3);return tn(i,e.length)},T:function(t,e,r){return tn(+t,e.length)}};function zy(t,e=""){const r=t>0?"-":"+",i=Math.abs(t),s=Math.trunc(i/60),c=i%60;return c===0?r+String(s):r+String(s)+e+tn(c,2)}function $y(t,e){return t%60===0?(t>0?"-":"+")+tn(Math.abs(t)/60,2):ts(t,e)}function ts(t,e=""){const r=t>0?"-":"+",i=Math.abs(t),s=tn(Math.trunc(i/60),2),c=tn(i%60,2);return r+s+e+c}const Uy=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},sS=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},RO=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],i=r[1],s=r[2];if(!s)return Uy(t,e);let c;switch(i){case"P":c=e.dateTime({width:"short"});break;case"PP":c=e.dateTime({width:"medium"});break;case"PPP":c=e.dateTime({width:"long"});break;case"PPPP":default:c=e.dateTime({width:"full"});break}return c.replace("{{date}}",Uy(i,e)).replace("{{time}}",sS(s,e))},PO={p:sS,P:RO},zO=/^D+$/,$O=/^Y+$/,UO=["D","DD","YY","YYYY"];function VO(t){return zO.test(t)}function IO(t){return $O.test(t)}function BO(t,e,r){const i=HO(t,e,r);if(console.warn(i),UO.includes(t))throw new RangeError(i)}function HO(t,e,r){const i=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${i} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const FO=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,YO=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,qO=/^'([^]*?)'?$/,GO=/''/g,WO=/[a-zA-Z]/;function en(t,e,r){var v,x,w,S,b,N,j,_;const i=yd(),s=(r==null?void 0:r.locale)??i.locale??LO,c=(r==null?void 0:r.firstWeekContainsDate)??((x=(v=r==null?void 0:r.locale)==null?void 0:v.options)==null?void 0:x.firstWeekContainsDate)??i.firstWeekContainsDate??((S=(w=i.locale)==null?void 0:w.options)==null?void 0:S.firstWeekContainsDate)??1,d=(r==null?void 0:r.weekStartsOn)??((N=(b=r==null?void 0:r.locale)==null?void 0:b.options)==null?void 0:N.weekStartsOn)??i.weekStartsOn??((_=(j=i.locale)==null?void 0:j.options)==null?void 0:_.weekStartsOn)??0,m=Rr(t,r==null?void 0:r.in);if(!KE(m))throw new RangeError("Invalid time value");let f=e.match(YO).map(C=>{const E=C[0];if(E==="p"||E==="P"){const O=PO[E];return O(C,s.formatLong)}return C}).join("").match(FO).map(C=>{if(C==="''")return{isToken:!1,value:"'"};const E=C[0];if(E==="'")return{isToken:!1,value:ZO(C)};if(Py[E])return{isToken:!0,value:C};if(E.match(WO))throw new RangeError("Format string contains an unescaped latin alphabet character `"+E+"`");return{isToken:!1,value:C}});s.localize.preprocessor&&(f=s.localize.preprocessor(m,f));const p={firstWeekContainsDate:c,weekStartsOn:d,locale:s};return f.map(C=>{if(!C.isToken)return C.value;const E=C.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&IO(E)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&VO(E))&&BO(E,e,String(t));const O=Py[E[0]];return O(m,E,s.localize,p)}).join("")}function ZO(t){const e=t.match(qO);return e?e[1].replace(GO,"'"):t}const XO={lessThanXSeconds:{one:"mai puin de o secund",other:"mai puin de {{count}} secunde"},xSeconds:{one:"1 secund",other:"{{count}} secunde"},halfAMinute:"jumtate de minut",lessThanXMinutes:{one:"mai puin de un minut",other:"mai puin de {{count}} minute"},xMinutes:{one:"1 minut",other:"{{count}} minute"},aboutXHours:{one:"circa 1 or",other:"circa {{count}} ore"},xHours:{one:"1 or",other:"{{count}} ore"},xDays:{one:"1 zi",other:"{{count}} zile"},aboutXWeeks:{one:"circa o sptmn",other:"circa {{count}} sptmni"},xWeeks:{one:"1 sptmn",other:"{{count}} sptmni"},aboutXMonths:{one:"circa 1 lun",other:"circa {{count}} luni"},xMonths:{one:"1 lun",other:"{{count}} luni"},aboutXYears:{one:"circa 1 an",other:"circa {{count}} ani"},xYears:{one:"1 an",other:"{{count}} ani"},overXYears:{one:"peste 1 an",other:"peste {{count}} ani"},almostXYears:{one:"aproape 1 an",other:"aproape {{count}} ani"}},KO=(t,e,r)=>{let i;const s=XO[t];return typeof s=="string"?i=s:e===1?i=s.one:i=s.other.replace("{{count}}",String(e)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"n "+i:i+" n urm":i},QO={full:"EEEE, d MMMM yyyy",long:"d MMMM yyyy",medium:"d MMM yyyy",short:"dd.MM.yyyy"},JO={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},e2={full:"{{date}} 'la' {{time}}",long:"{{date}} 'la' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},t2={date:ro({formats:QO,defaultWidth:"full"}),time:ro({formats:JO,defaultWidth:"full"}),dateTime:ro({formats:e2,defaultWidth:"full"})},n2={lastWeek:"eeee 'trecut la' p",yesterday:"'ieri la' p",today:"'astzi la' p",tomorrow:"'mine la' p",nextWeek:"eeee 'viitoare la' p",other:"P"},r2=(t,e,r,i)=>n2[t],a2={narrow:["","D"],abbreviated:[".d.C.","D.C."],wide:["nainte de Cristos","Dup Cristos"]},i2={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["primul trimestru","al doilea trimestru","al treilea trimestru","al patrulea trimestru"]},s2={narrow:["I","F","M","A","M","I","I","A","S","O","N","D"],abbreviated:["ian","feb","mar","apr","mai","iun","iul","aug","sep","oct","noi","dec"],wide:["ianuarie","februarie","martie","aprilie","mai","iunie","iulie","august","septembrie","octombrie","noiembrie","decembrie"]},o2={narrow:["d","l","m","m","j","v","s"],short:["du","lu","ma","mi","jo","vi","s"],abbreviated:["dum","lun","mar","mie","joi","vin","sm"],wide:["duminic","luni","mari","miercuri","joi","vineri","smbt"]},l2={narrow:{am:"a",pm:"p",midnight:"mn",noon:"ami",morning:"dim",afternoon:"da",evening:"s",night:"n"},abbreviated:{am:"AM",pm:"PM",midnight:"miezul nopii",noon:"amiaz",morning:"diminea",afternoon:"dup-amiaz",evening:"sear",night:"noapte"},wide:{am:"a.m.",pm:"p.m.",midnight:"miezul nopii",noon:"amiaz",morning:"diminea",afternoon:"dup-amiaz",evening:"sear",night:"noapte"}},c2={narrow:{am:"a",pm:"p",midnight:"mn",noon:"amiaz",morning:"diminea",afternoon:"dup-amiaz",evening:"sear",night:"noapte"},abbreviated:{am:"AM",pm:"PM",midnight:"miezul nopii",noon:"amiaz",morning:"diminea",afternoon:"dup-amiaz",evening:"sear",night:"noapte"},wide:{am:"a.m.",pm:"p.m.",midnight:"miezul nopii",noon:"amiaz",morning:"diminea",afternoon:"dup-amiaz",evening:"sear",night:"noapte"}},u2=(t,e)=>String(t),d2={ordinalNumber:u2,era:ca({values:a2,defaultWidth:"wide"}),quarter:ca({values:i2,defaultWidth:"wide",argumentCallback:t=>t-1}),month:ca({values:s2,defaultWidth:"wide"}),day:ca({values:o2,defaultWidth:"wide"}),dayPeriod:ca({values:l2,defaultWidth:"wide",formattingValues:c2,defaultFormattingWidth:"wide"})},f2=/^(\d+)?/i,h2=/\d+/i,m2={narrow:/^(|D)/i,abbreviated:/^(\.?\s?d\.?\s?C\.?|\.?\s?e\.?\s?n\.?|D\.?\s?C\.?|e\.?\s?n\.?)/i,wide:/^(nainte de Cristos|naintea erei noastre|Dup Cristos|Era noastr)/i},p2={any:[/^C/i,/^DC/i],wide:[/^(nainte de Cristos|naintea erei noastre)/i,/^(Dup Cristos|Era noastr)/i]},g2={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^trimestrul [1234]/i},v2={any:[/1/i,/2/i,/3/i,/4/i]},b2={narrow:/^[ifmaasond]/i,abbreviated:/^(ian|feb|mar|apr|mai|iun|iul|aug|sep|oct|noi|dec)/i,wide:/^(ianuarie|februarie|martie|aprilie|mai|iunie|iulie|august|septembrie|octombrie|noiembrie|decembrie)/i},y2={narrow:[/^i/i,/^f/i,/^m/i,/^a/i,/^m/i,/^i/i,/^i/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ia/i,/^f/i,/^mar/i,/^ap/i,/^mai/i,/^iun/i,/^iul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},x2={narrow:/^[dlmjvs]/i,short:/^(d|l|ma|mi|j|v|s)/i,abbreviated:/^(dum|lun|mar|mie|jo|vi|s)/i,wide:/^(duminica|luni|mari|miercuri|joi|vineri|smbt)/i},w2={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^d/i,/^l/i,/^ma/i,/^mi/i,/^j/i,/^v/i,/^s/i]},S2={narrow:/^(a|p|mn|a|(dimineaa|dup-amiaza|seara|noaptea))/i,any:/^([ap]\.?\s?m\.?|miezul nopii|amiaza|(dimineaa|dup-amiaza|seara|noaptea))/i},j2={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/amiaza/i,morning:/dimineaa/i,afternoon:/dup-amiaza/i,evening:/seara/i,night:/noaptea/i}},_2={ordinalNumber:aS({matchPattern:f2,parsePattern:h2,valueCallback:t=>parseInt(t,10)}),era:ua({matchPatterns:m2,defaultMatchWidth:"wide",parsePatterns:p2,defaultParseWidth:"any"}),quarter:ua({matchPatterns:g2,defaultMatchWidth:"wide",parsePatterns:v2,defaultParseWidth:"any",valueCallback:t=>t+1}),month:ua({matchPatterns:b2,defaultMatchWidth:"wide",parsePatterns:y2,defaultParseWidth:"any"}),day:ua({matchPatterns:x2,defaultMatchWidth:"wide",parsePatterns:w2,defaultParseWidth:"any"}),dayPeriod:ua({matchPatterns:S2,defaultMatchWidth:"any",parsePatterns:j2,defaultParseWidth:"any"})},oS={code:"ro",formatDistance:KO,formatLong:t2,formatRelative:r2,localize:d2,match:_2,options:{weekStartsOn:1,firstWeekContainsDate:1}};function os(t){"@babel/helpers - typeof";return os=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},os(t)}function N2(t,e){if(os(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var i=r.call(t,e);if(os(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lS(t){var e=N2(t,"string");return os(e)=="symbol"?e:e+""}function Ll(t,e,r){return(e=lS(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Vy(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,i)}return r}function pt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Vy(Object(r),!0).forEach(function(i){Ll(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vy(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function C2(t){if(Array.isArray(t))return t}function E2(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var i,s,c,d,m=[],f=!0,p=!1;try{if(c=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=c.call(r)).done)&&(m.push(i.value),m.length!==e);f=!0);}catch(v){p=!0,s=v}finally{try{if(!f&&r.return!=null&&(d=r.return(),Object(d)!==d))return}finally{if(p)throw s}}return m}}function Nm(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,i=Array(e);r<e;r++)i[r]=t[r];return i}function cS(t,e){if(t){if(typeof t=="string")return Nm(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Nm(t,e):void 0}}function O2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Aa(t,e){return C2(t)||E2(t,e)||cS(t,e)||O2()}function M2(t,e){if(t==null)return{};var r={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;r[i]=t[i]}return r}function $a(t,e){if(t==null)return{};var r,i,s=M2(t,e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(i=0;i<c.length;i++)r=c[i],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(s[r]=t[r])}return s}var L2=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function k2(t){var e=t.defaultInputValue,r=e===void 0?"":e,i=t.defaultMenuIsOpen,s=i===void 0?!1:i,c=t.defaultValue,d=c===void 0?null:c,m=t.inputValue,f=t.menuIsOpen,p=t.onChange,v=t.onInputChange,x=t.onMenuClose,w=t.onMenuOpen,S=t.value,b=$a(t,L2),N=h.useState(m!==void 0?m:r),j=Aa(N,2),_=j[0],C=j[1],E=h.useState(f!==void 0?f:s),O=Aa(E,2),M=O[0],R=O[1],I=h.useState(S!==void 0?S:d),H=Aa(I,2),D=H[0],Y=H[1],G=h.useCallback(function(U,K){typeof p=="function"&&p(U,K),Y(U)},[p]),ie=h.useCallback(function(U,K){var T;typeof v=="function"&&(T=v(U,K)),C(T!==void 0?T:U)},[v]),Oe=h.useCallback(function(){typeof w=="function"&&w(),R(!0)},[w]),ce=h.useCallback(function(){typeof x=="function"&&x(),R(!1)},[x]),te=m!==void 0?m:_,k=f!==void 0?f:M,z=S!==void 0?S:D;return pt(pt({},b),{},{inputValue:te,menuIsOpen:k,onChange:G,onInputChange:ie,onMenuClose:ce,onMenuOpen:Oe,value:z})}function xt(){return xt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)({}).hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},xt.apply(null,arguments)}function T2(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Iy(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,lS(i.key),i)}}function A2(t,e,r){return e&&Iy(t.prototype,e),r&&Iy(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Cm(t,e){return Cm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Cm(t,e)}function D2(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cm(t,e)}function Yu(t){return Yu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Yu(t)}function uS(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uS=function(){return!!t})()}function R2(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function P2(t,e){if(e&&(os(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return R2(t)}function z2(t){var e=uS();return function(){var r,i=Yu(t);if(e){var s=Yu(this).constructor;r=Reflect.construct(i,arguments,s)}else r=i.apply(this,arguments);return P2(this,r)}}function $2(t){if(Array.isArray(t))return Nm(t)}function U2(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function V2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hp(t){return $2(t)||U2(t)||cS(t)||V2()}function I2(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function B2(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var H2=function(){function t(r){var i=this;this._insertTag=function(s){var c;i.tags.length===0?i.insertionPoint?c=i.insertionPoint.nextSibling:i.prepend?c=i.container.firstChild:c=i.before:c=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(s,c),i.tags.push(s)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(i){i.forEach(this._insertTag)},e.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(B2(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var c=I2(s);try{c.insertRule(i,c.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(i));this.ctr++},e.flush=function(){this.tags.forEach(function(i){var s;return(s=i.parentNode)==null?void 0:s.removeChild(i)}),this.tags=[],this.ctr=0},t}(),Zn="-ms-",qu="-moz-",Wt="-webkit-",dS="comm",mp="rule",pp="decl",F2="@import",fS="@keyframes",Y2="@layer",q2=Math.abs,xd=String.fromCharCode,G2=Object.assign;function W2(t,e){return Hn(t,0)^45?(((e<<2^Hn(t,0))<<2^Hn(t,1))<<2^Hn(t,2))<<2^Hn(t,3):0}function hS(t){return t.trim()}function Z2(t,e){return(t=e.exec(t))?t[0]:t}function Zt(t,e,r){return t.replace(e,r)}function Em(t,e){return t.indexOf(e)}function Hn(t,e){return t.charCodeAt(e)|0}function $l(t,e,r){return t.slice(e,r)}function oa(t){return t.length}function gp(t){return t.length}function vu(t,e){return e.push(t),t}function X2(t,e){return t.map(e).join("")}var wd=1,so=1,mS=0,fr=0,En=0,go="";function Sd(t,e,r,i,s,c,d){return{value:t,root:e,parent:r,type:i,props:s,children:c,line:wd,column:so,length:d,return:""}}function xl(t,e){return G2(Sd("",null,null,"",null,null,0),t,{length:-t.length},e)}function K2(){return En}function Q2(){return En=fr>0?Hn(go,--fr):0,so--,En===10&&(so=1,wd--),En}function _r(){return En=fr<mS?Hn(go,fr++):0,so++,En===10&&(so=1,wd++),En}function da(){return Hn(go,fr)}function Tu(){return fr}function Zl(t,e){return $l(go,t,e)}function Ul(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function pS(t){return wd=so=1,mS=oa(go=t),fr=0,[]}function gS(t){return go="",t}function Au(t){return hS(Zl(fr-1,Om(t===91?t+2:t===40?t+1:t)))}function J2(t){for(;(En=da())&&En<33;)_r();return Ul(t)>2||Ul(En)>3?"":" "}function eM(t,e){for(;--e&&_r()&&!(En<48||En>102||En>57&&En<65||En>70&&En<97););return Zl(t,Tu()+(e<6&&da()==32&&_r()==32))}function Om(t){for(;_r();)switch(En){case t:return fr;case 34:case 39:t!==34&&t!==39&&Om(En);break;case 40:t===41&&Om(t);break;case 92:_r();break}return fr}function tM(t,e){for(;_r()&&t+En!==57;)if(t+En===84&&da()===47)break;return"/*"+Zl(e,fr-1)+"*"+xd(t===47?t:_r())}function nM(t){for(;!Ul(da());)_r();return Zl(t,fr)}function rM(t){return gS(Du("",null,null,null,[""],t=pS(t),0,[0],t))}function Du(t,e,r,i,s,c,d,m,f){for(var p=0,v=0,x=d,w=0,S=0,b=0,N=1,j=1,_=1,C=0,E="",O=s,M=c,R=i,I=E;j;)switch(b=C,C=_r()){case 40:if(b!=108&&Hn(I,x-1)==58){Em(I+=Zt(Au(C),"&","&\f"),"&\f")!=-1&&(_=-1);break}case 34:case 39:case 91:I+=Au(C);break;case 9:case 10:case 13:case 32:I+=J2(b);break;case 92:I+=eM(Tu()-1,7);continue;case 47:switch(da()){case 42:case 47:vu(aM(tM(_r(),Tu()),e,r),f);break;default:I+="/"}break;case 123*N:m[p++]=oa(I)*_;case 125*N:case 59:case 0:switch(C){case 0:case 125:j=0;case 59+v:_==-1&&(I=Zt(I,/\f/g,"")),S>0&&oa(I)-x&&vu(S>32?Hy(I+";",i,r,x-1):Hy(Zt(I," ","")+";",i,r,x-2),f);break;case 59:I+=";";default:if(vu(R=By(I,e,r,p,v,s,m,E,O=[],M=[],x),c),C===123)if(v===0)Du(I,e,R,R,O,c,x,m,M);else switch(w===99&&Hn(I,3)===110?100:w){case 100:case 108:case 109:case 115:Du(t,R,R,i&&vu(By(t,R,R,0,0,s,m,E,s,O=[],x),M),s,M,x,m,i?O:M);break;default:Du(I,R,R,R,[""],M,0,m,M)}}p=v=S=0,N=_=1,E=I="",x=d;break;case 58:x=1+oa(I),S=b;default:if(N<1){if(C==123)--N;else if(C==125&&N++==0&&Q2()==125)continue}switch(I+=xd(C),C*N){case 38:_=v>0?1:(I+="\f",-1);break;case 44:m[p++]=(oa(I)-1)*_,_=1;break;case 64:da()===45&&(I+=Au(_r())),w=da(),v=x=oa(E=I+=nM(Tu())),C++;break;case 45:b===45&&oa(I)==2&&(N=0)}}return c}function By(t,e,r,i,s,c,d,m,f,p,v){for(var x=s-1,w=s===0?c:[""],S=gp(w),b=0,N=0,j=0;b<i;++b)for(var _=0,C=$l(t,x+1,x=q2(N=d[b])),E=t;_<S;++_)(E=hS(N>0?w[_]+" "+C:Zt(C,/&\f/g,w[_])))&&(f[j++]=E);return Sd(t,e,r,s===0?mp:m,f,p,v)}function aM(t,e,r){return Sd(t,e,r,dS,xd(K2()),$l(t,2,-2),0)}function Hy(t,e,r,i){return Sd(t,e,r,pp,$l(t,0,i),$l(t,i+1,-1),i)}function ao(t,e){for(var r="",i=gp(t),s=0;s<i;s++)r+=e(t[s],s,t,e)||"";return r}function iM(t,e,r,i){switch(t.type){case Y2:if(t.children.length)break;case F2:case pp:return t.return=t.return||t.value;case dS:return"";case fS:return t.return=t.value+"{"+ao(t.children,i)+"}";case mp:t.value=t.props.join(",")}return oa(r=ao(t.children,i))?t.return=t.value+"{"+r+"}":""}function sM(t){var e=gp(t);return function(r,i,s,c){for(var d="",m=0;m<e;m++)d+=t[m](r,i,s,c)||"";return d}}function oM(t){return function(e){e.root||(e=e.return)&&t(e)}}function lM(t){var e=Object.create(null);return function(r){return e[r]===void 0&&(e[r]=t(r)),e[r]}}var cM=function(e,r,i){for(var s=0,c=0;s=c,c=da(),s===38&&c===12&&(r[i]=1),!Ul(c);)_r();return Zl(e,fr)},uM=function(e,r){var i=-1,s=44;do switch(Ul(s)){case 0:s===38&&da()===12&&(r[i]=1),e[i]+=cM(fr-1,r,i);break;case 2:e[i]+=Au(s);break;case 4:if(s===44){e[++i]=da()===58?"&\f":"",r[i]=e[i].length;break}default:e[i]+=xd(s)}while(s=_r());return e},dM=function(e,r){return gS(uM(pS(e),r))},Fy=new WeakMap,fM=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var r=e.value,i=e.parent,s=e.column===i.column&&e.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(e.props.length===1&&r.charCodeAt(0)!==58&&!Fy.get(i))&&!s){Fy.set(e,!0);for(var c=[],d=dM(r,c),m=i.props,f=0,p=0;f<d.length;f++)for(var v=0;v<m.length;v++,p++)e.props[p]=c[f]?d[f].replace(/&\f/g,m[v]):m[v]+" "+d[f]}}},hM=function(e){if(e.type==="decl"){var r=e.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(e.return="",e.value="")}};function vS(t,e){switch(W2(t,e)){case 5103:return Wt+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Wt+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Wt+t+qu+t+Zn+t+t;case 6828:case 4268:return Wt+t+Zn+t+t;case 6165:return Wt+t+Zn+"flex-"+t+t;case 5187:return Wt+t+Zt(t,/(\w+).+(:[^]+)/,Wt+"box-$1$2"+Zn+"flex-$1$2")+t;case 5443:return Wt+t+Zn+"flex-item-"+Zt(t,/flex-|-self/,"")+t;case 4675:return Wt+t+Zn+"flex-line-pack"+Zt(t,/align-content|flex-|-self/,"")+t;case 5548:return Wt+t+Zn+Zt(t,"shrink","negative")+t;case 5292:return Wt+t+Zn+Zt(t,"basis","preferred-size")+t;case 6060:return Wt+"box-"+Zt(t,"-grow","")+Wt+t+Zn+Zt(t,"grow","positive")+t;case 4554:return Wt+Zt(t,/([^-])(transform)/g,"$1"+Wt+"$2")+t;case 6187:return Zt(Zt(Zt(t,/(zoom-|grab)/,Wt+"$1"),/(image-set)/,Wt+"$1"),t,"")+t;case 5495:case 3959:return Zt(t,/(image-set\([^]*)/,Wt+"$1$`$1");case 4968:return Zt(Zt(t,/(.+:)(flex-)?(.*)/,Wt+"box-pack:$3"+Zn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Wt+t+t;case 4095:case 3583:case 4068:case 2532:return Zt(t,/(.+)-inline(.+)/,Wt+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(oa(t)-1-e>6)switch(Hn(t,e+1)){case 109:if(Hn(t,e+4)!==45)break;case 102:return Zt(t,/(.+:)(.+)-([^]+)/,"$1"+Wt+"$2-$3$1"+qu+(Hn(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~Em(t,"stretch")?vS(Zt(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Hn(t,e+1)!==115)break;case 6444:switch(Hn(t,oa(t)-3-(~Em(t,"!important")&&10))){case 107:return Zt(t,":",":"+Wt)+t;case 101:return Zt(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Wt+(Hn(t,14)===45?"inline-":"")+"box$3$1"+Wt+"$2$3$1"+Zn+"$2box$3")+t}break;case 5936:switch(Hn(t,e+11)){case 114:return Wt+t+Zn+Zt(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Wt+t+Zn+Zt(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Wt+t+Zn+Zt(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Wt+t+Zn+t+t}return t}var mM=function(e,r,i,s){if(e.length>-1&&!e.return)switch(e.type){case pp:e.return=vS(e.value,e.length);break;case fS:return ao([xl(e,{value:Zt(e.value,"@","@"+Wt)})],s);case mp:if(e.length)return X2(e.props,function(c){switch(Z2(c,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ao([xl(e,{props:[Zt(c,/:(read-\w+)/,":"+qu+"$1")]})],s);case"::placeholder":return ao([xl(e,{props:[Zt(c,/:(plac\w+)/,":"+Wt+"input-$1")]}),xl(e,{props:[Zt(c,/:(plac\w+)/,":"+qu+"$1")]}),xl(e,{props:[Zt(c,/:(plac\w+)/,Zn+"input-$1")]})],s)}return""})}},pM=[mM],gM=function(e){var r=e.key;if(r==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(N){var j=N.getAttribute("data-emotion");j.indexOf(" ")!==-1&&(document.head.appendChild(N),N.setAttribute("data-s",""))})}var s=e.stylisPlugins||pM,c={},d,m=[];d=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(N){for(var j=N.getAttribute("data-emotion").split(" "),_=1;_<j.length;_++)c[j[_]]=!0;m.push(N)});var f,p=[fM,hM];{var v,x=[iM,oM(function(N){v.insert(N)})],w=sM(p.concat(s,x)),S=function(j){return ao(rM(j),w)};f=function(j,_,C,E){v=C,S(j?j+"{"+_.styles+"}":_.styles),E&&(b.inserted[_.name]=!0)}}var b={key:r,sheet:new H2({key:r,container:d,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:c,registered:{},insert:f};return b.sheet.hydrate(m),b},Bh={exports:{}},Kt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yy;function vM(){if(Yy)return Kt;Yy=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,r=t?Symbol.for("react.portal"):60106,i=t?Symbol.for("react.fragment"):60107,s=t?Symbol.for("react.strict_mode"):60108,c=t?Symbol.for("react.profiler"):60114,d=t?Symbol.for("react.provider"):60109,m=t?Symbol.for("react.context"):60110,f=t?Symbol.for("react.async_mode"):60111,p=t?Symbol.for("react.concurrent_mode"):60111,v=t?Symbol.for("react.forward_ref"):60112,x=t?Symbol.for("react.suspense"):60113,w=t?Symbol.for("react.suspense_list"):60120,S=t?Symbol.for("react.memo"):60115,b=t?Symbol.for("react.lazy"):60116,N=t?Symbol.for("react.block"):60121,j=t?Symbol.for("react.fundamental"):60117,_=t?Symbol.for("react.responder"):60118,C=t?Symbol.for("react.scope"):60119;function E(M){if(typeof M=="object"&&M!==null){var R=M.$$typeof;switch(R){case e:switch(M=M.type,M){case f:case p:case i:case c:case s:case x:return M;default:switch(M=M&&M.$$typeof,M){case m:case v:case b:case S:case d:return M;default:return R}}case r:return R}}}function O(M){return E(M)===p}return Kt.AsyncMode=f,Kt.ConcurrentMode=p,Kt.ContextConsumer=m,Kt.ContextProvider=d,Kt.Element=e,Kt.ForwardRef=v,Kt.Fragment=i,Kt.Lazy=b,Kt.Memo=S,Kt.Portal=r,Kt.Profiler=c,Kt.StrictMode=s,Kt.Suspense=x,Kt.isAsyncMode=function(M){return O(M)||E(M)===f},Kt.isConcurrentMode=O,Kt.isContextConsumer=function(M){return E(M)===m},Kt.isContextProvider=function(M){return E(M)===d},Kt.isElement=function(M){return typeof M=="object"&&M!==null&&M.$$typeof===e},Kt.isForwardRef=function(M){return E(M)===v},Kt.isFragment=function(M){return E(M)===i},Kt.isLazy=function(M){return E(M)===b},Kt.isMemo=function(M){return E(M)===S},Kt.isPortal=function(M){return E(M)===r},Kt.isProfiler=function(M){return E(M)===c},Kt.isStrictMode=function(M){return E(M)===s},Kt.isSuspense=function(M){return E(M)===x},Kt.isValidElementType=function(M){return typeof M=="string"||typeof M=="function"||M===i||M===p||M===c||M===s||M===x||M===w||typeof M=="object"&&M!==null&&(M.$$typeof===b||M.$$typeof===S||M.$$typeof===d||M.$$typeof===m||M.$$typeof===v||M.$$typeof===j||M.$$typeof===_||M.$$typeof===C||M.$$typeof===N)},Kt.typeOf=E,Kt}var qy;function bM(){return qy||(qy=1,Bh.exports=vM()),Bh.exports}var Hh,Gy;function yM(){if(Gy)return Hh;Gy=1;var t=bM(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},c={};c[t.ForwardRef]=i,c[t.Memo]=s;function d(b){return t.isMemo(b)?s:c[b.$$typeof]||e}var m=Object.defineProperty,f=Object.getOwnPropertyNames,p=Object.getOwnPropertySymbols,v=Object.getOwnPropertyDescriptor,x=Object.getPrototypeOf,w=Object.prototype;function S(b,N,j){if(typeof N!="string"){if(w){var _=x(N);_&&_!==w&&S(b,_,j)}var C=f(N);p&&(C=C.concat(p(N)));for(var E=d(b),O=d(N),M=0;M<C.length;++M){var R=C[M];if(!r[R]&&!(j&&j[R])&&!(O&&O[R])&&!(E&&E[R])){var I=v(N,R);try{m(b,R,I)}catch{}}}}return b}return Hh=S,Hh}yM();var xM=!0;function wM(t,e,r){var i="";return r.split(" ").forEach(function(s){t[s]!==void 0?e.push(t[s]+";"):s&&(i+=s+" ")}),i}var bS=function(e,r,i){var s=e.key+"-"+r.name;(i===!1||xM===!1)&&e.registered[s]===void 0&&(e.registered[s]=r.styles)},SM=function(e,r,i){bS(e,r,i);var s=e.key+"-"+r.name;if(e.inserted[r.name]===void 0){var c=r;do e.insert(r===c?"."+s:"",c,e.sheet,!0),c=c.next;while(c!==void 0)}};function jM(t){for(var e=0,r,i=0,s=t.length;s>=4;++i,s-=4)r=t.charCodeAt(i)&255|(t.charCodeAt(++i)&255)<<8|(t.charCodeAt(++i)&255)<<16|(t.charCodeAt(++i)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,e=(r&65535)*1540483477+((r>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(s){case 3:e^=(t.charCodeAt(i+2)&255)<<16;case 2:e^=(t.charCodeAt(i+1)&255)<<8;case 1:e^=t.charCodeAt(i)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var _M={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},NM=/[A-Z]|^ms/g,CM=/_EMO_([^_]+?)_([^]*?)_EMO_/g,yS=function(e){return e.charCodeAt(1)===45},Wy=function(e){return e!=null&&typeof e!="boolean"},Fh=lM(function(t){return yS(t)?t:t.replace(NM,"-$&").toLowerCase()}),Zy=function(e,r){switch(e){case"animation":case"animationName":if(typeof r=="string")return r.replace(CM,function(i,s,c){return la={name:s,styles:c,next:la},s})}return _M[e]!==1&&!yS(e)&&typeof r=="number"&&r!==0?r+"px":r};function Vl(t,e,r){if(r==null)return"";var i=r;if(i.__emotion_styles!==void 0)return i;switch(typeof r){case"boolean":return"";case"object":{var s=r;if(s.anim===1)return la={name:s.name,styles:s.styles,next:la},s.name;var c=r;if(c.styles!==void 0){var d=c.next;if(d!==void 0)for(;d!==void 0;)la={name:d.name,styles:d.styles,next:la},d=d.next;var m=c.styles+";";return m}return EM(t,e,r)}case"function":{if(t!==void 0){var f=la,p=r(t);return la=f,Vl(t,e,p)}break}}var v=r;return v}function EM(t,e,r){var i="";if(Array.isArray(r))for(var s=0;s<r.length;s++)i+=Vl(t,e,r[s])+";";else for(var c in r){var d=r[c];if(typeof d!="object"){var m=d;Wy(m)&&(i+=Fh(c)+":"+Zy(c,m)+";")}else if(Array.isArray(d)&&typeof d[0]=="string"&&e==null)for(var f=0;f<d.length;f++)Wy(d[f])&&(i+=Fh(c)+":"+Zy(c,d[f])+";");else{var p=Vl(t,e,d);switch(c){case"animation":case"animationName":{i+=Fh(c)+":"+p+";";break}default:i+=c+"{"+p+"}"}}}return i}var Xy=/label:\s*([^\s;{]+)\s*(;|$)/g,la;function xS(t,e,r){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var i=!0,s="";la=void 0;var c=t[0];if(c==null||c.raw===void 0)i=!1,s+=Vl(r,e,c);else{var d=c;s+=d[0]}for(var m=1;m<t.length;m++)if(s+=Vl(r,e,t[m]),i){var f=c;s+=f[m]}Xy.lastIndex=0;for(var p="",v;(v=Xy.exec(s))!==null;)p+="-"+v[1];var x=jM(s)+p;return{name:x,styles:s,next:la}}var OM=function(e){return e()},MM=ny.useInsertionEffect?ny.useInsertionEffect:!1,LM=MM||OM,wS=h.createContext(typeof HTMLElement<"u"?gM({key:"css"}):null);wS.Provider;var kM=function(e){return h.forwardRef(function(r,i){var s=h.useContext(wS);return e(r,s,i)})},TM=h.createContext({}),vp={}.hasOwnProperty,Mm="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",AM=function(e,r){var i={};for(var s in r)vp.call(r,s)&&(i[s]=r[s]);return i[Mm]=e,i},DM=function(e){var r=e.cache,i=e.serialized,s=e.isStringTag;return bS(r,i,s),LM(function(){return SM(r,i,s)}),null},RM=kM(function(t,e,r){var i=t.css;typeof i=="string"&&e.registered[i]!==void 0&&(i=e.registered[i]);var s=t[Mm],c=[i],d="";typeof t.className=="string"?d=wM(e.registered,c,t.className):t.className!=null&&(d=t.className+" ");var m=xS(c,void 0,h.useContext(TM));d+=e.key+"-"+m.name;var f={};for(var p in t)vp.call(t,p)&&p!=="css"&&p!==Mm&&(f[p]=t[p]);return f.className=d,r&&(f.ref=r),h.createElement(h.Fragment,null,h.createElement(DM,{cache:e,serialized:m,isStringTag:typeof s=="string"}),h.createElement(s,f))}),PM=RM,ft=function(e,r){var i=arguments;if(r==null||!vp.call(r,"css"))return h.createElement.apply(void 0,i);var s=i.length,c=new Array(s);c[0]=PM,c[1]=AM(e,r);for(var d=2;d<s;d++)c[d]=i[d];return h.createElement.apply(null,c)};(function(t){var e;e||(e=t.JSX||(t.JSX={}))})(ft||(ft={}));function bp(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return xS(e)}function zM(){var t=bp.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function $M(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}const UM=Math.min,VM=Math.max,Gu=Math.round,bu=Math.floor,Wu=t=>({x:t,y:t});function IM(t){const{x:e,y:r,width:i,height:s}=t;return{width:i,height:s,top:r,left:e,right:e+i,bottom:r+s,x:e,y:r}}function jd(){return typeof window<"u"}function SS(t){return _S(t)?(t.nodeName||"").toLowerCase():"#document"}function Pa(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function jS(t){var e;return(e=(_S(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function _S(t){return jd()?t instanceof Node||t instanceof Pa(t).Node:!1}function BM(t){return jd()?t instanceof Element||t instanceof Pa(t).Element:!1}function yp(t){return jd()?t instanceof HTMLElement||t instanceof Pa(t).HTMLElement:!1}function Ky(t){return!jd()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Pa(t).ShadowRoot}const HM=new Set(["inline","contents"]);function NS(t){const{overflow:e,overflowX:r,overflowY:i,display:s}=xp(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+r)&&!HM.has(s)}function FM(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const YM=new Set(["html","body","#document"]);function qM(t){return YM.has(SS(t))}function xp(t){return Pa(t).getComputedStyle(t)}function GM(t){if(SS(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Ky(t)&&t.host||jS(t);return Ky(e)?e.host:e}function CS(t){const e=GM(t);return qM(e)?t.ownerDocument?t.ownerDocument.body:t.body:yp(e)&&NS(e)?e:CS(e)}function Zu(t,e,r){var i;e===void 0&&(e=[]),r===void 0&&(r=!0);const s=CS(t),c=s===((i=t.ownerDocument)==null?void 0:i.body),d=Pa(s);if(c){const m=Lm(d);return e.concat(d,d.visualViewport||[],NS(s)?s:[],m&&r?Zu(m):[])}return e.concat(s,Zu(s,[],r))}function Lm(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function WM(t){const e=xp(t);let r=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const s=yp(t),c=s?t.offsetWidth:r,d=s?t.offsetHeight:i,m=Gu(r)!==c||Gu(i)!==d;return m&&(r=c,i=d),{width:r,height:i,$:m}}function wp(t){return BM(t)?t:t.contextElement}function Qy(t){const e=wp(t);if(!yp(e))return Wu(1);const r=e.getBoundingClientRect(),{width:i,height:s,$:c}=WM(e);let d=(c?Gu(r.width):r.width)/i,m=(c?Gu(r.height):r.height)/s;return(!d||!Number.isFinite(d))&&(d=1),(!m||!Number.isFinite(m))&&(m=1),{x:d,y:m}}const ZM=Wu(0);function XM(t){const e=Pa(t);return!FM()||!e.visualViewport?ZM:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function KM(t,e,r){return!1}function Jy(t,e,r,i){e===void 0&&(e=!1);const s=t.getBoundingClientRect(),c=wp(t);let d=Wu(1);e&&(d=Qy(t));const m=KM()?XM(c):Wu(0);let f=(s.left+m.x)/d.x,p=(s.top+m.y)/d.y,v=s.width/d.x,x=s.height/d.y;if(c){const w=Pa(c),S=i;let b=w,N=Lm(b);for(;N&&i&&S!==b;){const j=Qy(N),_=N.getBoundingClientRect(),C=xp(N),E=_.left+(N.clientLeft+parseFloat(C.paddingLeft))*j.x,O=_.top+(N.clientTop+parseFloat(C.paddingTop))*j.y;f*=j.x,p*=j.y,v*=j.x,x*=j.y,f+=E,p+=O,b=Pa(N),N=Lm(b)}}return IM({width:v,height:x,x:f,y:p})}function ES(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function QM(t,e){let r=null,i;const s=jS(t);function c(){var m;clearTimeout(i),(m=r)==null||m.disconnect(),r=null}function d(m,f){m===void 0&&(m=!1),f===void 0&&(f=1),c();const p=t.getBoundingClientRect(),{left:v,top:x,width:w,height:S}=p;if(m||e(),!w||!S)return;const b=bu(x),N=bu(s.clientWidth-(v+w)),j=bu(s.clientHeight-(x+S)),_=bu(v),E={rootMargin:-b+"px "+-N+"px "+-j+"px "+-_+"px",threshold:VM(0,UM(1,f))||1};let O=!0;function M(R){const I=R[0].intersectionRatio;if(I!==f){if(!O)return d();I?d(!1,I):i=setTimeout(()=>{d(!1,1e-7)},1e3)}I===1&&!ES(p,t.getBoundingClientRect())&&d(),O=!1}try{r=new IntersectionObserver(M,{...E,root:s.ownerDocument})}catch{r=new IntersectionObserver(M,E)}r.observe(t)}return d(!0),c}function JM(t,e,r,i){i===void 0&&(i={});const{ancestorScroll:s=!0,ancestorResize:c=!0,elementResize:d=typeof ResizeObserver=="function",layoutShift:m=typeof IntersectionObserver=="function",animationFrame:f=!1}=i,p=wp(t),v=s||c?[...p?Zu(p):[],...Zu(e)]:[];v.forEach(_=>{s&&_.addEventListener("scroll",r,{passive:!0}),c&&_.addEventListener("resize",r)});const x=p&&m?QM(p,r):null;let w=-1,S=null;d&&(S=new ResizeObserver(_=>{let[C]=_;C&&C.target===p&&S&&(S.unobserve(e),cancelAnimationFrame(w),w=requestAnimationFrame(()=>{var E;(E=S)==null||E.observe(e)})),r()}),p&&!f&&S.observe(p),S.observe(e));let b,N=f?Jy(t):null;f&&j();function j(){const _=Jy(t);N&&!ES(N,_)&&r(),N=_,b=requestAnimationFrame(j)}return r(),()=>{var _;v.forEach(C=>{s&&C.removeEventListener("scroll",r),c&&C.removeEventListener("resize",r)}),x==null||x(),(_=S)==null||_.disconnect(),S=null,f&&cancelAnimationFrame(b)}}var km=h.useLayoutEffect,eL=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],Xu=function(){};function tL(t,e){return e?e[0]==="-"?t+e:t+"__"+e:t}function nL(t,e){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];var c=[].concat(i);if(e&&t)for(var d in e)e.hasOwnProperty(d)&&e[d]&&c.push("".concat(tL(t,d)));return c.filter(function(m){return m}).map(function(m){return String(m).trim()}).join(" ")}var ex=function(e){return dL(e)?e.filter(Boolean):os(e)==="object"&&e!==null?[e]:[]},OS=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var r=$a(e,eL);return pt({},r)},bn=function(e,r,i){var s=e.cx,c=e.getStyles,d=e.getClassNames,m=e.className;return{css:c(r,e),className:s(i??{},d(r,e),m)}};function _d(t){return[document.documentElement,document.body,window].indexOf(t)>-1}function rL(t){return _d(t)?window.innerHeight:t.clientHeight}function MS(t){return _d(t)?window.pageYOffset:t.scrollTop}function Ku(t,e){if(_d(t)){window.scrollTo(0,e);return}t.scrollTop=e}function aL(t){var e=getComputedStyle(t),r=e.position==="absolute",i=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var s=t;s=s.parentElement;)if(e=getComputedStyle(s),!(r&&e.position==="static")&&i.test(e.overflow+e.overflowY+e.overflowX))return s;return document.documentElement}function iL(t,e,r,i){return r*((t=t/i-1)*t*t+1)+e}function yu(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Xu,s=MS(t),c=e-s,d=10,m=0;function f(){m+=d;var p=iL(m,s,c,r);Ku(t,p),m<r?window.requestAnimationFrame(f):i(t)}f()}function tx(t,e){var r=t.getBoundingClientRect(),i=e.getBoundingClientRect(),s=e.offsetHeight/3;i.bottom+s>r.bottom?Ku(t,Math.min(e.offsetTop+e.clientHeight-t.offsetHeight+s,t.scrollHeight)):i.top-s<r.top&&Ku(t,Math.max(e.offsetTop-s,0))}function sL(t){var e=t.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function nx(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function oL(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var LS=!1,lL={get passive(){return LS=!0}},xu=typeof window<"u"?window:{};xu.addEventListener&&xu.removeEventListener&&(xu.addEventListener("p",Xu,lL),xu.removeEventListener("p",Xu,!1));var cL=LS;function uL(t){return t!=null}function dL(t){return Array.isArray(t)}function wu(t,e,r){return t?e:r}var fL=function(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];var c=Object.entries(e).filter(function(d){var m=Aa(d,1),f=m[0];return!i.includes(f)});return c.reduce(function(d,m){var f=Aa(m,2),p=f[0],v=f[1];return d[p]=v,d},{})},hL=["children","innerProps"],mL=["children","innerProps"];function pL(t){var e=t.maxHeight,r=t.menuEl,i=t.minHeight,s=t.placement,c=t.shouldScroll,d=t.isFixedPosition,m=t.controlHeight,f=aL(r),p={placement:"bottom",maxHeight:e};if(!r||!r.offsetParent)return p;var v=f.getBoundingClientRect(),x=v.height,w=r.getBoundingClientRect(),S=w.bottom,b=w.height,N=w.top,j=r.offsetParent.getBoundingClientRect(),_=j.top,C=d?window.innerHeight:rL(f),E=MS(f),O=parseInt(getComputedStyle(r).marginBottom,10),M=parseInt(getComputedStyle(r).marginTop,10),R=_-M,I=C-N,H=R+E,D=x-E-N,Y=S-C+E+O,G=E+N-M,ie=160;switch(s){case"auto":case"bottom":if(I>=b)return{placement:"bottom",maxHeight:e};if(D>=b&&!d)return c&&yu(f,Y,ie),{placement:"bottom",maxHeight:e};if(!d&&D>=i||d&&I>=i){c&&yu(f,Y,ie);var Oe=d?I-O:D-O;return{placement:"bottom",maxHeight:Oe}}if(s==="auto"||d){var ce=e,te=d?R:H;return te>=i&&(ce=Math.min(te-O-m,e)),{placement:"top",maxHeight:ce}}if(s==="bottom")return c&&Ku(f,Y),{placement:"bottom",maxHeight:e};break;case"top":if(R>=b)return{placement:"top",maxHeight:e};if(H>=b&&!d)return c&&yu(f,G,ie),{placement:"top",maxHeight:e};if(!d&&H>=i||d&&R>=i){var k=e;return(!d&&H>=i||d&&R>=i)&&(k=d?R-M:H-M),c&&yu(f,G,ie),{placement:"top",maxHeight:k}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(s,'".'))}return p}function gL(t){var e={bottom:"top",top:"bottom"};return t?e[t]:"bottom"}var kS=function(e){return e==="auto"?"bottom":e},vL=function(e,r){var i,s=e.placement,c=e.theme,d=c.borderRadius,m=c.spacing,f=c.colors;return pt((i={label:"menu"},Ll(i,gL(s),"100%"),Ll(i,"position","absolute"),Ll(i,"width","100%"),Ll(i,"zIndex",1),i),r?{}:{backgroundColor:f.neutral0,borderRadius:d,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:m.menuGutter,marginTop:m.menuGutter})},TS=h.createContext(null),bL=function(e){var r=e.children,i=e.minMenuHeight,s=e.maxMenuHeight,c=e.menuPlacement,d=e.menuPosition,m=e.menuShouldScrollIntoView,f=e.theme,p=h.useContext(TS)||{},v=p.setPortalPlacement,x=h.useRef(null),w=h.useState(s),S=Aa(w,2),b=S[0],N=S[1],j=h.useState(null),_=Aa(j,2),C=_[0],E=_[1],O=f.spacing.controlHeight;return km(function(){var M=x.current;if(M){var R=d==="fixed",I=m&&!R,H=pL({maxHeight:s,menuEl:M,minHeight:i,placement:c,shouldScroll:I,isFixedPosition:R,controlHeight:O});N(H.maxHeight),E(H.placement),v==null||v(H.placement)}},[s,c,d,m,i,v,O]),r({ref:x,placerProps:pt(pt({},e),{},{placement:C||kS(c),maxHeight:b})})},yL=function(e){var r=e.children,i=e.innerRef,s=e.innerProps;return ft("div",xt({},bn(e,"menu",{menu:!0}),{ref:i},s),r)},xL=yL,wL=function(e,r){var i=e.maxHeight,s=e.theme.spacing.baseUnit;return pt({maxHeight:i,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},r?{}:{paddingBottom:s,paddingTop:s})},SL=function(e){var r=e.children,i=e.innerProps,s=e.innerRef,c=e.isMulti;return ft("div",xt({},bn(e,"menuList",{"menu-list":!0,"menu-list--is-multi":c}),{ref:s},i),r)},AS=function(e,r){var i=e.theme,s=i.spacing.baseUnit,c=i.colors;return pt({textAlign:"center"},r?{}:{color:c.neutral40,padding:"".concat(s*2,"px ").concat(s*3,"px")})},jL=AS,_L=AS,NL=function(e){var r=e.children,i=r===void 0?"No options":r,s=e.innerProps,c=$a(e,hL);return ft("div",xt({},bn(pt(pt({},c),{},{children:i,innerProps:s}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),s),i)},CL=function(e){var r=e.children,i=r===void 0?"Loading...":r,s=e.innerProps,c=$a(e,mL);return ft("div",xt({},bn(pt(pt({},c),{},{children:i,innerProps:s}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),s),i)},EL=function(e){var r=e.rect,i=e.offset,s=e.position;return{left:r.left,position:s,top:i,width:r.width,zIndex:1}},OL=function(e){var r=e.appendTo,i=e.children,s=e.controlElement,c=e.innerProps,d=e.menuPlacement,m=e.menuPosition,f=h.useRef(null),p=h.useRef(null),v=h.useState(kS(d)),x=Aa(v,2),w=x[0],S=x[1],b=h.useMemo(function(){return{setPortalPlacement:S}},[]),N=h.useState(null),j=Aa(N,2),_=j[0],C=j[1],E=h.useCallback(function(){if(s){var I=sL(s),H=m==="fixed"?0:window.pageYOffset,D=I[w]+H;(D!==(_==null?void 0:_.offset)||I.left!==(_==null?void 0:_.rect.left)||I.width!==(_==null?void 0:_.rect.width))&&C({offset:D,rect:I})}},[s,m,w,_==null?void 0:_.offset,_==null?void 0:_.rect.left,_==null?void 0:_.rect.width]);km(function(){E()},[E]);var O=h.useCallback(function(){typeof p.current=="function"&&(p.current(),p.current=null),s&&f.current&&(p.current=JM(s,f.current,E,{elementResize:"ResizeObserver"in window}))},[s,E]);km(function(){O()},[O]);var M=h.useCallback(function(I){f.current=I,O()},[O]);if(!r&&m!=="fixed"||!_)return null;var R=ft("div",xt({ref:M},bn(pt(pt({},e),{},{offset:_.offset,position:m,rect:_.rect}),"menuPortal",{"menu-portal":!0}),c),i);return ft(TS.Provider,{value:b},r?cs.createPortal(R,r):R)},ML=function(e){var r=e.isDisabled,i=e.isRtl;return{label:"container",direction:i?"rtl":void 0,pointerEvents:r?"none":void 0,position:"relative"}},LL=function(e){var r=e.children,i=e.innerProps,s=e.isDisabled,c=e.isRtl;return ft("div",xt({},bn(e,"container",{"--is-disabled":s,"--is-rtl":c}),i),r)},kL=function(e,r){var i=e.theme.spacing,s=e.isMulti,c=e.hasValue,d=e.selectProps.controlShouldRenderValue;return pt({alignItems:"center",display:s&&c&&d?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},r?{}:{padding:"".concat(i.baseUnit/2,"px ").concat(i.baseUnit*2,"px")})},TL=function(e){var r=e.children,i=e.innerProps,s=e.isMulti,c=e.hasValue;return ft("div",xt({},bn(e,"valueContainer",{"value-container":!0,"value-container--is-multi":s,"value-container--has-value":c}),i),r)},AL=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},DL=function(e){var r=e.children,i=e.innerProps;return ft("div",xt({},bn(e,"indicatorsContainer",{indicators:!0}),i),r)},rx,RL=["size"],PL=["innerProps","isRtl","size"],zL={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},DS=function(e){var r=e.size,i=$a(e,RL);return ft("svg",xt({height:r,width:r,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:zL},i))},Sp=function(e){return ft(DS,xt({size:20},e),ft("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},RS=function(e){return ft(DS,xt({size:20},e),ft("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},PS=function(e,r){var i=e.isFocused,s=e.theme,c=s.spacing.baseUnit,d=s.colors;return pt({label:"indicatorContainer",display:"flex",transition:"color 150ms"},r?{}:{color:i?d.neutral60:d.neutral20,padding:c*2,":hover":{color:i?d.neutral80:d.neutral40}})},$L=PS,UL=function(e){var r=e.children,i=e.innerProps;return ft("div",xt({},bn(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),i),r||ft(RS,null))},VL=PS,IL=function(e){var r=e.children,i=e.innerProps;return ft("div",xt({},bn(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),i),r||ft(Sp,null))},BL=function(e,r){var i=e.isDisabled,s=e.theme,c=s.spacing.baseUnit,d=s.colors;return pt({label:"indicatorSeparator",alignSelf:"stretch",width:1},r?{}:{backgroundColor:i?d.neutral10:d.neutral20,marginBottom:c*2,marginTop:c*2})},HL=function(e){var r=e.innerProps;return ft("span",xt({},r,bn(e,"indicatorSeparator",{"indicator-separator":!0})))},FL=zM(rx||(rx=$M([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),YL=function(e,r){var i=e.isFocused,s=e.size,c=e.theme,d=c.colors,m=c.spacing.baseUnit;return pt({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:s,lineHeight:1,marginRight:s,textAlign:"center",verticalAlign:"middle"},r?{}:{color:i?d.neutral60:d.neutral20,padding:m*2})},Yh=function(e){var r=e.delay,i=e.offset;return ft("span",{css:bp({animation:"".concat(FL," 1s ease-in-out ").concat(r,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:i?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},qL=function(e){var r=e.innerProps,i=e.isRtl,s=e.size,c=s===void 0?4:s,d=$a(e,PL);return ft("div",xt({},bn(pt(pt({},d),{},{innerProps:r,isRtl:i,size:c}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),r),ft(Yh,{delay:0,offset:i}),ft(Yh,{delay:160,offset:!0}),ft(Yh,{delay:320,offset:!i}))},GL=function(e,r){var i=e.isDisabled,s=e.isFocused,c=e.theme,d=c.colors,m=c.borderRadius,f=c.spacing;return pt({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:f.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},r?{}:{backgroundColor:i?d.neutral5:d.neutral0,borderColor:i?d.neutral10:s?d.primary:d.neutral20,borderRadius:m,borderStyle:"solid",borderWidth:1,boxShadow:s?"0 0 0 1px ".concat(d.primary):void 0,"&:hover":{borderColor:s?d.primary:d.neutral30}})},WL=function(e){var r=e.children,i=e.isDisabled,s=e.isFocused,c=e.innerRef,d=e.innerProps,m=e.menuIsOpen;return ft("div",xt({ref:c},bn(e,"control",{control:!0,"control--is-disabled":i,"control--is-focused":s,"control--menu-is-open":m}),d,{"aria-disabled":i||void 0}),r)},ZL=WL,XL=["data"],KL=function(e,r){var i=e.theme.spacing;return r?{}:{paddingBottom:i.baseUnit*2,paddingTop:i.baseUnit*2}},QL=function(e){var r=e.children,i=e.cx,s=e.getStyles,c=e.getClassNames,d=e.Heading,m=e.headingProps,f=e.innerProps,p=e.label,v=e.theme,x=e.selectProps;return ft("div",xt({},bn(e,"group",{group:!0}),f),ft(d,xt({},m,{selectProps:x,theme:v,getStyles:s,getClassNames:c,cx:i}),p),ft("div",null,r))},JL=function(e,r){var i=e.theme,s=i.colors,c=i.spacing;return pt({label:"group",cursor:"default",display:"block"},r?{}:{color:s.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:c.baseUnit*3,paddingRight:c.baseUnit*3,textTransform:"uppercase"})},ek=function(e){var r=OS(e);r.data;var i=$a(r,XL);return ft("div",xt({},bn(e,"groupHeading",{"group-heading":!0}),i))},tk=QL,nk=["innerRef","isDisabled","isHidden","inputClassName"],rk=function(e,r){var i=e.isDisabled,s=e.value,c=e.theme,d=c.spacing,m=c.colors;return pt(pt({visibility:i?"hidden":"visible",transform:s?"translateZ(0)":""},ak),r?{}:{margin:d.baseUnit/2,paddingBottom:d.baseUnit/2,paddingTop:d.baseUnit/2,color:m.neutral80})},zS={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},ak={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":pt({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},zS)},ik=function(e){return pt({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},zS)},sk=function(e){var r=e.cx,i=e.value,s=OS(e),c=s.innerRef,d=s.isDisabled,m=s.isHidden,f=s.inputClassName,p=$a(s,nk);return ft("div",xt({},bn(e,"input",{"input-container":!0}),{"data-value":i||""}),ft("input",xt({className:r({input:!0},f),ref:c,style:ik(m),disabled:d},p)))},ok=sk,lk=function(e,r){var i=e.theme,s=i.spacing,c=i.borderRadius,d=i.colors;return pt({label:"multiValue",display:"flex",minWidth:0},r?{}:{backgroundColor:d.neutral10,borderRadius:c/2,margin:s.baseUnit/2})},ck=function(e,r){var i=e.theme,s=i.borderRadius,c=i.colors,d=e.cropWithEllipsis;return pt({overflow:"hidden",textOverflow:d||d===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},r?{}:{borderRadius:s/2,color:c.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},uk=function(e,r){var i=e.theme,s=i.spacing,c=i.borderRadius,d=i.colors,m=e.isFocused;return pt({alignItems:"center",display:"flex"},r?{}:{borderRadius:c/2,backgroundColor:m?d.dangerLight:void 0,paddingLeft:s.baseUnit,paddingRight:s.baseUnit,":hover":{backgroundColor:d.dangerLight,color:d.danger}})},$S=function(e){var r=e.children,i=e.innerProps;return ft("div",i,r)},dk=$S,fk=$S;function hk(t){var e=t.children,r=t.innerProps;return ft("div",xt({role:"button"},r),e||ft(Sp,{size:14}))}var mk=function(e){var r=e.children,i=e.components,s=e.data,c=e.innerProps,d=e.isDisabled,m=e.removeProps,f=e.selectProps,p=i.Container,v=i.Label,x=i.Remove;return ft(p,{data:s,innerProps:pt(pt({},bn(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":d})),c),selectProps:f},ft(v,{data:s,innerProps:pt({},bn(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:f},r),ft(x,{data:s,innerProps:pt(pt({},bn(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(r||"option")},m),selectProps:f}))},pk=mk,gk=function(e,r){var i=e.isDisabled,s=e.isFocused,c=e.isSelected,d=e.theme,m=d.spacing,f=d.colors;return pt({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},r?{}:{backgroundColor:c?f.primary:s?f.primary25:"transparent",color:i?f.neutral20:c?f.neutral0:"inherit",padding:"".concat(m.baseUnit*2,"px ").concat(m.baseUnit*3,"px"),":active":{backgroundColor:i?void 0:c?f.primary:f.primary50}})},vk=function(e){var r=e.children,i=e.isDisabled,s=e.isFocused,c=e.isSelected,d=e.innerRef,m=e.innerProps;return ft("div",xt({},bn(e,"option",{option:!0,"option--is-disabled":i,"option--is-focused":s,"option--is-selected":c}),{ref:d,"aria-disabled":i},m),r)},bk=vk,yk=function(e,r){var i=e.theme,s=i.spacing,c=i.colors;return pt({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},r?{}:{color:c.neutral50,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},xk=function(e){var r=e.children,i=e.innerProps;return ft("div",xt({},bn(e,"placeholder",{placeholder:!0}),i),r)},wk=xk,Sk=function(e,r){var i=e.isDisabled,s=e.theme,c=s.spacing,d=s.colors;return pt({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},r?{}:{color:i?d.neutral40:d.neutral80,marginLeft:c.baseUnit/2,marginRight:c.baseUnit/2})},jk=function(e){var r=e.children,i=e.isDisabled,s=e.innerProps;return ft("div",xt({},bn(e,"singleValue",{"single-value":!0,"single-value--is-disabled":i}),s),r)},_k=jk,Nk={ClearIndicator:IL,Control:ZL,DropdownIndicator:UL,DownChevron:RS,CrossIcon:Sp,Group:tk,GroupHeading:ek,IndicatorsContainer:DL,IndicatorSeparator:HL,Input:ok,LoadingIndicator:qL,Menu:xL,MenuList:SL,MenuPortal:OL,LoadingMessage:CL,NoOptionsMessage:NL,MultiValue:pk,MultiValueContainer:dk,MultiValueLabel:fk,MultiValueRemove:hk,Option:bk,Placeholder:wk,SelectContainer:LL,SingleValue:_k,ValueContainer:TL},Ck=function(e){return pt(pt({},Nk),e.components)},ax=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Ek(t,e){return!!(t===e||ax(t)&&ax(e))}function Ok(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!Ek(t[r],e[r]))return!1;return!0}function Mk(t,e){e===void 0&&(e=Ok);var r=null;function i(){for(var s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];if(r&&r.lastThis===this&&e(s,r.lastArgs))return r.lastResult;var d=t.apply(this,s);return r={lastResult:d,lastArgs:s,lastThis:this},d}return i.clear=function(){r=null},i}var Lk={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},kk=function(e){return ft("span",xt({css:Lk},e))},ix=kk,Tk={guidance:function(e){var r=e.isSearchable,i=e.isMulti,s=e.tabSelectsValue,c=e.context,d=e.isInitialFocus;switch(c){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(s?", press Tab to select the option and exit the menu":"",".");case"input":return d?"".concat(e["aria-label"]||"Select"," is focused ").concat(r?",type to refine list":"",", press Down to open the menu, ").concat(i?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var r=e.action,i=e.label,s=i===void 0?"":i,c=e.labels,d=e.isDisabled;switch(r){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(s,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(c.length>1?"s":""," ").concat(c.join(","),", selected.");case"select-option":return d?"option ".concat(s," is disabled. Select another option."):"option ".concat(s,", selected.");default:return""}},onFocus:function(e){var r=e.context,i=e.focused,s=e.options,c=e.label,d=c===void 0?"":c,m=e.selectValue,f=e.isDisabled,p=e.isSelected,v=e.isAppleDevice,x=function(N,j){return N&&N.length?"".concat(N.indexOf(j)+1," of ").concat(N.length):""};if(r==="value"&&m)return"value ".concat(d," focused, ").concat(x(m,i),".");if(r==="menu"&&v){var w=f?" disabled":"",S="".concat(p?" selected":"").concat(w);return"".concat(d).concat(S,", ").concat(x(s,i),".")}return""},onFilter:function(e){var r=e.inputValue,i=e.resultsMessage;return"".concat(i).concat(r?" for search term "+r:"",".")}},Ak=function(e){var r=e.ariaSelection,i=e.focusedOption,s=e.focusedValue,c=e.focusableOptions,d=e.isFocused,m=e.selectValue,f=e.selectProps,p=e.id,v=e.isAppleDevice,x=f.ariaLiveMessages,w=f.getOptionLabel,S=f.inputValue,b=f.isMulti,N=f.isOptionDisabled,j=f.isSearchable,_=f.menuIsOpen,C=f.options,E=f.screenReaderStatus,O=f.tabSelectsValue,M=f.isLoading,R=f["aria-label"],I=f["aria-live"],H=h.useMemo(function(){return pt(pt({},Tk),x||{})},[x]),D=h.useMemo(function(){var te="";if(r&&H.onChange){var k=r.option,z=r.options,U=r.removedValue,K=r.removedValues,T=r.value,A=function(X){return Array.isArray(X)?null:X},F=U||k||A(T),V=F?w(F):"",q=z||K||void 0,Q=q?q.map(w):[],be=pt({isDisabled:F&&N(F,m),label:V,labels:Q},r);te=H.onChange(be)}return te},[r,H,N,m,w]),Y=h.useMemo(function(){var te="",k=i||s,z=!!(i&&m&&m.includes(i));if(k&&H.onFocus){var U={focused:k,label:w(k),isDisabled:N(k,m),isSelected:z,options:c,context:k===i?"menu":"value",selectValue:m,isAppleDevice:v};te=H.onFocus(U)}return te},[i,s,w,N,H,c,m,v]),G=h.useMemo(function(){var te="";if(_&&C.length&&!M&&H.onFilter){var k=E({count:c.length});te=H.onFilter({inputValue:S,resultsMessage:k})}return te},[c,S,_,H,C,E,M]),ie=(r==null?void 0:r.action)==="initial-input-focus",Oe=h.useMemo(function(){var te="";if(H.guidance){var k=s?"value":_?"menu":"input";te=H.guidance({"aria-label":R,context:k,isDisabled:i&&N(i,m),isMulti:b,isSearchable:j,tabSelectsValue:O,isInitialFocus:ie})}return te},[R,i,s,b,N,j,_,H,m,O,ie]),ce=ft(h.Fragment,null,ft("span",{id:"aria-selection"},D),ft("span",{id:"aria-focused"},Y),ft("span",{id:"aria-results"},G),ft("span",{id:"aria-guidance"},Oe));return ft(h.Fragment,null,ft(ix,{id:p},ie&&ce),ft(ix,{"aria-live":I,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},d&&!ie&&ce))},Dk=Ak,Tm=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],Rk=new RegExp("["+Tm.map(function(t){return t.letters}).join("")+"]","g"),US={};for(var qh=0;qh<Tm.length;qh++)for(var Gh=Tm[qh],Wh=0;Wh<Gh.letters.length;Wh++)US[Gh.letters[Wh]]=Gh.base;var VS=function(e){return e.replace(Rk,function(r){return US[r]})},Pk=Mk(VS),sx=function(e){return e.replace(/^\s+|\s+$/g,"")},zk=function(e){return"".concat(e.label," ").concat(e.value)},$k=function(e){return function(r,i){if(r.data.__isNew__)return!0;var s=pt({ignoreCase:!0,ignoreAccents:!0,stringify:zk,trim:!0,matchFrom:"any"},e),c=s.ignoreCase,d=s.ignoreAccents,m=s.stringify,f=s.trim,p=s.matchFrom,v=f?sx(i):i,x=f?sx(m(r)):m(r);return c&&(v=v.toLowerCase(),x=x.toLowerCase()),d&&(v=Pk(v),x=VS(x)),p==="start"?x.substr(0,v.length)===v:x.indexOf(v)>-1}},Uk=["innerRef"];function Vk(t){var e=t.innerRef,r=$a(t,Uk),i=fL(r,"onExited","in","enter","exit","appear");return ft("input",xt({ref:e},i,{css:bp({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var Ik=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function Bk(t){var e=t.isEnabled,r=t.onBottomArrive,i=t.onBottomLeave,s=t.onTopArrive,c=t.onTopLeave,d=h.useRef(!1),m=h.useRef(!1),f=h.useRef(0),p=h.useRef(null),v=h.useCallback(function(j,_){if(p.current!==null){var C=p.current,E=C.scrollTop,O=C.scrollHeight,M=C.clientHeight,R=p.current,I=_>0,H=O-M-E,D=!1;H>_&&d.current&&(i&&i(j),d.current=!1),I&&m.current&&(c&&c(j),m.current=!1),I&&_>H?(r&&!d.current&&r(j),R.scrollTop=O,D=!0,d.current=!0):!I&&-_>E&&(s&&!m.current&&s(j),R.scrollTop=0,D=!0,m.current=!0),D&&Ik(j)}},[r,i,s,c]),x=h.useCallback(function(j){v(j,j.deltaY)},[v]),w=h.useCallback(function(j){f.current=j.changedTouches[0].clientY},[]),S=h.useCallback(function(j){var _=f.current-j.changedTouches[0].clientY;v(j,_)},[v]),b=h.useCallback(function(j){if(j){var _=cL?{passive:!1}:!1;j.addEventListener("wheel",x,_),j.addEventListener("touchstart",w,_),j.addEventListener("touchmove",S,_)}},[S,w,x]),N=h.useCallback(function(j){j&&(j.removeEventListener("wheel",x,!1),j.removeEventListener("touchstart",w,!1),j.removeEventListener("touchmove",S,!1))},[S,w,x]);return h.useEffect(function(){if(e){var j=p.current;return b(j),function(){N(j)}}},[e,b,N]),function(j){p.current=j}}var ox=["boxSizing","height","overflow","paddingRight","position"],lx={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function cx(t){t.cancelable&&t.preventDefault()}function ux(t){t.stopPropagation()}function dx(){var t=this.scrollTop,e=this.scrollHeight,r=t+this.offsetHeight;t===0?this.scrollTop=1:r===e&&(this.scrollTop=t-1)}function fx(){return"ontouchstart"in window||navigator.maxTouchPoints}var hx=!!(typeof window<"u"&&window.document&&window.document.createElement),wl=0,Qs={capture:!1,passive:!1};function Hk(t){var e=t.isEnabled,r=t.accountForScrollbars,i=r===void 0?!0:r,s=h.useRef({}),c=h.useRef(null),d=h.useCallback(function(f){if(hx){var p=document.body,v=p&&p.style;if(i&&ox.forEach(function(b){var N=v&&v[b];s.current[b]=N}),i&&wl<1){var x=parseInt(s.current.paddingRight,10)||0,w=document.body?document.body.clientWidth:0,S=window.innerWidth-w+x||0;Object.keys(lx).forEach(function(b){var N=lx[b];v&&(v[b]=N)}),v&&(v.paddingRight="".concat(S,"px"))}p&&fx()&&(p.addEventListener("touchmove",cx,Qs),f&&(f.addEventListener("touchstart",dx,Qs),f.addEventListener("touchmove",ux,Qs))),wl+=1}},[i]),m=h.useCallback(function(f){if(hx){var p=document.body,v=p&&p.style;wl=Math.max(wl-1,0),i&&wl<1&&ox.forEach(function(x){var w=s.current[x];v&&(v[x]=w)}),p&&fx()&&(p.removeEventListener("touchmove",cx,Qs),f&&(f.removeEventListener("touchstart",dx,Qs),f.removeEventListener("touchmove",ux,Qs)))}},[i]);return h.useEffect(function(){if(e){var f=c.current;return d(f),function(){m(f)}}},[e,d,m]),function(f){c.current=f}}var Fk=function(e){var r=e.target;return r.ownerDocument.activeElement&&r.ownerDocument.activeElement.blur()},Yk={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function qk(t){var e=t.children,r=t.lockEnabled,i=t.captureEnabled,s=i===void 0?!0:i,c=t.onBottomArrive,d=t.onBottomLeave,m=t.onTopArrive,f=t.onTopLeave,p=Bk({isEnabled:s,onBottomArrive:c,onBottomLeave:d,onTopArrive:m,onTopLeave:f}),v=Hk({isEnabled:r}),x=function(S){p(S),v(S)};return ft(h.Fragment,null,r&&ft("div",{onClick:Fk,css:Yk}),e(x))}var Gk={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},Wk=function(e){var r=e.name,i=e.onFocus;return ft("input",{required:!0,name:r,tabIndex:-1,"aria-hidden":"true",onFocus:i,css:Gk,value:"",onChange:function(){}})},Zk=Wk;function jp(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function Xk(){return jp(/^iPhone/i)}function IS(){return jp(/^Mac/i)}function Kk(){return jp(/^iPad/i)||IS()&&navigator.maxTouchPoints>1}function Qk(){return Xk()||Kk()}function Jk(){return IS()||Qk()}var eT=function(e){return e.label},tT=function(e){return e.label},nT=function(e){return e.value},rT=function(e){return!!e.isDisabled},aT={clearIndicator:VL,container:ML,control:GL,dropdownIndicator:$L,group:KL,groupHeading:JL,indicatorsContainer:AL,indicatorSeparator:BL,input:rk,loadingIndicator:YL,loadingMessage:_L,menu:vL,menuList:wL,menuPortal:EL,multiValue:lk,multiValueLabel:ck,multiValueRemove:uk,noOptionsMessage:jL,option:gk,placeholder:yk,singleValue:Sk,valueContainer:kL},iT={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},sT=4,BS=4,oT=38,lT=BS*2,cT={baseUnit:BS,controlHeight:oT,menuGutter:lT},Zh={borderRadius:sT,colors:iT,spacing:cT},uT={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:nx(),captureMenuScroll:!nx(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:$k(),formatGroupLabel:eT,getOptionLabel:tT,getOptionValue:nT,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:rT,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!oL(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var r=e.count;return"".concat(r," result").concat(r!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function mx(t,e,r,i){var s=YS(t,e,r),c=qS(t,e,r),d=FS(t,e),m=Qu(t,e);return{type:"option",data:e,isDisabled:s,isSelected:c,label:d,value:m,index:i}}function Ru(t,e){return t.options.map(function(r,i){if("options"in r){var s=r.options.map(function(d,m){return mx(t,d,e,m)}).filter(function(d){return gx(t,d)});return s.length>0?{type:"group",data:r,options:s,index:i}:void 0}var c=mx(t,r,e,i);return gx(t,c)?c:void 0}).filter(uL)}function HS(t){return t.reduce(function(e,r){return r.type==="group"?e.push.apply(e,hp(r.options.map(function(i){return i.data}))):e.push(r.data),e},[])}function px(t,e){return t.reduce(function(r,i){return i.type==="group"?r.push.apply(r,hp(i.options.map(function(s){return{data:s.data,id:"".concat(e,"-").concat(i.index,"-").concat(s.index)}}))):r.push({data:i.data,id:"".concat(e,"-").concat(i.index)}),r},[])}function dT(t,e){return HS(Ru(t,e))}function gx(t,e){var r=t.inputValue,i=r===void 0?"":r,s=e.data,c=e.isSelected,d=e.label,m=e.value;return(!WS(t)||!c)&&GS(t,{label:d,value:m,data:s},i)}function fT(t,e){var r=t.focusedValue,i=t.selectValue,s=i.indexOf(r);if(s>-1){var c=e.indexOf(r);if(c>-1)return r;if(s<e.length)return e[s]}return null}function hT(t,e){var r=t.focusedOption;return r&&e.indexOf(r)>-1?r:e[0]}var Xh=function(e,r){var i,s=(i=e.find(function(c){return c.data===r}))===null||i===void 0?void 0:i.id;return s||null},FS=function(e,r){return e.getOptionLabel(r)},Qu=function(e,r){return e.getOptionValue(r)};function YS(t,e,r){return typeof t.isOptionDisabled=="function"?t.isOptionDisabled(e,r):!1}function qS(t,e,r){if(r.indexOf(e)>-1)return!0;if(typeof t.isOptionSelected=="function")return t.isOptionSelected(e,r);var i=Qu(t,e);return r.some(function(s){return Qu(t,s)===i})}function GS(t,e,r){return t.filterOption?t.filterOption(e,r):!0}var WS=function(e){var r=e.hideSelectedOptions,i=e.isMulti;return r===void 0?i:r},mT=1,ZS=function(t){D2(r,t);var e=z2(r);function r(i){var s;if(T2(this,r),s=e.call(this,i),s.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},s.blockOptionHover=!1,s.isComposing=!1,s.commonProps=void 0,s.initialTouchX=0,s.initialTouchY=0,s.openAfterFocus=!1,s.scrollToFocusedOptionOnUpdate=!1,s.userIsDragging=void 0,s.isAppleDevice=Jk(),s.controlRef=null,s.getControlRef=function(f){s.controlRef=f},s.focusedOptionRef=null,s.getFocusedOptionRef=function(f){s.focusedOptionRef=f},s.menuListRef=null,s.getMenuListRef=function(f){s.menuListRef=f},s.inputRef=null,s.getInputRef=function(f){s.inputRef=f},s.focus=s.focusInput,s.blur=s.blurInput,s.onChange=function(f,p){var v=s.props,x=v.onChange,w=v.name;p.name=w,s.ariaOnChange(f,p),x(f,p)},s.setValue=function(f,p,v){var x=s.props,w=x.closeMenuOnSelect,S=x.isMulti,b=x.inputValue;s.onInputChange("",{action:"set-value",prevInputValue:b}),w&&(s.setState({inputIsHiddenAfterUpdate:!S}),s.onMenuClose()),s.setState({clearFocusValueOnUpdate:!0}),s.onChange(f,{action:p,option:v})},s.selectOption=function(f){var p=s.props,v=p.blurInputOnSelect,x=p.isMulti,w=p.name,S=s.state.selectValue,b=x&&s.isOptionSelected(f,S),N=s.isOptionDisabled(f,S);if(b){var j=s.getOptionValue(f);s.setValue(S.filter(function(_){return s.getOptionValue(_)!==j}),"deselect-option",f)}else if(!N)x?s.setValue([].concat(hp(S),[f]),"select-option",f):s.setValue(f,"select-option");else{s.ariaOnChange(f,{action:"select-option",option:f,name:w});return}v&&s.blurInput()},s.removeValue=function(f){var p=s.props.isMulti,v=s.state.selectValue,x=s.getOptionValue(f),w=v.filter(function(b){return s.getOptionValue(b)!==x}),S=wu(p,w,w[0]||null);s.onChange(S,{action:"remove-value",removedValue:f}),s.focusInput()},s.clearValue=function(){var f=s.state.selectValue;s.onChange(wu(s.props.isMulti,[],null),{action:"clear",removedValues:f})},s.popValue=function(){var f=s.props.isMulti,p=s.state.selectValue,v=p[p.length-1],x=p.slice(0,p.length-1),w=wu(f,x,x[0]||null);v&&s.onChange(w,{action:"pop-value",removedValue:v})},s.getFocusedOptionId=function(f){return Xh(s.state.focusableOptionsWithIds,f)},s.getFocusableOptionsWithIds=function(){return px(Ru(s.props,s.state.selectValue),s.getElementId("option"))},s.getValue=function(){return s.state.selectValue},s.cx=function(){for(var f=arguments.length,p=new Array(f),v=0;v<f;v++)p[v]=arguments[v];return nL.apply(void 0,[s.props.classNamePrefix].concat(p))},s.getOptionLabel=function(f){return FS(s.props,f)},s.getOptionValue=function(f){return Qu(s.props,f)},s.getStyles=function(f,p){var v=s.props.unstyled,x=aT[f](p,v);x.boxSizing="border-box";var w=s.props.styles[f];return w?w(x,p):x},s.getClassNames=function(f,p){var v,x;return(v=(x=s.props.classNames)[f])===null||v===void 0?void 0:v.call(x,p)},s.getElementId=function(f){return"".concat(s.state.instancePrefix,"-").concat(f)},s.getComponents=function(){return Ck(s.props)},s.buildCategorizedOptions=function(){return Ru(s.props,s.state.selectValue)},s.getCategorizedOptions=function(){return s.props.menuIsOpen?s.buildCategorizedOptions():[]},s.buildFocusableOptions=function(){return HS(s.buildCategorizedOptions())},s.getFocusableOptions=function(){return s.props.menuIsOpen?s.buildFocusableOptions():[]},s.ariaOnChange=function(f,p){s.setState({ariaSelection:pt({value:f},p)})},s.onMenuMouseDown=function(f){f.button===0&&(f.stopPropagation(),f.preventDefault(),s.focusInput())},s.onMenuMouseMove=function(f){s.blockOptionHover=!1},s.onControlMouseDown=function(f){if(!f.defaultPrevented){var p=s.props.openMenuOnClick;s.state.isFocused?s.props.menuIsOpen?f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&s.onMenuClose():p&&s.openMenu("first"):(p&&(s.openAfterFocus=!0),s.focusInput()),f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&f.preventDefault()}},s.onDropdownIndicatorMouseDown=function(f){if(!(f&&f.type==="mousedown"&&f.button!==0)&&!s.props.isDisabled){var p=s.props,v=p.isMulti,x=p.menuIsOpen;s.focusInput(),x?(s.setState({inputIsHiddenAfterUpdate:!v}),s.onMenuClose()):s.openMenu("first"),f.preventDefault()}},s.onClearIndicatorMouseDown=function(f){f&&f.type==="mousedown"&&f.button!==0||(s.clearValue(),f.preventDefault(),s.openAfterFocus=!1,f.type==="touchend"?s.focusInput():setTimeout(function(){return s.focusInput()}))},s.onScroll=function(f){typeof s.props.closeMenuOnScroll=="boolean"?f.target instanceof HTMLElement&&_d(f.target)&&s.props.onMenuClose():typeof s.props.closeMenuOnScroll=="function"&&s.props.closeMenuOnScroll(f)&&s.props.onMenuClose()},s.onCompositionStart=function(){s.isComposing=!0},s.onCompositionEnd=function(){s.isComposing=!1},s.onTouchStart=function(f){var p=f.touches,v=p&&p.item(0);v&&(s.initialTouchX=v.clientX,s.initialTouchY=v.clientY,s.userIsDragging=!1)},s.onTouchMove=function(f){var p=f.touches,v=p&&p.item(0);if(v){var x=Math.abs(v.clientX-s.initialTouchX),w=Math.abs(v.clientY-s.initialTouchY),S=5;s.userIsDragging=x>S||w>S}},s.onTouchEnd=function(f){s.userIsDragging||(s.controlRef&&!s.controlRef.contains(f.target)&&s.menuListRef&&!s.menuListRef.contains(f.target)&&s.blurInput(),s.initialTouchX=0,s.initialTouchY=0)},s.onControlTouchEnd=function(f){s.userIsDragging||s.onControlMouseDown(f)},s.onClearIndicatorTouchEnd=function(f){s.userIsDragging||s.onClearIndicatorMouseDown(f)},s.onDropdownIndicatorTouchEnd=function(f){s.userIsDragging||s.onDropdownIndicatorMouseDown(f)},s.handleInputChange=function(f){var p=s.props.inputValue,v=f.currentTarget.value;s.setState({inputIsHiddenAfterUpdate:!1}),s.onInputChange(v,{action:"input-change",prevInputValue:p}),s.props.menuIsOpen||s.onMenuOpen()},s.onInputFocus=function(f){s.props.onFocus&&s.props.onFocus(f),s.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(s.openAfterFocus||s.props.openMenuOnFocus)&&s.openMenu("first"),s.openAfterFocus=!1},s.onInputBlur=function(f){var p=s.props.inputValue;if(s.menuListRef&&s.menuListRef.contains(document.activeElement)){s.inputRef.focus();return}s.props.onBlur&&s.props.onBlur(f),s.onInputChange("",{action:"input-blur",prevInputValue:p}),s.onMenuClose(),s.setState({focusedValue:null,isFocused:!1})},s.onOptionHover=function(f){if(!(s.blockOptionHover||s.state.focusedOption===f)){var p=s.getFocusableOptions(),v=p.indexOf(f);s.setState({focusedOption:f,focusedOptionId:v>-1?s.getFocusedOptionId(f):null})}},s.shouldHideSelectedOptions=function(){return WS(s.props)},s.onValueInputFocus=function(f){f.preventDefault(),f.stopPropagation(),s.focus()},s.onKeyDown=function(f){var p=s.props,v=p.isMulti,x=p.backspaceRemovesValue,w=p.escapeClearsValue,S=p.inputValue,b=p.isClearable,N=p.isDisabled,j=p.menuIsOpen,_=p.onKeyDown,C=p.tabSelectsValue,E=p.openMenuOnFocus,O=s.state,M=O.focusedOption,R=O.focusedValue,I=O.selectValue;if(!N&&!(typeof _=="function"&&(_(f),f.defaultPrevented))){switch(s.blockOptionHover=!0,f.key){case"ArrowLeft":if(!v||S)return;s.focusValue("previous");break;case"ArrowRight":if(!v||S)return;s.focusValue("next");break;case"Delete":case"Backspace":if(S)return;if(R)s.removeValue(R);else{if(!x)return;v?s.popValue():b&&s.clearValue()}break;case"Tab":if(s.isComposing||f.shiftKey||!j||!C||!M||E&&s.isOptionSelected(M,I))return;s.selectOption(M);break;case"Enter":if(f.keyCode===229)break;if(j){if(!M||s.isComposing)return;s.selectOption(M);break}return;case"Escape":j?(s.setState({inputIsHiddenAfterUpdate:!1}),s.onInputChange("",{action:"menu-close",prevInputValue:S}),s.onMenuClose()):b&&w&&s.clearValue();break;case" ":if(S)return;if(!j){s.openMenu("first");break}if(!M)return;s.selectOption(M);break;case"ArrowUp":j?s.focusOption("up"):s.openMenu("last");break;case"ArrowDown":j?s.focusOption("down"):s.openMenu("first");break;case"PageUp":if(!j)return;s.focusOption("pageup");break;case"PageDown":if(!j)return;s.focusOption("pagedown");break;case"Home":if(!j)return;s.focusOption("first");break;case"End":if(!j)return;s.focusOption("last");break;default:return}f.preventDefault()}},s.state.instancePrefix="react-select-"+(s.props.instanceId||++mT),s.state.selectValue=ex(i.value),i.menuIsOpen&&s.state.selectValue.length){var c=s.getFocusableOptionsWithIds(),d=s.buildFocusableOptions(),m=d.indexOf(s.state.selectValue[0]);s.state.focusableOptionsWithIds=c,s.state.focusedOption=d[m],s.state.focusedOptionId=Xh(c,d[m])}return s}return A2(r,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&tx(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(s){var c=this.props,d=c.isDisabled,m=c.menuIsOpen,f=this.state.isFocused;(f&&!d&&s.isDisabled||f&&m&&!s.menuIsOpen)&&this.focusInput(),f&&d&&!s.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!f&&!d&&s.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(tx(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(s,c){this.props.onInputChange(s,c)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(s){var c=this,d=this.state,m=d.selectValue,f=d.isFocused,p=this.buildFocusableOptions(),v=s==="first"?0:p.length-1;if(!this.props.isMulti){var x=p.indexOf(m[0]);x>-1&&(v=x)}this.scrollToFocusedOptionOnUpdate=!(f&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:p[v],focusedOptionId:this.getFocusedOptionId(p[v])},function(){return c.onMenuOpen()})}},{key:"focusValue",value:function(s){var c=this.state,d=c.selectValue,m=c.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var f=d.indexOf(m);m||(f=-1);var p=d.length-1,v=-1;if(d.length){switch(s){case"previous":f===0?v=0:f===-1?v=p:v=f-1;break;case"next":f>-1&&f<p&&(v=f+1);break}this.setState({inputIsHidden:v!==-1,focusedValue:d[v]})}}}},{key:"focusOption",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",c=this.props.pageSize,d=this.state.focusedOption,m=this.getFocusableOptions();if(m.length){var f=0,p=m.indexOf(d);d||(p=-1),s==="up"?f=p>0?p-1:m.length-1:s==="down"?f=(p+1)%m.length:s==="pageup"?(f=p-c,f<0&&(f=0)):s==="pagedown"?(f=p+c,f>m.length-1&&(f=m.length-1)):s==="last"&&(f=m.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:m[f],focusedValue:null,focusedOptionId:this.getFocusedOptionId(m[f])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(Zh):pt(pt({},Zh),this.props.theme):Zh}},{key:"getCommonProps",value:function(){var s=this.clearValue,c=this.cx,d=this.getStyles,m=this.getClassNames,f=this.getValue,p=this.selectOption,v=this.setValue,x=this.props,w=x.isMulti,S=x.isRtl,b=x.options,N=this.hasValue();return{clearValue:s,cx:c,getStyles:d,getClassNames:m,getValue:f,hasValue:N,isMulti:w,isRtl:S,options:b,selectOption:p,selectProps:x,setValue:v,theme:this.getTheme()}}},{key:"hasValue",value:function(){var s=this.state.selectValue;return s.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var s=this.props,c=s.isClearable,d=s.isMulti;return c===void 0?d:c}},{key:"isOptionDisabled",value:function(s,c){return YS(this.props,s,c)}},{key:"isOptionSelected",value:function(s,c){return qS(this.props,s,c)}},{key:"filterOption",value:function(s,c){return GS(this.props,s,c)}},{key:"formatOptionLabel",value:function(s,c){if(typeof this.props.formatOptionLabel=="function"){var d=this.props.inputValue,m=this.state.selectValue;return this.props.formatOptionLabel(s,{context:c,inputValue:d,selectValue:m})}else return this.getOptionLabel(s)}},{key:"formatGroupLabel",value:function(s){return this.props.formatGroupLabel(s)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var s=this.props,c=s.isDisabled,d=s.isSearchable,m=s.inputId,f=s.inputValue,p=s.tabIndex,v=s.form,x=s.menuIsOpen,w=s.required,S=this.getComponents(),b=S.Input,N=this.state,j=N.inputIsHidden,_=N.ariaSelection,C=this.commonProps,E=m||this.getElementId("input"),O=pt(pt(pt({"aria-autocomplete":"list","aria-expanded":x,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":w,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},x&&{"aria-controls":this.getElementId("listbox")}),!d&&{"aria-readonly":!0}),this.hasValue()?(_==null?void 0:_.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return d?h.createElement(b,xt({},C,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:E,innerRef:this.getInputRef,isDisabled:c,isHidden:j,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:p,form:v,type:"text",value:f},O)):h.createElement(Vk,xt({id:E,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Xu,onFocus:this.onInputFocus,disabled:c,tabIndex:p,inputMode:"none",form:v,value:""},O))}},{key:"renderPlaceholderOrValue",value:function(){var s=this,c=this.getComponents(),d=c.MultiValue,m=c.MultiValueContainer,f=c.MultiValueLabel,p=c.MultiValueRemove,v=c.SingleValue,x=c.Placeholder,w=this.commonProps,S=this.props,b=S.controlShouldRenderValue,N=S.isDisabled,j=S.isMulti,_=S.inputValue,C=S.placeholder,E=this.state,O=E.selectValue,M=E.focusedValue,R=E.isFocused;if(!this.hasValue()||!b)return _?null:h.createElement(x,xt({},w,{key:"placeholder",isDisabled:N,isFocused:R,innerProps:{id:this.getElementId("placeholder")}}),C);if(j)return O.map(function(H,D){var Y=H===M,G="".concat(s.getOptionLabel(H),"-").concat(s.getOptionValue(H));return h.createElement(d,xt({},w,{components:{Container:m,Label:f,Remove:p},isFocused:Y,isDisabled:N,key:G,index:D,removeProps:{onClick:function(){return s.removeValue(H)},onTouchEnd:function(){return s.removeValue(H)},onMouseDown:function(Oe){Oe.preventDefault()}},data:H}),s.formatOptionLabel(H,"value"))});if(_)return null;var I=O[0];return h.createElement(v,xt({},w,{data:I,isDisabled:N}),this.formatOptionLabel(I,"value"))}},{key:"renderClearIndicator",value:function(){var s=this.getComponents(),c=s.ClearIndicator,d=this.commonProps,m=this.props,f=m.isDisabled,p=m.isLoading,v=this.state.isFocused;if(!this.isClearable()||!c||f||!this.hasValue()||p)return null;var x={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return h.createElement(c,xt({},d,{innerProps:x,isFocused:v}))}},{key:"renderLoadingIndicator",value:function(){var s=this.getComponents(),c=s.LoadingIndicator,d=this.commonProps,m=this.props,f=m.isDisabled,p=m.isLoading,v=this.state.isFocused;if(!c||!p)return null;var x={"aria-hidden":"true"};return h.createElement(c,xt({},d,{innerProps:x,isDisabled:f,isFocused:v}))}},{key:"renderIndicatorSeparator",value:function(){var s=this.getComponents(),c=s.DropdownIndicator,d=s.IndicatorSeparator;if(!c||!d)return null;var m=this.commonProps,f=this.props.isDisabled,p=this.state.isFocused;return h.createElement(d,xt({},m,{isDisabled:f,isFocused:p}))}},{key:"renderDropdownIndicator",value:function(){var s=this.getComponents(),c=s.DropdownIndicator;if(!c)return null;var d=this.commonProps,m=this.props.isDisabled,f=this.state.isFocused,p={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return h.createElement(c,xt({},d,{innerProps:p,isDisabled:m,isFocused:f}))}},{key:"renderMenu",value:function(){var s=this,c=this.getComponents(),d=c.Group,m=c.GroupHeading,f=c.Menu,p=c.MenuList,v=c.MenuPortal,x=c.LoadingMessage,w=c.NoOptionsMessage,S=c.Option,b=this.commonProps,N=this.state.focusedOption,j=this.props,_=j.captureMenuScroll,C=j.inputValue,E=j.isLoading,O=j.loadingMessage,M=j.minMenuHeight,R=j.maxMenuHeight,I=j.menuIsOpen,H=j.menuPlacement,D=j.menuPosition,Y=j.menuPortalTarget,G=j.menuShouldBlockScroll,ie=j.menuShouldScrollIntoView,Oe=j.noOptionsMessage,ce=j.onMenuScrollToTop,te=j.onMenuScrollToBottom;if(!I)return null;var k=function(V,q){var Q=V.type,be=V.data,Ce=V.isDisabled,X=V.isSelected,W=V.label,J=V.value,ue=N===be,Z=Ce?void 0:function(){return s.onOptionHover(be)},_e=Ce?void 0:function(){return s.selectOption(be)},ke="".concat(s.getElementId("option"),"-").concat(q),Be={id:ke,onClick:_e,onMouseMove:Z,onMouseOver:Z,tabIndex:-1,role:"option","aria-selected":s.isAppleDevice?void 0:X};return h.createElement(S,xt({},b,{innerProps:Be,data:be,isDisabled:Ce,isSelected:X,key:ke,label:W,type:Q,value:J,isFocused:ue,innerRef:ue?s.getFocusedOptionRef:void 0}),s.formatOptionLabel(V.data,"menu"))},z;if(this.hasOptions())z=this.getCategorizedOptions().map(function(F){if(F.type==="group"){var V=F.data,q=F.options,Q=F.index,be="".concat(s.getElementId("group"),"-").concat(Q),Ce="".concat(be,"-heading");return h.createElement(d,xt({},b,{key:be,data:V,options:q,Heading:m,headingProps:{id:Ce,data:F.data},label:s.formatGroupLabel(F.data)}),F.options.map(function(X){return k(X,"".concat(Q,"-").concat(X.index))}))}else if(F.type==="option")return k(F,"".concat(F.index))});else if(E){var U=O({inputValue:C});if(U===null)return null;z=h.createElement(x,b,U)}else{var K=Oe({inputValue:C});if(K===null)return null;z=h.createElement(w,b,K)}var T={minMenuHeight:M,maxMenuHeight:R,menuPlacement:H,menuPosition:D,menuShouldScrollIntoView:ie},A=h.createElement(bL,xt({},b,T),function(F){var V=F.ref,q=F.placerProps,Q=q.placement,be=q.maxHeight;return h.createElement(f,xt({},b,T,{innerRef:V,innerProps:{onMouseDown:s.onMenuMouseDown,onMouseMove:s.onMenuMouseMove},isLoading:E,placement:Q}),h.createElement(qk,{captureEnabled:_,onTopArrive:ce,onBottomArrive:te,lockEnabled:G},function(Ce){return h.createElement(p,xt({},b,{innerRef:function(W){s.getMenuListRef(W),Ce(W)},innerProps:{role:"listbox","aria-multiselectable":b.isMulti,id:s.getElementId("listbox")},isLoading:E,maxHeight:be,focusedOption:N}),z)}))});return Y||D==="fixed"?h.createElement(v,xt({},b,{appendTo:Y,controlElement:this.controlRef,menuPlacement:H,menuPosition:D}),A):A}},{key:"renderFormField",value:function(){var s=this,c=this.props,d=c.delimiter,m=c.isDisabled,f=c.isMulti,p=c.name,v=c.required,x=this.state.selectValue;if(v&&!this.hasValue()&&!m)return h.createElement(Zk,{name:p,onFocus:this.onValueInputFocus});if(!(!p||m))if(f)if(d){var w=x.map(function(N){return s.getOptionValue(N)}).join(d);return h.createElement("input",{name:p,type:"hidden",value:w})}else{var S=x.length>0?x.map(function(N,j){return h.createElement("input",{key:"i-".concat(j),name:p,type:"hidden",value:s.getOptionValue(N)})}):h.createElement("input",{name:p,type:"hidden",value:""});return h.createElement("div",null,S)}else{var b=x[0]?this.getOptionValue(x[0]):"";return h.createElement("input",{name:p,type:"hidden",value:b})}}},{key:"renderLiveRegion",value:function(){var s=this.commonProps,c=this.state,d=c.ariaSelection,m=c.focusedOption,f=c.focusedValue,p=c.isFocused,v=c.selectValue,x=this.getFocusableOptions();return h.createElement(Dk,xt({},s,{id:this.getElementId("live-region"),ariaSelection:d,focusedOption:m,focusedValue:f,isFocused:p,selectValue:v,focusableOptions:x,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var s=this.getComponents(),c=s.Control,d=s.IndicatorsContainer,m=s.SelectContainer,f=s.ValueContainer,p=this.props,v=p.className,x=p.id,w=p.isDisabled,S=p.menuIsOpen,b=this.state.isFocused,N=this.commonProps=this.getCommonProps();return h.createElement(m,xt({},N,{className:v,innerProps:{id:x,onKeyDown:this.onKeyDown},isDisabled:w,isFocused:b}),this.renderLiveRegion(),h.createElement(c,xt({},N,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:w,isFocused:b,menuIsOpen:S}),h.createElement(f,xt({},N,{isDisabled:w}),this.renderPlaceholderOrValue(),this.renderInput()),h.createElement(d,xt({},N,{isDisabled:w}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(s,c){var d=c.prevProps,m=c.clearFocusValueOnUpdate,f=c.inputIsHiddenAfterUpdate,p=c.ariaSelection,v=c.isFocused,x=c.prevWasFocused,w=c.instancePrefix,S=s.options,b=s.value,N=s.menuIsOpen,j=s.inputValue,_=s.isMulti,C=ex(b),E={};if(d&&(b!==d.value||S!==d.options||N!==d.menuIsOpen||j!==d.inputValue)){var O=N?dT(s,C):[],M=N?px(Ru(s,C),"".concat(w,"-option")):[],R=m?fT(c,C):null,I=hT(c,O),H=Xh(M,I);E={selectValue:C,focusedOption:I,focusedOptionId:H,focusableOptionsWithIds:M,focusedValue:R,clearFocusValueOnUpdate:!1}}var D=f!=null&&s!==d?{inputIsHidden:f,inputIsHiddenAfterUpdate:void 0}:{},Y=p,G=v&&x;return v&&!G&&(Y={value:wu(_,C,C[0]||null),options:C,action:"initial-input-focus"},G=!x),(p==null?void 0:p.action)==="initial-input-focus"&&(Y=null),pt(pt(pt({},E),D),{},{prevProps:s,ariaSelection:Y,prevWasFocused:G})}}]),r}(h.Component);ZS.defaultProps=uT;var pT=h.forwardRef(function(t,e){var r=k2(t);return h.createElement(ZS,xt({ref:e},r))}),Pu=pT;const vx={success:"bg-green-100 text-green-800 border-green-300",error:"bg-red-100 text-red-800 border-red-300",info:"bg-blue-100 text-blue-800 border-blue-300"},bx=t=>{const[e,r]=h.useState(t.message||""),[i,s]=h.useState(t.type||"info"),[c,d]=h.useState(!!t.message);return h.useEffect(()=>{t.message&&(r(t.message),s(t.type||"info"),d(!0),setTimeout(()=>d(!1),6e3))},[t.message,t.type]),h.useEffect(()=>{const m=f=>{r(f.detail.message),s(f.detail.type||"info"),d(!0),setTimeout(()=>d(!1),6e3)};return window.addEventListener("toast",m),()=>window.removeEventListener("toast",m)},[]),c?l.jsx("div",{className:`fixed top-4 right-4 z-50 border px-4 py-2 rounded shadow ${vx[i]||vx.info}`,style:{minWidth:"220px",maxWidth:"420px"},children:e}):null};function rs({show:t,title:e,message:r,onConfirm:i,onCancel:s,confirmText:c,cancelText:d,extraButtons:m=[],children:f}){return t?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-auto max-w-[90%]",children:[l.jsx("h3",{className:"text-lg font-semibold mb-2",children:e}),r&&l.jsx("div",{className:"mb-4 text-sm",children:r}),f&&l.jsx("div",{className:"mb-4",children:f}),l.jsxs("div",{className:"flex justify-end space-x-2",children:[m.map((p,v)=>l.jsx("button",{onClick:p.onClick,className:`${p.className||"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600"}`,children:p.text},v)),l.jsx("button",{className:"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300",onClick:s,children:d||"Anuleaz"}),l.jsx("button",{className:"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600",onClick:i,children:c||"terge"})]})]})}):null}function gT({x:t,y:e,passenger:r,seat:i,onDelete:s,onMove:c,onEdit:d,onMoveToOtherTrip:m,onPay:f,selectedDate:p,selectedHour:v,originalRouteId:x,onClose:w,tripId:S,setToastMessage:b,setToastType:N}){const j=()=>{r.person_id&&(window.open(`${window.location.origin}/raport/${r.person_id}`,"_blank","noopener,noreferrer"),w())};ud();const _=h.useRef(null),[C,E]=h.useState({top:e,left:t}),[O,M]=h.useState(!1),[R,I]=h.useState(!1),[H,D]=h.useState("Are multe neprezentari"),[Y,G]=h.useState(new Set),[ie,Oe]=h.useState(!0);h.useEffect(()=>{Oe(!0),fetch(`/api/no-shows/${S}`).then(K=>K.json()).then(K=>G(new Set(K))).catch(console.error).finally(()=>Oe(!1))},[S]);const ce=!ie&&Y.has(r.reservation_id),[te,k]=h.useState(new Set);h.useEffect(()=>{fetch("/api/blacklist").then(K=>K.json()).then(K=>{const T=new Set(K.filter(A=>A.source==="blacklist"||A.blacklist_id!==null).map(A=>A.person_id));k(T)}).catch(console.error)},[]);const z=te.has(r.person_id||r.id);h.useLayoutEffect(()=>{if(_.current){const K=_.current.getBoundingClientRect(),T=window.innerWidth,A=window.innerHeight;let F=t,V=e;t+K.width>T-8&&(F=T-K.width-8),F<8&&(F=8),e+K.height>A-8&&(V=e-K.height,V<8&&(V=A-K.height-8)),V<8&&(V=8),E({top:V,left:F})}},[t,e,r]);const U=()=>{if(!m)return console.error("");m({passenger:r,reservation_id:r.reservation_id,fromSeat:i,boardAt:r.board_at,exitAt:r.exit_at,originalTime:v,originalRouteId:x,originalDate:p.toISOString().split("T")[0]}),w()};return l.jsxs("div",{ref:_,className:"popup-container fixed bg-white shadow-xl border border-gray-300 rounded-lg z-50 text-sm",style:{top:C.top,left:C.left,minWidth:"220px",maxWidth:"260px"},onClick:K=>K.stopPropagation(),children:[l.jsxs("button",{onClick:j,className:"w-full text-left px-4 pt-3 pb-2 hover:bg-gray-50",children:[l.jsxs("div",{className:"text-gray-800 font-semibold flex items-center gap-2",children:[" ",r.name||"Pasager"]}),l.jsxs("div",{className:"text-gray-700 text-sm",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[" ",l.jsx("span",{children:r.phone})]}),l.jsxs("div",{className:"flex items-center gap-2 italic text-gray-600",children:[" ",l.jsxs("span",{children:[r.board_at,"  ",r.exit_at]})]}),r.observations&&l.jsxs("div",{className:"flex items-start gap-2 text-gray-500 mt-1",children:[" ",l.jsx("span",{className:"whitespace-pre-line",children:r.observations})]})]})]}),l.jsxs("div",{className:"border-t divide-y",children:[l.jsxs("button",{onClick:d,className:"flex items-center gap-2 w-full text-left px-3 py-2 hover:bg-gray-100",children:[" ",l.jsx("span",{children:"Editare"})]}),l.jsx("button",{onClick:c,className:"block w-full text-left px-4 py-2 hover:bg-gray-100",children:" Mut"}),l.jsx("button",{className:"block w-full text-left px-4 py-2 hover:bg-gray-100",onClick:U,children:" Mut pe alt curs"}),l.jsx("button",{onClick:f,className:"block w-full text-left px-4 py-2 hover:bg-gray-100 text-emerald-700",children:" Achit"}),l.jsx("button",{onClick:s,className:"block w-full text-left px-4 py-2 hover:bg-gray-100 text-red-600",children:" terge"}),l.jsxs("button",{onClick:()=>!ce&&M(!0),disabled:ce||ie,className:`flex items-center gap-2 w-full text-left px-3 py-2 hover:bg-gray-100 ${ce?"opacity-50 cursor-not-allowed":"text-orange-600"}`,children:[" ",l.jsx("span",{children:ce?"nregistrat deja!":"nregistreaz neprezentare"})]}),l.jsxs("button",{onClick:()=>!z&&I(!0),disabled:z,className:`flex items-center gap-2 w-full text-left px-3 py-2 hover:bg-gray-100 ${z?"opacity-50 cursor-not-allowed":"text-orange-600"}`,children:[" ",l.jsx("span",{children:z?"Deja n blacklist":"Adaug n blacklist"})]})]}),l.jsx("button",{className:"text-xs text-gray-400 hover:text-gray-600 hover:underline w-full text-center py-2 border-t",onClick:w,children:" nchide"}),l.jsx(rs,{show:O,title:"Confirmare neprezentare",message:"Eti sigur c vrei s marchezi ca neprezentat?",cancelText:"Renun",confirmText:"Confirm",onCancel:()=>M(!1),onConfirm:async()=>{try{if(!r.reservation_id)throw new Error("reservation_id missing");const K={reservation_id:r.reservation_id},A=await(await fetch("/api/no-shows",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(K)})).json();if(A.error)throw new Error(A.error);b("Neprezentare nregistrat cu succes"),N("success")}catch(K){b(K.message||"Eroare la nregistrare neprezentare"),N("error")}finally{M(!1),w(),setTimeout(()=>b(""),3e3)}}}),l.jsxs(rs,{show:R,title:"Confirmare blacklist",cancelText:"Renun",confirmText:"Adaug",onCancel:()=>I(!1),onConfirm:async()=>{const K={person_id:r.person_id||r.id,reason:H},T=await fetch("/api/blacklist",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(K)}),A=await T.json();A.already?(b("Persoana era deja n blacklist"),N("info")):T.ok?(b("Adugat n blacklist cu succes"),N("success")):(b(A.error||"Eroare la adugare n blacklist"),N("error")),I(!1),w(),setTimeout(()=>b(""),3e3)},children:[l.jsx("div",{className:"text-sm mb-2",children:"Eti sigur c vrei s adaugi n blacklist?"}),l.jsx("textarea",{className:"w-full border p-2 rounded text-sm",rows:3,value:H,onChange:K=>D(K.target.value)})]})]})}function yx({x:t,y:e,seat:r,onSelect:i,onClose:s}){return l.jsxs("div",{className:"popup-container fixed bg-white shadow-xl border border-gray-300 rounded-lg z-50",style:{top:e,left:t,minWidth:"220px",maxWidth:"260px"},onClick:c=>c.stopPropagation(),children:[l.jsx("div",{className:"px-4 py-3 text-gray-800 font-semibold flex items-center gap-2",children:" Selecteaz un pasager:"}),l.jsx("div",{className:"p-2 space-y-2 text-sm text-gray-700",children:r.passengers.map((c,d)=>l.jsxs("button",{className:"w-full text-left px-3 py-2 rounded hover:bg-blue-50 transition flex flex-col gap-1",onClick:()=>i(c),children:[l.jsxs("div",{className:"flex items-center gap-2 font-medium",children:[" ",c.name]}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[" ",c.phone]}),l.jsxs("div",{className:"flex items-center gap-2 text-xs italic text-gray-600",children:[" ",c.board_at,"  ",c.exit_at]}),c.observations&&l.jsxs("div",{className:"flex items-start gap-2 text-xs text-gray-500",children:[" ",l.jsx("span",{className:"whitespace-pre-line",children:c.observations})]})]},d))}),l.jsx("button",{className:"text-xs text-gray-400 hover:text-gray-600 hover:underline w-full text-center py-2 border-t",onClick:s,children:" nchide"})]})}function vT({routes:t,selectedRoute:e,onSelectRoute:r}){const[i,s]=h.useState(null);h.useEffect(()=>{let d=!0;return(async()=>{try{const f=await(await fetch("/api/user/route-order",{credentials:"include"})).json().catch(()=>[]);if(!d)return;const p={};(Array.isArray(f)?f:[]).forEach(v=>{p[v.route_id]=v.position_idx}),s(p)}catch{s(null)}})(),()=>{d=!1}},[]);const c=h.useMemo(()=>{const d=Array.isArray(t)?[...t]:[];return i&&Object.keys(i).length?(d.sort((m,f)=>{const p=i[m.id]??1/0,v=i[f.id]??1/0;return p!==v?p-v:m.name.localeCompare(f.name)}),d):d.sort((m,f)=>m.name.localeCompare(f.name))},[t,i]);return l.jsxs("div",{className:"space-y-2 w-full",children:[l.jsx("h2",{className:"font-bold text-lg mb-0",children:"Rute"}),l.jsxs("div",{className:"flex flex-nowrap gap-2 w-full overflow-x-auto py-1",children:[c.map(d=>{const m=(e==null?void 0:e.id)===d.id;return l.jsx("button",{className:`px-3 py-1 rounded border ${m?"bg-blue-500 text-white":"bg-white"}`,onClick:()=>r==null?void 0:r(d),children:d.name},d.id)}),c.length===0&&l.jsx("span",{className:"text-sm text-gray-500",children:"Nicio rut disponibil"})]})]})}const Su=t=>t==="retur"?"retur":"tur";function bT({selectedRoute:t,selectedSchedule:e,onSelectSchedule:r}){const{tur:i,retur:s}=h.useMemo(()=>{const d=Array.isArray(t==null?void 0:t.schedules)?t.schedules:[],m=d.filter(p=>Su(p.direction)==="tur"),f=d.filter(p=>Su(p.direction)==="retur");return{tur:m,retur:f}},[t]),c=(d,m)=>{if(!m.length)return null;const f=new Set,p=[];for(const v of m){const x=Su(v==null?void 0:v.direction),w=(v==null?void 0:v.departure)||"",S=(v==null?void 0:v.operatorId)??"x",b=(v==null?void 0:v.scheduleId)??(v==null?void 0:v.id)??"noid",N=`${S}|${x}|${w}|${b}`;w&&!f.has(N)&&(f.add(N),p.push(v))}return l.jsxs("div",{className:"mt-2",children:[l.jsx("div",{className:"text-sm font-semibold mb-1",children:d}),l.jsx("div",{className:"flex flex-wrap gap-2",children:p.map(v=>{const{scheduleId:x,id:w,operatorId:S,direction:b,departure:N,themeColor:j,disabledRun:_,disabledOnline:C,tripDisabled:E}=v,O=x??w??`${S??"x"}-${Su(b)}-${N}`,M=(e==null?void 0:e.scheduleId)??(e==null?void 0:e.id)??null,R=M!=null&&M===(x??w),I=!!(Number(E)||Number(_)||Number(C));return l.jsx("button",{onClick:()=>!I&&(r==null?void 0:r(v)),disabled:I,"aria-pressed":R,className:`
                  px-2 py-0 rounded-lg border-1 focus:outline-none
                  ${R?"ring-2 ring-offset-2 ring-opacity-50":"hover:ring-1 hover:ring-offset-1"}
                  ${I?"line-through text-gray-400 cursor-not-allowed":""}
                `,style:{backgroundColor:(j||"#2563eb")+"20",borderColor:j||"#2563eb"},children:N},String(O))})})]})};return!i.length&&!s.length?l.jsx("div",{className:"text-gray-500",children:"Nicio or disponibil pentru aceast rut."}):l.jsxs("div",{className:"mt-2 space-y-2",children:[c("Tur",i),c("Retur",s)]})}function yT({availableVehicles:t=[],vehicleInfo:e,setVehicleInfo:r,showPopup:i,setShowPopup:s,setSelectedSeats:c,setSeats:d,setSelectedRoute:m,tripId:f,setToastMessage:p,setToastType:v}){const x=async w=>{try{const S=await fetch("/api/trips/"+f+"/vehicle",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({vehicle_id:w.id})}),b=await S.json();if(S.ok)p("Vehicul atribuit cu succes!"),v("success"),setTimeout(()=>p(""),3e3),s(!1),c([]),d([]),m(N=>({...N,vehicle_id:w.id})),r(w);else{let N=b.message||"Eroare la schimbarea vehiculului!";b.unmatched&&b.unmatched.length>0&&(N+=`
Locuri fr corespondent: `+b.unmatched.map(j=>j.label).join(", ")),typeof window<"u"&&window.dispatchEvent&&window.dispatchEvent(new CustomEvent("toast",{detail:{message:N,type:"error"}}))}}catch(S){typeof window<"u"&&window.dispatchEvent&&window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Eroare de reea la atribuire vehicul.",type:"error"}})),console.error(S)}};return l.jsx(l.Fragment,{children:i&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow p-6 max-w-md w-full",children:[l.jsx("h2",{className:"text-lg font-bold mb-4",children:"Alege un vehicul"}),l.jsx("ul",{className:"space-y-2 max-h-64 overflow-y-auto",children:t.map(w=>l.jsx("li",{children:l.jsxs("button",{onClick:()=>x(w),className:"w-full text-left px-4 py-2 rounded border hover:bg-gray-100",children:[w.name," (",w.plate_number||"fr numr",")"]})},w.id))}),l.jsx("button",{onClick:()=>s(!1),className:"mt-4 px-4 py-2 bg-gray-300 rounded",children:"Anuleaz"})]})})})}function XS({seats:t,stops:e,selectedSeats:r,setSelectedSeats:i,moveSourceSeat:s,setMoveSourceSeat:c,popupPassenger:d,setPopupPassenger:m,popupSeat:f,setPopupSeat:p,popupPosition:v,setPopupPosition:x,handleMovePassenger:w,handleSeatClick:S,toggleSeat:b,isSeatFullyOccupiedViaSegments:N,checkSegmentOverlap:j,selectedRoute:_,setToastMessage:C,setToastType:E,driverName:O,intentHolds:M={}}){if(!Array.isArray(e)||e.length===0)return console.log("[SeatMap] NU exist stops pe selectedRoute, opresc render-ul SeatMap"),l.jsx("div",{className:"text-red-500 font-bold p-4",children:"Nu exist rute sau staii!"});const R=Math.max(...t.map(H=>H.seat_col||1)),I=Math.max(...t.map(H=>H.row||1));return l.jsx("div",{className:"relative mx-auto",style:{display:"grid",gridTemplateColumns:`repeat(${R}, 105px)`,gridTemplateRows:`repeat(${I+1}, 100px)`,gap:"5px",background:"#f3f4f6",padding:16,borderRadius:16,width:"fit-content",margin:"0 auto",minWidth:0,boxSizing:"border-box"},children:t.map(H=>{var z;const D=r.find(U=>U.id===H.id),Y=H.label.toLowerCase().includes("ofer"),G=H.status,ie=M==null?void 0:M[H.id],Oe=(ie==null?void 0:ie.isMine)===!1,ce=(ie==null?void 0:ie.isMine)===!0;let te;H.label==="ofer"||H.label==="Ghid"||Y?te="bg-gray-600 cursor-not-allowed":G==="full"?te="bg-red-600 cursor-not-allowed":Oe?te="bg-orange-500 cursor-not-allowed":G==="partial"?te="bg-yellow-500 hover:bg-yellow-600":D||ce?te="bg-blue-500 hover:bg-blue-600":te="bg-green-500 hover:bg-green-600";const k=(H.passengers||[]).filter(U=>!U.status||U.status==="active");return l.jsxs("div",{"data-seat-id":H.id,onClick:U=>{var K,T;if(!H.label.toLowerCase().includes("ofer")){if(Oe){C("Locul e n curs de rezervare de alt agent"),E("error"),setTimeout(()=>C(""),3e3);return}if(s&&H.id!==s.id){const A=(K=s.passengers)==null?void 0:K[0];if(!A)return;((T=H.passengers)==null?void 0:T.some(V=>j(V,A.board_at,A.exit_at,e)))?(C(`Segmentul se suprapune cu rezervrile existente pe locul ${H.label}`),E("error"),setTimeout(()=>C(""),3e3)):w(s,H),c(null)}else k.length>0?S(U,H):b(H)}},className:`relative text-white text-xs md:text-sm text-left rounded cursor-pointer flex flex-col justify-start p-2 transition overflow-hidden ${te}
  ${D?"animate-pulse ring-2 ring-white":""}
  ${(s==null?void 0:s.id)===H.id?"ring-4 ring-yellow-400":""}
`,style:{gridRowStart:H.row+1,gridColumnStart:H.seat_col,width:"105px",height:"100px"},children:[l.jsxs("div",{className:"flex justify-between font-semibold text-[13px] leading-tight mb-1",children:[l.jsx("span",{children:H.label}),k[0]&&l.jsx("span",{className:"truncate",children:k[0].name||"(fr nume)"})]}),k[0]&&l.jsxs("div",{className:"text-[11px] leading-tight",children:[l.jsx("div",{children:k[0].phone}),l.jsxs("div",{className:"italic",children:[k[0].board_at,"  ",k[0].exit_at]})]}),((z=k[0])==null?void 0:z.payment_method)&&l.jsx("div",{className:"mt-1",children:l.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-semibold
      ${k[0].payment_method==="cash"?"bg-yellow-500 text-white":k[0].payment_method==="card"?"bg-purple-600 text-white":"bg-gray-400 text-white"}`,children:(()=>{var T;const U=k.find(A=>(A==null?void 0:A.payment_status)==="paid"),K=(U==null?void 0:U.payment_method)||((T=k[0])==null?void 0:T.payment_method);return K==="cash"?" Cash":K==="card"?" Card":" Rezervare"})()})}),k.length>1&&l.jsx("div",{className:"mt-1 text-[11px] leading-tight",children:k.slice(1).map((U,K)=>l.jsxs("div",{className:"mt-1",children:[l.jsx("div",{className:"font-semibold",children:U.name}),l.jsx("div",{children:U.phone}),l.jsxs("div",{className:"italic",children:[U.board_at,"  ",U.exit_at]})]},K))}),Y&&O&&l.jsx("div",{className:"text-xs text-center mt-1 text-gray-600",children:O}),Oe&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-45 text-[11px] font-semibold uppercase",children:"Rezervare n curs"})]},H.id)})})}const zu=t=>(t??"").toString().trim().toLowerCase(),xT=(t="")=>{const e=zu(t);return e.includes("ofer")||e.includes("sofer")||e.includes("ghid")},xx=t=>{const e=String((t==null?void 0:t.label)??""),r=e.match(/\d+/),i=r?Number(r[0]):null,s=Number.isFinite(Number(t==null?void 0:t.row))?Number(t.row):Number.POSITIVE_INFINITY,c=Number.isFinite(Number(t==null?void 0:t.seat_col))?Number(t.seat_col):Number.POSITIVE_INFINITY;return{isService:xT(e),numericLabel:Number.isFinite(i)?i:Number.POSITIVE_INFINITY,row:s,col:c,label:e}},wT=(t=[],e=[])=>{if(!Array.isArray(e)||e.length<2)return[];const r=e.map((i,s)=>({normalized:zu(i),index:s}));return t.map(i=>{var d,m;const s=((d=r.find(f=>zu(i.board_at)===f.normalized))==null?void 0:d.index)??-1,c=((m=r.find(f=>zu(i.exit_at)===f.normalized))==null?void 0:m.index)??-1;return s===-1||c===-1||c<=s?null:{passenger:i,startIndex:s,endIndex:c}}).filter(Boolean)},ST=({activePassengers:t,heldByOther:e,heldByMe:r,seat:i})=>{const s=String((i==null?void 0:i.label)??"").toLowerCase();if(s.includes("ofer")||s.includes("sofer")||s.includes("ghid"))return"Loc de serviciu";if(e)return"Rezervare n curs";if(r)return"Rezervare iniiat de tine";if(t.length===0)return"Liber";if(t.length===1){const c=t[0];return`${c.name||"(fr nume)"} (${c.board_at}  ${c.exit_at})`}return`${t.length} pasageri activi`},jT=({segmentCount:t,passengerCount:e})=>32+Math.max(t,e,1)*28;function _T({seats:t=[],stops:e=[],intentHolds:r={}}){const i=h.useMemo(()=>Array.isArray(t)?[...t].filter(c=>c&&c.label).sort((c,d)=>{const m=xx(c),f=xx(d);return m.isService!==f.isService?m.isService?1:-1:m.numericLabel!==f.numericLabel?m.numericLabel-f.numericLabel:m.row!==f.row?m.row-f.row:m.col!==f.col?m.col-f.col:m.label.localeCompare(f.label,"ro")}):[],[t]),s=h.useMemo(()=>{if(!Array.isArray(e)||e.length===0)return[];const c=Math.max(e.length-1,1);return e.map((d,m)=>({index:m,position:c===0?0:m/c*100}))},[e]);return!Array.isArray(e)||e.length===0?l.jsx("div",{className:"text-red-500 font-semibold p-4",children:"Nu exist staii configurate pentru aceast rut."}):l.jsxs("div",{className:"w-full border border-gray-200 rounded-xl overflow-hidden shadow-sm",children:[l.jsxs("div",{className:"flex border-b border-gray-200 bg-gray-50",children:[l.jsx("div",{className:"w-44 px-4 py-3 text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Loc / Status"}),l.jsx("div",{className:"flex-1 px-6 py-3",children:l.jsx("div",{className:"relative h-16",children:s.map(({position:c,index:d})=>l.jsxs("div",{className:"absolute inset-y-0 flex flex-col items-center",style:{left:`${c}%`,transform:d===0?"translateX(0%)":d===s.length-1?"translateX(-100%)":"translateX(-50%)"},children:[l.jsx("div",{className:"px-3 py-1 text-xs font-semibold text-gray-700 bg-white border border-gray-200 rounded shadow-sm",children:e[d]}),l.jsx("div",{className:"mt-2 flex-1 border-l border-gray-300"})]},`stop-header-${d}`))})})]}),l.jsx("div",{className:"divide-y divide-gray-200",children:i.map(c=>{const d=r==null?void 0:r[c.id],m=(d==null?void 0:d.isMine)===!1,f=(d==null?void 0:d.isMine)===!0,p=(c.passengers||[]).filter(S=>!S.status||S.status==="active"),v=wT(p,e),x=jT({segmentCount:v.length,passengerCount:p.length}),w=ST({activePassengers:p,heldByOther:m,heldByMe:f,seat:c});return l.jsxs("div",{className:"flex",children:[l.jsxs("div",{className:"w-44 px-4 py-3 bg-gray-50 border-r border-gray-200",children:[l.jsx("div",{className:"text-sm font-semibold text-gray-800",children:c.label}),l.jsx("div",{className:"mt-1 text-xs text-gray-600 leading-5",children:w})]}),l.jsx("div",{className:"flex-1 px-6 py-3",children:l.jsxs("div",{className:"relative",style:{minHeight:x},children:[s.map(({position:S,index:b})=>l.jsx("div",{className:"absolute inset-y-0 border-l border-dashed border-gray-200",style:{left:`${S}%`}},`stop-line-${c.id}-${b}`)),v.length>0?v.map(({passenger:S,startIndex:b,endIndex:N},j)=>{var O,M;const _=((O=s[b])==null?void 0:O.position)??0,C=((M=s[N])==null?void 0:M.position)??100,E=Math.max(C-_,2);return l.jsxs("div",{className:"absolute flex flex-col gap-1 rounded-md bg-blue-500/90 text-white text-xs px-3 py-2 shadow-sm",style:{left:`${_}%`,width:`calc(${E}% - 12px)`,top:8+j*28},children:[l.jsx("span",{className:"font-semibold truncate",children:S.name||"(fr nume)"}),l.jsxs("span",{className:"text-[11px] whitespace-nowrap opacity-80",children:[S.board_at,"  ",S.exit_at]})]},`${c.id}-${S.id||j}-${b}-${N}`)}):l.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-xs text-gray-400",children:m?"Rezervare n curs":"Liber pe tot traseul"})]})})]},c.id)})})]})}function Am(t){const{name:e,phone:r}=t,i=(e==null?void 0:e.trim().length)>0,s=(r==null?void 0:r.trim().length)>0,c=!e||/^[a-zA-Z0-9 \-]+$/.test(e.trim()),d=(r==null?void 0:r.replace(/\s+/g,""))||"",m=!r||/^(\+)?\d{10,}$/.test(d),f=i||s;return{valid:f&&c&&m,errors:{name:i&&!c?"Numele poate conine doar litere, cifre, spaii i -":"",phone:s&&!m?"Telefonul trebuie s aib minim 10 cifre i poate ncepe cu +":"",general:f?"":"Completeaz cel puin numele sau telefonul"}}}const Xn=(...t)=>{console.debug("[autoSelect]",...t)},wx=t=>(t??"").toString().trim().toLowerCase();function NT(t){const e=String((t==null?void 0:t.label)||""),r=String((t==null?void 0:t.seat_type)||"");return/ghid/i.test(e)||/ghid|guide/i.test(r)}function CT(t){const e=String((t==null?void 0:t.label)||"");return/ofer|sofer/i.test(e)||String((t==null?void 0:t.seat_type)||"")==="driver"}function KS(t){const e=String(t??"").match(/\d+/);if(!e)return Number.POSITIVE_INFINITY;const r=parseInt(e[0],10);return Number.isNaN(r)?Number.POSITIVE_INFINITY:r}function fn(t){const e=Number.isFinite(t==null?void 0:t.seat_col)?t.seat_col:Number.POSITIVE_INFINITY;return`${String((t==null?void 0:t.row)??9999).padStart(3,"0")}:${String(e).padStart(3,"0")}:${String(KS(t==null?void 0:t.label)).padStart(6,"0")}`}function oo(t,e){return t.findIndex(r=>wx(r)===wx(e))}function ET(t,e,r,i){const s=Array.isArray(t==null?void 0:t.passengers)?t.passengers:[];for(const c of s){if(((c==null?void 0:c.status)||"active")!=="active")continue;const d=oo(i,c.board_at),m=oo(i,c.exit_at);if(d===-1||m===-1||d>=m)continue;if(!(r<=d||e>=m))return!1}return!0}function ka(t,e,r,i){let s=0;const c=Array.isArray(t==null?void 0:t.passengers)?t.passengers:[];for(const d of c){const m=oo(i,d.board_at),f=oo(i,d.exit_at);m===r&&(s+=10),f===e&&(s+=10)}return(c.length>0||String((t==null?void 0:t.status)||"")==="partial")&&(s+=3),s+=1-KS(t==null?void 0:t.label)/1e3,s}function _p(t,e,r,i){return t.reduce((s,c)=>s+ka(c,e,r,i),0)}function QS(t,e){return Number.isFinite(t==null?void 0:t.pair_id)&&Number.isFinite(e==null?void 0:e.pair_id)&&t.pair_id===e.pair_id&&t.id!==e.id}function OT(t,e,r,i){const s=oo(i,e),c=oo(i,r);if(s===-1||c===-1||s>=c)return Xn("Segment invalid",{board_at:e,exit_at:r,stops:i}),{b:-1,e:-1,rows:new Map,guides:[]};const d=[],m=[];for(const v of t||[])v&&(CT(v)||ET(v,s,c,i)&&(NT(v)?m.push(v):d.push(v)));const f=new Map;for(const v of d){const x=Number.isFinite(v==null?void 0:v.row)?v.row:9999;f.has(x)||f.set(x,[]),f.get(x).push(v)}const p=[...f.keys()].sort((v,x)=>v-x);for(const v of p)f.get(v).sort((x,w)=>fn(x).localeCompare(fn(w)));return Xn("Free seats built",{board_at:e,exit_at:r,indexB:s,indexE:c,rows:p.map(v=>({row:v,seats:(f.get(v)||[]).map(x=>x.label)})),guides:m.map(v=>v.label)}),{b:s,e:c,rows:f,guides:m}}function Np(t){const e=[];for(const r of t.values())e.push(...r);return e}function JS(t,e){if(((t==null?void 0:t.length)||0)<e)return null;const r=t.map(i=>Number.isFinite(i==null?void 0:i.seat_col)?i.seat_col:null);for(let i=0;i<=r.length-e;i+=1){if(r[i]==null)continue;let s=!0;for(let c=1;c<e;c+=1)if(r[i+c]==null||r[i+c]!==r[i]+c){s=!1;break}if(s)return t.slice(i,i+e)}return null}function MT(t,e,r,i){var m;const s=Np(t);if(!s.length)return[];const c=s.map(f=>({seat:f,score:ka(f,e,r,i)})).sort((f,p)=>p.score!==f.score?p.score-f.score:fn(f.seat).localeCompare(fn(p.seat))),d=(m=c[0])==null?void 0:m.seat;return d?(Xn("pickSingle (adjacency-aware)",d.label,"score=",c[0].score),[d]):(Xn("pickSingle  none"),[])}function e1(t,e,r,i,s=new Set){const c=[];for(const[m,f]of t.entries())for(let p=0;p<f.length-1;p+=1){const v=f[p],x=f[p+1];if(s.has(v.id)||s.has(x.id)||!Number.isFinite(v==null?void 0:v.seat_col)||!Number.isFinite(x==null?void 0:x.seat_col)||x.seat_col!==v.seat_col+1)continue;const w=_p([v,x],e,r,i)+(QS(v,x)?2:0);c.push({seats:[v,x],row:m,score:w})}if(!c.length)return null;c.sort((m,f)=>f.score!==m.score?f.score-m.score:fn(m.seats[0]).localeCompare(fn(f.seats[0])));const d=c[0];return Xn("bestPair",d==null?void 0:d.seats.map(m=>m.label),"score=",d==null?void 0:d.score),d}function LT(t,e,r,i){const s=new Set,c=e1(t,e,r,i,s);let d=null;if(c){s.add(c.seats[0].id),s.add(c.seats[1].id);const m=[];for(const[f,p]of t.entries())for(const v of p)s.has(v.id)||m.push({seat:v,row:f,score:ka(v,e,r,i)});if(m.sort((f,p)=>p.score!==f.score?p.score-f.score:f.row===c.row!=(p.row===c.row)?(p.row===c.row)-(f.row===c.row):fn(f.seat).localeCompare(fn(p.seat))),m.length){let f=.5;m[0].row===c.row&&(f=2),d={seats:[...c.seats,m[0].seat],score:c.score+m[0].score+f,type:"pair+single",row:c.row}}}for(const[m,f]of t.entries()){const p=JS(f,3);if(p){const v=_p(p,e,r,i)+1,x={seats:p,score:v,type:"block3",row:m};(!d||x.score>d.score||x.score===d.score&&fn(x.seats[0])<fn(d.seats[0]))&&(d=x)}}if(!d){const m=[];for(const[f,p]of t.entries())for(const v of p)m.push({seat:v,row:f,score:ka(v,e,r,i)});m.sort((f,p)=>p.score!==f.score?p.score-f.score:fn(f.seat).localeCompare(fn(p.seat))),m.length>=3&&(d={seats:[m[0].seat,m[1].seat,m[2].seat],score:m[0].score+m[1].score+m[2].score,type:"3singles"})}return d&&Xn("bestTriple",d.type,d.seats.map(m=>m.label),"score=",d.score),d?d.seats:[]}function kT(t,e,r,i,s){const c=[];for(const[p,v]of t.entries())for(let x=0;x<v.length-1;x+=1){const w=v[x],S=v[x+1];if(!Number.isFinite(w==null?void 0:w.seat_col)||!Number.isFinite(S==null?void 0:S.seat_col)||S.seat_col!==w.seat_col+1)continue;const b=_p([w,S],e,r,i)+(QS(w,S)?2:0);c.push({seats:[w,S],row:p,score:b})}c.sort((p,v)=>v.score!==p.score?v.score-p.score:fn(p.seats[0]).localeCompare(fn(v.seats[0])));for(let p=0;p<c.length;p+=1){const v=c[p];for(let x=p+1;x<c.length;x+=1){const w=c[x],S=new Set(v.seats.map(C=>C.id));if(w.seats.some(C=>S.has(C.id)))continue;const b=[...v.seats,...w.seats];if(s===4)return Xn("bestQuad  twoPairs",b.map(C=>C.label),"score=",v.score+w.score),b;const N=new Set(b.map(C=>C.id)),j=[];for(const[C,E]of t.entries())for(const O of E)N.has(O.id)||j.push({seat:O,score:ka(O,e,r,i)});j.sort((C,E)=>E.score!==C.score?E.score-C.score:fn(C.seat).localeCompare(fn(E.seat)));const _=j.slice(0,Math.max(0,s-4)).map(C=>C.seat);if(b.length+_.length>=s){const C=[...b,..._];return Xn("bestQuad  twoPairs+singles",C.map(E=>E.label)),C}}}for(const[p,v]of t.entries()){const x=JS(v,4);if(x){if(s===4)return Xn("bestQuad  block4",x.map(w=>w.label)),x;{const w=new Set(x.map(j=>j.id)),S=[];for(const[j,_]of t.entries())for(const C of _)w.has(C.id)||S.push({seat:C,score:ka(C,e,r,i)});S.sort((j,_)=>_.score!==j.score?_.score-j.score:fn(j.seat).localeCompare(fn(_.seat)));const b=S.slice(0,Math.max(0,s-4)).map(j=>j.seat),N=[...x,...b];if(N.length>=s)return Xn("bestQuad  block4+singles",N.map(j=>j.label)),N}}}const d=c[0]||null;if(d){const p=new Set(d.seats.map(S=>S.id)),v=[];for(const[S,b]of t.entries())for(const N of b)p.has(N.id)||v.push({seat:N,score:ka(N,e,r,i)});v.sort((S,b)=>b.score!==S.score?b.score-S.score:fn(S.seat).localeCompare(fn(b.seat)));const x=v.slice(0,Math.max(0,s-2)).map(S=>S.seat),w=[...d.seats,...x];if(w.length>=s)return Xn("bestQuad  pair+singles",w.map(S=>S.label)),w}const m=Np(t).map(p=>({seat:p,score:ka(p,e,r,i)}));m.sort((p,v)=>v.score!==p.score?v.score-p.score:fn(p.seat).localeCompare(fn(v.seat)));const f=m.slice(0,s).map(p=>p.seat);return f.length===s?(Xn("bestQuad  singles only",f.map(p=>p.label)),f):[]}function kl(t,e,r,i,s){Xn("selectSeats START",{count:s,board_at:e,exit_at:r});const{rows:c,guides:d,b:m,e:f}=OT(t,e,r,i),p=Math.max(1,Number(s)||1);if(![...c.values()].some(w=>w.length>0))return Xn("No rows available, considering GHID seats only"),d.length>0?d.slice(0,Math.min(p,d.length)):[];if(p===1){const w=MT(c,m,f,i);return w.length?w:d.length?[d[0]]:[]}if(p===2){const w=e1(c,m,f,i);if(w)return w.seats;const S=Np(c).map(b=>({seat:b,score:ka(b,m,f,i)})).sort((b,N)=>N.score-b.score||fn(b.seat).localeCompare(fn(N.seat))).slice(0,2).map(b=>b.seat);return S.length===2?(Xn("need=2  singles",S.map(b=>b.label)),S):d.slice(0,Math.min(2,d.length))}if(p===3){const w=LT(c,m,f,i);return w.length===3?w:d.slice(0,Math.min(3,d.length))}const x=kT(c,m,f,i,p);return x.length>=Math.min(p,4)?x:d.length>0?d.slice(0,Math.min(p,d.length)):[]}function t1(t,e,r,i,s=[]){const c=(t||[]).filter(f=>{var p;return!((p=s==null?void 0:s.includes)!=null&&p.call(s,f==null?void 0:f.id))}),m=kl(c,e,r,i,1)[0]||null;return Xn("getBestAvailableSeat ",(m==null?void 0:m.label)??null),m}const TT=({seat:t,selectedRoute:e,passengersData:r,setPassengersData:i,selectedSeats:s,setSelectedSeats:c,autoSelectEnabled:d,fetchPrice:m,setToastMessage:f,setToastType:p,toggleSeat:v,seats:x,selectedDate:w,selectedHour:S,selectedScheduleId:b,selectedDirection:N,onConflictInfo:j,onBlacklistInfo:_,stops:C=[],getStationIdByName:E,getStationNameById:O,stopDetailsByName:M=new Map})=>{var An,$t,un,hr,mr;const R=xe=>{if(!xe)return"";const ge=String(xe).trim();if(/^\d{2}\.\d{2}\.\d{4}$/.test(ge))return ge;const Ne=ge.split("T")[0];if(/^\d{4}-\d{2}-\d{2}$/.test(Ne)){const[Ye,Fe,lt]=Ne.split("-");return`${lt}.${Fe}.${Ye}`}const Xe=new Date(ge);if(!isNaN(Xe)){const Ye=String(Xe.getDate()).padStart(2,"0"),Fe=String(Xe.getMonth()+1).padStart(2,"0"),lt=Xe.getFullYear();return`${Ye}.${Fe}.${lt}`}return ge},I=(xe,ge,Ne)=>{if(ge)return ge;if(xe==null||!O)return"";const Xe=Number(xe);return O(isNaN(Xe)?xe:Xe)||O(String(xe))||""},H=(xe={})=>{const ge=xe.date||xe.created_at||xe.reservation_time||xe.backup_time||"",Ne=ge?R(String(ge).trim()):"";let Xe="";xe.time?Xe=String(xe.time).slice(0,5):xe.hour&&(Xe=String(xe.hour).slice(0,5));const Ye=xe.seat_label?`  Loc: ${xe.seat_label}`:"",Fe=xe.board_name||I(xe.board_station_id,xe.board_at),lt=xe.exit_name||I(xe.exit_station_id,xe.exit_at),ot=Fe||(xe.board_station_id!=null?`#${xe.board_station_id}`:""),at=lt||(xe.exit_station_id!=null?`#${xe.exit_station_id}`:"");return l.jsxs(l.Fragment,{children:[Ne?` ${Ne}  `:" ",xe.route_name||"",Xe?`  ${Xe}`:"",Ye,"  (",l.jsx("b",{children:ot}),"  ",l.jsx("b",{children:at}),")"]})},D=r[t.id]||{},{errors:Y}=Am(D),[G,ie]=h.useState(null),[Oe,ce]=h.useState(!1),[te,k]=h.useState(null),[z,U]=h.useState(!1),[K,T]=h.useState(null),[A,F]=h.useState(null),[V,q]=h.useState(!1),[Q,be]=h.useState({}),[Ce,X]=h.useState(!1),[W,J]=h.useState(""),ue=Array.isArray(C)?C:[],Z=M instanceof Map?M:new Map,_e=ue[0]||null,ke=ue.length>0?ue[ue.length-1]:null,Be=D.board_at||_e,Se=D.exit_at||ke,P=Be&&Z.get(Be)||null,le=Se&&Z.get(Se)||null,se=[];P!=null&&P.time&&se.push(`Ora: ${P.time}`),P!=null&&P.note&&se.push(P.note);const Me=[];le!=null&&le.time&&Me.push(`Ora: ${le.time}`),le!=null&&le.note&&Me.push(le.note);const pe=se.length>0||Me.length>0,Ue=(xe,ge,Ne,Xe={})=>{const{skipOrderCheck:Ye=!1}=Xe;if(!ue.length)return xe;const Fe=xe[t.id]||{},lt=!!Fe.reservation_id;let ot=ue.includes(ge)?ge:_e,at=ue.includes(Ne)?Ne:ke;ot||(ot=_e),at||(at=ke);const Qe=ue.indexOf(ot),Xt=ue.indexOf(at);if(Qe===-1||Xt===-1)return xe;if(!Ye&&Qe>=Xt)return alert("Staia de coborre trebuie s fie dup cea de urcare!"),xe;const _t={...Fe,board_at:ot,exit_at:at};if(lt||!d)return Fe.board_at===ot&&Fe.exit_at===at?xe:(m(t.id,ot,at),{...xe,[t.id]:_t});const Je=Object.keys(xe).map(Yt=>Number(Yt)).filter(Yt=>Yt!==t.id),Mt=x.filter(Yt=>!Je.includes(Yt.id)),it=t1(Mt,ot,at,ue,Je);if(!it)return f("Nu exist loc disponibil pentru segmentul selectat."),p("error"),setTimeout(()=>f(""),3e3),xe;if(it.id===t.id)return Fe.board_at===ot&&Fe.exit_at===at?xe:(m(it.id,ot,at),{...xe,[it.id]:_t});m(it.id,ot,at),c(Yt=>Yt.map(tr=>tr.id===t.id?it:tr));const Ut={...xe};return delete Ut[t.id],Ut[it.id]=_t,Ut};async function Ge(){try{const ge=String(D.phone||"").replace(/\D/g,"");if(ge.length<10)return alert("Telefon invalid");let Ne=D.person_id;if(!Ne){const Fe=await fetch("/api/people",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:D.name||"",phone:ge})}),lt=await Fe.json();if(!Fe.ok||!(lt!=null&&lt.id))return alert((lt==null?void 0:lt.error)||"Eroare la crearea persoanei");Ne=lt.id,i(ot=>({...ot,[t.id]:{...ot[t.id],person_id:Ne}}))}if(!window.confirm("Confirmi schimbarea deintorului pentru acest numr?"))return;const Xe=await fetch("/api/people/owner/set-active",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({person_id:Ne,phone:ge,agent_id:1})}),Ye=await Xe.json();if(!Xe.ok||!(Ye!=null&&Ye.success))return alert((Ye==null?void 0:Ye.error)||"Eroare la schimbarea deintorului");try{const Fe=await fetch(`/api/blacklist/check?phone=${ge}`).then(lt=>lt.json());ie(Fe)}catch{}try{const Fe=await fetch(`/api/people/owner/status?phone=${ge}`).then(lt=>lt.json());F(Fe)}catch{}ce(!1),Te(!1),alert("Deintor actualizat.")}catch{alert("Eroare la schimbarea deintorului")}}const[Ke,We]=h.useState([]),[et,Te]=h.useState(!1),[Ve,qe]=h.useState(!1);h.useEffect(()=>{const xe=w,ge=S,Ne=D.board_at,Xe=D.exit_at;if(!xe||!ge||!Ne||!Xe){qe(!1),We(null);return}const Ye=E?E(Ne):null,Fe=E?E(Xe):null;if(Ye===null||Fe===null){qe(!1),We([]),j([]);return}if(!D.person_id)return;const lt=new URLSearchParams({date:xe,board_station_id:Ye,exit_station_id:Fe,person_id:String(D.person_id)});b?lt.set("route_schedule_id",String(b)):ge&&lt.set("time",ge),N&&lt.set("direction",N),fetch(`/api/reservations/conflict?${lt.toString()}`).then(ot=>ot.json()).then(ot=>{if(ot.conflict){qe(!0);const at=(ot.infos||[]).map(Qe=>({...Qe,board_at:O?O(Qe.board_station_id):"",exit_at:O?O(Qe.exit_station_id):""}));We(at),j(ot.infos)}else qe(!1),We([]),j([])}).catch(()=>{qe(!1),We([]),j([])})},[D.person_id,D.board_at,D.exit_at,w,S,b,N,E,O]),h.useEffect(()=>{const ge=(D.phone||"").replace(/\D/g,"");if(k(null),U(!1),!ge){const Ne=r[t.id]||{},Xe=!!Ne.reservation_id,Ye=(Ne.name||"").trim().length>0;!Xe&&!Ye&&i(Fe=>({...Fe,[t.id]:{...Fe[t.id],name:""}}));return}ge.length<10||fetch(`/api/people/history?phone=${encodeURIComponent(ge)}`).then(Ne=>Ne.json()).then(Ne=>{if(Ne.exists){const Xe=Array.isArray(Ne.history)?Ne.history.map(Ye=>({...Ye,board_at:Ye.board_name||I(Ye.board_station_id,Ye.board_at),exit_at:Ye.exit_name||I(Ye.exit_station_id,Ye.exit_at)})):[];k({...Ne,history:Xe}),!z&&Ne.name&&(D.name||i(Ye=>({...Ye,[t.id]:{...Ye[t.id],name:Ne.name}})),U(!0))}else k(null),U(!1)}).catch(()=>{k(null),U(!1)})},[D.phone,O]),h.useEffect(()=>{const ge=(D.phone||"").replace(/\D/g,"");if(!(ue!=null&&ue.length)||!_e||!ke||!(e!=null&&e.id)){T(null);return}if(ge.length===0){T(null);return}if(ge.length<10)return;const Ne=D;if(Ne.board_at&&Ne.exit_at&&Ne.segmentAutoAppliedPhone===ge)return;if(Ne.segmentAutoAppliedPhone&&Ne.segmentAutoAppliedPhone!==ge&&i(Fe=>({...Fe,[t.id]:{...Fe[t.id]||{},segmentAutoAppliedPhone:null}})),!!Ne.reservation_id){T(null);return}let Ye=!1;return fetch(`/api/traveler-defaults?phone=${encodeURIComponent(ge)}&route_id=${e.id}&direction=${N}`).then(Fe=>{if(!Fe.ok)throw new Error("HTTP "+Fe.status);return Fe.json()}).then(Fe=>{if(Ye)return;if(!(Fe!=null&&Fe.found)){T(null),i(_t=>{const Je=Ue(_t,_e,ke);return Je[t.id]={...Je[t.id]||{},segmentAutoAppliedPhone:ge},Je});return}const lt=Fe.board_name??(Fe.board_station_id!=null?O==null?void 0:O(Fe.board_station_id):null),ot=Fe.exit_name??(Fe.exit_station_id!=null?O==null?void 0:O(Fe.exit_station_id):null);if(!lt||!ot||!ue.includes(lt)||!ue.includes(ot)){T(null);return}const at=Ne.board_at||_e,Qe=Ne.exit_at||ke;lt!==at||ot!==Qe?T({type:"history",board:lt,exit:ot,phone:ge}):(K==null?void 0:K.type)==="history"&&K.phone!==ge&&T(null),i(_t=>{const Je=Ue(_t,lt,ot,{skipOrderCheck:!0});return Je[t.id]={...Je[t.id]||{},segmentAutoAppliedPhone:ge},Je})}).catch(()=>{Ye||T(null)}),()=>{Ye=!0}},[D.phone,e==null?void 0:e.id,t.id,ue,_e,ke,O,i,Ue,K,D.board_at,D.exit_at,D.segmentAutoAppliedPhone]),h.useEffect(()=>{const ge=(D.phone||"").replace(/\D/g,"");F(null),!(ge.length<10)&&(q(!0),fetch(`/api/people/owner/status?phone=${encodeURIComponent(ge)}`).then(Ne=>Ne.json()).then(Ne=>{const Xe=Array.isArray(Ne==null?void 0:Ne.pending)?Ne.pending.map(Ye=>({...Ye,no_shows:Array.isArray(Ye.no_shows)?Ye.no_shows.map(Fe=>{const lt=Array.isArray(x)?x.find(ot=>ot.id===Fe.seat_id):null;return{...Fe,hour:Fe.hour,seat_label:Fe.seat_label||(lt==null?void 0:lt.label)||null,board_at:I(Fe.board_station_id,Fe.board_at),exit_at:I(Fe.exit_station_id,Fe.exit_at)}}):Ye.no_shows})):[];F({...Ne,pending:Xe})}).catch(()=>F(null)).finally(()=>q(!1)))},[D.phone]),h.useEffect(()=>{const xe=Array.isArray(A==null?void 0:A.pending)?A.pending:[];if(xe.length===0)return;let ge=!1;return(async()=>{var Xe;const Ne={};for(const Ye of xe){const Fe=Number(Ye.id);if(!Fe)continue;const lt=Q[Fe],ot=Array.isArray(Ye.no_shows);if(ot&&!lt){const at=Ye.no_shows.slice(0,5).map(Qe=>{const Xt=Array.isArray(x)?x.find(_t=>_t.id===Qe.seat_id):null;return{...Qe,hour:Qe.hour,seat_label:Qe.seat_label||(Xt==null?void 0:Xt.label)||null,board_at:O?O(Number(Qe.board_station_id)):"",exit_at:O?O(Number(Qe.exit_station_id)):""}});Ne[Fe]={no_shows:at,count:Number(Ye.no_shows_count||((Xe=Ye.noShows)==null?void 0:Xe.length)||0)};continue}if(!(lt||ot))try{const at=await fetch(`/api/people/${Fe}/report`).then(_t=>_t.json()),Qe=Array.isArray(at==null?void 0:at.no_shows)?at.no_shows:Array.isArray(at==null?void 0:at.noShows)?at.noShows:[],Xt=Qe.slice(0,5).map(_t=>{const Je=Array.isArray(x)?x.find(Mt=>Mt.id===_t.seat_id):null;return{..._t,hour:_t.hour,seat_label:_t.seat_label||(Je==null?void 0:Je.label)||null,board_at:O?O(Number(_t.board_station_id)):"",exit_at:O?O(Number(_t.exit_station_id)):""}});Ne[Fe]={no_shows:Xt,count:Qe.length}}catch{}}!ge&&Object.keys(Ne).length>0&&be(Ye=>({...Ye,...Ne}))})(),()=>{ge=!0}},[A==null?void 0:A.pending]),h.useEffect(()=>{const xe=D.phone||"",ge=xe.replace(/\D/g,"");if(ge.length<10){ie({phone:xe,blacklisted:!1,reason:null,no_shows:[],created_at:null}),i(Ne=>({...Ne,[t.id]:{...Ne[t.id],person_id:null}}));return}fetch(`/api/blacklist/check?phone=${encodeURIComponent(ge)}`).then(Ne=>Ne.json()).then(Ne=>{const Xe=Array.isArray(Ne.no_shows)?Ne.no_shows.map(ot=>{const at=Array.isArray(x)?x.find(Qe=>Qe.id===ot.seat_id):null;return{...ot,hour:ot.hour,seat_label:ot.seat_label||(at==null?void 0:at.label)||null,board_at:ot.board_name||I(ot.board_station_id,ot.board_at),exit_at:ot.exit_name||I(ot.exit_station_id,ot.exit_at)}}):[],Ye=Array.isArray(Ne.blacklist_history)?Ne.blacklist_history:[],Fe=Ye[Ye.length-1]||{},lt={phone:xe,blacklisted:Ne.blacklisted,reason:Ne.reason,no_shows:Xe,created_at:Fe.created_at||null};ie(lt),Ne&&Ne.person_id&&i(ot=>({...ot,[t.id]:{...ot[t.id]||{},person_id:Ne.person_id}})),_==null||_(lt)}).catch(()=>{ie(null),_==null||_(null)})},[D.phone,O]);const ht=!!((G==null?void 0:G.blacklisted)??(G==null?void 0:G.is_blacklisted)),wt=Array.isArray(G==null?void 0:G.no_shows)?G.no_shows.length:Array.isArray(G==null?void 0:G.noShows)?G.noShows.length:0,ut=Number((G==null?void 0:G.no_shows_count)??(G==null?void 0:G.noShowsCount)??0),St=Math.max(wt,ut),bt=Array.isArray(A==null?void 0:A.pending)?A.pending:[],Nt=!!((G==null?void 0:G.pendingHasBlacklist)??(G==null?void 0:G.pending_has_blacklist)??!1),cn=Number((G==null?void 0:G.pendingNoShowsCount)??(G==null?void 0:G.pending_no_shows_count)??0),Vt=bt,Qn=Vt.length>0?Vt.some(xe=>Number(xe.blacklist)===1):Nt,Jn=Vt.length>0?Vt.reduce((xe,ge)=>{var Ye;const Ne=Number(ge.id),Xe=((Ye=Q[Ne])==null?void 0:Ye.count)||0;return xe+Number(ge.no_shows_count||Xe||0)},0):cn,Yn=ht||Qn,He=St+Jn>0,Ze=String(D.phone||"").replace(/\D/g,"").length>=10&&(ht||Qn||St>0||Jn>0),ln=!!((An=A==null?void 0:A.active)!=null&&An.id&&(D!=null&&D.person_id))&&A.active.id===D.person_id;return l.jsxs("div",{className:"relative border p-2 rounded bg-white shadow space-y-2",children:[l.jsx("button",{onClick:()=>v(t),className:"absolute top-2 right-2 text-gray-400 hover:text-red-500 font-bold text-lg",title:"Deselecteaz locul",children:""}),l.jsxs("div",{className:"font-medium flex items-center gap-2",children:["Loc:",l.jsx(Pu,{className:"min-w-[100px] w-auto",value:{value:t.id,label:t.label},options:(()=>{var lt,ot;const xe=Array.isArray(C)?C:[],ge=(lt=r[t.id])==null?void 0:lt.board_at,Ne=(ot=r[t.id])==null?void 0:ot.exit_at,Xe=xe.findIndex(at=>at===ge),Ye=xe.findIndex(at=>at===Ne);return x.filter(at=>{var Xt;return at.label.toLowerCase().includes("ofer")||at.id===t.id||at.status==="full"?!1:!((Xt=at.passengers)==null?void 0:Xt.some(_t=>{const Je=xe.findIndex(it=>it===_t.board_at),Mt=xe.findIndex(it=>it===_t.exit_at);return!(Ye<=Je||Xe>=Mt)}))}).sort((at,Qe)=>parseInt(at.label)-parseInt(Qe.label)).map(at=>({value:at.id,label:at.label}))})(),onChange:xe=>{const ge=xe.value,Ne=t.id;if(ge===Ne)return;const Xe=x.find(Fe=>Fe.id===ge),Ye=r[Ne];c(Fe=>Fe.map(lt=>lt.id===Ne?Xe:lt)),i(Fe=>{const lt={...Fe};return delete lt[Ne],lt[ge]={...Ye},lt})}})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("div",{className:"w-full relative",children:[l.jsx("input",{type:"text",className:`w-full p-2 border rounded ${Y.name?"border-red-500":"border-gray-300"}`,placeholder:"Nume pasager",value:D.name||"",onChange:xe=>{U(!1),i(ge=>({...ge,[t.id]:{...ge[t.id],name:xe.target.value}}))}}),z&&(te==null?void 0:te.name)&&D.name!==te.name&&l.jsx("button",{type:"button",onClick:()=>{i(xe=>({...xe,[t.id]:{...xe[t.id],name:te.name}})),U(!1)},className:"absolute right-2 top-2 text-gray-500 hover:text-gray-700",title:"Preia numele din baza de date",children:""}),Y.name&&l.jsx("div",{className:"text-red-600 text-xs mt-1",children:Y.name})]}),l.jsxs("div",{className:"w-full relative",children:[l.jsx("input",{inputMode:"tel",pattern:"^\\+?\\d*$",type:"text",className:`w-full p-2 border rounded ${Y.phone?"border-red-500":"border-gray-300"}`,placeholder:"Telefon",value:D.phone||"",onChange:xe=>i(ge=>({...ge,[t.id]:{...ge[t.id],phone:xe.target.value}}))}),Y.phone&&l.jsx("div",{className:"text-red-600 text-xs mt-1",children:Y.phone}),l.jsxs("div",{className:"absolute top-2 right-3 flex space-x-1",children:[(te==null?void 0:te.exists)&&!Yn&&!He&&l.jsx("button",{type:"button",onClick:()=>{ce(xe=>!xe),Te(!1)},className:"text-blue-600 text-lg hover:opacity-75",title:"Vezi ultimele 5 rezervri",children:""}),!Yn&&He&&l.jsx("button",{type:"button",onClick:()=>ce(xe=>!xe),className:"text-orange-600 text-lg hover:opacity-75",title:"Are neprezentri",children:""}),Yn&&l.jsx("button",{type:"button",onClick:()=>{ce(xe=>!xe),Te(!1)},className:"text-red-600 text-lg hover:opacity-75",title:"Persoan n blacklist",children:""}),Ve&&l.jsx("button",{onClick:()=>{Te(xe=>!xe),ce(!1)},className:"inline-block text-yellow-500 text-lg hover:opacity-75 animate-pulse",title:"Exist rezervare n aceeai zi pe acelai sens",children:""})]}),Ve&&et&&Ke.length>0&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>Te(!1)}),l.jsxs("div",{className:`absolute right-0 bottom-full mb-1 min-w-max 
         bg-white p-3 border border-gray-200 rounded-lg 
         shadow-lg z-50 text-sm whitespace-normal`,children:[l.jsx("div",{className:"font-semibold mb-1",children:"Rezervri conflictuale:"}),l.jsx("ul",{className:"space-y-1",children:Ke.map((xe,ge)=>l.jsxs("li",{className:"text-sm whitespace-nowrap",children:[xe.route,"  ",xe.time.slice(0,5),"  Loc: ",xe.seatLabel,"  ",xe.board_at,"",xe.exit_at]},ge))})]})]}),Oe&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>ce(!1)}),l.jsxs("div",{className:`absolute right-0 bottom-full mb-1 min-w-max 
                    bg-white p-3 border border-gray-200 rounded-lg 
                    shadow-lg z-50 text-sm whitespace-normal`,children:[l.jsxs("div",{className:"mb-2",children:[l.jsxs("div",{className:"font-semibold text-gray-800",children:["Deintor curent: ",(($t=A==null?void 0:A.active)==null?void 0:$t.name)||l.jsx("i",{children:"necunoscut"}),ht?" (BLACKLIST)":""]}),St>0&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"font-semibold mt-1 text-gray-700",children:"Neprezentri"}),l.jsx("ul",{className:"space-y-1 whitespace-nowrap text-left",children:(Array.isArray(G==null?void 0:G.no_shows)?G.no_shows:(G==null?void 0:G.noShows)||[]).map((xe,ge)=>l.jsx("li",{className:"text-sm",children:H({...xe})},ge))})]}),((un=te==null?void 0:te.history)==null?void 0:un.length)>0&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"font-semibold mt-1",children:"Istoric rezervri"}),l.jsx("ul",{className:"space-y-1 whitespace-nowrap text-left",children:te.history.map((xe,ge)=>l.jsx("li",{className:"text-sm",children:H({...xe})},ge))})]})]}),Array.isArray(A==null?void 0:A.pending)&&A.pending.length>0&&l.jsxs("div",{className:"mt-2",children:[l.jsx("ul",{className:"space-y-2 whitespace-normal text-left",children:A.pending.map(xe=>{const ge=Number(xe.id),Ne=Q[ge],Xe=Array.isArray(xe.no_shows)?xe.no_shows:Ne?Ne.no_shows:[];return Number(xe.no_shows_count||(Ne==null?void 0:Ne.count)||0),l.jsxs("li",{className:"text-sm whitespace-normal",children:[l.jsxs("div",{className:"font-semibold",children:["Fost deintor: ",xe.name]}),Number(xe.blacklist)===1&&l.jsxs("div",{className:"mt-1",children:[l.jsx("div",{className:"font-semibold text-gray-700",children:"Blacklist"}),l.jsx("ul",{className:"space-y-1 whitespace-nowrap text-left",children:l.jsx("li",{className:"text-sm",children:" Marcaj activ n blacklist"})})]}),Array.isArray(Xe)&&Xe.length>0&&l.jsxs("div",{className:"mt-1",children:[l.jsx("div",{className:"font-semibold text-gray-700",children:"Neprezentri"}),l.jsx("ul",{className:"space-y-1 whitespace-nowrap text-left",children:Xe.slice(0,5).map((Ye,Fe)=>l.jsx("li",{className:"text-sm",children:H({...Ye})},Fe))})]}),Array.isArray(xe.history)&&xe.history.length>0&&l.jsxs("div",{className:"mt-1",children:[l.jsx("div",{className:"font-semibold text-gray-700",children:"Istoric rezervri"}),l.jsx("ul",{className:"space-y-1 whitespace-nowrap text-left",children:xe.history.slice(0,5).map((Ye,Fe)=>l.jsx("li",{className:"text-sm",children:H({...Ye})},Fe))})]})]},xe.id)})}),l.jsx("div",{className:"mt-3 pt-2 border-t flex justify-end",children:l.jsx("button",{type:"button",className:"px-2 py-1 text-xs rounded bg-green-600 text-white hover:bg-green-700",onClick:async()=>{try{const xe=(D.phone||"").replace(/\D/g,""),ge=await fetch("/api/people/owner/confirm",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:xe,agent_id:1})}),Ne=await ge.json();if(!ge.ok||!(Ne!=null&&Ne.success))throw new Error((Ne==null?void 0:Ne.error)||"Eroare");const Xe=await fetch(`/api/people/owner/status?phone=${xe}`).then(Fe=>Fe.json());F(Xe);const Ye=await fetch(`/api/blacklist/check?phone=${xe}`).then(Fe=>Fe.json());ie(Ye),alert("Confirmare salvat.")}catch(xe){alert(xe.message||"Eroare la confirmare.")}},children:"Confirm definitiv"})})]}),Ze&&!ln&&l.jsx("div",{className:"mt-3",children:l.jsx("button",{type:"button",onClick:()=>{J((D==null?void 0:D.name)||""),X(!0)},className:"px-2 py-1 text-xs rounded bg-blue-600 text-white hover:bg-blue-700",title:"Seteaz pasagerul curent ca deintor al numrului",children:"Schimb deintorul"})})]})]}),Ce&&l.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center",children:[l.jsx("div",{className:"absolute inset-0 bg-black/30",onClick:()=>X(!1)}),l.jsxs("div",{className:"relative z-[61] w-full max-w-md bg-white rounded-xl shadow-xl border border-gray-200 p-4",children:[l.jsx("div",{className:"text-lg font-semibold mb-2",children:"Schimb deintorul"}),l.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Nume nou"}),l.jsx("input",{type:"text",className:"w-full p-2 border rounded border-gray-300",placeholder:"Introdu numele deintorului",value:W,onChange:xe=>J(xe.target.value)}),l.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[l.jsx("button",{type:"button",className:"px-3 py-2 rounded border border-gray-300",onClick:()=>X(!1),children:"Anuleaz"}),l.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:async()=>{try{i(xe=>({...xe,[t.id]:{...xe[t.id]||{},name:W}})),await Ge(),X(!1)}catch{}},children:"Salveaz"})]})]})]}),V&&l.jsx("div",{className:"mt-1 text-xs text-gray-500",children:"Verific numrul"})]})]}),(K==null?void 0:K.type)==="history"&&l.jsxs("div",{className:"text-xs text-red-700 bg-red-50 border border-red-200 rounded px-3 py-2 mb-2",children:["Segment actualizat automat (istoric client): ",l.jsx("strong",{children:K.board})," "," ",l.jsx("strong",{children:K.exit})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx(Pu,{className:"w-full",options:(()=>{const xe=C||[],ge=xe.findIndex(Xe=>{var Ye;return Xe===((Ye=r[t.id])==null?void 0:Ye.exit_at)});return(ge>0?xe.slice(0,ge):xe).map(Xe=>({value:Xe,label:Xe}))})(),placeholder:"Urc din",value:(hr=r[t.id])!=null&&hr.board_at?{value:r[t.id].board_at,label:r[t.id].board_at}:null,onChange:xe=>{const ge=xe.value;T(null),i(Ne=>{const Ye=(Ne[t.id]||{}).exit_at||ke;return Ue(Ne,ge,Ye)})}}),l.jsx(Pu,{className:"w-full",options:(()=>{const xe=C||[],ge=xe.findIndex(Xe=>{var Ye;return Xe===((Ye=r[t.id])==null?void 0:Ye.board_at)});return(ge>=0?xe.slice(ge+1):xe).map(Xe=>({value:Xe,label:Xe}))})(),placeholder:"Coboar la",value:(mr=r[t.id])!=null&&mr.exit_at?{value:r[t.id].exit_at,label:r[t.id].exit_at}:null,onChange:xe=>{const ge=xe.value;T(null),i(Ne=>{const Ye=(Ne[t.id]||{}).board_at||_e;return Ue(Ne,Ye,ge)})}})]}),pe&&l.jsxs("div",{className:"text-[11px] text-gray-700 bg-gray-50 border border-gray-200 rounded px-3 py-2 mt-2 space-y-1",children:[se.length>0&&l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold text-gray-800",children:"Urcare:"})," ",se.join(", ")]}),Me.length>0&&l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold text-gray-800",children:"Coborre:"})," ",Me.join(", ")]})]})]})};function n1({selectedDate:t,setSelectedDate:e}){const r=i=>{e(i),console.log("[CalendarWrapper] Selectat:",i.toISOString().split("T")[0])};return l.jsx("div",{className:"bg-white border rounded-lg p-3 w-full shadow-sm",children:l.jsx(HE,{onChange:r,value:t,locale:"ro-RO",tileClassName:({date:i})=>i.getDate()===t.getDate()&&i.getMonth()===t.getMonth()&&i.getFullYear()===t.getFullYear()?"bg-blue-500 text-white font-bold rounded":null})})}const AT=["Botoani  Iai","Botoani  Bucureti","Dorohoi  Botoani  Iai","Botoani  Braov","Iai  Rdui"],DT=["Iai  Botoani","Bucureti  Botoani","Iai  Dorohoi  Botoani","Braov  Botoani","Rdui  Iai"],yi=t=>t==="retur"?"retur":"tur",Sx=(t,e)=>[...t].sort((r,i)=>{const s=e.indexOf(r.route.name),c=e.indexOf(i.route.name);return s===-1&&c===-1?r.route.name.localeCompare(i.route.name):s===-1?1:c===-1?-1:s-c});function RT({onClose:t,moveToOtherTripData:e,onMoveSuccess:r,stops:i=[]}){const{passenger:s,reservation_id:c,boardAt:d,exitAt:m,originalTime:f,originalRouteId:p,originalDate:v,originalScheduleId:x,originalDirection:w,originalSchedule:S}=e||{},b=w?yi(w):null,[N,j]=h.useState(()=>{const Te=v?new Date(v):new Date;return isNaN(Te)?new Date:Te}),[_,C]=h.useState([]),[E,O]=h.useState(null),[M,R]=h.useState(b),[I,H]=h.useState([]),[D,Y]=h.useState([]),[G,ie]=h.useState(S||null),[Oe,ce]=h.useState([]),[te,k]=h.useState(null),[z,U]=h.useState(""),[K,T]=h.useState(!1),[A,F]=h.useState(!1),[V,q]=h.useState({done:0,total:0}),[Q,be]=h.useState([]),[Ce,X]=h.useState(null),W=h.useRef(new Map),J=(G==null?void 0:G.scheduleId)??(G==null?void 0:G.id)??null,ue=(G==null?void 0:G.departure)??(typeof(G==null?void 0:G.time)=="string"?G.time:null),Z=G!=null&&G.direction?yi(G.direction):M||b||null,_e=h.useCallback(Te=>{k(Ve=>Ve&&Ve.id===Te.id?null:Te)},[]),ke=h.useCallback(Te=>{if(!Te)return null;const Ve=I.find(qe=>qe.name===Te);return Ve?Ve.station_id:null},[I]),Be=h.useCallback(Te=>{if(Te==null)return"";const Ve=I.find(qe=>qe.station_id===Te);return Ve?Ve.name:""},[I]),Se=h.useCallback(Te=>Array.isArray(Te)?Te.map(Ve=>{if(Array.isArray(Ve==null?void 0:Ve.seats))return{...Ve,seats:Se(Ve.seats)};if(!Ve||typeof Ve!="object")return Ve;const qe=Array.isArray(Ve.passengers)?Ve.passengers.map(ht=>({...ht,board_at:ht.board_at??Be(ht.board_station_id),exit_at:ht.exit_at??Be(ht.exit_station_id)})):[];return{...Ve,passengers:qe}}):Te,[Be]),P=h.useCallback(async(Te,Ve)=>{if(!Te)return[];const qe=yi(Ve),ht=`${Te}:${qe}`;if(W.current.has(ht))return W.current.get(ht);const wt=new URLSearchParams({direction:qe}),ut=await fetch(`/api/routes/${Te}/stations?${wt.toString()}`);if(!ut.ok)throw new Error("Eroare la citirea staiilor");const St=await ut.json(),bt=Array.isArray(St)?[...St].sort((Nt,cn)=>(Nt.sequence??0)-(cn.sequence??0)):[];return W.current.set(ht,bt),bt},[]),le=h.useCallback((Te,Ve,qe)=>{if(!Te)return;const{route:ht,direction:wt,stops:ut}=Te;O(ht),R(wt),H(ut),Y(ut.map(bt=>bt.name)),U(""),be([]),X(null),ce([]),k(null);const St=Array.isArray(ht.schedules)?ht.schedules.filter(bt=>yi(bt.direction)===wt):[];ie(bt=>{const Nt=(bt==null?void 0:bt.scheduleId)??(bt==null?void 0:bt.id)??null,cn=typeof(bt==null?void 0:bt.departure)=="string"?bt.departure:typeof(bt==null?void 0:bt.time)=="string"?bt.time:null;return St.find(Vt=>Ve&&(Vt.scheduleId??Vt.id)===Ve)||St.find(Vt=>qe&&Vt.departure===qe)||St.find(Vt=>Nt&&(Vt.scheduleId??Vt.id)===Nt)||St.find(Vt=>cn&&Vt.departure===cn)||St[0]||null})},[]),se=h.useCallback(Te=>{U(""),ie(Te)},[]);h.useEffect(()=>{let Te=!1;return(async()=>{try{F(!0),q({done:0,total:0});const qe=await(await fetch("/api/routes")).json();if(!Array.isArray(qe))throw new Error("Invalid response");const ht=qe.reduce((ut,St)=>{const bt=["tur","retur"].filter(Nt=>Array.isArray(St.schedules)&&St.schedules.some(cn=>yi(cn.direction)===Nt));return ut+bt.length},0);Te||q({done:0,total:ht});const wt=[];for(const ut of qe)for(const St of["tur","retur"]){if(!(Array.isArray(ut.schedules)&&ut.schedules.some(Nt=>yi(Nt.direction)===St))){Te||q(Nt=>({done:Nt.done+1,total:ht||Nt.total}));continue}try{const Nt=await P(ut.id,St),cn=Nt.map(Jn=>Jn.name),Vt=d?cn.indexOf(d):-1,Qn=m?cn.indexOf(m):-1;Vt!==-1&&Qn!==-1&&Vt<Qn&&wt.push({route:ut,direction:St,stops:Nt})}catch{}finally{Te||q(Nt=>({done:Nt.done+1,total:ht||Nt.total}))}}Te||(C(wt),wt.length||U("Nu exist trasee compatibile pentru staiile selectate."))}catch(Ve){Te||(console.error("[MoveToOtherTripPanel] route fetch failed",Ve),U("Eroare la ncrcarea rutelor!"),C([]))}finally{Te||F(!1)}})(),()=>{Te=!0}},[d,m,P]),h.useEffect(()=>{if(!_.length)return;const Te=b;let Ve=null;p&&(Ve=_.find(qe=>qe.route.id===p&&(!Te||qe.direction===Te)),!Ve&&Te&&(Ve=_.find(qe=>qe.route.id===p))),Ve||(Ve=_[0]),Ve&&le(Ve,x,f)},[_,le,p,x,f,b]),h.useEffect(()=>{let Te=!1;return(async()=>{if(!(E!=null&&E.id)||!M){H([]),Y([]);return}try{const Ve=await P(E.id,M);if(Te)return;H(Ve),Y(Ve.map(qe=>qe.name))}catch(Ve){Te||(console.error("[MoveToOtherTripPanel] failed to refresh stops",Ve),H([]),Y([]))}})(),()=>{Te=!0}},[E,M,P]),h.useEffect(()=>{let Te=!1;if(!Ce||!E||!J||!N){ce([]),k(null);return}const Ve=ke(d),qe=ke(m);if(Ve===null||qe===null){ce([]),k(null);return}const ht=new URLSearchParams({route_id:String(E.id),route_schedule_id:String(J),date:en(N,"yyyy-MM-dd"),board_station_id:String(Ve),exit_station_id:String(qe)});return ue&&ht.set("time",ue),Z&&ht.set("direction",Z),fetch(`/api/seats/${Ce.vehicle_id}?${ht.toString()}`).then(wt=>wt.json()).then(wt=>{if(Te)return;const ut=Se(wt);ce(Array.isArray(ut)?ut:[]);const St=t1(Array.isArray(ut)?ut:Ce.seats||[],d,m,D);k(St||null)}).catch(()=>{Te||(U("Eroare la ncrcarea locurilor!"),ce([]),k(null))}),()=>{Te=!0}},[Ce,E,J,N,d,m,ue,Z,Se,ke,D]),h.useEffect(()=>{let Te=!1;if(!E||!J||!N){ce([]),k(null),be([]),X(null);return}const Ve=ke(d),qe=ke(m);if(Ve===null||qe===null){ce([]),k(null),be([]),X(null);return}const ht=en(N,"yyyy-MM-dd"),wt=new URLSearchParams({schedule_id:String(J),route_id:String(E.id),date:ht});return ue&&wt.set("time",ue),fetch(`/api/trips/find?${wt.toString()}`).then(ut=>ut.json()).then(ut=>{if(Te)return;if(!(ut!=null&&ut.id)){be([]),X(null),U("Nu exist curs programat!");return}const St=new URLSearchParams({route_id:String(E.id),route_schedule_id:String(J),date:ht,board_station_id:String(Ve),exit_station_id:String(qe)});ue&&St.set("time",ue),Z&&St.set("direction",Z),fetch(`/api/seats?${St.toString()}`).then(bt=>bt.json()).then(bt=>{if(Te)return;const Nt=Se(bt);be(Array.isArray(Nt)?Nt:[]),Array.isArray(Nt)&&Nt.length>0?X(Nt[0]):X(null)}).catch(()=>{Te||(be([]),X(null),U("Eroare la ncrcarea vehiculelor!"))})}).catch(()=>{Te||(U("Eroare la identificarea cursei!"),be([]),X(null))}),()=>{Te=!0}},[E,J,N,d,m,ue,Z,Se,ke]);const Me=h.useMemo(()=>{if(!(E!=null&&E.schedules))return[];if(!M&&!Z)return E.schedules;const Te=yi(M||Z);return E.schedules.filter(Ve=>yi(Ve.direction)===Te)},[E,M,Z]),pe=h.useMemo(()=>Sx(_.filter(Te=>Te.direction==="tur"),AT),[_]),Ue=h.useMemo(()=>Sx(_.filter(Te=>Te.direction==="retur"),DT),[_]),Ge=async()=>{if(!te||!E||!J||!N){U("Selecteaz dat, rut, or i loc!");return}const Te=ke(d),Ve=ke(m);if(Te===null||Ve===null){U("Staiile selectate nu sunt disponibile pe aceast rut.");return}const qe=en(N,"yyyy-MM-dd"),ht=new URLSearchParams({schedule_id:String(J),route_id:String(E.id),date:qe});ue&&ht.set("time",ue);const wt=await fetch(`/api/trips/find?${ht.toString()}`),ut=await wt.json().catch(()=>({}));if(!wt.ok||!(ut!=null&&ut.id)){U("Nu exist aceast curs!");return}const St={old_reservation_id:c,new_trip_id:ut.id,new_seat_id:te.id,board_station_id:Te,exit_station_id:Ve,phone:s==null?void 0:s.phone,name:s==null?void 0:s.name};try{const bt=await fetch("/api/reservations/moveToOtherTrip",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(St)}),Nt=await bt.json().catch(()=>({}));if(!bt.ok){U(Nt.error||"Eroare la mutare!");return}window.dispatchEvent(new CustomEvent("toast",{detail:{message:"Rezervare mutat cu succes!",type:"success"}})),t(),r==null||r({tripId:ut.id,vehicleId:ut.vehicle_id,routeId:E.id,date:N,hour:ue,schedule:G?{...G,direction:Z}:null})}catch(bt){window.dispatchEvent(new CustomEvent("toast",{detail:{message:bt.message||"Eroare la mutare!",type:"error"}}))}},Ke=(Te,Ve)=>l.jsxs("div",{className:"mb-4",children:[l.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-1",children:Te}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[A&&Ve.length===0&&l.jsxs("div",{className:"mb-2 flex items-center gap-2 text-sm text-gray-600",children:[l.jsx("div",{className:"h-4 w-4 rounded-full border-2 border-gray-300 border-t-transparent animate-spin"}),l.jsxs("span",{children:["Se ncarc rutele compatibile ",V.done,"/",V.total||""]})]}),Ve.map(qe=>{const ht=(E==null?void 0:E.id)===qe.route.id&&M===qe.direction;return l.jsx("button",{onClick:()=>le(qe),className:`px-3 py-1 rounded border text-sm ${ht?"bg-blue-500 text-white border-blue-600":"bg-gray-100 hover:bg-gray-200 border-gray-300 text-gray-800"}`,children:qe.route.name},`${qe.route.id}-${qe.direction}`)}),!A&&Ve.length===0&&l.jsx("span",{className:"text-sm text-gray-500",children:"Nicio rut disponibil"})]})]}),We=()=>{if(!E||!Me.length)return null;const Te=v?new Date(v):null;return l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-1",children:"Ore disponibile"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:Me.filter(Ve=>{if(!Te)return!0;const qe=E.id===p,ht=N.getFullYear()===Te.getFullYear()&&N.getMonth()===Te.getMonth()&&N.getDate()===Te.getDate(),wt=x&&Ve.scheduleId===x||!x&&f&&Ve.departure===f;return!(qe&&ht&&wt)}).map(Ve=>{const qe=Ve.themeColor||"#2563eb",ht=J===Ve.scheduleId,wt=Ve.disabledRun||Ve.disabledOnline||Ve.tripDisabled;return l.jsx("button",{onClick:()=>!wt&&se(Ve),disabled:wt,className:`px-2 py-0 rounded border text-sm ${ht?"bg-blue-500 text-white border-blue-600":"bg-gray-100 hover:bg-gray-200 border-gray-300 text-gray-800"} ${wt?"line-through text-gray-400 cursor-not-allowed":""}`,style:{backgroundColor:`${qe}20`,borderColor:qe},children:Ve.departure},Ve.scheduleId)})})]})},et=h.useMemo(()=>Array.isArray(Oe)&&Oe.length?Oe:Ce!=null&&Ce.seats?Ce.seats:[],[Oe,Ce]);return l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm",children:[l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-3xl p-0 overflow-y-auto max-h-[90vh] relative",children:[l.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800",children:" Mut pe alt curs"}),l.jsx("button",{className:"text-gray-600 hover:text-black text-2xl",onClick:t,children:""})]}),l.jsxs("div",{className:"p-6 text-gray-700 space-y-4",children:[l.jsx(n1,{selectedDate:N,setSelectedDate:j}),Ke("Tururi",pe),Ke("Retururi",Ue),We(),Q.length>1&&l.jsx("div",{className:"flex flex-wrap gap-2 items-center",children:Q.map((Te,Ve)=>l.jsxs("button",{className:`px-3 py-1 rounded border text-sm ${Te.vehicle_id===(Ce==null?void 0:Ce.vehicle_id)?"bg-blue-500 text-white border-blue-600":"bg-gray-100 hover:bg-gray-200 border-gray-300 text-gray-800"}`,onClick:()=>X(Te),children:[Te.vehicle_name||Te.name||`Vehicul ${Ve+1}`," ",Te.is_primary?"(Principal)":"(Dublur)"]},Te.vehicle_id||Ve))}),J&&et.length>0&&l.jsxs("div",{className:"mt-6 flex flex-col items-center",children:[l.jsx("h3",{className:"text-base font-semibold text-gray-700 mb-2",children:"Alege locul:"}),l.jsx(XS,{seats:et,stops:D,selectedSeat:te,selectedSeats:te?[te]:[],setSelectedSeats:Te=>k(Te[0]||null),toggleSeat:_e,selectedRoute:E,boardAt:d,exitAt:m,readOnly:!1}),te&&l.jsxs("div",{className:"mt-2 text-green-600 text-base",children:["Loc selectat: ",te.label]})]}),l.jsx("div",{className:"flex justify-end mt-8",children:l.jsx("button",{className:"bg-green-600 text-white px-8 py-2 rounded-lg hover:bg-green-700 text-lg font-semibold shadow",onClick:()=>T(!0),disabled:!te||!J||!E,children:"Mut rezervarea"})}),z&&l.jsx("div",{className:"mt-4 text-center text-red-600 font-semibold",children:z})]})]}),l.jsx(rs,{show:K,title:"Confirm mutarea",message:"Eti sigur c vrei s mui aceast rezervare pe noua curs i loc?",confirmText:"Mut",cancelText:"Renun",onConfirm:async()=>{T(!1),await Ge()},onCancel:()=>T(!1)})]})}function PT({tripId:t,show:e,onClose:r,onAdded:i,onUpdated:s,existingVehicleIds:c,editTvId:d}){const[m,f]=h.useState([]);h.useEffect(()=>{e&&fetch(`/api/vehicles/${t}/available`).then(v=>v.json()).then(v=>{f(v.filter(x=>!c.includes(x.id)))}).catch(console.error)},[e,c,d]);const p=async v=>{let x,w;d==="main"?(x=`/api/trips/${t}/vehicle`,w={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({newVehicleId:v})}):d?(x=`/api/trips/${t}/vehicles/${d}`,w={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({newVehicleId:v})}):(x=`/api/trips/${t}/vehicles`,w={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({vehicle_id:v})});const S=await fetch(x,w);if(!S.ok){const b=await S.json().catch(()=>({}));alert(b.error||"Eroare la salvare");return}if(d==="main")s(v);else{const b=await S.json();s(b)}r()};return e?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center",children:l.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-xl",children:[l.jsx("h2",{className:"text-lg font-semibold mb-4",children:d?"Modific main":"Adaug dublur"}),l.jsxs("ul",{className:"space-y-2 max-h-56 overflow-auto",children:[m.map(v=>l.jsxs("li",{className:"flex justify-between",children:[l.jsxs("span",{children:[v.name," (",v.plate_number||v.plate,")"]}),l.jsx("button",{onClick:()=>p(v.id),className:"px-2 py-1 bg-blue-600 text-white rounded",children:d?"Modific":"Adaug"})]},v.id)),m.length===0&&l.jsx("li",{children:"Nu mai sunt vehicule disponibile"})]}),l.jsx("button",{onClick:r,className:"mt-4 px-3 py-1 bg-gray-300 rounded",children:"Anuleaz"})]})}):null}function zT({userRole:t,user:e}){var fc,Oo;const[r,i]=h.useState(""),[s,c]=h.useState(null),d=typeof t=="string"?t.toLowerCase():"",m=["admin","operator_admin","agent"].includes(d)?"agent":"online",f=h.useRef(new Set),p=h.useRef(null),[v,x]=h.useState(new Date),[w,S]=h.useState([]),[b,N]=h.useState([]),[j,_]=h.useState("grid"),[C,E]=h.useState(!1),O=h.useRef([]),M=h.useRef(null),[R,I]=h.useState({}),[H,D]=h.useState({}),[Y,G]=h.useState({}),[ie,Oe]=h.useState(!1),ce=h.useRef(null),te=h.useRef(null),k=h.useRef({}),[z,U]=h.useState(null),K=h.useMemo(()=>{var de,ye;if(!Array.isArray(w)||w.length<2)return null;const B=((de=w[0])==null?void 0:de.station_id)??null,ne=((ye=w[w.length-1])==null?void 0:ye.station_id)??null;return B!=null&&ne!=null?`${B}|${ne}`:null},[w]);h.useEffect(()=>{K&&(N([]),I({}),D({}),ar(!1))},[K]),h.useEffect(()=>{O.current=b},[b]),h.useEffect(()=>{if(!C)return;const B=ne=>{ne.key==="Escape"&&(E(!1),_("grid"))};return window.addEventListener("keydown",B),()=>{window.removeEventListener("keydown",B)}},[C]);const T=h.useCallback(()=>{if(!z)return;(Array.isArray(O.current)?O.current:[]).forEach(ne=>{ne!=null&&ne.id&&fetch(`/api/intents/${z}/${ne.id}`,{method:"DELETE",credentials:"include"}).catch(()=>{})})},[z]),[A,F]=h.useState(null),V=h.useCallback((B,ne)=>{if(!B||!Number.isFinite(ne))return null;const de=String(B).trim().match(/^(\d{1,2}):(\d{2})/);if(!de)return null;const ye=Number(de[1])*60+Number(de[2]);if(!Number.isFinite(ye))return null;const re=(ye+ne+24*60)%(24*60),oe=String(Math.floor(re/60)).padStart(2,"0"),Ee=String(re%60).padStart(2,"0");return`${oe}:${Ee}`},[]),q=h.useMemo(()=>w.map(B=>B.name),[w]),[Q,be]=h.useState(null),[Ce,X]=h.useState(null),W=(Q==null?void 0:Q.departure)??null,J=(Q==null?void 0:Q.scheduleId)??(Q==null?void 0:Q.id)??null,ue=(Q==null?void 0:Q.direction)??Ce??null,Z=J!=null,_e=h.useMemo(()=>{const B=new Map;if(!Array.isArray(w)||!w.length)return B;let ne=0;return w.forEach((de,ye)=>{const re=ye===0?0:ne,oe=Number(de.duration_min);Number.isFinite(oe)&&oe>0&&(ne+=oe);const Ee=typeof de.public_note=="string"?de.public_note.trim():"",Ie=de.public_latitude!=null?Number(de.public_latitude):null,st=de.public_longitude!=null?Number(de.public_longitude):null;B.set(de.name,{stationId:Number(de.station_id),note:Ee||null,offsetMinutes:re,time:W?V(W,re):null,latitude:Number.isFinite(Ie)?Ie:null,longitude:Number.isFinite(st)?st:null})}),B},[w,W,V]),ke=h.useMemo(()=>{const B=new Map;for(const ne of w)B.set(ne.name,ne.station_id);return B},[w]),Be=h.useMemo(()=>{const B=new Map;for(const ne of w)B.set(String(ne.station_id),ne.name);return B},[w]),Se=h.useCallback(B=>B?ke.get(B)??null:null,[ke]),P=h.useCallback(B=>B==null?"":Be.get(String(B))??"",[Be]),le=h.useCallback(async()=>{if(!z)return G({}),Oe(!1),{};try{const B=await fetch(`/api/intents?trip_id=${z}`,{credentials:"include"});if(!B.ok){if(B.status===404||B.status===400)return G({}),Oe(!0),{};throw new Error("Eroare la ncrcarea intentelor")}const ne=await B.json();if(!Array.isArray(ne))return G({}),Oe(!0),{};const de=ne.reduce((ye,re)=>{const oe=Number(re==null?void 0:re.seat_id);return Number.isFinite(oe)&&(ye[oe]={expires_at:re.expires_at||null,isMine:re.is_mine===1}),ye},{});return G(de),Oe(!0),de}catch(B){return console.error("Eroare la refresh intent",B),Oe(!0),null}},[z]);h.useEffect(()=>{if(ce.current&&(clearInterval(ce.current),ce.current=null),Oe(!1),!z){G({}),k.current={};return}le();const B=setInterval(()=>{le()},2500);return ce.current=B,()=>{clearInterval(B),ce.current=null}},[z,le]),h.useEffect(()=>{const B=z;return()=>{if(!B)return;const ne=Object.entries(k.current||{}).filter(([,de])=>de==null?void 0:de.isMine);ne.length&&ne.forEach(([de])=>{fetch(`/api/intents/${B}/${de}`,{method:"DELETE",credentials:"include"}).catch(()=>{})})}},[z]);const se=h.useCallback(async()=>{if(!z||b.length===0)return!0;const B=await le(),ne=B&&typeof B=="object"?B:k.current||{},de=new Set;return Object.entries(ne).forEach(([ye,re])=>{const oe=Number(ye);Number.isFinite(oe)&&(re==null?void 0:re.isMine)===!1&&b.some(Ee=>Ee.id===oe)&&de.add(oe)}),de.size===0?!0:(N(ye=>ye.filter(re=>!de.has(re.id))),I(ye=>{const re={...ye};return de.forEach(oe=>{delete re[oe]}),re}),He("Unele locuri sunt n curs de rezervare de alt agent i au fost scoase din selecie."),Ze("error"),setTimeout(()=>He(""),4e3),!1)},[z,b,le]),Me=()=>{var B;return typeof window<"u"&&((B=window.crypto)!=null&&B.randomUUID)?window.crypto.randomUUID():`res-${Date.now()}-${Math.random().toString(36).slice(2,10)}`},pe=h.useCallback(B=>Array.isArray(B)?B.map(ne=>{if(ne&&Array.isArray(ne.seats))return{...ne,seats:pe(ne.seats)};if(!ne||typeof ne!="object")return ne;const de=Array.isArray(ne.passengers)?ne.passengers.map(ye=>({...ye,board_at:ye.board_at??P(ye.board_station_id),exit_at:ye.exit_at??P(ye.exit_station_id)})):[];return{...ne,passengers:de}}):B,[P]),Ue=h.useCallback(B=>{const ne=Array.isArray(B)?B.map(de=>({...de,board_at:P(de.board_station_id),exit_at:P(de.exit_station_id)})):[];vs(ne)},[P]),[Ge,Ke]=h.useState(!0),[We,et]=h.useState([]),[Te,Ve]=h.useState([]),[qe,ht]=h.useState(!1),wt=h.useRef(null),ut=h.useRef(null),St=h.useRef(null);h.useRef(en(new Date,"yyyy-MM-dd"));const[bt,Nt]=h.useState(!1),[cn,Vt]=h.useState(!1),[Qn,Jn]=h.useState(""),[Yn,He]=h.useState(""),[er,Ze]=h.useState("info"),[ln,An]=h.useState({}),[$t,un]=h.useState(!1),[hr,mr]=h.useState([]),[xe,ge]=h.useState(null),[Ne,Xe]=h.useState(null),[Ye,Fe]=h.useState(null),[lt,ot]=h.useState(!1),at=h.useRef([]);h.useEffect(()=>{k.current=Y},[Y]);const[Qe,Xt]=h.useState(null),[_t,Je]=h.useState(null),[Mt,it]=h.useState(null),[Ut,Yt]=h.useState(null),[tr,ha]=h.useState(null),[Mi,ec]=h.useState([]),[tc,nc]=h.useState(!1),[fs,Li]=h.useState(null),[yn,Pr]=h.useState([]),[Sn,jn]=h.useState(null),[So,Wr]=h.useState(!1),[rc,hs]=h.useState(null),[$n,ac]=h.useState(""),[ic,ar]=h.useState(!1),zr=h.useRef(1);h.useEffect(()=>{let B=!1;return(async()=>{try{const de=await fetch("/api/fiscal-settings");if(!de.ok)return;const ye=await de.json().catch(()=>({}));B||ac(typeof(ye==null?void 0:ye.receipt_note)=="string"?ye.receipt_note:"")}catch(de){console.error("Eroare la citirea setrilor fiscale",de)}})(),()=>{B=!0}},[]),h.useEffect(()=>{ar(!1)},[A==null?void 0:A.id,J,v,K]),h.useEffect(()=>{zr.current=1},[A==null?void 0:A.id,J,v,K]),h.useEffect(()=>{const B=b.reduce((ne,de)=>{const ye=R==null?void 0:R[de.id];return ye!=null&&ye.reservation_id?ne:ne+1},0);B>0&&(zr.current=B)},[b,R]);const[ms,ps]=h.useState(!1),[ir,gs]=h.useState(""),[Va,vs]=h.useState([]),[Ia,Ba]=h.useState(!1),jo=(Va==null?void 0:Va.length)??0,Ha=jo===1?"rezervare conflictual":"rezervri conflictuale",bs=yn,sc=()=>{if(b.length<2)return;const B=b[0].id,ne=R[B];ne&&I(de=>{const ye={...de},re=JSON.parse(JSON.stringify(ne)),{discount:oe,discount_type_id:Ee,...Ie}=re;return b.slice(1).forEach(st=>{ye[st.id]={...Ie,discount_type_id:null}}),ye})},oc=async()=>{var de;const B=Ya();if(!r||B<=0){c(null);return}const ne={code:r,route_id:(A==null?void 0:A.id)||null,route_schedule_id:J,date:en(v,"yyyy-MM-dd"),time:W,channel:m,price_value:B,phone:(((de=Mi==null?void 0:Mi[0])==null?void 0:de.phone)||"").trim()||null};try{const re=await(await fetch("/api/promo-codes/validate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ne)})).json();re.valid?(c({promo_code_id:re.promo_code_id,code:r.toUpperCase(),discount_amount:re.discount_amount,combinable:!!re.combinable}),He(`Cod aplicat: -${re.discount_amount} lei`),Ze("success"),setTimeout(()=>He(""),2500)):(c(null),He(re.reason||"Cod invalid"),Ze("error"),setTimeout(()=>He(""),3e3))}catch{c(null),He("Eroare la validare cod"),Ze("error"),setTimeout(()=>He(""),3e3)}},[Dn,kd]=h.useState(null),[Td,Fa]=h.useState(!1),[_o,Zr]=h.useState(!1),[Xr,$r]=h.useState([]),[No,ys]=h.useState([]),[ki,Ur]=h.useState(null),_n=h.useMemo(()=>Array.isArray(ki)&&ki.length>0?ki:No,[ki,No]),Ti=((fc=_n[0])==null?void 0:fc.id)??null;h.useEffect(()=>{if(!(A!=null&&A.id)){$r([]);return}const B=new URLSearchParams;if(J?B.set("route_schedule_id",J):(W&&B.set("time",W),ue&&B.set("direction",ue)),!B.has("route_schedule_id")&&!B.has("time")){$r([]);return}fetch(`/api/routes/${A.id}/discounts?${B.toString()}`).then(ne=>ne.ok?ne.json():[]).then($r).catch(()=>$r([]))},[A,J,W,ue]),h.useEffect(()=>{if(!(A!=null&&A.id)){Ur(null);return}const B=new URLSearchParams;if(J?B.set("route_schedule_id",String(J)):(W&&B.set("time",W),ue&&B.set("direction",ue)),!B.toString()){Ur(null);return}const ne=new AbortController;return fetch(`/api/routes/${A.id}/pricing-categories?${B.toString()}`,{signal:ne.signal}).then(de=>de.ok?de.json():[]).then(de=>{ne.signal.aborted||(Array.isArray(de)&&de.length>0?Ur(de):Ur(null))}).catch(de=>{ne.signal.aborted||(console.error("Eroare la fetch categorii pe programare",de),Ur(null))}),()=>ne.abort()},[A,J,W,ue]),h.useEffect(()=>{if(!(A!=null&&A.id)){S([]);return}const B=new URLSearchParams;J?B.set("route_schedule_id",J):ue&&B.set("direction",ue),B.toString()&&(async()=>{try{console.log(" ncarc staiile pentru ruta",A.id);const ne=await fetch(`/api/routes/${A.id}/stations?${B.toString()}`);if(!ne.ok){console.error(" Eroare la fetch /stations:",ne.status);return}const de=await ne.json();Array.isArray(de)&&de.length>0?(de.sort((ye,re)=>(ye.sequence??0)-(re.sequence??0)),S(de)):console.warn(" Rspuns gol pentru /stations, pstrm lista veche")}catch(ne){console.error(" Eroare la /api/routes/:id/stations",ne)}})()},[A==null?void 0:A.id,J,ue]),h.useEffect(()=>{fetch("/api/pricing-categories").then(B=>B.ok?B.json():[]).then(B=>ys(Array.isArray(B)?B:[])).catch(()=>ys([]))},[]),h.useEffect(()=>{if(!Array.isArray(_n)||_n.length===0)return;const B=new Set(_n.map(de=>de.id)),ne=[];I(de=>{let ye=!1;const re={...de};return b.forEach(oe=>{var De,Re;const Ee=oe==null?void 0:oe.id;if(!Ee)return;const Ie=((De=re[Ee])==null?void 0:De.category_id)??null,st=((Re=_n[0])==null?void 0:Re.id)??null,Pe=Ie!=null&&B.has(Ie)?Ie:st;Pe!=null&&Pe!==Ie&&(re[Ee]={...re[Ee],category_id:Pe},ne.push(Ee),ye=!0)}),ye?re:de}),ne.length&&D(de=>{const ye={...de};return ne.forEach(re=>{ye[re]=null}),ye})},[_n,b,I]);const Ya=()=>{let B=0;b.forEach(de=>{var Ee;const ye=H[de.id];if(typeof ye!="number")return;const re=(Ee=R[de.id])==null?void 0:Ee.discount_type_id,oe=Xr.find(Ie=>Ie.id===re);if(!oe)B+=ye;else{const Ie=parseFloat(oe.discount_value);let st=oe.discount_type==="percent"?ye*(1-Ie/100):ye-Ie;B+=Math.max(st,0)}});let ne=Number(Math.max(B,0).toFixed(2));return s!=null&&s.discount_amount&&(ne=Math.max(0,+(ne-Number(s.discount_amount)).toFixed(2))),ne},Kr=(B,ne=null)=>{var re;ht(!0);try{(re=wt.current)==null||re.abort()}catch{}wt.current=null,be(null),et([]),ge(null),U(null),Xe(null),Pr([]),jn(null),N([]),I({}),D({}),F(B);const de=Array.isArray(B==null?void 0:B.schedules)?[...new Set(B.schedules.map(oe=>oe.direction||"tur"))]:[],ye=ne||(de.includes("tur")?"tur":de[0]||null);X(ye||null),queueMicrotask(()=>ht(!1))},xs=h.useCallback(B=>{var ye;const ne=(re=!1)=>{var oe;T(),at.current=[],O.current=[];try{(oe=wt.current)==null||oe.abort()}catch{}wt.current=null,N([]),I({}),D({}),G({}),k.current={},ec([]),c(null),Xe(null),U(null),Ga(null),ar(!1),zr.current=0,et([]),ge(null),Pr([]),jn(null),Zr(re),Fe(null),Xt(null),Je(null),it(null),Yt(null),An({})};if(!B){ne(!1),be(null);return}let de=B;if(typeof B=="string"&&(de=((ye=A==null?void 0:A.schedules)==null?void 0:ye.find(re=>re.departure===B))||null),!de){ne(!1),be(null);return}ne(!0),be(de)},[T,A]),Vr=async(B,ne,de)=>{var oe;const ye=[B,ne,de,(A==null?void 0:A.id)??"r",J??"sid",W??"h",(Ne==null?void 0:Ne.id)??"t"].join("|");if(f.current.has(ye)||!J||!Ne||_n.length===0)return;let re=((oe=R[B])==null?void 0:oe.category_id)??null;if(re!=null&&!_n.some(Ee=>Ee.id===re)&&(re=null),re==null&&(re=Ti),!(!ne||!de||!(A!=null&&A.id)||re==null))try{f.current.add(ye);const Ee=Se(ne),Ie=Se(de);if(Ee===null||Ie===null){D(mt=>({...mt,[B]:"N/A"})),f.current.delete(ye);return}const st=new URLSearchParams({route_id:String(A.id),from_station_id:String(Ee),to_station_id:String(Ie),category:String(re),date:en(v,"yyyy-MM-dd")});J&&st.set("route_schedule_id",String(J));const Pe=await fetch(`/api/routes/price?${st.toString()}`);if(!Pe.ok){console.error("fetchPrice HTTP error",Pe.status),D(mt=>({...mt,[B]:"N/A"})),f.current.delete(ye);return}const{price:De,price_list_id:Re,pricing_category_id:dt}=await Pe.json();Ga(mt=>mt??Re),I(mt=>({...mt,[B]:{...mt[B],price:parseFloat(De),price_list_id:Re,category_id:dt}})),D(mt=>({...mt,[B]:parseFloat(De)}))}catch(Ee){console.error("Eroare la fetchPrice:",Ee),D(Ie=>({...Ie,[B]:"N/A"}))}finally{f.current.delete(ye)}},lc=B=>{const ne=w.map(re=>re.name);if(!B.passengers||ne.length<2)return!1;const de=Array(ne.length-1).fill(!1),ye=re=>re.trim().toLowerCase();for(const re of B.passengers){const oe=ne.findIndex(Ie=>ye(Ie)===ye(re.board_at)),Ee=ne.findIndex(Ie=>ye(Ie)===ye(re.exit_at));if(oe!==-1&&Ee!==-1&&oe<Ee)for(let Ie=oe;Ie<Ee;Ie++)de[Ie]=!0}return de.every(Boolean)},qa=h.useCallback(()=>{if(!Ge||ic||!ie||b.length>0||!J||!A||!v||!We.length)return;const B=w.map(Ee=>Ee.name).filter(Boolean);if(B.length<2)return;const ne=B[0],de=B[B.length-1],ye=Math.max(1,zr.current||1),re=(We||[]).filter(Ee=>{const Ie=Y==null?void 0:Y[Ee.id];return!Ie||Ie.isMine===!0}),oe=kl(re,ne,de,B,ye);oe.length&&(N(oe),I(()=>{const Ee={};return oe.forEach(Ie=>{Ee[Ie.id]={name:"",phone:"",board_at:ne,exit_at:de,observations:"",payment_method:"none"}}),Ee}),oe.forEach(Ee=>{Vr(Ee.id,ne,de)}),zr.current=oe.length)},[Ge,ic,ie,b.length,J,A,v,We,w,Y,kl,N,I,Vr]),ws=async(B,ne)=>{var Pe;const de=(Pe=B.passengers)==null?void 0:Pe[0];if(!de||!z||!J)return;const ye=De=>De.trim().toLowerCase(),re=w.map(De=>De.name),oe=re.findIndex(De=>ye(De)===ye(de.board_at)),Ee=re.findIndex(De=>ye(De)===ye(de.exit_at));if(!(oe===-1||Ee===-1||oe>=Ee||(ne.passengers||[]).some(De=>{const Re=re.findIndex(mt=>ye(mt)===ye(De.board_at)),dt=re.findIndex(mt=>ye(mt)===ye(De.exit_at));return!(Ee<=Re||oe>=dt)})))try{await fetch("/api/reservations/move",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reservation_id:de.reservation_id,trip_id:z,to_seat_id:ne.id,board_station_id:de.board_station_id??null,exit_station_id:de.exit_station_id??null})});const De=yn.find(qt=>qt.trip_vehicle_id===Sn),Re=De?De.vehicle_id:Ne.vehicle_id,dt=Se(re[0]),mt=Se(re.slice(-1)[0]),Dt=await(await fetch(`/api/seats/${Re}?route_id=${A.id}&route_schedule_id=${J}&date=${en(v,"yyyy-MM-dd")}`+(W?`&time=${encodeURIComponent(W)}`:"")+`&board_station_id=${dt}&exit_station_id=${mt}`)).json();et(pe(Dt)),qa()}catch(De){console.error("Eroare la mutare:",De)}finally{Fe(null)}},cc=h.useCallback((B=1)=>{if(!Ge)return;if(!Array.isArray(q)||q.length<2){He("Selecteaz o rut pentru a atribui automat locuri."),Ze("error"),setTimeout(()=>He(""),3e3);return}if(!We.length){He("Nu exist locuri ncrcate pentru cursa curent."),Ze("error"),setTimeout(()=>He(""),3e3);return}let ne=q[0],de=q[q.length-1];const ye=b.filter(De=>{const Re=R[De.id];return Re&&!Re.reservation_id});if(ye.length){const De=R[ye[0].id]||{};q.includes(De.board_at)&&(ne=De.board_at),q.includes(De.exit_at)&&(de=De.exit_at)}const re=Math.max(1,Number(B)||1),oe=ye.length+re,Ee=(We||[]).filter(De=>{const Re=Y==null?void 0:Y[De.id];return!Re||Re.isMine===!0}),Ie=kl(Ee,ne,de,q,oe);if(!Ie.length){He("Nu exist loc disponibil pentru segmentul selectat."),Ze("error"),setTimeout(()=>He(""),3e3);return}if(Ie.length<oe){He("Nu exist suficiente locuri libere pentru numrul selectat."),Ze("error"),setTimeout(()=>He(""),3e3);return}const st=new Set(Ie.map(De=>De.id)),Pe=b.filter(De=>!st.has(De.id)).map(De=>De.id);Pe.length&&(z&&Pe.forEach(De=>{fetch(`/api/intents/${z}/${De}`,{method:"DELETE",credentials:"include"}).catch(()=>{})}),G(De=>{if(!De)return De;let Re=!1;const dt={...De};return Pe.forEach(mt=>{var Bt;(Bt=dt[mt])!=null&&Bt.isMine&&(delete dt[mt],Re=!0)}),Re?dt:De})),ar(!1),N(Ie),I(()=>{const De={};for(const Re of Ie)De[Re.id]={name:"",phone:"",board_at:ne,exit_at:de,observations:"",payment_method:"none"};return De}),zr.current=Ie.length,Ie.forEach(De=>{Vr(De.id,ne,de)})},[Ge,q,We,b,R,Vr,N,I,He,Ze,Y,kl,z,G]),qn=h.useCallback(()=>{Ke(B=>{const ne=!B;return ar(!1),ne})},[]),ma=(B,ne,de,ye)=>{const re=Pe=>Pe==null?void 0:Pe.trim().toLowerCase(),oe=ye.findIndex(Pe=>re(Pe)===re(ne)),Ee=ye.findIndex(Pe=>re(Pe)===re(de)),Ie=ye.findIndex(Pe=>re(Pe)===re(B.board_at)),st=ye.findIndex(Pe=>re(Pe)===re(B.exit_at));return!(Ee<=Ie||oe>=st)};h.useEffect(()=>{const B=ne=>{if(Qe||Ut){const de=ne.target.closest(".popup-container"),ye=ne.target.closest("[data-seat-id]");!de&&!ye&&(Xt(null),Je(null),Yt(null))}};return window.addEventListener("click",B),()=>window.removeEventListener("click",B)},[Qe,Ut]),h.useEffect(()=>{const B=en(v,"yyyy-MM-dd");fetch(`/api/routes?fe=1&date=${B}`).then(ne=>{if(!ne.ok)throw new Error("HTTP "+ne.status);return ne.json()}).then(ne=>{var de;if(Ve(ne),A){const ye=ne.find(re=>re.id===A.id);if(ye){if(J){const re=(de=ye.schedules)==null?void 0:de.find(oe=>(oe.scheduleId??oe.id)===J);be(re||null)}}else be(null),X(null)}}).catch(ne=>console.error("Eroare la ncrcarea rutelor pentru",B,ne))},[v,A==null?void 0:A.id,J]);const Ai=async B=>{if(!B||!B.id)return;if(!z){He("Selecteaz nti cursa nainte de a alege locuri."),Ze("error"),setTimeout(()=>He(""),3e3);return}const ne=Number(B.id),de=(Y==null?void 0:Y[ne])??null;if(de&&de.isMine===!1){He("Locul e n curs de rezervare de alt agent"),Ze("error"),setTimeout(()=>He(""),3e3);return}if(b.some(re=>re.id===ne)){const re=b.length===1;try{await fetch(`/api/intents/${z}/${ne}`,{method:"DELETE",credentials:"include"})}catch(oe){console.error("Eroare la tergerea intentului",oe)}G(oe=>{if(!oe||!Object.prototype.hasOwnProperty.call(oe,ne))return oe;const Ee={...oe};return delete Ee[ne],Ee}),N(oe=>oe.filter(Ee=>Ee.id!==ne)),re&&ar(!0),I(oe=>{if(!oe||!oe[ne])return oe;const Ee={...oe};return delete Ee[ne],Ee}),await le();return}try{const re=await fetch("/api/intents",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({trip_id:z,seat_id:ne})});if(re.status===409){He("Locul e n curs de rezervare de alt agent"),Ze("error"),setTimeout(()=>He(""),3e3),await le();return}if(!re.ok){const Ee=await re.json().catch(()=>({})),Ie=(Ee==null?void 0:Ee.error)||"Eroare la crearea intentului";throw new Error(Ie)}const oe=await re.json();G(Ee=>({...Ee,[ne]:{expires_at:(oe==null?void 0:oe.expires_at)||null,isMine:!0}}))}catch(re){console.error("toggleSeat intent error",re),He(re.message||"Eroare la rezervarea locului"),Ze("error"),setTimeout(()=>He(""),3e3),await le();return}N(re=>re.some(oe=>oe.id===ne)?re:[...re,B]),I(re=>{var Re,dt;if(re!=null&&re[ne])return re;const oe=w.map(mt=>mt.name).filter(Boolean),Ee=oe[0]||((Re=B.passenger)==null?void 0:Re.board_at)||"",Ie=oe[oe.length-1]||((dt=B.passenger)==null?void 0:dt.exit_at)||"";let st=Ee,Pe=Ie;const De=B.passenger?{board:B.passenger.board_at,exit:B.passenger.exit_at}:null;if(De&&B.status==="partial"&&oe.length>1){const mt=oe.indexOf(De.board),Bt=oe.indexOf(De.exit);for(let Dt=0;Dt<oe.length-1;Dt+=1){const qt=Dt,Un=Dt+1;if(Un<=mt||qt>=Bt){st=oe[qt],Pe=oe[Un];break}}}return{...re,[ne]:{name:"",phone:"",board_at:st,exit_at:Pe,observations:"",payment_method:"none"}}}),await le()};h.useEffect(()=>{b.forEach(B=>{const ne=R[B.id];ne&&ne.board_at&&ne.exit_at&&(H[B.id]===void 0||H[B.id]===null)&&!f.current.has([B.id,ne.board_at,ne.exit_at,(A==null?void 0:A.id)??"r",J??"sid",W??"h",(Ne==null?void 0:Ne.id)??"t"].join("|"))&&Vr(B.id,ne.board_at,ne.exit_at)})},[b,R,H]),h.useEffect(()=>{const B=Array.isArray(at.current)?at.current:[],ne=b.map(re=>re.id),de=B.filter(re=>!ne.includes(re)),ye=ne.filter(re=>!B.includes(re));de.length>0&&z&&(de.forEach(re=>{var oe,Ee;(Ee=(oe=k.current)==null?void 0:oe[re])!=null&&Ee.isMine&&fetch(`/api/intents/${z}/${re}`,{method:"DELETE",credentials:"include"}).catch(()=>{})}),G(re=>{if(!re)return re;let oe=!1;const Ee={...re};return de.forEach(Ie=>{Object.prototype.hasOwnProperty.call(Ee,Ie)&&(delete Ee[Ie],oe=!0)}),oe?Ee:re})),ye.length>0&&z&&ye.forEach(re=>{var Ie,st;if((st=(Ie=k.current)==null?void 0:Ie[re])!=null&&st.isMine||!b.find(Pe=>Pe.id===re))return;const Ee=R==null?void 0:R[re];Ee!=null&&Ee.reservation_id||(async()=>{try{const Pe=await fetch("/api/intents",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({trip_id:z,seat_id:re})});if(Pe.status===409){He("Locul e n curs de rezervare de alt agent"),Ze("error"),setTimeout(()=>He(""),3e3),N(Re=>Re.filter(dt=>dt.id!==re)),I(Re=>{if(!Re||!Re[re])return Re;const dt={...Re};return delete dt[re],dt}),await le();return}if(!Pe.ok){const Re=await Pe.json().catch(()=>({})),dt=(Re==null?void 0:Re.error)||"Eroare la crearea intentului";throw new Error(dt)}const De=await Pe.json().catch(()=>({}));G(Re=>({...Re,[re]:{expires_at:(De==null?void 0:De.expires_at)||null,isMine:!0}}))}catch(Pe){console.error("Eroare la alocarea intentului pentru loc",re,Pe),He(Pe.message||"Eroare la rezervarea locului"),Ze("error"),setTimeout(()=>He(""),3e3),N(De=>De.filter(Re=>Re.id!==re)),I(De=>{if(!De||!De[re])return De;const Re={...De};return delete Re[re],Re}),await le()}})()}),at.current=ne},[b,z,le,R]),h.useEffect(()=>{const B=Array.isArray(at.current)?at.current:[],ne=b.map(re=>re.id),de=B.filter(re=>!ne.includes(re)),ye=ne.filter(re=>!B.includes(re));de.length>0&&z&&(de.forEach(re=>{var oe,Ee;(Ee=(oe=k.current)==null?void 0:oe[re])!=null&&Ee.isMine&&fetch(`/api/intents/${z}/${re}`,{method:"DELETE",credentials:"include"}).catch(()=>{})}),G(re=>{if(!re)return re;let oe=!1;const Ee={...re};return de.forEach(Ie=>{Object.prototype.hasOwnProperty.call(Ee,Ie)&&(delete Ee[Ie],oe=!0)}),oe?Ee:re})),ye.length>0&&z&&ye.forEach(re=>{var Ie,st;if((st=(Ie=k.current)==null?void 0:Ie[re])!=null&&st.isMine||!b.find(Pe=>Pe.id===re))return;const Ee=R==null?void 0:R[re];Ee!=null&&Ee.reservation_id||(async()=>{try{const Pe=await fetch("/api/intents",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({trip_id:z,seat_id:re})});if(Pe.status===409){He("Locul e n curs de rezervare de alt agent"),Ze("error"),setTimeout(()=>He(""),3e3),N(Re=>Re.filter(dt=>dt.id!==re)),I(Re=>{if(!Re||!Re[re])return Re;const dt={...Re};return delete dt[re],dt}),await le();return}if(!Pe.ok){const Re=await Pe.json().catch(()=>({})),dt=(Re==null?void 0:Re.error)||"Eroare la crearea intentului";throw new Error(dt)}const De=await Pe.json().catch(()=>({}));G(Re=>({...Re,[re]:{expires_at:(De==null?void 0:De.expires_at)||null,isMine:!0}}))}catch(Pe){console.error("Eroare la alocarea intentului pentru loc",re,Pe),He(Pe.message||"Eroare la rezervarea locului"),Ze("error"),setTimeout(()=>He(""),3e3),N(De=>De.filter(Re=>Re.id!==re)),I(De=>{if(!De||!De[re])return De;const Re={...De};return delete Re[re],Re}),await le()}})()}),at.current=ne},[b,z,le,R]);const[Di,Rp]=h.useState(),[Co,Ga]=h.useState(),pa=h.useCallback(async({reservationId:B,description:ne,employeeId:de})=>{if(!B)throw new Error("ID rezervare invalid pentru plata cash");const ye={};ne&&ne.trim()&&(ye.description=ne.trim());const re=await fetch(`/api/reservations/${B}/payments/cash-intent`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ye)}),oe=await re.json().catch(()=>({}));if(!(re.ok&&(oe==null?void 0:oe.print_in_browser)===!0&&(oe!=null&&oe.fiscal))){const Pe=new Error((oe==null?void 0:oe.error)||"Eroare la iniierea plii cash");throw Pe.payload=oe,Pe.dev=oe==null?void 0:oe.dev,Pe}const Ee=(oe==null?void 0:oe.dev)||"",Ie=async(Pe,De)=>{const Re=Date.now(),dt=18e4;for(;;){const mt={method:"POST",credentials:"omit"};De&&typeof De=="object"&&(mt.headers={"Content-Type":"application/json"},mt.body=JSON.stringify(De));const Bt=await fetch(Pe,mt);if(Bt.ok)return Bt;const Dt=await Bt.text().catch(()=>"");if(Bt.status===409||/NO_PAPER/i.test(Dt)){if(Date.now()-Re>dt){const nr=new Error(`NO_PAPER timeout (3min) on ${Pe}`);throw nr.dev=Ee,nr}const Un=Ee?`la casa ${Ee}`:"la cas";He(`Lipsete hrtia ${Un}. Ateptm s revin`),Ze("info"),await new Promise(nr=>setTimeout(nr,3e3));continue}const qt=new Error(`HTTP ${Bt.status} on ${Pe}: ${Dt}`);throw qt.dev=Ee,qt.status=Bt.status,qt}};await Ie(oe.fiscal.open.url,oe.fiscal.open.body),await Ie(oe.fiscal.sale.url,oe.fiscal.sale.body),await Ie(oe.fiscal.pay.url,oe.fiscal.pay.body),await Ie(oe.fiscal.close.url,null);const st=await fetch(`/api/reservations/${B}/payments/confirm`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({employeeId:de??(e==null?void 0:e.id),amount:oe.amount})});if(!st.ok){const Pe=await st.json().catch(()=>({})),De=new Error((Pe==null?void 0:Pe.error)||(Pe==null?void 0:Pe.message)||`Confirmare cash euat (${st.status})`);throw De.dev=Ee,De}return{amount:oe.amount,dev:Ee}},[He,Ze,e==null?void 0:e.id]),Ri=async()=>{var ne,de,ye;Nt(!0);const B=async()=>{var re;try{if(!Array.isArray(q)||q.length===0)return;const oe=Sn==="main"?Ne==null?void 0:Ne.vehicle_id:(re=yn.find(Re=>Re.trip_vehicle_id===Sn))==null?void 0:re.vehicle_id;if(!oe)return;const Ee=Se(q[0]),Ie=Se(q.slice(-1)[0]);if(Ee===null||Ie===null)return;const st=`/api/seats/${oe}?route_id=${A.id}&route_schedule_id=${J}&date=${en(v,"yyyy-MM-dd")}`+(W?`&time=${encodeURIComponent(W)}`:"")+`&board_station_id=${Ee}&exit_station_id=${Ie}`+(ue?`&direction=${ue}`:""),Pe=await fetch(st,{credentials:"include"});if(!Pe.ok)return;const De=await Pe.json();et(pe(De))}catch(oe){console.error("Eroare la rencrcarea locurilor:",oe)}};try{if(!(A!=null&&A.id)||!Z){He("Selecteaz ruta i ora nainte de a salva."),Ze("error"),setTimeout(()=>He(""),3e3);return}if(!await se())return;if(!b.length){He("Nu exist locuri selectate."),Ze("error"),setTimeout(()=>He(""),3e3);return}He("Se salveaz rezervarea..."),Ze("info");const oe=Co||(((de=R[(ne=b[0])==null?void 0:ne.id])==null?void 0:de.price_list_id)??null);let Ee;try{Ee=b.map(Bt=>{const Dt=R[Bt.id],qt=Se(Dt.board_at),Un=Se(Dt.exit_at);if(qt===null||Un===null)throw new Error("Staiile selectate nu sunt valide pentru aceast rut.");return{seat_id:Bt.id,reservation_id:Dt.reservation_id||null,person_id:Dt.person_id||null,name:Dt.name,phone:Dt.phone,board_station_id:qt,exit_station_id:Un,price_list_id:Dt.price_list_id||oe,category_id:Dt.category_id??Ti??null,observations:Dt.observations||"",discount_type_id:Dt.discount_type_id||null,price:H[Bt.id],payment_method:Dt.payment_method||"none",transaction_id:Dt.transaction_id||null}})}catch(Bt){He(Bt.message),Ze("error"),setTimeout(()=>He(""),3e3);return}const Ie={date:en(v,"yyyy-MM-dd"),time:W,route_schedule_id:J,direction:ue,route_id:A.id,vehicle_id:Ne.vehicle_id,pricing_category_id:Di,price_list_id:oe,passengers:Ee,promo_apply:s?{promo_code_id:s.promo_code_id,code:s.code,discount_amount:s.discount_amount}:null},st=Me(),Pe=await fetch("/api/reservations",{method:"POST",headers:{"Content-Type":"application/json","Idempotency-Key":st},credentials:"include",body:JSON.stringify(Ie)}),De=await Pe.json().catch(()=>({}));if(Pe.status===409){He(De.error||"Loc ocupat pe segment"),Ze("error"),setTimeout(()=>He(""),4e3),await le(),await B();return}if(!Pe.ok)throw new Error(De.error||"Eroare la salvare");const Re=(De==null?void 0:De.idempotent)===!0,dt=Array.isArray(De==null?void 0:De.createdReservationIds)?De.createdReservationIds:De!=null&&De.id?[De.id]:[];N([]),I({}),G({}),ar(!0),await le();const mt=!Re&&Array.isArray(Ie==null?void 0:Ie.passengers)&&Ie.passengers.some(Bt=>Bt.payment_method==="cash");if(Re?(He("Rezervarea era deja salvat (cerere repetat)."),Ze("info"),setTimeout(()=>He(""),2500)):mt?(He("Rezervare salvat. Se tiprete bonul..."),Ze("info")):(He("Rezervare salvat "),Ze("success"),setTimeout(()=>He(""),2500)),!Re&&mt){let Bt=!0;for(const Dt of dt)try{await pa({reservationId:Dt,description:`Rezervare #${Dt}`,employeeId:e==null?void 0:e.id})}catch(qt){Bt=!1;const Un=String((qt==null?void 0:qt.message)||qt);if(Un.includes("NO_PAPER")||Un.includes("409")){const nr=qt!=null&&qt.dev?`la casa ${qt.dev}`:"";He(`Lipsete hrtia${nr?` ${nr}`:""}.`)}else(ye=qt==null?void 0:qt.payload)!=null&&ye.error?He(`Eroare la tiprirea bonului pentru #${Dt}: ${qt.payload.error}`):He(`Eroare tiprire local (#${Dt}): ${Un}`);Ze("error")}Bt?(He("Rezervare salvat i achitat (cash)  bon tiprit "),Ze("success"),setTimeout(()=>He(""),2500)):(gs("Plata cash nu s-a putut efectua. Rezervarea este salvat."),ps(!0),He("Rezervare salvat. Tiprirea bonului a euat."),Ze("error"),setTimeout(()=>He(""),3500))}await B()}catch(re){console.error("Eroare la salvarea rezervrii:",re),He(re.message||"A aprut o eroare."),Ze("error"),setTimeout(()=>He(""),3e3)}finally{Nt(!1)}},uc=()=>{const B=b.filter(ne=>{const de=R[ne.id],ye=Am(de);return!(ye!=null&&ye.valid)}).map(ne=>ne.id);if(B.length>0){Vt(!0),setTimeout(()=>Vt(!1),600),B.forEach(ne=>{const de=document.querySelector(`.passenger-form[data-seat="${ne}"]`);if(!de)return;de.classList.add("animate-shake","border-red-500"),setTimeout(()=>de.classList.remove("border-red-500"),800),de.querySelectorAll("input, select, textarea").forEach(re=>{re.classList.add("border-red-500"),setTimeout(()=>re.classList.remove("border-red-500"),800)})}),He("Completeaz toate cmpurile obligatorii nainte de salvare"),Ze("error"),setTimeout(()=>He(""),2e3);return}if(Dn!=null&&Dn.blacklisted){Fa(!0);return}dc()},dc=async()=>{var st;const B=en(v,"yyyy-MM-dd"),ne=(st=b[0])==null?void 0:st.id,de=R[ne]||{},ye=Se(de.board_at),re=Se(de.exit_at);if(ye===null||re===null){He("Staiile selectate nu sunt valide pentru aceast rut."),Ze("error"),setTimeout(()=>He(""),3e3);return}let oe=!1,Ee=[];if(!de.person_id)console.log("Conflict skipped: no person_id");else{const Pe=new URLSearchParams({person_id:String(de.person_id),date:B,board_station_id:String(ye),exit_station_id:String(re),time:W});A!=null&&A.id&&Pe.set("route_id",String(A.id)),J&&Pe.set("route_schedule_id",String(J)),ue&&Pe.set("direction",ue);const Re=await(await fetch(`/api/reservations/conflict?${Pe.toString()}`)).json();if(oe=Re.conflict,Ee=Re.infos,oe){Ue(Ee),Ba(!0);return}}if(oe){Ue(Ee),Ba(!0);return}const Ie=Object.values(R).map(Pe=>Am(Pe)).filter(Pe=>!Pe.valid);if(Ie.length>0){const Pe=Ie[0].errors;He(Pe.general||Pe.name||Pe.phone),Ze("error"),setTimeout(()=>He(""),3e3);return}if(!Ne){He("Tripul nu este ncrcat. ncearc din nou."),Ze("error");return}Ri()};h.useEffect(()=>{const B=(A==null?void 0:A.id)??null;B!=null&&p.current!==B&&(p.current=B,be(null),X(null),et([]),ge(null),U(null))},[A==null?void 0:A.id]);const Eo=h.useRef(null);h.useEffect(()=>{const B=Eo.current;if(B===Sn){Eo.current=Sn;return}(B!==null||Sn!==null)&&(T(),N([]),I({}),D({}),G({}),Ga(null),ar(!1),zr.current=0),Eo.current=Sn},[Sn,T]),h.useEffect(()=>{const B=v?en(v,"yyyy-MM-dd"):"nodate",ne=`${(A==null?void 0:A.id)??"noroute"}|${J??"noschedule"}|${W??"nohour"}|${B}`,de=M.current;if(de===ne){M.current=ne;return}de!==null&&(T(),N([]),I({}),D({}),G({}),Ga(null),ar(!1),zr.current=0),M.current=ne},[A==null?void 0:A.id,J,W,v,T]),h.useEffect(()=>{var re;if(!A||!Z||!v||!K||!w.length||((re=w[0])==null?void 0:re.direction)!==ue||qe)return;const B=w[0].station_id,ne=w[w.length-1].station_id,de=`${A.id}|${en(v,"yyyy-MM-dd")}|${J??"sid"}|${W}|${B}|${ne}|main`;return ut.current===de?void 0:(ut.current=de,jn("main"),et([]),ge(null),U(null),Zr(!0),(async()=>{try{const oe=new AbortController;wt.current=oe;const Ee=await fetch(`/api/trips/find?route_id=${A.id}&route_schedule_id=${J}&date=${en(v,"yyyy-MM-dd")}`+(W?`&time=${encodeURIComponent(W)}`:"")+(ue?`&direction=${ue}`:""),{signal:oe.signal});if(!Ee.ok){if(Ee.status===404){ut.current=null,U(null),Xe(null),Pr([]),ge(null),et([]),jn(null),N([]),I({}),D({}),He(`Nu exist curs la ${W||"ora selectat"} pe ruta aleas.`),Ze("info"),setTimeout(()=>He(""),2500),Zr(!1);return}throw new Error(`HTTP ${Ee.status}`)}const Ie=await Ee.json(),st=Ie==null?void 0:Ie.id;if(!st){ut.current=null,Zr(!1);return}if(U(st),Xe(Ie),await Pi(Ie.id),!(Ie!=null&&Ie.vehicle_id)){ut.current=null,Zr(!1);return}const De=await(await fetch(`/api/seats/${Ie.vehicle_id}?route_id=${A.id}&route_schedule_id=${J}&date=${en(v,"yyyy-MM-dd")}`+(W?`&time=${encodeURIComponent(W)}`:"")+`&board_station_id=${B}&exit_station_id=${ne}`+(ue?`&direction=${ue}`:""),{signal:oe.signal})).json();et(pe(De)),De.length>0&&ge({name:De[0].vehicle_name,plate:De[0].plate_number})}catch(oe){(oe==null?void 0:oe.name)==="AbortError"?ut.current=null:console.error("Eroare la ncrcarea datelor:",oe)}finally{Zr(!1)}})(),()=>{var oe;try{(oe=wt.current)==null||oe.abort()}catch{}})},[A==null?void 0:A.id,J,W,v,K,ue]);const Pi=async B=>{const ne=await fetch(`/api/trips/${B}/vehicles`);if(!ne.ok)return Pr([]),[];const de=await ne.json();if(!Array.isArray(de))return Pr([]),[];const ye=de.map(re=>{const oe=hr.find(Ee=>Ee.id===re.vehicle_id);return{...re,plate_number:re.plate_number||(oe==null?void 0:oe.plate_number)||(oe==null?void 0:oe.plate)||""}});return Pr(ye),ye};h.useEffect(()=>{if(!yn||yn.length===0)return;const B=yn.find(ne=>ne.is_primary);jn(B?"main":yn[0].trip_vehicle_id)},[yn,J,v,A]),h.useEffect(()=>{!z||!Z||(Pi(z),fetch(`/api/vehicles/${z}/available`).then(B=>B.ok?B.json():[]).then(mr).catch(()=>mr([])))},[z,J]);const Wa=h.useCallback(async(B={})=>{var Ie,st,Pe;const{force:ne=!1,signal:de}=B;if(!Sn||!z||!A||!Z||!K||!w.length||((Ie=w[0])==null?void 0:Ie.direction)!==ue)return null;const ye=Sn==="main"?{vehicle_id:Ne==null?void 0:Ne.vehicle_id}:yn.find(De=>De.trip_vehicle_id===Sn);if(!ye||!ye.vehicle_id)return null;const re=((st=w[0])==null?void 0:st.station_id)??null,oe=((Pe=w[w.length-1])==null?void 0:Pe.station_id)??null;if(re==null||oe==null)return null;const Ee=`${ye.vehicle_id}|${A.id}|${en(v,"yyyy-MM-dd")}|${J??"sid"}|${W}|${K}`;if(!ne&&St.current===Ee)return null;St.current=Ee;try{const De=`/api/seats/${ye.vehicle_id}?route_id=${A.id}&route_schedule_id=${J}&date=${en(v,"yyyy-MM-dd")}`+(W?`&time=${encodeURIComponent(W)}`:"")+`&board_station_id=${re}&exit_station_id=${oe}`+(ue?`&direction=${ue}`:""),dt=await fetch(De,de?{signal:de}:void 0);if(!dt.ok)return ne||(St.current=null),null;const mt=await dt.json();return et(pe(mt)),Array.isArray(mt)&&mt.length>0&&ge({name:mt[0].vehicle_name,plate:mt[0].plate_number}),mt}catch(De){return(De==null?void 0:De.name)!=="AbortError"&&console.error("Eroare la actualizarea seat map",De),ne||(St.current=null),null}},[Sn,z,A,Z,K,w,ue,Ne,yn,v,J,W,pe]);h.useEffect(()=>{const B=new AbortController;return Wa({signal:B.signal}),()=>B.abort()},[Wa]),h.useEffect(()=>{if(te.current&&(clearInterval(te.current),te.current=null),!z||!Z)return;const B=()=>{Wa({force:!0})};B();const ne=setInterval(B,3e3);return te.current=ne,()=>{clearInterval(ne),te.current=null}},[z,Z,Wa]),h.useEffect(()=>{St.current=null},[K]),h.useEffect(()=>{ut.current=null},[ue]),h.useEffect(()=>{!A||!Z||!v||!We.length||qa()},[A,J,v,We,Z,qa]);const Za=()=>{Xt(null),Je(null),it(null),Yt(null)},Ad=h.useCallback(async()=>{try{if(!(Qe!=null&&Qe.reservation_id))return;ot(!0);const ne=await(await fetch(`/api/reservations/${Qe.reservation_id}/summary`)).json();if(ne!=null&&ne.paid){He("Rezervarea este deja achitat."),Ze("info"),ot(!1);return}const de=[];$n&&$n.trim()&&de.push($n.trim());const ye=`${(Qe==null?void 0:Qe.board_at)||""}  ${(Qe==null?void 0:Qe.exit_at)||""}`.trim();ye&&ye!==""&&de.push(`Bilet ${ye}`);const re=de.join(" | ");try{await pa({reservationId:Qe.reservation_id,description:re,employeeId:e==null?void 0:e.id})}catch(oe){const Ee=String((oe==null?void 0:oe.message)||oe);if(Ee.includes("NO_PAPER")||Ee.includes("409")){const Ie=oe!=null&&oe.dev?`la casa ${oe.dev}`:"";He(`Lipsete hrtia${Ie?` ${Ie}`:""}.`)}else He((oe==null?void 0:oe.message)||"Eroare la plat");Ze("error"),gs(`Nu s-a emis bonul fiscal.
${Ee?`Detalii: ${Ee}`:""}`),ps(!0);return}try{et(oe=>Array.isArray(oe)?oe.map(Ee=>{if(!Ee||Ee.id!==(_t==null?void 0:_t.id))return Ee;const Ie=Array.isArray(Ee.passengers)?Ee.passengers.map(st=>(st==null?void 0:st.reservation_id)===Qe.reservation_id?{...st,payment_method:"cash",payment_status:"paid"}:st):Ee.passengers;return{...Ee,passengers:Ie}}):oe)}catch{}He("Plat cash nregistrat."),Ze("success");try{ut.current=null}catch{}}catch(B){console.error("[handlePayReservation]",B),He(B.message||"Eroare la plat"),Ze("error")}finally{ot(!1),Xt(null),Je(null),it(null)}},[Qe==null?void 0:Qe.reservation_id,Qe==null?void 0:Qe.board_at,Qe==null?void 0:Qe.exit_at,_t==null?void 0:_t.id,$n,pa]),Dd=async B=>{try{if(!window.confirm(`Sigur vrei s tergi pasagerul ${B.name}?`))return;const de=await fetch("/api/reservations/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:B.phone,board_station_id:B.board_station_id,exit_station_id:B.exit_station_id,trip_id:z,seat_id:_t==null?void 0:_t.id})}),ye=await de.json();if(!de.ok)throw new Error(ye.error||"Eroare la tergere");if(He("Pasager ters cu succes "),Ze("success"),setTimeout(()=>He(""),3e3),Za(),!J)return;const re=Se(q[0]),oe=Se(q[q.length-1]),Ie=await(await fetch(`/api/seats/${Ne.vehicle_id}?route_id=${A.id}&route_schedule_id=${J}&date=${en(v,"yyyy-MM-dd")}`+(W?`&time=${encodeURIComponent(W)}`:"")+`&board_station_id=${re}&exit_station_id=${oe}`+(ue?`&direction=${ue}`:""))).json();et(pe(Ie))}catch(ne){console.error("Eroare la tergere pasager:",ne),He("Eroare la tergere"),Ze("error"),setTimeout(()=>He(""),3e3)}},Rd=(B,ne)=>{if(!ne||!ne.passengers||ne.passengers.length===0)return;const{clientX:de,clientY:ye}=B;Za(),ne.passengers.length===1?(Xt({...ne.passengers[0],route_id:A==null?void 0:A.id}),Je(ne),it({x:de,y:ye})):Yt({x:de,y:ye,seat:ne})};return l.jsxs("div",{className:"min-h-screen bg-gray-100 flex justify-center items-start py-10 px-6 w-full",children:[l.jsx(bx,{message:Yn,type:er}),l.jsx(rs,{show:ms,title:"Eroare emitere bon",message:l.jsx("div",{className:"whitespace-pre-line",children:ir||"Nu s-a emis bonul fiscal."}),confirmText:"OK",cancelText:"nchide",onConfirm:()=>ps(!1),onCancel:()=>ps(!1)}),l.jsxs("div",{className:"inline-block space-y-6",children:[l.jsxs("div",{className:"flex flex-col md:inline-flex md:flex-row gap-6 items-start",children:[l.jsxs("div",{className:"bg-white rounded shadow p-4 w-fit",children:[l.jsx("label",{className:"block font-semibold mb-2",children:"Selecteaz data:"}),l.jsx(n1,{selectedDate:v,setSelectedDate:x})]}),l.jsxs("div",{className:"bg-white rounded shadow p-4 space-y-4 w-fit",children:[l.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-4",children:[l.jsx("div",{className:"flex gap-2",children:["Azi","Mine","Poimine"].map((B,ne)=>{const de=YE(new Date,ne),ye=en(v,"yyyy-MM-dd")===en(de,"yyyy-MM-dd");return l.jsx("button",{onClick:()=>{x(de),N([]),I({}),et([])},className:`px-3 py-1 rounded text-sm font-medium transition ${ye?"bg-blue-600 text-white":"bg-blue-100 text-black hover:bg-blue-200"}`,children:B},B)})}),l.jsx("div",{className:"text-base font-semibold text-gray-800",children:en(v,"EEEE, dd MMMM yyyy",{locale:oS})})]}),l.jsx("div",{children:l.jsx(vT,{routes:Te,selectedRoute:A,onSelectRoute:Kr})}),A&&l.jsxs("div",{children:[l.jsx("div",{className:"flex flex-wrap gap-3 mb-6",children:l.jsx(bT,{selectedRoute:A,selectedSchedule:Q,onSelectSchedule:xs})}),W&&l.jsx("div",{className:"flex justify-between items-center mb-4",children:l.jsx("div",{className:"flex gap-4",children:l.jsx(yT,{availableVehicles:hr,vehicleInfo:xe,setVehicleInfo:ge,showPopup:$t,setShowPopup:un,setSelectedSeats:N,setSeats:et,tripId:z,setToastMessage:He,setToastType:Ze,stops:w.map(B=>B.name)})})}),W&&l.jsxs("div",{className:"mb-4 flex items-center border-b space-x-4",children:[bs.map((B,ne)=>l.jsxs("div",{className:"flex items-center -mb-px space-x-1",children:[l.jsx("button",{onClick:()=>jn(B.is_primary?"main":B.trip_vehicle_id),className:`px-4 py-2 rounded-t-lg text-sm font-medium mr-1 transition-all duration-300
  ${bs.length===1||Sn===(B.is_primary?"main":B.trip_vehicle_id)?"bg-white text-gray-900 border border-b-transparent shadow-md":"bg-gray-100 text-gray-500 hover:bg-gray-200 border border-transparent"}
`,children:B.is_primary?"Principal":`Dublur ${ne}`}),l.jsx("button",{onClick:()=>{jn(B.is_primary?"main":B.trip_vehicle_id),Wr(!0)},className:"p-1 hover:bg-gray-200 rounded",title:"Modific main",children:""}),!B.is_primary&&l.jsx("button",{onClick:()=>hs(B.trip_vehicle_id),className:"p-1 hover:bg-gray-200 rounded",title:"terge main",children:""}),l.jsx(rs,{show:rc===B.trip_vehicle_id,title:"Confirmare tergere",message:"Eti sigur c vrei s tergi aceast main?",onCancel:()=>hs(null),onConfirm:async()=>{const de=rc;hs(null);const ye=await fetch(`/api/trips/${de}`,{method:"DELETE"}),re=await ye.json();if(!ye.ok){console.error("DELETE trip vehicle error",ye.status,re),He(re.error),Ze("error"),setTimeout(()=>He(""),3e3);return}He("Maina a fost tears cu succes"),Ze("success"),setTimeout(()=>He(""),3e3),await Pi(z),jn(oe=>oe===de?"main":oe)}})]},B.trip_vehicle_id)),l.jsx("button",{onClick:()=>{jn(null),Wr(!0)},className:`
    ml-4 
    flex-shrink-0 
    w-10 h-10 
    bg-green-500 hover:bg-green-600 
    text-white 
    rounded-full 
    flex items-center justify-center 
    shadow-md 
    transition-transform duration-150 
    hover:scale-110
  `,title:"Adaug main",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]})]})]})]}),W&&(_o?l.jsx("div",{style:{padding:40,textAlign:"center",fontSize:22},children:"Se ncarc harta locurilor..."}):We.length>0&&l.jsxs("div",{className:"bg-white rounded shadow p-4 flex gap-6 items-start w-fit mx-auto",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[l.jsx("div",{className:"font-semibold",children:"Selecteaz locurile:"}),l.jsxs("div",{className:"inline-flex items-center gap-2",children:[l.jsx("button",{type:"button",onClick:()=>{_("grid"),E(!1)},className:`px-3 py-1 rounded-full text-xs font-semibold border transition-colors ${j==="grid"?"bg-blue-600 text-white border-blue-600":"bg-gray-100 text-gray-700 border-gray-300 hover:bg-gray-200"}`,title:"Vezi diagrama clasic a locurilor",children:"Diagram"}),l.jsx("button",{type:"button",onClick:()=>{_("timeline"),E(!0)},className:`px-3 py-1 rounded-full text-xs font-semibold border transition-colors ${j==="timeline"?"bg-blue-600 text-white border-blue-600":"bg-gray-100 text-gray-700 border-gray-300 hover:bg-gray-200"}`,title:"Vezi rezervrile pe axa staiilor",children:"Timeline"})]})]}),xe&&l.jsxs("div",{className:"text-sm text-gray-700 mb-2 font-semibold text-center",children:["Vehicul: ",xe.name," (",xe.plate,")"]}),We.length>0&&j==="grid"&&l.jsx(XS,{seats:We,stops:q,selectedSeats:b,setSelectedSeats:N,moveSourceSeat:Ye,setMoveSourceSeat:Fe,popupPassenger:Qe,setPopupPassenger:Xt,popupSeat:_t,setPopupSeat:Je,popupPosition:Mt,setPopupPosition:it,handleMovePassenger:ws,handleSeatClick:Rd,toggleSeat:Ai,isSeatFullyOccupiedViaSegments:lc,checkSegmentOverlap:ma,selectedRoute:A,setToastMessage:He,setToastType:Ze,intentHolds:Y,vehicleId:(Oo=bs.find(B=>B.trip_vehicle_id===Sn))==null?void 0:Oo.vehicle_id})]}),l.jsxs("div",{className:"space-y-4 max-w-md w-[450px]",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("div",{className:"font-semibold",children:"Completeaz datele pasagerilor:"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",onClick:()=>cc(1),className:`w-8 h-8 flex items-center justify-center rounded-full text-white text-lg font-bold transition-colors ${Ge?"bg-green-500 hover:bg-green-600":"bg-gray-400 cursor-not-allowed"}`,title:"Adaug automat un loc",disabled:!Ge,children:"+"}),l.jsx("button",{type:"button",onClick:qn,className:`px-3 py-1 rounded-full text-xs font-semibold border transition-colors ${Ge?"bg-blue-600 text-white border-blue-600":"bg-gray-200 text-gray-700 border-gray-300"}`,title:"Comut selecia automat a locurilor",children:Ge?"Auto ON":"Auto OFF"})]})]}),b.map((B,ne)=>{var de,ye,re,oe,Ee,Ie,st,Pe,De;return l.jsxs("div",{"data-seat":B.id,className:`passenger-form border p-4 bg-gray-50 rounded space-y-2 ${cn?"animate-shake":""}`,children:[l.jsx("div",{className:"flex gap-4",children:l.jsx(TT,{seat:B,stops:q,stopDetailsByName:_e,passengersData:R,setPassengersData:I,selectedRoute:A,selectedSeats:b,setSelectedSeats:N,autoSelectEnabled:Ge,fetchPrice:Vr,setToastMessage:He,setToastType:Ze,toggleSeat:Ai,seats:We,selectedDate:en(v,"yyyy-MM-dd"),selectedHour:W,selectedScheduleId:J,selectedDirection:ue,onConflictInfo:Ue,onBlacklistInfo:kd,getStationIdByName:Se,getStationNameById:P})}),l.jsx("div",{className:"h-1 flex justify-end items-center",children:l.jsx("button",{type:"button",className:"text-blue-600 text-xl font-bold hover:text-blue-800",onClick:()=>An(Re=>({...Re,[B.id]:!Re[B.id]})),title:"Adaug observaii",children:ln[B.id]?"":"+"})}),ln[B.id]&&l.jsx("textarea",{className:"w-full border p-2 rounded",placeholder:"Observaii",value:((de=R[B.id])==null?void 0:de.observations)||"",onChange:Re=>I(dt=>({...dt,[B.id]:{...dt[B.id],observations:Re.target.value}}))}),l.jsxs("div",{className:"flex items-center mb-2 gap-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("label",{className:"font-medium whitespace-nowrap",children:"Categorie:"}),l.jsx("select",{className:"border rounded px-2 py-1 text-sm",value:((ye=R[B.id])==null?void 0:ye.category_id)??Ti??"",onChange:Re=>{const dt=Re.target.value?Number(Re.target.value):null;I(mt=>({...mt,[B.id]:{...mt[B.id],category_id:dt}})),D(mt=>({...mt,[B.id]:null}))},disabled:_n.length===0,children:_n.map(Re=>l.jsx("option",{value:Re.id,children:Re.name},Re.id))})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("label",{className:"font-medium whitespace-nowrap",children:"Tip reducere:"}),l.jsxs("select",{className:"border rounded px-2 py-1 text-sm",style:{minWidth:140,maxWidth:180},value:((re=R[B.id])==null?void 0:re.discount_type_id)||"",onChange:Re=>I(dt=>({...dt,[B.id]:{...dt[B.id],discount_type_id:Re.target.value?Number(Re.target.value):null}})),children:[l.jsx("option",{value:"",children:"Fr reducere"}),Xr.map(Re=>{const dt=parseFloat(Re.discount_value),mt=Re.discount_type==="percent"?"%":" lei";return l.jsxs("option",{value:Re.id,children:[Re.label," (",dt,mt,")"]},Re.id)})]})]})]}),l.jsx("div",{className:"flex items-center mb-2",children:l.jsxs("span",{className:"font-medium",children:["Pre:",(()=>{var Un;const Re=H[B.id];if(typeof Re!="number")return" N/A";const dt=(Un=R[B.id])==null?void 0:Un.discount_type_id,mt=Xr.find(nr=>nr.id===dt);if(!mt)return` ${Re.toFixed(2)} lei`;const Bt=parseFloat(mt.discount_value);let Dt=0;mt.discount_type==="percent"?Dt=Re*(1-Bt/100):Dt=Re-Bt;const qt=Math.max(Dt,0);return l.jsxs(l.Fragment,{children:[" ",l.jsxs("s",{children:[Re.toFixed(2)," lei"]}),l.jsxs("span",{className:"ml-2 text-green-700 font-bold",children:[qt.toFixed(2)," lei"]}),Dt<0&&l.jsx("span",{className:"ml-2 text-red-600 font-semibold",children:"Reducere prea mare, pre setat la 0"})]})})()]})}),l.jsxs("div",{className:"mt-2",children:[l.jsx("label",{className:"text-sm font-medium",children:"Modalitate de plat:"}),l.jsxs("div",{className:"flex gap-4 mt-1",children:[l.jsxs("label",{children:[l.jsx("input",{type:"radio",name:`payment_${B.id}`,value:"none",checked:((oe=R[B.id])==null?void 0:oe.payment_method)==="none",onChange:()=>I(Re=>({...Re,[B.id]:{...Re[B.id],payment_method:"none"}}))}),l.jsx("span",{className:"ml-1",children:"Doar rezervare"})]}),l.jsxs("label",{children:[l.jsx("input",{type:"radio",name:`payment_${B.id}`,value:"cash",checked:((Ee=R[B.id])==null?void 0:Ee.payment_method)==="cash",onChange:()=>I(Re=>({...Re,[B.id]:{...Re[B.id],payment_method:"cash"}}))}),l.jsx("span",{className:"ml-1",children:"Cash"})]}),l.jsxs("label",{children:[l.jsx("input",{type:"radio",name:`payment_${B.id}`,value:"card",checked:((Ie=R[B.id])==null?void 0:Ie.payment_method)==="card",onChange:()=>I(Re=>({...Re,[B.id]:{...Re[B.id],payment_method:"card"}}))}),l.jsx("span",{className:"ml-1",children:"Card"})]})]}),((st=R[B.id])==null?void 0:st.payment_method)==="card"&&l.jsx("input",{type:"text",placeholder:"ID tranzacie POS",className:"mt-2 p-1 border rounded w-full text-sm",value:((Pe=R[B.id])==null?void 0:Pe.transaction_id)||"",onChange:Re=>I(dt=>({...dt,[B.id]:{...dt[B.id],transaction_id:Re.target.value}}))})]}),((De=R[B.id])==null?void 0:De.reservation_id)&&l.jsx("div",{className:"flex justify-end pt-2",children:l.jsx("button",{onClick:()=>{I(Re=>{const dt={...Re};return delete dt[B.id],dt}),N(Re=>Re.filter(dt=>dt.id!==B.id))},className:"text-sm text-red-600 hover:underline",children:"Renun la editare"})})]},B.id+"-"+ne)}),b.length>0&&l.jsxs("div",{className:"flex flex-col items-end gap-2",children:[l.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Cod reducere"}),l.jsxs("div",{className:"flex flex-wrap items-center justify-end gap-3",children:[l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsx("input",{className:"w-40 border border-gray-300 rounded px-3 py-2 text-sm text-gray-700 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200",value:r,onChange:B=>i(B.target.value),placeholder:"FALL25"}),l.jsx("button",{type:"button",onClick:oc,disabled:!r.trim(),className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm transition hover:bg-blue-700 disabled:cursor-not-allowed disabled:opacity-60",children:"Aplic"})]}),s&&l.jsxs("div",{className:"flex items-center gap-2 rounded-full bg-green-50 px-3 py-1 text-sm font-semibold text-green-700",children:["",s.discount_amount," lei (",s.code,")",l.jsx("button",{type:"button",onClick:()=>{c(null),i("")},className:"text-xs font-normal text-green-600 underline-offset-2 hover:underline",children:"Reset"})]})]})]}),b.length>0&&l.jsxs("div",{className:"py-3 text-lg font-semibold text-green-700 text-right",children:["Total de plat: ",Ya()," lei"]}),b.length>0&&l.jsxs("div",{className:"flex w-full pt-4",style:{justifyContent:b.length>1?"space-between":"flex-end"},children:[b.length>1&&l.jsx("button",{onClick:sc,className:"bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700",children:"Copie datele"}),l.jsx("button",{onClick:uc,disabled:bt,className:`px-6 py-2 rounded text-white transition ${bt?"bg-gray-300 cursor-not-allowed":"bg-green-600 hover:bg-green-700"}`,children:bt?"Se salveaz":"Salveaz rezervarea"})]})]}),l.jsx(rs,{show:Ia,title:"Rezervri conflictuale",message:`Mai exist ${jo} ${Ha} (n aceeai zi):`,cancelText:"Renun",confirmText:"Continu",onCancel:()=>Ba(!1),onConfirm:()=>{Ba(!1),Ri()},children:l.jsx("ul",{className:"space-y-2",children:(Va??[]).map(B=>l.jsxs("li",{className:"flex justify-between items-center text-sm whitespace-nowrap",children:[l.jsxs("span",{className:"whitespace-nowrap",children:["+         ",B.route,"  ",B.time.slice(0,5),"  ",B.board_at,"",B.exit_at]}),l.jsx("button",{onClick:async()=>{if(window.confirm("Eti sigur c vrei s tergi aceast rezervare conflictual?"))try{const ne=await fetch(`/api/reservations/${B.id}`,{method:"DELETE"}),de=await ne.json();if(!ne.ok)throw new Error(de.error||"Eroare la tergere");vs(ye=>ye.filter(re=>re.id!==B.id)),Va.length===1&&Ba(!1),He("Rezervare conflictual tears"),Ze("success")}catch(ne){He(ne.message),Ze("error")}finally{setTimeout(()=>He(""),3e3)}},className:"px-2 py-1 bg-red-100 text-red-600 rounded hover:bg-red-200 ml-4",children:"terge"})]},B.id))})}),l.jsx(rs,{show:Td&&Dn!==null,title:"Avertisment: Blacklist",cancelText:"Renun",confirmText:"Continu",onCancel:()=>Fa(!1),onConfirm:()=>{Fa(!1),dc()},children:l.jsxs("div",{className:"text-sm space-y-2",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Telefon:"})," ",(Dn==null?void 0:Dn.phone)||"-"]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Motiv:"})," ",(Dn==null?void 0:Dn.reason)||"-"]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Adugat la:"})," ",Dn!=null&&Dn.created_at?new Date(Dn.created_at).toLocaleDateString():"-"]}),l.jsx("p",{children:"Chiar vrei s continui?"})]})})]}))]}),Ut&&l.jsx(yx,{x:Ut.x,y:Ut.y,seat:Ut.seat,selectedRoute:A,onSelect:B=>{Xt({...selectedPassenger,route_id:A==null?void 0:A.id}),Je(Ut.seat),it({x:Ut.x,y:Ut.y}),Yt(null)},onClose:()=>Yt(null)}),Qe&&Mt&&l.jsx(gT,{x:Mt.x,y:Mt.y,passenger:Qe,seat:_t,selectedDate:v,selectedHour:W,originalRouteId:A==null?void 0:A.id,tripId:z,setToastMessage:He,setToastType:Ze,stops:w.map(B=>B.name),onDelete:()=>Dd(Qe),onMove:()=>{Fe(_t),Za(),He("Selecteaz un loc pentru mutare"),Ze("info")},onPay:Ad,onEdit:()=>{console.log("PassengerPopup onEdit  popupSeat:",_t.label);const B=_t.id;N([_t]),I({[B]:{name:Qe.name,phone:Qe.phone,board_at:Qe.board_at,exit_at:Qe.exit_at,observations:Qe.observations||"",reservation_id:Qe.reservation_id||null}}),Za()},onMoveToOtherTrip:()=>{Za(),Li({passenger:Qe,reservation_id:Qe.reservation_id,fromSeat:_t,boardAt:Qe.board_at,exitAt:Qe.exit_at,originalTime:W,originalRouteId:A==null?void 0:A.id,originalDate:v,originalScheduleId:J,originalDirection:ue,originalSchedule:Q}),nc(!0)},onClose:Za}),Yn&&l.jsx(bx,{message:Yn,type:er}),Ut&&l.jsx(yx,{x:Ut.x,y:Ut.y,seat:Ut.seat,onSelect:B=>{Xt({...B,route_id:A==null?void 0:A.id}),Je(Ut.seat),it({x:Ut.x,y:Ut.y}),Yt(null)},onClose:()=>Yt(null)}),tc&&l.jsx(RT,{moveToOtherTripData:fs,stops:q,onClose:async()=>{if(nc(!1),Li(null),!Z)return;const B=yn.find(re=>re.trip_vehicle_id===Sn),ne=B?B.vehicle_id:Ne.vehicle_id,de=Se(q[0]),ye=Se(q.slice(-1)[0]);try{const oe=await(await fetch(`/api/seats/${ne}?route_id=${A.id}&route_schedule_id=${J}&date=${en(v,"yyyy-MM-dd")}`+(W?`&time=${encodeURIComponent(W)}`:"")+`&board_station_id=${de}&exit_station_id=${ye}`+(ue?`&direction=${ue}`:""))).json();et(pe(oe))}catch(re){console.error("Eroare la rencrcare seat-map:",re)}},onMoveSuccess:async({tripId:B,vehicleId:ne,routeId:de,date:ye,hour:re,schedule:oe})=>{var Ee,Ie,st;try{let Pe=oe;if(!Pe&&typeof re=="string"){const ga=Te.find(Xa=>Xa.id===de);Pe=((Ee=ga==null?void 0:ga.schedules)==null?void 0:Ee.find(Xa=>Xa.departure===re))||null}const De=new URLSearchParams;Pe!=null&&Pe.scheduleId?De.set("route_schedule_id",Pe.scheduleId):Pe!=null&&Pe.direction&&De.set("direction",Pe.direction);const Re=De.toString(),mt=await(await fetch(`/api/routes/${de}/stations${Re?`?${Re}`:""}`)).json(),Bt=Array.isArray(mt)?[...mt].sort((ga,Xa)=>(ga.sequence??0)-(Xa.sequence??0)):[],Dt=((Ie=Bt[0])==null?void 0:Ie.station_id)??null,qt=((st=Bt[Bt.length-1])==null?void 0:st.station_id)??null;if(Dt===null||qt===null){console.error("Staiile rutei mutate lipsesc.");return}const nr=await(await fetch(`/api/seats/${ne}?route_id=${de}`+(Pe!=null&&Pe.scheduleId?`&route_schedule_id=${Pe.scheduleId}`:"")+`&date=${en(ye,"yyyy-MM-dd")}`+(re?`&time=${re}`:"")+`&board_station_id=${Dt}&exit_station_id=${qt}`+(Pe!=null&&Pe.direction?`&direction=${Pe.direction}`:""))).json(),zi=Te.find(ga=>ga.id===de)||null;F(zi),x(ye),xs(Pe||re),et(pe(nr))}catch(Pe){console.error("Eroare la fetch curs nou:",Pe)}}}),C&&l.jsx("div",{className:"fixed inset-0 z-[2000] flex flex-col bg-slate-900/80 backdrop-blur-sm",onClick:()=>{E(!1),_("grid")},role:"dialog","aria-modal":"true",children:l.jsxs("div",{className:"flex h-full flex-col",onClick:B=>B.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between gap-4 px-6 pt-6",children:[l.jsxs("div",{className:"text-white text-lg font-semibold tracking-wide",children:["Timeline rezervri (",q[0]||"","  ",q[q.length-1]||"",")"]}),l.jsxs("button",{type:"button",onClick:()=>{E(!1),_("grid")},className:"inline-flex items-center gap-2 rounded-full border border-white/40 bg-white/10 px-4 py-2 text-sm font-semibold text-white transition hover:bg-white/20",children:[l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4",children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),"nchide"]})]}),l.jsx("div",{className:"flex-1 overflow-auto px-6 pb-8 pt-4",children:l.jsx("div",{className:"mx-auto min-h-full w-full",children:l.jsx("div",{className:"rounded-3xl bg-white p-6 shadow-2xl",children:l.jsx(_T,{seats:We,stops:q,intentHolds:Y})})})})]})}),l.jsx(PT,{tripId:z,show:So,onClose:()=>Wr(!1),existingVehicleIds:bs.map(B=>B.vehicle_id),editTvId:Sn,onAdded:B=>{Pr(ne=>[...ne,B]),jn(B.trip_vehicle_id),Wr(!1)},onUpdated:async B=>{if(Sn==="main"){Xe(Pe=>({...Pe,vehicle_id:B})),await Pi(z);const Ee=Se(q[0]),Ie=Se(q[q.length-1]),st=await fetch(`/api/seats/${B}?route_id=${A.id}&route_schedule_id=${J}&date=${en(v,"yyyy-MM-dd")}`+(W?`&time=${encodeURIComponent(W)}`:"")+`&board_station_id=${Ee}&exit_station_id=${Ie}`+(ue?`&direction=${ue}`:""));et(pe(await st.json())),jn("main"),Wr(!1);return}const ne=B;await Pi(z),jn(ne.trip_vehicle_id);const de=Se(q[0]),ye=Se(q[q.length-1]),oe=await(await fetch(`/api/seats/${ne.vehicle_id}?route_id=${A.id}&route_schedule_id=${J}&date=${en(v,"yyyy-MM-dd")}`+(W?`&time=${W}`:"")+`&board_station_id=${de}&exit_station_id=${ye}`+(ue?`&direction=${ue}`:""))).json();et(pe(oe)),Wr(!1)}})]})}function $T(){const[t,e]=h.useState([]),[r,i]=h.useState([]),[s,c]=h.useState(null);h.useEffect(()=>{fetch("/api/reservations/backup").then(p=>p.json()).then(p=>e(p)).catch(p=>console.error("Eroare la backup:",p))},[]),h.useEffect(()=>{fetch("/api/trips/summary").then(p=>p.json()).then(p=>i(p)).catch(p=>console.error("Eroare la trips summary:",p))},[]);const m=r.filter(p=>t.some(v=>v.trip_id===p.trip_id)).map(p=>({value:p.trip_id,label:`${en(new Date(p.date),"dd MMMM yyyy",{locale:oS})}  ${p.route_name}  ora ${p.time}  [${p.plate_number||"fr nr."}]`})),f=s?t.filter(p=>p.trip_id===s):t;return l.jsxs("div",{className:"p-6 max-w-5xl mx-auto",children:[l.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Backupuri rezervri"}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"font-semibold mb-1 block",children:"Filtreaz backupuri dup curs:"}),l.jsx(Pu,{options:m,onChange:p=>c((p==null?void 0:p.value)||null),isClearable:!0,placeholder:"Selecteaz o curs..."})]}),l.jsx("div",{className:"overflow-x-auto bg-white rounded shadow p-4",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-gray-100 text-left",children:[l.jsx("th",{className:"p-2",children:"Data"}),l.jsx("th",{className:"p-2",children:"Ora"}),l.jsx("th",{className:"p-2",children:"Traseu"}),l.jsx("th",{className:"p-2",children:"Nr. loc"}),l.jsx("th",{className:"p-2",children:"Nume"}),l.jsx("th",{className:"p-2",children:"Telefon"}),l.jsx("th",{className:"p-2",children:"Backup time"})]})}),l.jsx("tbody",{children:f.map(p=>{const v=r.find(x=>x.trip_id===p.trip_id);return l.jsxs("tr",{className:"border-t",children:[l.jsx("td",{className:"p-2",children:v?en(new Date(v.date),"dd.MM.yyyy"):"-"}),l.jsx("td",{className:"p-2",children:(v==null?void 0:v.time)||"-"}),l.jsx("td",{className:"p-2",children:(v==null?void 0:v.route_name)||"-"}),l.jsx("td",{className:"p-2",children:p.label}),l.jsx("td",{className:"p-2",children:p.passenger_name||"-"}),l.jsx("td",{className:"p-2",children:p.phone||"-"}),l.jsx("td",{className:"p-2",children:en(new Date(p.backup_time),"dd.MM.yyyy HH:mm")})]},p.backup_id)})})]})})]})}function r1(t,e){return function(){return t.apply(e,arguments)}}const{toString:UT}=Object.prototype,{getPrototypeOf:Cp}=Object,{iterator:Nd,toStringTag:a1}=Symbol,Cd=(t=>e=>{const r=UT.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Gr=t=>(t=t.toLowerCase(),e=>Cd(e)===t),Ed=t=>e=>typeof e===t,{isArray:vo}=Array,lo=Ed("undefined");function Xl(t){return t!==null&&!lo(t)&&t.constructor!==null&&!lo(t.constructor)&&ur(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const i1=Gr("ArrayBuffer");function VT(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&i1(t.buffer),e}const IT=Ed("string"),ur=Ed("function"),s1=Ed("number"),Kl=t=>t!==null&&typeof t=="object",BT=t=>t===!0||t===!1,$u=t=>{if(Cd(t)!=="object")return!1;const e=Cp(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(a1 in t)&&!(Nd in t)},HT=t=>{if(!Kl(t)||Xl(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},FT=Gr("Date"),YT=Gr("File"),qT=Gr("Blob"),GT=Gr("FileList"),WT=t=>Kl(t)&&ur(t.pipe),ZT=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||ur(t.append)&&((e=Cd(t))==="formdata"||e==="object"&&ur(t.toString)&&t.toString()==="[object FormData]"))},XT=Gr("URLSearchParams"),[KT,QT,JT,eA]=["ReadableStream","Request","Response","Headers"].map(Gr),tA=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ql(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let i,s;if(typeof t!="object"&&(t=[t]),vo(t))for(i=0,s=t.length;i<s;i++)e.call(null,t[i],i,t);else{if(Xl(t))return;const c=r?Object.getOwnPropertyNames(t):Object.keys(t),d=c.length;let m;for(i=0;i<d;i++)m=c[i],e.call(null,t[m],m,t)}}function o1(t,e){if(Xl(t))return null;e=e.toLowerCase();const r=Object.keys(t);let i=r.length,s;for(;i-- >0;)if(s=r[i],e===s.toLowerCase())return s;return null}const as=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,l1=t=>!lo(t)&&t!==as;function Dm(){const{caseless:t,skipUndefined:e}=l1(this)&&this||{},r={},i=(s,c)=>{const d=t&&o1(r,c)||c;$u(r[d])&&$u(s)?r[d]=Dm(r[d],s):$u(s)?r[d]=Dm({},s):vo(s)?r[d]=s.slice():(!e||!lo(s))&&(r[d]=s)};for(let s=0,c=arguments.length;s<c;s++)arguments[s]&&Ql(arguments[s],i);return r}const nA=(t,e,r,{allOwnKeys:i}={})=>(Ql(e,(s,c)=>{r&&ur(s)?t[c]=r1(s,r):t[c]=s},{allOwnKeys:i}),t),rA=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),aA=(t,e,r,i)=>{t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},iA=(t,e,r,i)=>{let s,c,d;const m={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),c=s.length;c-- >0;)d=s[c],(!i||i(d,t,e))&&!m[d]&&(e[d]=t[d],m[d]=!0);t=r!==!1&&Cp(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},sA=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const i=t.indexOf(e,r);return i!==-1&&i===r},oA=t=>{if(!t)return null;if(vo(t))return t;let e=t.length;if(!s1(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},lA=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Cp(Uint8Array)),cA=(t,e)=>{const i=(t&&t[Nd]).call(t);let s;for(;(s=i.next())&&!s.done;){const c=s.value;e.call(t,c[0],c[1])}},uA=(t,e)=>{let r;const i=[];for(;(r=t.exec(e))!==null;)i.push(r);return i},dA=Gr("HTMLFormElement"),fA=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,i,s){return i.toUpperCase()+s}),jx=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),hA=Gr("RegExp"),c1=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),i={};Ql(r,(s,c)=>{let d;(d=e(s,c,t))!==!1&&(i[c]=d||s)}),Object.defineProperties(t,i)},mA=t=>{c1(t,(e,r)=>{if(ur(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const i=t[r];if(ur(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},pA=(t,e)=>{const r={},i=s=>{s.forEach(c=>{r[c]=!0})};return vo(t)?i(t):i(String(t).split(e)),r},gA=()=>{},vA=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function bA(t){return!!(t&&ur(t.append)&&t[a1]==="FormData"&&t[Nd])}const yA=t=>{const e=new Array(10),r=(i,s)=>{if(Kl(i)){if(e.indexOf(i)>=0)return;if(Xl(i))return i;if(!("toJSON"in i)){e[s]=i;const c=vo(i)?[]:{};return Ql(i,(d,m)=>{const f=r(d,s+1);!lo(f)&&(c[m]=f)}),e[s]=void 0,c}}return i};return r(t,0)},xA=Gr("AsyncFunction"),wA=t=>t&&(Kl(t)||ur(t))&&ur(t.then)&&ur(t.catch),u1=((t,e)=>t?setImmediate:e?((r,i)=>(as.addEventListener("message",({source:s,data:c})=>{s===as&&c===r&&i.length&&i.shift()()},!1),s=>{i.push(s),as.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",ur(as.postMessage)),SA=typeof queueMicrotask<"u"?queueMicrotask.bind(as):typeof process<"u"&&process.nextTick||u1,jA=t=>t!=null&&ur(t[Nd]),je={isArray:vo,isArrayBuffer:i1,isBuffer:Xl,isFormData:ZT,isArrayBufferView:VT,isString:IT,isNumber:s1,isBoolean:BT,isObject:Kl,isPlainObject:$u,isEmptyObject:HT,isReadableStream:KT,isRequest:QT,isResponse:JT,isHeaders:eA,isUndefined:lo,isDate:FT,isFile:YT,isBlob:qT,isRegExp:hA,isFunction:ur,isStream:WT,isURLSearchParams:XT,isTypedArray:lA,isFileList:GT,forEach:Ql,merge:Dm,extend:nA,trim:tA,stripBOM:rA,inherits:aA,toFlatObject:iA,kindOf:Cd,kindOfTest:Gr,endsWith:sA,toArray:oA,forEachEntry:cA,matchAll:uA,isHTMLForm:dA,hasOwnProperty:jx,hasOwnProp:jx,reduceDescriptors:c1,freezeMethods:mA,toObjectSet:pA,toCamelCase:fA,noop:gA,toFiniteNumber:vA,findKey:o1,global:as,isContextDefined:l1,isSpecCompliantForm:bA,toJSONObject:yA,isAsyncFn:xA,isThenable:wA,setImmediate:u1,asap:SA,isIterable:jA};function Ct(t,e,r,i,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),i&&(this.request=i),s&&(this.response=s,this.status=s.status?s.status:null)}je.inherits(Ct,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:je.toJSONObject(this.config),code:this.code,status:this.status}}});const d1=Ct.prototype,f1={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{f1[t]={value:t}});Object.defineProperties(Ct,f1);Object.defineProperty(d1,"isAxiosError",{value:!0});Ct.from=(t,e,r,i,s,c)=>{const d=Object.create(d1);je.toFlatObject(t,d,function(v){return v!==Error.prototype},p=>p!=="isAxiosError");const m=t&&t.message?t.message:"Error",f=e==null&&t?t.code:e;return Ct.call(d,m,f,r,i,s),t&&d.cause==null&&Object.defineProperty(d,"cause",{value:t,configurable:!0}),d.name=t&&t.name||"Error",c&&Object.assign(d,c),d};const _A=null;function Rm(t){return je.isPlainObject(t)||je.isArray(t)}function h1(t){return je.endsWith(t,"[]")?t.slice(0,-2):t}function _x(t,e,r){return t?t.concat(e).map(function(s,c){return s=h1(s),!r&&c?"["+s+"]":s}).join(r?".":""):e}function NA(t){return je.isArray(t)&&!t.some(Rm)}const CA=je.toFlatObject(je,{},null,function(e){return/^is[A-Z]/.test(e)});function Od(t,e,r){if(!je.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=je.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(N,j){return!je.isUndefined(j[N])});const i=r.metaTokens,s=r.visitor||v,c=r.dots,d=r.indexes,f=(r.Blob||typeof Blob<"u"&&Blob)&&je.isSpecCompliantForm(e);if(!je.isFunction(s))throw new TypeError("visitor must be a function");function p(b){if(b===null)return"";if(je.isDate(b))return b.toISOString();if(je.isBoolean(b))return b.toString();if(!f&&je.isBlob(b))throw new Ct("Blob is not supported. Use a Buffer instead.");return je.isArrayBuffer(b)||je.isTypedArray(b)?f&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function v(b,N,j){let _=b;if(b&&!j&&typeof b=="object"){if(je.endsWith(N,"{}"))N=i?N:N.slice(0,-2),b=JSON.stringify(b);else if(je.isArray(b)&&NA(b)||(je.isFileList(b)||je.endsWith(N,"[]"))&&(_=je.toArray(b)))return N=h1(N),_.forEach(function(E,O){!(je.isUndefined(E)||E===null)&&e.append(d===!0?_x([N],O,c):d===null?N:N+"[]",p(E))}),!1}return Rm(b)?!0:(e.append(_x(j,N,c),p(b)),!1)}const x=[],w=Object.assign(CA,{defaultVisitor:v,convertValue:p,isVisitable:Rm});function S(b,N){if(!je.isUndefined(b)){if(x.indexOf(b)!==-1)throw Error("Circular reference detected in "+N.join("."));x.push(b),je.forEach(b,function(_,C){(!(je.isUndefined(_)||_===null)&&s.call(e,_,je.isString(C)?C.trim():C,N,w))===!0&&S(_,N?N.concat(C):[C])}),x.pop()}}if(!je.isObject(t))throw new TypeError("data must be an object");return S(t),e}function Nx(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function Ep(t,e){this._pairs=[],t&&Od(t,this,e)}const m1=Ep.prototype;m1.append=function(e,r){this._pairs.push([e,r])};m1.toString=function(e){const r=e?function(i){return e.call(this,i,Nx)}:Nx;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function EA(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function p1(t,e,r){if(!e)return t;const i=r&&r.encode||EA;je.isFunction(r)&&(r={serialize:r});const s=r&&r.serialize;let c;if(s?c=s(e,r):c=je.isURLSearchParams(e)?e.toString():new Ep(e,r).toString(i),c){const d=t.indexOf("#");d!==-1&&(t=t.slice(0,d)),t+=(t.indexOf("?")===-1?"?":"&")+c}return t}class Cx{constructor(){this.handlers=[]}use(e,r,i){return this.handlers.push({fulfilled:e,rejected:r,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){je.forEach(this.handlers,function(i){i!==null&&e(i)})}}const g1={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},OA=typeof URLSearchParams<"u"?URLSearchParams:Ep,MA=typeof FormData<"u"?FormData:null,LA=typeof Blob<"u"?Blob:null,kA={isBrowser:!0,classes:{URLSearchParams:OA,FormData:MA,Blob:LA},protocols:["http","https","file","blob","url","data"]},Op=typeof window<"u"&&typeof document<"u",Pm=typeof navigator=="object"&&navigator||void 0,TA=Op&&(!Pm||["ReactNative","NativeScript","NS"].indexOf(Pm.product)<0),AA=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",DA=Op&&window.location.href||"http://localhost",RA=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Op,hasStandardBrowserEnv:TA,hasStandardBrowserWebWorkerEnv:AA,navigator:Pm,origin:DA},Symbol.toStringTag,{value:"Module"})),Kn={...RA,...kA};function PA(t,e){return Od(t,new Kn.classes.URLSearchParams,{visitor:function(r,i,s,c){return Kn.isNode&&je.isBuffer(r)?(this.append(i,r.toString("base64")),!1):c.defaultVisitor.apply(this,arguments)},...e})}function zA(t){return je.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function $A(t){const e={},r=Object.keys(t);let i;const s=r.length;let c;for(i=0;i<s;i++)c=r[i],e[c]=t[c];return e}function v1(t){function e(r,i,s,c){let d=r[c++];if(d==="__proto__")return!0;const m=Number.isFinite(+d),f=c>=r.length;return d=!d&&je.isArray(s)?s.length:d,f?(je.hasOwnProp(s,d)?s[d]=[s[d],i]:s[d]=i,!m):((!s[d]||!je.isObject(s[d]))&&(s[d]=[]),e(r,i,s[d],c)&&je.isArray(s[d])&&(s[d]=$A(s[d])),!m)}if(je.isFormData(t)&&je.isFunction(t.entries)){const r={};return je.forEachEntry(t,(i,s)=>{e(zA(i),s,r,0)}),r}return null}function UA(t,e,r){if(je.isString(t))try{return(e||JSON.parse)(t),je.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(r||JSON.stringify)(t)}const Jl={transitional:g1,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const i=r.getContentType()||"",s=i.indexOf("application/json")>-1,c=je.isObject(e);if(c&&je.isHTMLForm(e)&&(e=new FormData(e)),je.isFormData(e))return s?JSON.stringify(v1(e)):e;if(je.isArrayBuffer(e)||je.isBuffer(e)||je.isStream(e)||je.isFile(e)||je.isBlob(e)||je.isReadableStream(e))return e;if(je.isArrayBufferView(e))return e.buffer;if(je.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let m;if(c){if(i.indexOf("application/x-www-form-urlencoded")>-1)return PA(e,this.formSerializer).toString();if((m=je.isFileList(e))||i.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return Od(m?{"files[]":e}:e,f&&new f,this.formSerializer)}}return c||s?(r.setContentType("application/json",!1),UA(e)):e}],transformResponse:[function(e){const r=this.transitional||Jl.transitional,i=r&&r.forcedJSONParsing,s=this.responseType==="json";if(je.isResponse(e)||je.isReadableStream(e))return e;if(e&&je.isString(e)&&(i&&!this.responseType||s)){const d=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(m){if(d)throw m.name==="SyntaxError"?Ct.from(m,Ct.ERR_BAD_RESPONSE,this,null,this.response):m}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Kn.classes.FormData,Blob:Kn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};je.forEach(["delete","get","head","post","put","patch"],t=>{Jl.headers[t]={}});const VA=je.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),IA=t=>{const e={};let r,i,s;return t&&t.split(`
`).forEach(function(d){s=d.indexOf(":"),r=d.substring(0,s).trim().toLowerCase(),i=d.substring(s+1).trim(),!(!r||e[r]&&VA[r])&&(r==="set-cookie"?e[r]?e[r].push(i):e[r]=[i]:e[r]=e[r]?e[r]+", "+i:i)}),e},Ex=Symbol("internals");function Sl(t){return t&&String(t).trim().toLowerCase()}function Uu(t){return t===!1||t==null?t:je.isArray(t)?t.map(Uu):String(t)}function BA(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=r.exec(t);)e[i[1]]=i[2];return e}const HA=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Kh(t,e,r,i,s){if(je.isFunction(i))return i.call(this,e,r);if(s&&(e=r),!!je.isString(e)){if(je.isString(i))return e.indexOf(i)!==-1;if(je.isRegExp(i))return i.test(e)}}function FA(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,i)=>r.toUpperCase()+i)}function YA(t,e){const r=je.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+r,{value:function(s,c,d){return this[i].call(this,e,s,c,d)},configurable:!0})})}let dr=class{constructor(e){e&&this.set(e)}set(e,r,i){const s=this;function c(m,f,p){const v=Sl(f);if(!v)throw new Error("header name must be a non-empty string");const x=je.findKey(s,v);(!x||s[x]===void 0||p===!0||p===void 0&&s[x]!==!1)&&(s[x||f]=Uu(m))}const d=(m,f)=>je.forEach(m,(p,v)=>c(p,v,f));if(je.isPlainObject(e)||e instanceof this.constructor)d(e,r);else if(je.isString(e)&&(e=e.trim())&&!HA(e))d(IA(e),r);else if(je.isObject(e)&&je.isIterable(e)){let m={},f,p;for(const v of e){if(!je.isArray(v))throw TypeError("Object iterator must return a key-value pair");m[p=v[0]]=(f=m[p])?je.isArray(f)?[...f,v[1]]:[f,v[1]]:v[1]}d(m,r)}else e!=null&&c(r,e,i);return this}get(e,r){if(e=Sl(e),e){const i=je.findKey(this,e);if(i){const s=this[i];if(!r)return s;if(r===!0)return BA(s);if(je.isFunction(r))return r.call(this,s,i);if(je.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=Sl(e),e){const i=je.findKey(this,e);return!!(i&&this[i]!==void 0&&(!r||Kh(this,this[i],i,r)))}return!1}delete(e,r){const i=this;let s=!1;function c(d){if(d=Sl(d),d){const m=je.findKey(i,d);m&&(!r||Kh(i,i[m],m,r))&&(delete i[m],s=!0)}}return je.isArray(e)?e.forEach(c):c(e),s}clear(e){const r=Object.keys(this);let i=r.length,s=!1;for(;i--;){const c=r[i];(!e||Kh(this,this[c],c,e,!0))&&(delete this[c],s=!0)}return s}normalize(e){const r=this,i={};return je.forEach(this,(s,c)=>{const d=je.findKey(i,c);if(d){r[d]=Uu(s),delete r[c];return}const m=e?FA(c):String(c).trim();m!==c&&delete r[c],r[m]=Uu(s),i[m]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return je.forEach(this,(i,s)=>{i!=null&&i!==!1&&(r[s]=e&&je.isArray(i)?i.join(", "):i)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const i=new this(e);return r.forEach(s=>i.set(s)),i}static accessor(e){const i=(this[Ex]=this[Ex]={accessors:{}}).accessors,s=this.prototype;function c(d){const m=Sl(d);i[m]||(YA(s,d),i[m]=!0)}return je.isArray(e)?e.forEach(c):c(e),this}};dr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);je.reduceDescriptors(dr.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(i){this[r]=i}}});je.freezeMethods(dr);function Qh(t,e){const r=this||Jl,i=e||r,s=dr.from(i.headers);let c=i.data;return je.forEach(t,function(m){c=m.call(r,c,s.normalize(),e?e.status:void 0)}),s.normalize(),c}function b1(t){return!!(t&&t.__CANCEL__)}function bo(t,e,r){Ct.call(this,t??"canceled",Ct.ERR_CANCELED,e,r),this.name="CanceledError"}je.inherits(bo,Ct,{__CANCEL__:!0});function y1(t,e,r){const i=r.config.validateStatus;!r.status||!i||i(r.status)?t(r):e(new Ct("Request failed with status code "+r.status,[Ct.ERR_BAD_REQUEST,Ct.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function qA(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function GA(t,e){t=t||10;const r=new Array(t),i=new Array(t);let s=0,c=0,d;return e=e!==void 0?e:1e3,function(f){const p=Date.now(),v=i[c];d||(d=p),r[s]=f,i[s]=p;let x=c,w=0;for(;x!==s;)w+=r[x++],x=x%t;if(s=(s+1)%t,s===c&&(c=(c+1)%t),p-d<e)return;const S=v&&p-v;return S?Math.round(w*1e3/S):void 0}}function WA(t,e){let r=0,i=1e3/e,s,c;const d=(p,v=Date.now())=>{r=v,s=null,c&&(clearTimeout(c),c=null),t(...p)};return[(...p)=>{const v=Date.now(),x=v-r;x>=i?d(p,v):(s=p,c||(c=setTimeout(()=>{c=null,d(s)},i-x)))},()=>s&&d(s)]}const Ju=(t,e,r=3)=>{let i=0;const s=GA(50,250);return WA(c=>{const d=c.loaded,m=c.lengthComputable?c.total:void 0,f=d-i,p=s(f),v=d<=m;i=d;const x={loaded:d,total:m,progress:m?d/m:void 0,bytes:f,rate:p||void 0,estimated:p&&m&&v?(m-d)/p:void 0,event:c,lengthComputable:m!=null,[e?"download":"upload"]:!0};t(x)},r)},Ox=(t,e)=>{const r=t!=null;return[i=>e[0]({lengthComputable:r,total:t,loaded:i}),e[1]]},Mx=t=>(...e)=>je.asap(()=>t(...e)),ZA=Kn.hasStandardBrowserEnv?((t,e)=>r=>(r=new URL(r,Kn.origin),t.protocol===r.protocol&&t.host===r.host&&(e||t.port===r.port)))(new URL(Kn.origin),Kn.navigator&&/(msie|trident)/i.test(Kn.navigator.userAgent)):()=>!0,XA=Kn.hasStandardBrowserEnv?{write(t,e,r,i,s,c){const d=[t+"="+encodeURIComponent(e)];je.isNumber(r)&&d.push("expires="+new Date(r).toGMTString()),je.isString(i)&&d.push("path="+i),je.isString(s)&&d.push("domain="+s),c===!0&&d.push("secure"),document.cookie=d.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function KA(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function QA(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function x1(t,e,r){let i=!KA(e);return t&&(i||r==!1)?QA(t,e):e}const Lx=t=>t instanceof dr?{...t}:t;function ls(t,e){e=e||{};const r={};function i(p,v,x,w){return je.isPlainObject(p)&&je.isPlainObject(v)?je.merge.call({caseless:w},p,v):je.isPlainObject(v)?je.merge({},v):je.isArray(v)?v.slice():v}function s(p,v,x,w){if(je.isUndefined(v)){if(!je.isUndefined(p))return i(void 0,p,x,w)}else return i(p,v,x,w)}function c(p,v){if(!je.isUndefined(v))return i(void 0,v)}function d(p,v){if(je.isUndefined(v)){if(!je.isUndefined(p))return i(void 0,p)}else return i(void 0,v)}function m(p,v,x){if(x in e)return i(p,v);if(x in t)return i(void 0,p)}const f={url:c,method:c,data:c,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,withXSRFToken:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:m,headers:(p,v,x)=>s(Lx(p),Lx(v),x,!0)};return je.forEach(Object.keys({...t,...e}),function(v){const x=f[v]||s,w=x(t[v],e[v],v);je.isUndefined(w)&&x!==m||(r[v]=w)}),r}const w1=t=>{const e=ls({},t);let{data:r,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:c,headers:d,auth:m}=e;if(e.headers=d=dr.from(d),e.url=p1(x1(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),m&&d.set("Authorization","Basic "+btoa((m.username||"")+":"+(m.password?unescape(encodeURIComponent(m.password)):""))),je.isFormData(r)){if(Kn.hasStandardBrowserEnv||Kn.hasStandardBrowserWebWorkerEnv)d.setContentType(void 0);else if(je.isFunction(r.getHeaders)){const f=r.getHeaders(),p=["content-type","content-length"];Object.entries(f).forEach(([v,x])=>{p.includes(v.toLowerCase())&&d.set(v,x)})}}if(Kn.hasStandardBrowserEnv&&(i&&je.isFunction(i)&&(i=i(e)),i||i!==!1&&ZA(e.url))){const f=s&&c&&XA.read(c);f&&d.set(s,f)}return e},JA=typeof XMLHttpRequest<"u",eD=JA&&function(t){return new Promise(function(r,i){const s=w1(t);let c=s.data;const d=dr.from(s.headers).normalize();let{responseType:m,onUploadProgress:f,onDownloadProgress:p}=s,v,x,w,S,b;function N(){S&&S(),b&&b(),s.cancelToken&&s.cancelToken.unsubscribe(v),s.signal&&s.signal.removeEventListener("abort",v)}let j=new XMLHttpRequest;j.open(s.method.toUpperCase(),s.url,!0),j.timeout=s.timeout;function _(){if(!j)return;const E=dr.from("getAllResponseHeaders"in j&&j.getAllResponseHeaders()),M={data:!m||m==="text"||m==="json"?j.responseText:j.response,status:j.status,statusText:j.statusText,headers:E,config:t,request:j};y1(function(I){r(I),N()},function(I){i(I),N()},M),j=null}"onloadend"in j?j.onloadend=_:j.onreadystatechange=function(){!j||j.readyState!==4||j.status===0&&!(j.responseURL&&j.responseURL.indexOf("file:")===0)||setTimeout(_)},j.onabort=function(){j&&(i(new Ct("Request aborted",Ct.ECONNABORTED,t,j)),j=null)},j.onerror=function(O){const M=O&&O.message?O.message:"Network Error",R=new Ct(M,Ct.ERR_NETWORK,t,j);R.event=O||null,i(R),j=null},j.ontimeout=function(){let O=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const M=s.transitional||g1;s.timeoutErrorMessage&&(O=s.timeoutErrorMessage),i(new Ct(O,M.clarifyTimeoutError?Ct.ETIMEDOUT:Ct.ECONNABORTED,t,j)),j=null},c===void 0&&d.setContentType(null),"setRequestHeader"in j&&je.forEach(d.toJSON(),function(O,M){j.setRequestHeader(M,O)}),je.isUndefined(s.withCredentials)||(j.withCredentials=!!s.withCredentials),m&&m!=="json"&&(j.responseType=s.responseType),p&&([w,b]=Ju(p,!0),j.addEventListener("progress",w)),f&&j.upload&&([x,S]=Ju(f),j.upload.addEventListener("progress",x),j.upload.addEventListener("loadend",S)),(s.cancelToken||s.signal)&&(v=E=>{j&&(i(!E||E.type?new bo(null,t,j):E),j.abort(),j=null)},s.cancelToken&&s.cancelToken.subscribe(v),s.signal&&(s.signal.aborted?v():s.signal.addEventListener("abort",v)));const C=qA(s.url);if(C&&Kn.protocols.indexOf(C)===-1){i(new Ct("Unsupported protocol "+C+":",Ct.ERR_BAD_REQUEST,t));return}j.send(c||null)})},tD=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let i=new AbortController,s;const c=function(p){if(!s){s=!0,m();const v=p instanceof Error?p:this.reason;i.abort(v instanceof Ct?v:new bo(v instanceof Error?v.message:v))}};let d=e&&setTimeout(()=>{d=null,c(new Ct(`timeout ${e} of ms exceeded`,Ct.ETIMEDOUT))},e);const m=()=>{t&&(d&&clearTimeout(d),d=null,t.forEach(p=>{p.unsubscribe?p.unsubscribe(c):p.removeEventListener("abort",c)}),t=null)};t.forEach(p=>p.addEventListener("abort",c));const{signal:f}=i;return f.unsubscribe=()=>je.asap(m),f}},nD=function*(t,e){let r=t.byteLength;if(r<e){yield t;return}let i=0,s;for(;i<r;)s=i+e,yield t.slice(i,s),i=s},rD=async function*(t,e){for await(const r of aD(t))yield*nD(r,e)},aD=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:r,value:i}=await e.read();if(r)break;yield i}}finally{await e.cancel()}},kx=(t,e,r,i)=>{const s=rD(t,e);let c=0,d,m=f=>{d||(d=!0,i&&i(f))};return new ReadableStream({async pull(f){try{const{done:p,value:v}=await s.next();if(p){m(),f.close();return}let x=v.byteLength;if(r){let w=c+=x;r(w)}f.enqueue(new Uint8Array(v))}catch(p){throw m(p),p}},cancel(f){return m(f),s.return()}},{highWaterMark:2})},Tx=64*1024,{isFunction:ju}=je,iD=(({Request:t,Response:e})=>({Request:t,Response:e}))(je.global),{ReadableStream:Ax,TextEncoder:Dx}=je.global,Rx=(t,...e)=>{try{return!!t(...e)}catch{return!1}},sD=t=>{t=je.merge.call({skipUndefined:!0},iD,t);const{fetch:e,Request:r,Response:i}=t,s=e?ju(e):typeof fetch=="function",c=ju(r),d=ju(i);if(!s)return!1;const m=s&&ju(Ax),f=s&&(typeof Dx=="function"?(b=>N=>b.encode(N))(new Dx):async b=>new Uint8Array(await new r(b).arrayBuffer())),p=c&&m&&Rx(()=>{let b=!1;const N=new r(Kn.origin,{body:new Ax,method:"POST",get duplex(){return b=!0,"half"}}).headers.has("Content-Type");return b&&!N}),v=d&&m&&Rx(()=>je.isReadableStream(new i("").body)),x={stream:v&&(b=>b.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(b=>{!x[b]&&(x[b]=(N,j)=>{let _=N&&N[b];if(_)return _.call(N);throw new Ct(`Response type '${b}' is not supported`,Ct.ERR_NOT_SUPPORT,j)})});const w=async b=>{if(b==null)return 0;if(je.isBlob(b))return b.size;if(je.isSpecCompliantForm(b))return(await new r(Kn.origin,{method:"POST",body:b}).arrayBuffer()).byteLength;if(je.isArrayBufferView(b)||je.isArrayBuffer(b))return b.byteLength;if(je.isURLSearchParams(b)&&(b=b+""),je.isString(b))return(await f(b)).byteLength},S=async(b,N)=>{const j=je.toFiniteNumber(b.getContentLength());return j??w(N)};return async b=>{let{url:N,method:j,data:_,signal:C,cancelToken:E,timeout:O,onDownloadProgress:M,onUploadProgress:R,responseType:I,headers:H,withCredentials:D="same-origin",fetchOptions:Y}=w1(b),G=e||fetch;I=I?(I+"").toLowerCase():"text";let ie=tD([C,E&&E.toAbortSignal()],O),Oe=null;const ce=ie&&ie.unsubscribe&&(()=>{ie.unsubscribe()});let te;try{if(R&&p&&j!=="get"&&j!=="head"&&(te=await S(H,_))!==0){let A=new r(N,{method:"POST",body:_,duplex:"half"}),F;if(je.isFormData(_)&&(F=A.headers.get("content-type"))&&H.setContentType(F),A.body){const[V,q]=Ox(te,Ju(Mx(R)));_=kx(A.body,Tx,V,q)}}je.isString(D)||(D=D?"include":"omit");const k=c&&"credentials"in r.prototype,z={...Y,signal:ie,method:j.toUpperCase(),headers:H.normalize().toJSON(),body:_,duplex:"half",credentials:k?D:void 0};Oe=c&&new r(N,z);let U=await(c?G(Oe,Y):G(N,z));const K=v&&(I==="stream"||I==="response");if(v&&(M||K&&ce)){const A={};["status","statusText","headers"].forEach(Q=>{A[Q]=U[Q]});const F=je.toFiniteNumber(U.headers.get("content-length")),[V,q]=M&&Ox(F,Ju(Mx(M),!0))||[];U=new i(kx(U.body,Tx,V,()=>{q&&q(),ce&&ce()}),A)}I=I||"text";let T=await x[je.findKey(x,I)||"text"](U,b);return!K&&ce&&ce(),await new Promise((A,F)=>{y1(A,F,{data:T,headers:dr.from(U.headers),status:U.status,statusText:U.statusText,config:b,request:Oe})})}catch(k){throw ce&&ce(),k&&k.name==="TypeError"&&/Load failed|fetch/i.test(k.message)?Object.assign(new Ct("Network Error",Ct.ERR_NETWORK,b,Oe),{cause:k.cause||k}):Ct.from(k,k&&k.code,b,Oe)}}},oD=new Map,S1=t=>{let e=t?t.env:{};const{fetch:r,Request:i,Response:s}=e,c=[i,s,r];let d=c.length,m=d,f,p,v=oD;for(;m--;)f=c[m],p=v.get(f),p===void 0&&v.set(f,p=m?new Map:sD(e)),v=p;return p};S1();const zm={http:_A,xhr:eD,fetch:{get:S1}};je.forEach(zm,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Px=t=>`- ${t}`,lD=t=>je.isFunction(t)||t===null||t===!1,j1={getAdapter:(t,e)=>{t=je.isArray(t)?t:[t];const{length:r}=t;let i,s;const c={};for(let d=0;d<r;d++){i=t[d];let m;if(s=i,!lD(i)&&(s=zm[(m=String(i)).toLowerCase()],s===void 0))throw new Ct(`Unknown adapter '${m}'`);if(s&&(je.isFunction(s)||(s=s.get(e))))break;c[m||"#"+d]=s}if(!s){const d=Object.entries(c).map(([f,p])=>`adapter ${f} `+(p===!1?"is not supported by the environment":"is not available in the build"));let m=r?d.length>1?`since :
`+d.map(Px).join(`
`):" "+Px(d[0]):"as no adapter specified";throw new Ct("There is no suitable adapter to dispatch the request "+m,"ERR_NOT_SUPPORT")}return s},adapters:zm};function Jh(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new bo(null,t)}function zx(t){return Jh(t),t.headers=dr.from(t.headers),t.data=Qh.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),j1.getAdapter(t.adapter||Jl.adapter,t)(t).then(function(i){return Jh(t),i.data=Qh.call(t,t.transformResponse,i),i.headers=dr.from(i.headers),i},function(i){return b1(i)||(Jh(t),i&&i.response&&(i.response.data=Qh.call(t,t.transformResponse,i.response),i.response.headers=dr.from(i.response.headers))),Promise.reject(i)})}const _1="1.12.2",Md={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Md[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});const $x={};Md.transitional=function(e,r,i){function s(c,d){return"[Axios v"+_1+"] Transitional option '"+c+"'"+d+(i?". "+i:"")}return(c,d,m)=>{if(e===!1)throw new Ct(s(d," has been removed"+(r?" in "+r:"")),Ct.ERR_DEPRECATED);return r&&!$x[d]&&($x[d]=!0,console.warn(s(d," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(c,d,m):!0}};Md.spelling=function(e){return(r,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function cD(t,e,r){if(typeof t!="object")throw new Ct("options must be an object",Ct.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let s=i.length;for(;s-- >0;){const c=i[s],d=e[c];if(d){const m=t[c],f=m===void 0||d(m,c,t);if(f!==!0)throw new Ct("option "+c+" must be "+f,Ct.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Ct("Unknown option "+c,Ct.ERR_BAD_OPTION)}}const Vu={assertOptions:cD,validators:Md},aa=Vu.validators;let ss=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Cx,response:new Cx}}async request(e,r){try{return await this._request(e,r)}catch(i){if(i instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const c=s.stack?s.stack.replace(/^.+\n/,""):"";try{i.stack?c&&!String(i.stack).endsWith(c.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+c):i.stack=c}catch{}}throw i}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=ls(this.defaults,r);const{transitional:i,paramsSerializer:s,headers:c}=r;i!==void 0&&Vu.assertOptions(i,{silentJSONParsing:aa.transitional(aa.boolean),forcedJSONParsing:aa.transitional(aa.boolean),clarifyTimeoutError:aa.transitional(aa.boolean)},!1),s!=null&&(je.isFunction(s)?r.paramsSerializer={serialize:s}:Vu.assertOptions(s,{encode:aa.function,serialize:aa.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Vu.assertOptions(r,{baseUrl:aa.spelling("baseURL"),withXsrfToken:aa.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let d=c&&je.merge(c.common,c[r.method]);c&&je.forEach(["delete","get","head","post","put","patch","common"],b=>{delete c[b]}),r.headers=dr.concat(d,c);const m=[];let f=!0;this.interceptors.request.forEach(function(N){typeof N.runWhen=="function"&&N.runWhen(r)===!1||(f=f&&N.synchronous,m.unshift(N.fulfilled,N.rejected))});const p=[];this.interceptors.response.forEach(function(N){p.push(N.fulfilled,N.rejected)});let v,x=0,w;if(!f){const b=[zx.bind(this),void 0];for(b.unshift(...m),b.push(...p),w=b.length,v=Promise.resolve(r);x<w;)v=v.then(b[x++],b[x++]);return v}w=m.length;let S=r;for(;x<w;){const b=m[x++],N=m[x++];try{S=b(S)}catch(j){N.call(this,j);break}}try{v=zx.call(this,S)}catch(b){return Promise.reject(b)}for(x=0,w=p.length;x<w;)v=v.then(p[x++],p[x++]);return v}getUri(e){e=ls(this.defaults,e);const r=x1(e.baseURL,e.url,e.allowAbsoluteUrls);return p1(r,e.params,e.paramsSerializer)}};je.forEach(["delete","get","head","options"],function(e){ss.prototype[e]=function(r,i){return this.request(ls(i||{},{method:e,url:r,data:(i||{}).data}))}});je.forEach(["post","put","patch"],function(e){function r(i){return function(c,d,m){return this.request(ls(m||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:c,data:d}))}}ss.prototype[e]=r(),ss.prototype[e+"Form"]=r(!0)});let uD=class N1{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(c){r=c});const i=this;this.promise.then(s=>{if(!i._listeners)return;let c=i._listeners.length;for(;c-- >0;)i._listeners[c](s);i._listeners=null}),this.promise.then=s=>{let c;const d=new Promise(m=>{i.subscribe(m),c=m}).then(s);return d.cancel=function(){i.unsubscribe(c)},d},e(function(c,d,m){i.reason||(i.reason=new bo(c,d,m),r(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=i=>{e.abort(i)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new N1(function(s){e=s}),cancel:e}}};function dD(t){return function(r){return t.apply(null,r)}}function fD(t){return je.isObject(t)&&t.isAxiosError===!0}const $m={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries($m).forEach(([t,e])=>{$m[e]=t});function C1(t){const e=new ss(t),r=r1(ss.prototype.request,e);return je.extend(r,ss.prototype,e,{allOwnKeys:!0}),je.extend(r,e,null,{allOwnKeys:!0}),r.create=function(s){return C1(ls(t,s))},r}const vt=C1(Jl);vt.Axios=ss;vt.CanceledError=bo;vt.CancelToken=uD;vt.isCancel=b1;vt.VERSION=_1;vt.toFormData=Od;vt.AxiosError=Ct;vt.Cancel=vt.CanceledError;vt.all=function(e){return Promise.all(e)};vt.spread=dD;vt.isAxiosError=fD;vt.mergeConfig=ls;vt.AxiosHeaders=dr;vt.formToJSON=t=>v1(je.isHTMLForm(t)?new FormData(t):t);vt.getAdapter=j1.getAdapter;vt.HttpStatusCode=$m;vt.default=vt;const{Axios:d4,AxiosError:f4,CanceledError:h4,isCancel:m4,CancelToken:p4,VERSION:g4,all:v4,Cancel:b4,isAxiosError:y4,spread:x4,toFormData:w4,AxiosHeaders:S4,HttpStatusCode:j4,formToJSON:_4,getAdapter:N4,mergeConfig:C4}=vt;function hD(){const[t,e]=h.useState([]),[r,i]=h.useState(""),[s,c]=h.useState(!1),[d,m]=h.useState(!1),[f,p]=h.useState([]),[v,x]=h.useState(""),w=async()=>{c(!0);try{const O=await vt.get("/api/blacklist");e(O.data)}catch(O){console.error("Eroare la ncrcare blacklist:",O)}finally{c(!1)}};h.useEffect(()=>{w()},[]);const S=async O=>{if(window.confirm("Adaugi acest pasager n blacklist?"))try{await vt.post("/api/blacklist",{person_id:O}),await w()}catch(M){console.error(M),alert("Nu am putut aduga n blacklist.")}},b=async O=>{if(window.confirm("tergi acest pasager din blacklist?"))try{await vt.delete(`/api/blacklist/${O}`),await w()}catch(M){console.error(M),alert("Nu am putut terge din blacklist.")}},N=async O=>{if(window.confirm("tergi toate neprezentrile pentru acest pasager?"))try{await vt.delete(`/api/no-shows/${O}`),await w()}catch(M){console.error(M),alert("Nu am putut terge neprezentrile.")}},j=async(O,M)=>{try{const R=await vt.get(`/api/people/${O}/report`);p(R.data.noShows||[]),x(M),m(!0)}catch(R){console.error(R),alert("Nu am putut ncrca istoricul.")}},_=r.toLowerCase(),C=r.replace(/\s+/g,""),E=t.filter(O=>{const M=(O.person_name||"").toLowerCase(),R=String(O.phone||"").replace(/\s+/g,"");return M.includes(_)||R.includes(C)});return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"p-4 max-w-4xl",children:[l.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"Administrare Blacklist"}),l.jsx("input",{type:"text",placeholder:"Caut dup nume sau telefon",value:r,onChange:O=>i(O.target.value),className:"mb-4 p-2 border rounded w-full text-sm max-w-full"}),s?l.jsx("div",{children:"Loading"}):l.jsxs("table",{className:"w-full text-sm table-auto border-collapse",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-gray-100",children:[l.jsx("th",{className:"px-2 py-1 border text-left",children:"Nume"}),l.jsx("th",{className:"px-2 py-1 border text-left",children:"Telefon"}),l.jsx("th",{className:"px-2 py-1 border text-left",children:"Angajat"}),l.jsx("th",{className:"px-2 py-1 border text-left",children:"Motiv"}),l.jsx("th",{className:"px-2 py-1 border text-left",children:"Adugat la"}),l.jsx("th",{className:"px-2 py-1 border text-left",children:"Aciuni"})]})}),l.jsxs("tbody",{children:[E.map((O,M)=>l.jsxs("tr",{className:M%2===0?"bg-white":"bg-gray-50",children:[l.jsx("td",{className:"px-2 py-1 border",children:O.person_name||""}),l.jsx("td",{className:"px-2 py-1 border",children:O.phone}),l.jsx("td",{className:"px-2 py-1 border",children:O.added_by_employee||""}),l.jsx("td",{className:"px-2 py-1 border",children:O.reason||""}),l.jsx("td",{className:"px-2 py-1 border",children:O.added_at||""}),l.jsxs("td",{className:"px-2 py-1 border",children:[O.source==="blacklist"&&l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>j(O.person_id,O.person_name||O.phone),className:"px-2 py-1 bg-gray-600 text-white rounded text-xs",children:"Istoric"}),l.jsx("button",{onClick:()=>b(O.blacklist_id),className:"px-2 py-1 bg-red-600 text-white rounded text-xs",children:"Scoate"})]}),O.source==="no_show"&&l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>j(O.person_id,O.person_name||O.phone),className:"px-2 py-1 bg-gray-600 text-white rounded text-xs",children:"Istoric"}),l.jsx("button",{onClick:()=>N(O.person_id),className:"px-2 py-1 bg-orange-600 text-white rounded text-xs",children:"terge"}),l.jsx("button",{onClick:()=>S(O.person_id),className:"px-2 py-1 bg-blue-600 text-white rounded text-xs",children:"Adaug"})]})]})]},`${O.person_id}-${O.source}`)),E.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:"6",className:"text-center py-4 text-gray-500",children:"Nu exist persoane n blacklist sau cu neprezentri."})})]})]})]}),d&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white p-4 rounded shadow-lg w-120 max-h-[70vh] overflow-auto text-sm",children:[l.jsxs("h3",{className:"text-lg font-semibold mb-2",children:["Istoric neprezentri: ",v]}),f.length===0?l.jsx("div",{children:"Nu exist nregistrri."}):l.jsx("div",{className:"space-y-1",children:f.map((O,M)=>{const R=O.date||O.created_at||O.created_at_date||"-",I=O.time||O.hour||O.trip_time||"",H=O.route_name||O.route||O.routeName||"-",D=Array.isArray(O.seats)?O.seats.join(", "):O.seats??O.seat_numbers??O.seat??O.seat_ids??"-";return l.jsxs("div",{className:"text-sm whitespace-nowrap",children:[R," ",I,"  ",H,l.jsxs("span",{className:"font-semibold",children:[" ","| Locuri: ",D]})]},M)})}),l.jsx("div",{className:"text-right mt-4",children:l.jsx("button",{onClick:()=>m(!1),className:"px-3 py-1 bg-gray-300 text-sm rounded",children:"nchide"})})]})})]})}function mD({reservationId:t,fallbackEvent:e}){const[r,i]=h.useState([]),[s,c]=h.useState(!1),[d,m]=h.useState(!1),[f,p]=h.useState(""),v=b=>{if(!b)return 0;const[N="",j=""]=b.split(" "),[_,C,E]=N.split(".").map(Number),[O=0,M=0]=j.split(":").map(Number);return!E||!C||!_?0:new Date(E,C-1,_,O,M).getTime()},x=Al.useMemo(()=>{const b=Array.isArray(r)?[...r]:[];return e&&b.length===0&&b.push({event_id:e.event_id||`fallback-${t}`,...e}),b.sort((N,j)=>v(N.at)-v(j.at))},[r,e,t]),w=b=>b?(b.channel||"").toLowerCase()==="online"||(b.actor_name||"").toLowerCase()==="online"?"Online":b.actor_name||b.actor_id||"":"",S=()=>{s||(m(!0),fetch(`/api/audit-logs?reservation_id=${t}`).then(b=>b.ok?b.json():b.json().then(N=>Promise.reject((N==null?void 0:N.error)||"Eroare"))).then(b=>{i(Array.isArray(b)?b:[]),p("")}).catch(b=>p(String(b))).finally(()=>m(!1))),c(!s)};return l.jsxs("div",{children:[l.jsx("button",{className:"text-blue-600 underline",onClick:S,children:s?"Ascunde":"Vezi"}),s&&l.jsx("div",{className:"mt-2 border rounded p-2 bg-gray-50",children:d?"Se ncarc":f?l.jsx("span",{className:"text-red-600",children:f}):x.length===0?"":l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"text-xs mb-2",children:(()=>{const b=x.find(E=>(E.action_label||E.action)==="reservation.moveToOtherTrip"||(E.action||"").startsWith("reservation.move")),N=x.filter(E=>(E.action||"")==="payment.capture").sort((E,O)=>v(O.at)-v(E.at))[0],j=w(b)||w(N)||"",_=b?l.jsxs("span",{children:[l.jsx("b",{children:"Mutat"})," pe ",b.at," de ",l.jsx("b",{children:j}),b.from_trip_date?l.jsxs(l.Fragment,{children:["  de la ",l.jsxs("b",{children:[b.from_trip_date," ",b.from_hour||""]})," (",b.from_route_name||"","  ",b.from_segment||"","  loc ",b.from_seat||"",")"]}):null,b.trip_date?l.jsxs(l.Fragment,{children:["  la ",l.jsxs("b",{children:[b.trip_date," ",b.hour||""]})," (",b.route_name||"","  ",b.segment||"","  loc ",b.seat||"",")"]}):null]}):null,C=N?l.jsxs("span",{children:[b?"  ":"",l.jsx("b",{children:"Plat"}),": ",N.amount??""," ",N.payment_method?`(${N.payment_method})`:"",N.transaction_id?`, txn ${N.transaction_id}`:"",N.at?`, la ${N.at}`:""]}):null;return _||C?l.jsxs("div",{children:[_,C]}):null})()}),l.jsxs("table",{className:"w-full text-xs",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-1",children:"Dat"}),l.jsx("th",{className:"border p-1",children:"Aciune"}),l.jsx("th",{className:"border p-1",children:"Agent"})]})}),l.jsx("tbody",{children:x.map(b=>l.jsxs("tr",{children:[l.jsx("td",{className:"border p-1",children:b.at}),l.jsx("td",{className:"border p-1",children:b.action_label||b.action}),l.jsx("td",{className:"border p-1",children:w(b)})]},b.event_id))})]})]})})]})}function pD(){const{personId:t}=dd(),[e,r]=h.useState(null),[i,s]=h.useState(!0),[c,d]=h.useState(""),[m,f]=h.useState(""),[p,v]=h.useState(""),[x,w]=h.useState(!1);if(h.useEffect(()=>{fetch(`/api/people/${t}/report`).then(E=>E.json()).then(E=>{r(E),s(!1),d(E.personName||""),f(E.personPhone||""),v(E.personNotes||"")}).catch(E=>{console.error("Eroare la fetch raport:",E),s(!1)})},[t]),i)return l.jsx("div",{className:"p-4",children:"Se ncarc..."});if(!e)return l.jsx("div",{className:"p-4 text-red-500",children:"Eroare la ncrcare"});const{personName:S="",reservations:b=[],noShows:N=[],blacklist:j}=e,_=E=>{if(!E)return"";const O=new Date(E);return Number.isNaN(O.getTime())?"":O.toLocaleDateString("ro-RO",{timeZone:"Europe/Bucharest"})},C=E=>{if(!E)return"";const O=new Date(E);return Number.isNaN(O.getTime())?"":O.toLocaleString("ro-RO",{timeZone:"Europe/Bucharest",day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).replace(",","").replace(/\s+/g," ").trim()};return l.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[l.jsxs("h1",{className:"text-xl font-bold mb-4",children:["Raport pasager ID #",t,S&&` - ${S}`]}),j&&l.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 p-4 rounded mb-6",children:[" n blacklist: ",j.reason," ",l.jsx("br",{}),l.jsxs("span",{className:"text-sm italic",children:["Adugat de: ",j.added_by_name||""," la: ",new Date(j.created_at).toLocaleString()]})]}),l.jsxs("section",{className:"mb-6 bg-white border rounded p-4",children:[l.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Nume"}),l.jsx("input",{value:c,onChange:E=>d(E.target.value),className:"w-full border rounded px-3 py-2"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Telefon"}),l.jsx("input",{value:m,onChange:E=>f(E.target.value),className:"w-full border rounded px-3 py-2"})]}),l.jsxs("div",{className:"md:col-span-3",children:[l.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Observaii / note"}),l.jsx("textarea",{value:p,onChange:E=>v(E.target.value),rows:3,className:"w-full border rounded px-3 py-2"})]})]}),l.jsx("div",{className:"mt-3",children:l.jsx("button",{disabled:x,onClick:async()=>{try{w(!0);const E=await fetch(`/api/people/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:c,phone:m,notes:p})}),O=await E.json();if(!E.ok||!(O!=null&&O.success))throw new Error((O==null?void 0:O.error)||"Eroare la salvare");const M=await fetch(`/api/people/${t}/report`).then(R=>R.json());r(M),d(M.personName||""),f(M.personPhone||""),v(M.personNotes||""),alert("Salvat.")}catch(E){alert(E.message||"Eroare la salvare")}finally{w(!1)}},className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:x?"Se salveaz":"Salveaz"})})]}),l.jsxs("section",{className:"mb-6",children:[l.jsx("h2",{className:"text-lg font-semibold mb-2",children:" Rezervri"}),b.length===0?l.jsx("div",{className:"text-gray-500",children:"Nicio rezervare gsit."}):l.jsxs("table",{className:"w-full text-sm border-collapse border",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-gray-100",children:[l.jsx("th",{className:"p-2 border",children:"Data cltoriei"}),l.jsx("th",{className:"p-2 border",children:"Traseu"}),l.jsx("th",{className:"p-2 border",children:"Ora curs"}),l.jsx("th",{className:"p-2 border",children:"Segment"}),l.jsx("th",{className:"p-2 border",children:"Loc"}),l.jsx("th",{className:"p-2 border",children:"Status"}),l.jsx("th",{className:"p-2 border",children:"Creat de"}),l.jsx("th",{className:"p-2 border",children:"Creat la"}),l.jsx("th",{className:"p-2 border",children:"Plat"}),l.jsx("th",{className:"p-2 border",children:"Pre"}),l.jsx("th",{className:"p-2 border",children:"Reduceri"}),l.jsx("th",{className:"p-2 border",children:"Pre final"}),l.jsx("th",{className:"p-2 border",children:"Istoric"})]})}),l.jsx("tbody",{children:b.map((E,O)=>{const M=N.some(U=>U.date===E.date&&U.time===E.time&&!0),R=_(E.date)||"",I=E.booking_channel==="online"?"Online":E.reserved_by||"",H=C(E.reservation_time),D=H||"",Y=H?{event_id:`fallback-${E.id||O}`,at:H,action_label:"Rezervare creat",action:"reservation.create",actor_name:E.booking_channel==="online"?"Online":E.reserved_by||"",channel:E.booking_channel||null}:null,G=(E.payment_method||"").toLowerCase(),ie=G==="card"?"Card":G==="cash"?"Cash":G==="online"?"Online":E.payment_method||"",Oe=parseFloat(E.paid_amount??""),ce=!Number.isNaN(Oe)&&Oe>0,te=E.payment_status==="paid",k=te?`Pltit${ie?` (${ie})`:""}${ce?`  ${Oe.toFixed(2)} lei`:""}`:"Nepltit",z=te?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600";return l.jsxs("tr",{style:{backgroundColor:M?"#ffe6e6":"white"},children:[l.jsx("td",{className:"p-2 border",children:R}),l.jsx("td",{className:"p-2 border",children:E.route_name}),l.jsx("td",{className:"p-2 border",children:E.time.substring(0,5)}),l.jsxs("td",{className:"p-2 border",children:[E.board_name||"","  ",E.exit_name||""]}),l.jsx("td",{className:"p-2 border",children:E.seat_label}),l.jsx("td",{className:"p-2 border",children:typeof E.status=="string"?l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${E.status.toLowerCase()==="cancelled"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:E.status.toLowerCase()==="cancelled"?"Anulat":"Activ"}):l.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-gray-100 text-gray-600",children:""})}),l.jsx("td",{className:"p-2 border",children:I}),l.jsx("td",{className:"p-2 border",children:D}),l.jsx("td",{className:"p-2 border",children:l.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs ${z}`,children:k})}),l.jsx("td",{className:"p-2 border",children:E.price_base??""}),l.jsx("td",{className:"p-2 border",children:E.discount_summary||""}),l.jsx("td",{className:"p-2 border",children:E.price_final??""}),l.jsx("td",{className:"p-2 border",children:E.id?l.jsx(mD,{reservationId:E.id,fallbackEvent:Y}):""})]},E.id||O)})})]})]}),l.jsxs("section",{className:"mb-6",children:[l.jsx("h2",{className:"text-lg font-semibold mb-2",children:" Neprezentri"}),N.length===0?l.jsx("div",{className:"text-gray-500",children:"Nu exist neprezentri."}):l.jsxs("table",{className:"w-full text-sm border-collapse border",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-gray-100",children:[l.jsx("th",{className:"p-2 border",children:"Data"}),l.jsx("th",{className:"p-2 border",children:"Traseu"}),l.jsx("th",{className:"p-2 border",children:"Ora"}),l.jsx("th",{className:"p-2 border",children:"Segment"}),l.jsx("th",{className:"p-2 border",children:"Loc"}),l.jsx("th",{className:"p-2 border",children:"Marcat de"}),l.jsx("th",{className:"p-2 border",children:"La"})]})}),l.jsx("tbody",{children:N.map(E=>l.jsxs("tr",{children:[l.jsx("td",{className:"p-2 border",children:E.date}),l.jsx("td",{className:"p-2 border",children:E.route_name}),l.jsx("td",{className:"p-2 border",children:E.time}),l.jsxs("td",{className:"p-2 border",children:[E.board_name||"","  ",E.exit_name||""]}),l.jsx("td",{className:"p-2 border",children:E.seat_label}),l.jsx("td",{className:"p-2 border",children:E.marked_by||""}),l.jsx("td",{className:"p-2 border",children:E.marked_at||""})]},E.id))})]})]}),l.jsx("div",{className:"mt-6",children:l.jsx(Dr,{to:"/",className:"text-blue-600 hover:underline",children:" napoi la rezervri"})})]})}function gD(){const[t,e]=h.useState(()=>new Date().toISOString().slice(0,10)),[r,i]=h.useState(null),[s,c]=h.useState([]),[d,m]=h.useState([]),[f,p]=h.useState([]),[v,x]=h.useState([]),[w,S]=h.useState([]);h.useEffect(()=>{fetch("/api/operators").then(C=>C.json()).then(C=>{c(C),C.length&&!r&&i(C[0].id)})},[]),h.useEffect(()=>{if(!r)return;const C=`date=${t}&operator_id=${r}`;fetch(`/api/trip_assignments?${C}`).then(E=>E.json()).then(m),fetch(`/api/employees?operator_id=${r}&role=driver`).then(E=>E.json()).then(E=>{const M=(Array.isArray(E)?E:[]).filter(R=>(R.role||"").toLowerCase()==="driver");p(M)}).catch(()=>p([])),fetch(`/api/routes_order?operator_id=${r}`).then(E=>E.json()).then(E=>{x(E.tur),S(E.retur)})},[t,r]),h.useEffect(()=>{fetch("/api/trips/autogenerate",{method:"POST"})},[]);const b=()=>l.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:s.map(C=>l.jsx("button",{onClick:()=>i(C.id),className:`px-3 py-2 rounded transition-colors ${r===C.id?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:C.name},C.id))}),N=({slot:C})=>{var R;const E=C.disabled,O=E?"line-through text-gray-400 opacity-60 cursor-not-allowed":"",M=I=>{if(E)return;const H=I.target.value||null;fetch("/api/trip_assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({trip_vehicle_id:C.trip_vehicle_id,employee_id:H})}).then(D=>{if(!D.ok)return D.text().then(Y=>Promise.reject(Y||D.statusText))}).then(()=>fetch(`/api/trip_assignments?date=${t}&operator_id=${r}`).then(D=>D.json()).then(m)).catch(D=>{console.error("Eroare la salvare ofer:",D),alert("Nu s-a putut salva oferul: "+D)})};return l.jsxs("div",{className:`flex items-center gap-2 pl-4 py-1 ${O}`,title:E?"Cursa anulat":void 0,children:[l.jsx("span",{className:"w-16",children:(R=C.trip_time)==null?void 0:R.slice(0,5)}),l.jsxs("span",{className:"w-40",children:[C.vehicle_name," (",C.plate_number,")"]}),l.jsxs("select",{disabled:E,value:C.employee_id||"",onChange:M,className:`border px-2 py-1 rounded ${E?"bg-gray-100":""}`,children:[l.jsx("option",{value:"",children:" Alege ofer "}),f.map(I=>l.jsx("option",{value:I.id,children:I.name},I.id))]}),!C.is_primary&&l.jsx("span",{className:"text-xs bg-blue-100 rounded px-1 ml-2",children:"Dublur"})]},C.trip_vehicle_id)},j=v.map(C=>({routeName:C,slots:d.filter(E=>E.route_name===C&&E.direction==="tur")})),_=w.map(C=>({routeName:C,slots:d.filter(E=>E.route_name===C&&E.direction==="retur")}));return l.jsxs("div",{className:"p-4 space-y-6",children:[l.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[l.jsxs("label",{className:"font-medium flex items-center gap-2",children:["Data:",l.jsx("input",{type:"date",value:t,onChange:C=>e(C.target.value),className:"border px-2 py-1 rounded"})]}),l.jsx(b,{})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-lg mb-2",children:"Tur"}),j.map(C=>l.jsxs("div",{className:"mb-4",children:[l.jsx("div",{className:"font-semibold bg-gray-100 px-2 py-1 rounded",children:C.routeName}),C.slots.length===0&&l.jsx("div",{className:"text-xs text-gray-400 italic pl-2",children:"Fr curse"}),C.slots.map(E=>l.jsx(N,{slot:E},E.trip_vehicle_id))]},C.routeName))]}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-lg mb-2",children:"Retur"}),_.map(C=>l.jsxs("div",{className:"mb-4",children:[l.jsx("div",{className:"font-semibold bg-gray-100 px-2 py-1 rounded",children:C.routeName}),C.slots.length===0&&l.jsx("div",{className:"text-xs text-gray-400 italic pl-2",children:"Fr curse"}),C.slots.map(E=>l.jsx(N,{slot:E},E.trip_vehicle_id))]},C.routeName))]})]})]})}function vD({routeId:t}){const[e,r]=h.useState([]),[i,s]=h.useState([]),[c,d]=h.useState("00:00"),[m,f]=h.useState("tur"),[p,v]=h.useState(""),[x,w]=h.useState(!0),[S,b]=h.useState(null),[N,j]=h.useState(""),[_,C]=h.useState("tur"),[E,O]=h.useState(""),[M,R]=h.useState("time"),[I,H]=h.useState("asc"),[D,Y]=h.useState(""),[G,ie]=h.useState(""),Oe=async()=>{w(!0);try{console.log("DEBUG loading schedules for route",t);const[F,V]=await Promise.all([fetch("/api/operators").then(Q=>Q.json()),fetch(`/api/routes/${t}/schedules`).then(Q=>Q.json())]),q=(Array.isArray(F)?F:[]).map(Q=>({id:Number(Q.id??Q.operator_id),name:Q.name}));console.log("DEBUG operators:",F),s(q),r(Array.isArray(V)?V:[]),v(q.length&&q[0].id?String(q[0].id):"")}catch(F){console.error(F),r([]),s([])}finally{w(!1)}};h.useEffect(()=>{Oe()},[t]);const ce=!x&&!!p;console.log("DEBUG canAdd:",{loading:x,hour:c,operatorId:p,canAdd:ce});const te=Al.useMemo(()=>{let F=[...e];if(D){const V=Number(D);F=F.filter(q=>Number(q.operator_id)===V)}if(G){const V=G.toLowerCase();F=F.filter(q=>(q.direction||"").toLowerCase()===V)}return F},[e,D,G]),k=Al.useMemo(()=>{const F=[...te],V=I==="desc"?-1:1;return F.sort((q,Q)=>{if(M==="time"){const[Z,_e]=String(q.departure||"00:00").split(":").map(le=>parseInt(le,10)||0),[ke,Be]=String(Q.departure||"00:00").split(":").map(le=>parseInt(le,10)||0),Se=Z*60+_e,P=ke*60+Be;if(Se!==P)return(Se-P)*V}if(M==="direction"){const Z={tur:0,retur:1},_e=Z[(q.direction||"").toLowerCase()]??9,ke=Z[(Q.direction||"").toLowerCase()]??9;if(_e!==ke)return(_e-ke)*V}if(M==="operator"){const Z=(q.operator_name||"").toLowerCase(),_e=(Q.operator_name||"").toLowerCase();if(Z!==_e)return Z.localeCompare(_e)*V}const[be,Ce]=String(q.departure||"00:00").split(":").map(Z=>parseInt(Z,10)||0),[X,W]=String(Q.departure||"00:00").split(":").map(Z=>parseInt(Z,10)||0),J=be*60+Ce,ue=X*60+W;return J!==ue?(J-ue)*(M==="time"?V:1):q.id-Q.id}),F},[te,M,I]),z=async()=>{if(!p){alert("Alege operatorul");return}if(!c){alert("Completeaz ora");return}try{const F=await fetch(`/api/routes/${t}/schedules`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({departure:c,direction:m,operator_id:Number(p)})});if(!F.ok){let V="Eroare la adugare";try{const q=await F.json();q!=null&&q.error&&(V=q.error)}catch{}alert(V);return}d("00:00"),await Oe()}catch(F){console.error(F),alert("Eroare la adugare")}},U=async F=>{window.confirm("tergi ora?")&&(await fetch(`/api/routes/${t}/schedules/${F}`,{method:"DELETE"}),await Oe())},K=F=>{b(F.id),j(F.departure),C(F.direction||"tur"),O(String(F.operator_id||""))},T=()=>{b(null),j(""),C("tur"),O("")},A=async()=>{if(S){if(!/^\d{2}:\d{2}$/.test(N)){alert("Completeaz ora (HH:MM)");return}try{await fetch(`/api/routes/${t}/schedules/${S}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({departure:N,direction:_,operator_id:E?Number(E):null})}),T(),await Oe()}catch(F){console.error(F),alert("Eroare la salvare")}}};return l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[l.jsxs("label",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"text-gray-600",children:"Filtru operator"}),l.jsxs("select",{className:"border rounded px-2 py-1",value:D,onChange:F=>Y(F.target.value),children:[l.jsx("option",{value:"",children:"Toi"}),i.map(F=>l.jsx("option",{value:F.id,children:F.name},F.id))]})]}),l.jsxs("label",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"text-gray-600",children:"Filtru sens"}),l.jsxs("select",{className:"border rounded px-2 py-1",value:G,onChange:F=>ie(F.target.value),children:[l.jsx("option",{value:"",children:"Ambele"}),l.jsx("option",{value:"tur",children:"Tur"}),l.jsx("option",{value:"retur",children:"Retur"})]})]}),l.jsxs("label",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"text-gray-600",children:"Sorteaz dup"}),l.jsxs("select",{className:"border rounded px-2 py-1",value:M,onChange:F=>R(F.target.value),children:[l.jsx("option",{value:"time",children:"Or"}),l.jsx("option",{value:"direction",children:"Sens"}),l.jsx("option",{value:"operator",children:"Operator"})]})]}),l.jsxs("label",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"text-gray-600",children:"Ordine"}),l.jsxs("select",{className:"border rounded px-2 py-1",value:I,onChange:F=>H(F.target.value),children:[l.jsx("option",{value:"asc",children:"Asc"}),l.jsx("option",{value:"desc",children:"Desc"})]})]}),(D||G)&&l.jsx("button",{className:"px-2 py-1 border rounded",onClick:()=>{Y(""),ie("")},title:"Reseteaz filtrele",children:"Reset"})]}),S===null&&l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsx("input",{type:"time",step:"60",className:"border rounded px-2 py-1",value:c,onChange:F=>d(F.target.value)}),l.jsxs("select",{className:"border rounded px-2 py-1",value:m,onChange:F=>f(F.target.value),children:[l.jsx("option",{value:"tur",children:"Tur"}),l.jsx("option",{value:"retur",children:"Retur"})]}),l.jsxs("select",{className:"border rounded px-2 py-1",value:p,onChange:F=>v(F.target.value),title:"Operator",children:[l.jsx("option",{value:"",children:" alege operator "}),i.map(F=>l.jsx("option",{value:F.id,children:F.name},F.id))]}),l.jsx("button",{className:"px-3 py-1 bg-green-600 text-white rounded disabled:opacity-50",onClick:z,disabled:!ce,title:p?c?"Adaug":"Completeaz ora":"Alege operatorul",children:"Adaug"}),!ce&&l.jsx("span",{className:"text-xs text-gray-500 ml-2",children:c?p?x?"Se ncarc":"":"Lipsete operatorul":"Lipsete ora"})]}),x&&l.jsx("div",{className:"text-sm text-gray-500",children:"Se ncarc orele"}),!x&&e.length===0&&l.jsx("div",{className:"text-sm text-gray-500",children:"Nicio or pentru rut."}),!x&&k.length>0&&l.jsx("ul",{className:"space-y-1",children:k.map(F=>l.jsx("li",{className:"flex items-center justify-between border rounded px-2 py-1 bg-white",children:S===F.id?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsx("input",{type:"time",step:"60",className:"border rounded px-2 py-1",value:N,onChange:V=>j(V.target.value)}),l.jsxs("select",{className:"border rounded px-2 py-1",value:_,onChange:V=>C(V.target.value),children:[l.jsx("option",{value:"tur",children:"Tur"}),l.jsx("option",{value:"retur",children:"Retur"})]}),l.jsxs("select",{className:"border rounded px-2 py-1",value:E,onChange:V=>O(V.target.value),title:"Operator",children:[l.jsx("option",{value:"",children:" alege operator "}),i.map(V=>l.jsx("option",{value:V.id,children:V.name},V.id))]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white rounded text-sm",onClick:A,children:"Salveaz"}),l.jsx("button",{className:"px-3 py-1 border rounded text-sm",onClick:T,children:"Anuleaz"})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-mono",children:F.departure}),l.jsxs("span",{className:"text-gray-500",children:["  ",F.direction]}),F.operator_name?l.jsxs("span",{className:"ml-2 text-xs text-gray-600",children:["(",F.operator_name,")"]}):F.operator_id?l.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(operator #",F.operator_id,")"]}):null]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{className:`text-blue-700 text-sm ${S?"opacity-50 pointer-events-none":""}`,onClick:()=>K(F),disabled:!!S,children:"Editeaz"}),l.jsx("button",{className:`text-red-600 text-sm ${S?"opacity-50 pointer-events-none":""}`,onClick:()=>U(F.id),disabled:!!S,children:"terge"})]})]})},F.id))})]})}function bD(){const[t,e]=h.useState([]),[r,i]=h.useState(null),[s,c]=h.useState(""),[d,m]=h.useState(!0),[f,p]=h.useState(!0),[v,x]=h.useState(!0),[w,S]=h.useState({key:"name",direction:"asc"}),b=async()=>{try{const M=await vt.get("/api/routes");e(M.data)}catch(M){console.error("Eroare la ncrcarea rutelor:",M),alert("Nu s-au putut ncrca rutele")}};h.useEffect(()=>{b()},[]);const N=M=>{let R="asc";w.key===M&&w.direction==="asc"&&(R="desc"),S({key:M,direction:R})},j=h.useMemo(()=>{const M=[...t];return M.sort((R,I)=>{let H=(R[w.key]||"").toLowerCase(),D=(I[w.key]||"").toLowerCase();return H<D?w.direction==="asc"?-1:1:H>D?w.direction==="asc"?1:-1:0}),M},[t,w]),_=async(M,R)=>{try{await vt.patch(`/api/routes/${M}`,R),await b()}catch(I){console.error("Eroare la actualizarea rutei:",I),alert("Nu s-a putut salva modificarea.")}},C=async()=>{const M=s.trim();if(!M){alert("Scrie numele rutei");return}try{await vt.post("/api/routes",{name:M,visible_in_reservations:d,visible_for_drivers:f,visible_online:v}),c(""),m(!0),p(!0),x(!0),await b()}catch(R){console.error("Eroare la adugare rut:",R),alert("Nu s-a putut aduga ruta.")}},E=async(M,R)=>{var I,H;if(window.confirm(`Sigur vrei s tergi ruta "${R}"?`))try{await vt.delete(`/api/routes/${M}`),await b()}catch(D){const Y=((H=(I=D.response)==null?void 0:I.data)==null?void 0:H.error)||"Eroare la tergere.";alert(Y)}},O=M=>{window.open(`/admin/routes/${M}/edit`,"_blank","noopener,noreferrer")};return l.jsxs("div",{className:"overflow-x-auto",children:[l.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Trasee"}),l.jsxs("table",{className:"w-auto text-sm table-auto border-collapse",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsxs("th",{onClick:()=>N("name"),className:"p-1 border text-left cursor-pointer select-none bg-gray-200",children:["Nume",w.key==="name"?w.direction==="asc"?" ":" ":""]}),l.jsx("th",{className:"p-1 border text-center bg-gray-200",children:"Apare n rezervri"}),l.jsx("th",{className:"p-1 border text-center bg-gray-200",children:"Apare la ofer"}),l.jsx("th",{className:"p-1 border text-center bg-gray-200",children:"Apare online"}),l.jsx("th",{className:"p-1 border text-left bg-gray-200",children:"Aciuni"})]})}),l.jsxs("tbody",{children:[l.jsxs("tr",{className:"bg-white",children:[l.jsx("td",{className:"p-1 border",children:l.jsx("input",{className:"w-full border rounded px-2 py-1",placeholder:"Nume rut (ex: Botoani  Iai)",value:s,onChange:M=>c(M.target.value)})}),l.jsx("td",{className:"p-1 border text-center",children:l.jsx("input",{type:"checkbox",checked:d,onChange:M=>m(M.target.checked)})}),l.jsx("td",{className:"p-1 border text-center",children:l.jsx("input",{type:"checkbox",checked:f,onChange:M=>p(M.target.checked)})}),l.jsx("td",{className:"p-1 border text-center",children:l.jsx("input",{type:"checkbox",checked:v,onChange:M=>x(M.target.checked)})}),l.jsx("td",{className:"p-1 border",children:l.jsx("button",{className:"px-3 py-1 bg-green-600 text-white rounded text-sm",onClick:C,children:"Adaug"})})]}),j.map((M,R)=>l.jsxs(Al.Fragment,{children:[l.jsxs("tr",{className:R%2===0?"bg-white":"bg-gray-50",children:[l.jsx("td",{className:"p-1 border",children:M.name}),l.jsx("td",{className:"p-1 border text-center",children:l.jsx("input",{type:"checkbox",checked:!!M.visible_in_reservations,onChange:I=>_(M.id,{visible_in_reservations:I.target.checked})})}),l.jsx("td",{className:"p-1 border text-center",children:l.jsx("input",{type:"checkbox",checked:!!M.visible_for_drivers,onChange:I=>_(M.id,{visible_for_drivers:I.target.checked})})}),l.jsx("td",{className:"p-1 border text-center",children:l.jsx("input",{type:"checkbox",checked:!!M.visible_online,onChange:I=>_(M.id,{visible_online:I.target.checked})})}),l.jsxs("td",{className:"p-1 border",children:[l.jsx("button",{className:"px-2 py-1 text-xs bg-blue-500 text-white rounded",onClick:()=>O(M.id),title:"Deschide n tab nou",children:"Editeaz"}),l.jsx("button",{className:"px-2 py-1 text-xs bg-gray-700 text-white rounded",onClick:()=>i(r===M.id?null:M.id),title:"Gestioneaz ore",children:"Ore"}),l.jsx("button",{className:"px-2 py-1 bg-red-600 text-white rounded text-sm ml-1",onClick:()=>E(M.id,M.name),children:"terge"})]})]}),r===M.id&&l.jsx("tr",{children:l.jsx("td",{className:"p-2 border bg-gray-50",colSpan:5,children:l.jsx(vD,{routeId:M.id})})})]},M.id))]})]})]})}function Il(t){"@babel/helpers - typeof";return Il=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Il(t)}function yD(t,e){if(Il(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var i=r.call(t,e);if(Il(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xD(t){var e=yD(t,"string");return Il(e)=="symbol"?e:e+""}function Le(t,e,r){return(e=xD(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function E1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var em,Ux;function wD(){if(Ux)return em;Ux=1;var t=function(r,i,s,c,d,m,f,p){if(!r){var v;if(i===void 0)v=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var x=[s,c,d,m,f,p],w=0;v=new Error(i.replace(/%s/g,function(){return x[w++]})),v.name="Invariant Violation"}throw v.framesToPop=1,v}};return em=t,em}var SD=wD(),Tn=E1(SD),Ot=h.createContext(null);function jD(){Tn(!!h.useContext,"useGoogleMap is React hook and requires React version 16.8+");var t=h.useContext(Ot);return Tn(!!t,"useGoogleMap needs a GoogleMap available up in the tree"),t}function _D(t,e,r){return Object.keys(t).reduce(function(s,c){return e(s,t[c],c)},r)}function ND(t,e){Object.keys(t).forEach(r=>e(t[r],r))}function CD(t,e,r,i){var s={},c=(d,m)=>{var f=r[m];f!==e[m]&&(s[m]=f,d(i,f))};return ND(t,c),s}function ED(t,e,r){var i=_D(r,function(c,d,m){return typeof t[m]=="function"&&c.push(google.maps.event.addListener(e,d,t[m])),c},[]);return i}function OD(t){google.maps.event.removeListener(t)}function zt(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];t.forEach(OD)}function At(t){var{updaterMap:e,eventMap:r,prevProps:i,nextProps:s,instance:c}=t,d=ED(s,c,r);return CD(e,i,s,c),d}var Vx={onDblClick:"dblclick",onDragEnd:"dragend",onDragStart:"dragstart",onMapTypeIdChanged:"maptypeid_changed",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseDown:"mousedown",onMouseUp:"mouseup",onRightClick:"rightclick",onTilesLoaded:"tilesloaded",onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onDrag:"drag",onHeadingChanged:"heading_changed",onIdle:"idle",onProjectionChanged:"projection_changed",onResize:"resize",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed"},Ix={extraMapTypes(t,e){e.forEach(function(i,s){t.mapTypes.set(String(s),i)})},center(t,e){t.setCenter(e)},clickableIcons(t,e){t.setClickableIcons(e)},heading(t,e){t.setHeading(e)},mapTypeId(t,e){t.setMapTypeId(e)},options(t,e){t.setOptions(e)},streetView(t,e){t.setStreetView(e)},tilt(t,e){t.setTilt(e)},zoom(t,e){t.setZoom(e)}};function MD(t){var{children:e,options:r,id:i,mapContainerStyle:s,mapContainerClassName:c,center:d,onClick:m,onDblClick:f,onDrag:p,onDragEnd:v,onDragStart:x,onMouseMove:w,onMouseOut:S,onMouseOver:b,onMouseDown:N,onMouseUp:j,onRightClick:_,onCenterChanged:C,onLoad:E,onUnmount:O}=t,[M,R]=h.useState(null),I=h.useRef(null),[H,D]=h.useState(null),[Y,G]=h.useState(null),[ie,Oe]=h.useState(null),[ce,te]=h.useState(null),[k,z]=h.useState(null),[U,K]=h.useState(null),[T,A]=h.useState(null),[F,V]=h.useState(null),[q,Q]=h.useState(null),[be,Ce]=h.useState(null),[X,W]=h.useState(null),[J,ue]=h.useState(null);return h.useEffect(()=>{r&&M!==null&&M.setOptions(r)},[M,r]),h.useEffect(()=>{M!==null&&typeof d<"u"&&M.setCenter(d)},[M,d]),h.useEffect(()=>{M&&f&&(Y!==null&&google.maps.event.removeListener(Y),G(google.maps.event.addListener(M,"dblclick",f)))},[f]),h.useEffect(()=>{M&&v&&(ie!==null&&google.maps.event.removeListener(ie),Oe(google.maps.event.addListener(M,"dragend",v)))},[v]),h.useEffect(()=>{M&&x&&(ce!==null&&google.maps.event.removeListener(ce),te(google.maps.event.addListener(M,"dragstart",x)))},[x]),h.useEffect(()=>{M&&N&&(k!==null&&google.maps.event.removeListener(k),z(google.maps.event.addListener(M,"mousedown",N)))},[N]),h.useEffect(()=>{M&&w&&(U!==null&&google.maps.event.removeListener(U),K(google.maps.event.addListener(M,"mousemove",w)))},[w]),h.useEffect(()=>{M&&S&&(T!==null&&google.maps.event.removeListener(T),A(google.maps.event.addListener(M,"mouseout",S)))},[S]),h.useEffect(()=>{M&&b&&(F!==null&&google.maps.event.removeListener(F),V(google.maps.event.addListener(M,"mouseover",b)))},[b]),h.useEffect(()=>{M&&j&&(q!==null&&google.maps.event.removeListener(q),Q(google.maps.event.addListener(M,"mouseup",j)))},[j]),h.useEffect(()=>{M&&_&&(be!==null&&google.maps.event.removeListener(be),Ce(google.maps.event.addListener(M,"rightclick",_)))},[_]),h.useEffect(()=>{M&&m&&(X!==null&&google.maps.event.removeListener(X),W(google.maps.event.addListener(M,"click",m)))},[m]),h.useEffect(()=>{M&&p&&(J!==null&&google.maps.event.removeListener(J),ue(google.maps.event.addListener(M,"drag",p)))},[p]),h.useEffect(()=>{M&&C&&(H!==null&&google.maps.event.removeListener(H),D(google.maps.event.addListener(M,"center_changed",C)))},[m]),h.useEffect(()=>{var Z=I.current===null?null:new google.maps.Map(I.current,r);return R(Z),Z!==null&&E&&E(Z),()=>{Z!==null&&O&&O(Z)}},[]),l.jsx("div",{id:i,ref:I,style:s,className:c,children:l.jsx(Ot.Provider,{value:M,children:M!==null?e:null})})}h.memo(MD);class O1 extends h.PureComponent{constructor(){super(...arguments),Le(this,"state",{map:null}),Le(this,"registeredEvents",[]),Le(this,"mapRef",null),Le(this,"getInstance",()=>this.mapRef===null?null:new google.maps.Map(this.mapRef,this.props.options)),Le(this,"panTo",e=>{var r=this.getInstance();r&&r.panTo(e)}),Le(this,"setMapCallback",()=>{this.state.map!==null&&this.props.onLoad&&this.props.onLoad(this.state.map)}),Le(this,"getRef",e=>{this.mapRef=e})}componentDidMount(){var e=this.getInstance();this.registeredEvents=At({updaterMap:Ix,eventMap:Vx,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{map:e}},this.setMapCallback)}componentDidUpdate(e){this.state.map!==null&&(zt(this.registeredEvents),this.registeredEvents=At({updaterMap:Ix,eventMap:Vx,prevProps:e,nextProps:this.props,instance:this.state.map}))}componentWillUnmount(){this.state.map!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.map),zt(this.registeredEvents))}render(){return l.jsx("div",{id:this.props.id,ref:this.getRef,style:this.props.mapContainerStyle,className:this.props.mapContainerClassName,children:l.jsx(Ot.Provider,{value:this.state.map,children:this.state.map!==null?this.props.children:null})})}}function Bx(t,e,r,i,s,c,d){try{var m=t[c](d),f=m.value}catch(p){return void r(p)}m.done?e(f):Promise.resolve(f).then(i,s)}function M1(t){return function(){var e=this,r=arguments;return new Promise(function(i,s){var c=t.apply(e,r);function d(f){Bx(c,i,s,d,m,"next",f)}function m(f){Bx(c,i,s,d,m,"throw",f)}d(void 0)})}}function L1(t){var{googleMapsApiKey:e,googleMapsClientId:r,version:i="weekly",language:s,region:c,libraries:d,channel:m,mapIds:f,authReferrerPolicy:p,apiUrl:v="https://maps.googleapis.com"}=t,x=[];return Tn(e&&r||!(e&&r),"You need to specify either googleMapsApiKey or googleMapsClientId for @react-google-maps/api load script to work. You cannot use both at the same time."),e?x.push("key=".concat(e)):r&&x.push("client=".concat(r)),i&&x.push("v=".concat(i)),s&&x.push("language=".concat(s)),c&&x.push("region=".concat(c)),d&&d.length&&x.push("libraries=".concat(d.sort().join(","))),m&&x.push("channel=".concat(m)),f&&f.length&&x.push("map_ids=".concat(f.join(","))),p&&x.push("auth_referrer_policy=".concat(p)),x.push("loading=async"),x.push("callback=initMap"),"".concat(v,"/maps/api/js?").concat(x.join("&"))}var Ci=typeof document<"u";function k1(t){var{url:e,id:r,nonce:i}=t;return Ci?new Promise(function(c,d){var m=document.getElementById(r),f=window;if(m){var p=m.getAttribute("data-state");if(m.src===e&&p!=="error"){if(p==="ready")return c(r);var v=f.initMap,x=m.onerror;f.initMap=function(){v&&v(),c(r)},m.onerror=function(S){x&&x(S),d(S)};return}else m.remove()}var w=document.createElement("script");w.type="text/javascript",w.src=e,w.id=r,w.async=!0,w.nonce=i||"",w.onerror=function(b){w.setAttribute("data-state","error"),d(b)},f.initMap=function(){w.setAttribute("data-state","ready"),c(r)},document.head.appendChild(w)}).catch(s=>{throw console.error("injectScript error: ",s),s}):Promise.reject(new Error("document is undefined"))}function Hx(t){var e=t.href;return e&&(e.indexOf("https://fonts.googleapis.com/css?family=Roboto")===0||e.indexOf("https://fonts.googleapis.com/css?family=Google+Sans+Text")===0)?!0:t.tagName.toLowerCase()==="style"&&t.styleSheet&&t.styleSheet.cssText&&t.styleSheet.cssText.replace(`\r
`,"").indexOf(".gm-style")===0?(t.styleSheet.cssText="",!0):t.tagName.toLowerCase()==="style"&&t.innerHTML&&t.innerHTML.replace(`\r
`,"").indexOf(".gm-style")===0?(t.innerHTML="",!0):t.tagName.toLowerCase()==="style"&&!t.styleSheet&&!t.innerHTML}function Mp(){var t=document.getElementsByTagName("head")[0];if(t){var e=t.insertBefore.bind(t);t.insertBefore=function(s,c){return Hx(s)||Reflect.apply(e,t,[s,c]),s};var r=t.appendChild.bind(t);t.appendChild=function(s){return Hx(s)||Reflect.apply(r,t,[s]),s}}}var jl=!1;function T1(){return l.jsx("div",{children:"Loading..."})}var Bl={id:"script-loader",version:"weekly"};class LD extends h.PureComponent{constructor(){super(...arguments),Le(this,"check",null),Le(this,"state",{loaded:!1}),Le(this,"cleanupCallback",()=>{delete window.google.maps,this.injectScript()}),Le(this,"isCleaningUp",M1(function*(){function e(r){if(!jl)r();else if(Ci)var i=window.setInterval(function(){jl||(window.clearInterval(i),r())},1)}return new Promise(e)})),Le(this,"cleanup",()=>{jl=!0;var e=document.getElementById(this.props.id);e&&e.parentNode&&e.parentNode.removeChild(e),Array.prototype.slice.call(document.getElementsByTagName("script")).filter(function(i){return typeof i.src=="string"&&i.src.includes("maps.googleapis")}).forEach(function(i){i.parentNode&&i.parentNode.removeChild(i)}),Array.prototype.slice.call(document.getElementsByTagName("link")).filter(function(i){return i.href==="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Google+Sans"}).forEach(function(i){i.parentNode&&i.parentNode.removeChild(i)}),Array.prototype.slice.call(document.getElementsByTagName("style")).filter(function(i){return i.innerText!==void 0&&i.innerText.length>0&&i.innerText.includes(".gm-")}).forEach(function(i){i.parentNode&&i.parentNode.removeChild(i)})}),Le(this,"injectScript",()=>{this.props.preventGoogleFontsLoading&&Mp(),Tn(!!this.props.id,'LoadScript requires "id" prop to be a string: %s',this.props.id);var e={id:this.props.id,nonce:this.props.nonce,url:L1(this.props)};k1(e).then(()=>{this.props.onLoad&&this.props.onLoad(),this.setState(function(){return{loaded:!0}})}).catch(r=>{this.props.onError&&this.props.onError(r),console.error(`
          There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(this.props.googleMapsApiKey||"-",") or Client ID (").concat(this.props.googleMapsClientId||"-",`) to <LoadScript />
          Otherwise it is a Network issue.
        `))})}),Le(this,"getRef",e=>{this.check=e})}componentDidMount(){if(Ci){if(window.google&&window.google.maps&&!jl){console.error("google api is already presented");return}this.isCleaningUp().then(this.injectScript).catch(function(r){console.error("Error at injecting script after cleaning up: ",r)})}}componentDidUpdate(e){this.props.libraries!==e.libraries&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),Ci&&e.language!==this.props.language&&(this.cleanup(),this.setState(function(){return{loaded:!1}},this.cleanupCallback))}componentWillUnmount(){if(Ci){this.cleanup();var e=()=>{this.check||(delete window.google,jl=!1)};window.setTimeout(e,1),this.props.onUnmount&&this.props.onUnmount()}}render(){return l.jsxs(l.Fragment,{children:[l.jsx("div",{ref:this.getRef}),this.state.loaded?this.props.children:this.props.loadingElement||l.jsx(T1,{})]})}}Le(LD,"defaultProps",Bl);function kD(t,e){if(t==null)return{};var r={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.includes(i))continue;r[i]=t[i]}return r}function Lp(t,e){if(t==null)return{};var r,i,s=kD(t,e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(i=0;i<c.length;i++)r=c[i],e.includes(r)||{}.propertyIsEnumerable.call(t,r)&&(s[r]=t[r])}return s}var Fx;function TD(t){var{id:e=Bl.id,version:r=Bl.version,nonce:i,googleMapsApiKey:s,googleMapsClientId:c,language:d,region:m,libraries:f,preventGoogleFontsLoading:p,channel:v,mapIds:x,authReferrerPolicy:w,apiUrl:S="https://maps.googleapis.com"}=t,b=h.useRef(!1),[N,j]=h.useState(!1),[_,C]=h.useState(void 0);h.useEffect(function(){return b.current=!0,()=>{b.current=!1}},[]),h.useEffect(function(){Ci&&p&&Mp()},[p]),h.useEffect(function(){N&&Tn(!!window.google,"useLoadScript was marked as loaded, but window.google is not present. Something went wrong.")},[N]);var E=L1({version:r,googleMapsApiKey:s,googleMapsClientId:c,language:d,region:m,libraries:f,channel:v,mapIds:x,authReferrerPolicy:w,apiUrl:S});h.useEffect(function(){if(!Ci)return;function R(){b.current&&(j(!0),Fx=E)}if(window.google&&window.google.maps&&Fx===E){R();return}k1({id:e,url:E,nonce:i}).then(R).catch(function(H){b.current&&C(H),console.warn(`
        There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(s||"-",") or Client ID (").concat(c||"-",`)
        Otherwise it is a Network issue.
      `)),console.error(H)})},[e,E,i]);var O=h.useRef(void 0);return h.useEffect(function(){O.current&&f!==O.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),O.current=f},[f]),{isLoaded:N,loadError:_,url:E}}var AD=["loadingElement","onLoad","onError","onUnmount","children"],DD=l.jsx(T1,{});function RD(t){var{loadingElement:e,onLoad:r,onError:i,onUnmount:s,children:c}=t,d=Lp(t,AD),{isLoaded:m,loadError:f}=TD(d);return h.useEffect(function(){m&&typeof r=="function"&&r()},[m,r]),h.useEffect(function(){f&&typeof i=="function"&&i(f)},[f,i]),h.useEffect(function(){return()=>{s&&s()}},[s]),m?c:e||DD}h.memo(RD);function PD(t,e,r,i){function s(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function m(v){try{p(i.next(v))}catch(x){d(x)}}function f(v){try{p(i.throw(v))}catch(x){d(x)}}function p(v){v.done?c(v.value):s(v.value).then(m,f)}p((i=i.apply(t,[])).next())})}function zD(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $D=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var i,s,c;if(Array.isArray(e)){if(i=e.length,i!=r.length)return!1;for(s=i;s--!==0;)if(!t(e[s],r[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(c=Object.keys(e),i=c.length,i!==Object.keys(r).length)return!1;for(s=i;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,c[s]))return!1;for(s=i;s--!==0;){var d=c[s];if(!t(e[d],r[d]))return!1}return!0}return e!==e&&r!==r},UD=zD($D),Yx="__googleMapsScriptId",no;(function(t){t[t.INITIALIZED=0]="INITIALIZED",t[t.LOADING=1]="LOADING",t[t.SUCCESS=2]="SUCCESS",t[t.FAILURE=3]="FAILURE"})(no||(no={}));class ns{constructor(e){var{apiKey:r,authReferrerPolicy:i,channel:s,client:c,id:d=Yx,language:m,libraries:f=[],mapIds:p,nonce:v,region:x,retries:w=3,url:S="https://maps.googleapis.com/maps/api/js",version:b}=e;if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=r,this.authReferrerPolicy=i,this.channel=s,this.client=c,this.id=d||Yx,this.language=m,this.libraries=f,this.mapIds=p,this.nonce=v,this.region=x,this.retries=w,this.url=S,this.version=b,ns.instance){if(!UD(this.options,ns.instance.options))throw new Error("Loader must not be called again with different options. ".concat(JSON.stringify(this.options)," !== ").concat(JSON.stringify(ns.instance.options)));return ns.instance}ns.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?no.FAILURE:this.done?no.SUCCESS:this.loading?no.LOADING:no.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){var e=this.url;return e+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(e+="&key=".concat(this.apiKey)),this.channel&&(e+="&channel=".concat(this.channel)),this.client&&(e+="&client=".concat(this.client)),this.libraries.length>0&&(e+="&libraries=".concat(this.libraries.join(","))),this.language&&(e+="&language=".concat(this.language)),this.region&&(e+="&region=".concat(this.region)),this.version&&(e+="&v=".concat(this.version)),this.mapIds&&(e+="&map_ids=".concat(this.mapIds.join(","))),this.authReferrerPolicy&&(e+="&auth_referrer_policy=".concat(this.authReferrerPolicy)),e}deleteScript(){var e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,r)=>{this.loadCallback(i=>{i?r(i.error):e(window.google)})})}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,r;if(document.getElementById(this.id)){this.callback();return}var i={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(i).forEach(c=>!i[c]&&delete i[c]),!((r=(e=window==null?void 0:window.google)===null||e===void 0?void 0:e.maps)===null||r===void 0)&&r.importLibrary||(c=>{var d,m,f,p="The Google Maps JavaScript API",v="google",x="importLibrary",w="__ib__",S=document,b=window;b=b[v]||(b[v]={});var N=b.maps||(b.maps={}),j=new Set,_=new URLSearchParams,C=()=>d||(d=new Promise((E,O)=>PD(this,void 0,void 0,function*(){var M;yield m=S.createElement("script"),m.id=this.id,_.set("libraries",[...j]+"");for(f in c)_.set(f.replace(/[A-Z]/g,R=>"_"+R[0].toLowerCase()),c[f]);_.set("callback",v+".maps."+w),m.src=this.url+"?"+_,N[w]=E,m.onerror=()=>d=O(Error(p+" could not load.")),m.nonce=this.nonce||((M=S.querySelector("script[nonce]"))===null||M===void 0?void 0:M.nonce)||"",S.head.append(m)})));N[x]?console.warn(p+" only loads once. Ignoring:",c):N[x]=function(E){for(var O=arguments.length,M=new Array(O>1?O-1:0),R=1;R<O;R++)M[R-1]=arguments[R];return j.add(E)&&C().then(()=>N[x](E,...M))}})(i);var s=this.libraries.map(c=>this.importLibrary(c));s.length||s.push(this.importLibrary("core")),Promise.all(s).then(()=>this.callback(),c=>{var d=new ErrorEvent("error",{error:c});this.loadErrorCallback(d)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){var r=this.errors.length*Math.pow(2,this.errors.length);console.error("Failed to load Google Maps script, retrying in ".concat(r," ms.")),setTimeout(()=>{this.deleteScript(),this.setScript()},r)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading=!0,this.setScript()}}}var VD=["maps"];function ID(t){var{id:e=Bl.id,version:r=Bl.version,nonce:i,googleMapsApiKey:s,language:c,region:d,libraries:m=VD,preventGoogleFontsLoading:f,mapIds:p,authReferrerPolicy:v}=t,x=h.useRef(!1),[w,S]=h.useState(!1),[b,N]=h.useState(void 0);h.useEffect(function(){return x.current=!0,()=>{x.current=!1}},[]);var j=h.useMemo(()=>new ns({id:e,apiKey:s,version:r,libraries:m,language:c||"en",region:d||"US",mapIds:p||[],nonce:i||"",authReferrerPolicy:v||"origin"}),[e,s,r,m,c,d,p,i,v]);h.useEffect(function(){w||j.load().then(()=>{x.current&&S(!0)}).catch(E=>{N(E)})},[]),h.useEffect(()=>{Ci&&f&&Mp()},[f]);var _=h.useRef();return h.useEffect(()=>{_.current&&m!==_.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),_.current=m},[m]),{isLoaded:w,loadError:b}}function qx(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,i)}return r}function ed(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qx(Object(r),!0).forEach(function(i){Le(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qx(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}var Gx={},Wx={options(t,e){t.setOptions(e)}};function BD(t){var{options:e,onLoad:r,onUnmount:i}=t,s=h.useContext(Ot),[c,d]=h.useState(null);return h.useEffect(()=>{c!==null&&c.setMap(s)},[s]),h.useEffect(()=>{e&&c!==null&&c.setOptions(e)},[c,e]),h.useEffect(()=>{var m=new google.maps.TrafficLayer(ed(ed({},e),{},{map:s}));return d(m),r&&r(m),()=>{c!==null&&(i&&i(c),c.setMap(null))}},[]),null}h.memo(BD);class HD extends h.PureComponent{constructor(){super(...arguments),Le(this,"state",{trafficLayer:null}),Le(this,"setTrafficLayerCallback",()=>{this.state.trafficLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.trafficLayer)}),Le(this,"registeredEvents",[])}componentDidMount(){var e=new google.maps.TrafficLayer(ed(ed({},this.props.options),{},{map:this.context}));this.registeredEvents=At({updaterMap:Wx,eventMap:Gx,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{trafficLayer:e}},this.setTrafficLayerCallback)}componentDidUpdate(e){this.state.trafficLayer!==null&&(zt(this.registeredEvents),this.registeredEvents=At({updaterMap:Wx,eventMap:Gx,prevProps:e,nextProps:this.props,instance:this.state.trafficLayer}))}componentWillUnmount(){this.state.trafficLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.trafficLayer),zt(this.registeredEvents),this.state.trafficLayer.setMap(null))}render(){return null}}Le(HD,"contextType",Ot);function FD(t){var{onLoad:e,onUnmount:r}=t,i=h.useContext(Ot),[s,c]=h.useState(null);return h.useEffect(()=>{s!==null&&s.setMap(i)},[i]),h.useEffect(()=>{var d=new google.maps.BicyclingLayer;return c(d),d.setMap(i),e&&e(d),()=>{d!==null&&(r&&r(d),d.setMap(null))}},[]),null}h.memo(FD);class YD extends h.PureComponent{constructor(){super(...arguments),Le(this,"state",{bicyclingLayer:null}),Le(this,"setBicyclingLayerCallback",()=>{this.state.bicyclingLayer!==null&&(this.state.bicyclingLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.bicyclingLayer))})}componentDidMount(){var e=new google.maps.BicyclingLayer;this.setState(()=>({bicyclingLayer:e}),this.setBicyclingLayerCallback)}componentWillUnmount(){this.state.bicyclingLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.bicyclingLayer),this.state.bicyclingLayer.setMap(null))}render(){return null}}Le(YD,"contextType",Ot);function qD(t){var{onLoad:e,onUnmount:r}=t,i=h.useContext(Ot),[s,c]=h.useState(null);return h.useEffect(()=>{s!==null&&s.setMap(i)},[i]),h.useEffect(()=>{var d=new google.maps.TransitLayer;return c(d),d.setMap(i),e&&e(d),()=>{s!==null&&(r&&r(s),s.setMap(null))}},[]),null}h.memo(qD);class GD extends h.PureComponent{constructor(){super(...arguments),Le(this,"state",{transitLayer:null}),Le(this,"setTransitLayerCallback",()=>{this.state.transitLayer!==null&&(this.state.transitLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.transitLayer))})}componentDidMount(){var e=new google.maps.TransitLayer;this.setState(function(){return{transitLayer:e}},this.setTransitLayerCallback)}componentWillUnmount(){this.state.transitLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.transitLayer),this.state.transitLayer.setMap(null))}render(){return null}}Le(GD,"contextType",Ot);function Zx(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,i)}return r}function td(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Zx(Object(r),!0).forEach(function(i){Le(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zx(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}var Xx={onCircleComplete:"circlecomplete",onMarkerComplete:"markercomplete",onOverlayComplete:"overlaycomplete",onPolygonComplete:"polygoncomplete",onPolylineComplete:"polylinecomplete",onRectangleComplete:"rectanglecomplete"},Kx={drawingMode(t,e){t.setDrawingMode(e)},options(t,e){t.setOptions(e)}};function WD(t){var{options:e,drawingMode:r,onCircleComplete:i,onMarkerComplete:s,onOverlayComplete:c,onPolygonComplete:d,onPolylineComplete:m,onRectangleComplete:f,onLoad:p,onUnmount:v}=t,x=h.useContext(Ot),[w,S]=h.useState(null),[b,N]=h.useState(null),[j,_]=h.useState(null),[C,E]=h.useState(null),[O,M]=h.useState(null),[R,I]=h.useState(null),[H,D]=h.useState(null);return h.useEffect(()=>{w!==null&&w.setMap(x)},[x]),h.useEffect(()=>{e&&w!==null&&w.setOptions(e)},[w,e]),h.useEffect(()=>{w!==null&&w.setDrawingMode(r??null)},[w,r]),h.useEffect(()=>{w&&i&&(b!==null&&google.maps.event.removeListener(b),N(google.maps.event.addListener(w,"circlecomplete",i)))},[w,i]),h.useEffect(()=>{w&&s&&(j!==null&&google.maps.event.removeListener(j),_(google.maps.event.addListener(w,"markercomplete",s)))},[w,s]),h.useEffect(()=>{w&&c&&(C!==null&&google.maps.event.removeListener(C),E(google.maps.event.addListener(w,"overlaycomplete",c)))},[w,c]),h.useEffect(()=>{w&&d&&(O!==null&&google.maps.event.removeListener(O),M(google.maps.event.addListener(w,"polygoncomplete",d)))},[w,d]),h.useEffect(()=>{w&&m&&(R!==null&&google.maps.event.removeListener(R),I(google.maps.event.addListener(w,"polylinecomplete",m)))},[w,m]),h.useEffect(()=>{w&&f&&(H!==null&&google.maps.event.removeListener(H),D(google.maps.event.addListener(w,"rectanglecomplete",f)))},[w,f]),h.useEffect(()=>{Tn(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing);var Y=new google.maps.drawing.DrawingManager(td(td({},e),{},{map:x}));return r&&Y.setDrawingMode(r),i&&N(google.maps.event.addListener(Y,"circlecomplete",i)),s&&_(google.maps.event.addListener(Y,"markercomplete",s)),c&&E(google.maps.event.addListener(Y,"overlaycomplete",c)),d&&M(google.maps.event.addListener(Y,"polygoncomplete",d)),m&&I(google.maps.event.addListener(Y,"polylinecomplete",m)),f&&D(google.maps.event.addListener(Y,"rectanglecomplete",f)),S(Y),p&&p(Y),()=>{w!==null&&(b&&google.maps.event.removeListener(b),j&&google.maps.event.removeListener(j),C&&google.maps.event.removeListener(C),O&&google.maps.event.removeListener(O),R&&google.maps.event.removeListener(R),H&&google.maps.event.removeListener(H),v&&v(w),w.setMap(null))}},[]),null}h.memo(WD);class ZD extends h.PureComponent{constructor(e){super(e),Le(this,"registeredEvents",[]),Le(this,"state",{drawingManager:null}),Le(this,"setDrawingManagerCallback",()=>{this.state.drawingManager!==null&&this.props.onLoad&&this.props.onLoad(this.state.drawingManager)}),Tn(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing)}componentDidMount(){var e=new google.maps.drawing.DrawingManager(td(td({},this.props.options),{},{map:this.context}));this.registeredEvents=At({updaterMap:Kx,eventMap:Xx,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{drawingManager:e}},this.setDrawingManagerCallback)}componentDidUpdate(e){this.state.drawingManager!==null&&(zt(this.registeredEvents),this.registeredEvents=At({updaterMap:Kx,eventMap:Xx,prevProps:e,nextProps:this.props,instance:this.state.drawingManager}))}componentWillUnmount(){this.state.drawingManager!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.drawingManager),zt(this.registeredEvents),this.state.drawingManager.setMap(null))}render(){return null}}Le(ZD,"contextType",Ot);function Qx(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,i)}return r}function io(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Qx(Object(r),!0).forEach(function(i){Le(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Qx(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}var Jx={onAnimationChanged:"animation_changed",onClick:"click",onClickableChanged:"clickable_changed",onCursorChanged:"cursor_changed",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDraggableChanged:"draggable_changed",onDragStart:"dragstart",onFlatChanged:"flat_changed",onIconChanged:"icon_changed",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onPositionChanged:"position_changed",onRightClick:"rightclick",onShapeChanged:"shape_changed",onTitleChanged:"title_changed",onVisibleChanged:"visible_changed",onZindexChanged:"zindex_changed"},e0={animation(t,e){t.setAnimation(e)},clickable(t,e){t.setClickable(e)},cursor(t,e){t.setCursor(e)},draggable(t,e){t.setDraggable(e)},icon(t,e){t.setIcon(e)},label(t,e){t.setLabel(e)},map(t,e){t.setMap(e)},opacity(t,e){t.setOpacity(e)},options(t,e){t.setOptions(e)},position(t,e){t.setPosition(e)},shape(t,e){t.setShape(e)},title(t,e){t.setTitle(e)},visible(t,e){t.setVisible(e)},zIndex(t,e){t.setZIndex(e)}},nd={};function XD(t){var{position:e,options:r,clusterer:i,noClustererRedraw:s,children:c,draggable:d,visible:m,animation:f,clickable:p,cursor:v,icon:x,label:w,opacity:S,shape:b,title:N,zIndex:j,onClick:_,onDblClick:C,onDrag:E,onDragEnd:O,onDragStart:M,onMouseOut:R,onMouseOver:I,onMouseUp:H,onMouseDown:D,onRightClick:Y,onClickableChanged:G,onCursorChanged:ie,onAnimationChanged:Oe,onDraggableChanged:ce,onFlatChanged:te,onIconChanged:k,onPositionChanged:z,onShapeChanged:U,onTitleChanged:K,onVisibleChanged:T,onZindexChanged:A,onLoad:F,onUnmount:V}=t,q=h.useContext(Ot),[Q,be]=h.useState(null),[Ce,X]=h.useState(null),[W,J]=h.useState(null),[ue,Z]=h.useState(null),[_e,ke]=h.useState(null),[Be,Se]=h.useState(null),[P,le]=h.useState(null),[se,Me]=h.useState(null),[pe,Ue]=h.useState(null),[Ge,Ke]=h.useState(null),[We,et]=h.useState(null),[Te,Ve]=h.useState(null),[qe,ht]=h.useState(null),[wt,ut]=h.useState(null),[St,bt]=h.useState(null),[Nt,cn]=h.useState(null),[Vt,Qn]=h.useState(null),[Jn,Yn]=h.useState(null),[He,er]=h.useState(null),[Ze,ln]=h.useState(null),[An,$t]=h.useState(null),[un,hr]=h.useState(null);h.useEffect(()=>{Q!==null&&Q.setMap(q)},[q]),h.useEffect(()=>{typeof r<"u"&&Q!==null&&Q.setOptions(r)},[Q,r]),h.useEffect(()=>{typeof d<"u"&&Q!==null&&Q.setDraggable(d)},[Q,d]),h.useEffect(()=>{e&&Q!==null&&Q.setPosition(e)},[Q,e]),h.useEffect(()=>{typeof m<"u"&&Q!==null&&Q.setVisible(m)},[Q,m]),h.useEffect(()=>{Q==null||Q.setAnimation(f)},[Q,f]),h.useEffect(()=>{Q&&p!==void 0&&Q.setClickable(p)},[Q,p]),h.useEffect(()=>{Q&&v!==void 0&&Q.setCursor(v)},[Q,v]),h.useEffect(()=>{Q&&x!==void 0&&Q.setIcon(x)},[Q,x]),h.useEffect(()=>{Q&&w!==void 0&&Q.setLabel(w)},[Q,w]),h.useEffect(()=>{Q&&S!==void 0&&Q.setOpacity(S)},[Q,S]),h.useEffect(()=>{Q&&b!==void 0&&Q.setShape(b)},[Q,b]),h.useEffect(()=>{Q&&N!==void 0&&Q.setTitle(N)},[Q,N]),h.useEffect(()=>{Q&&j!==void 0&&Q.setZIndex(j)},[Q,j]),h.useEffect(()=>{Q&&C&&(Ce!==null&&google.maps.event.removeListener(Ce),X(google.maps.event.addListener(Q,"dblclick",C)))},[C]),h.useEffect(()=>{Q&&O&&(W!==null&&google.maps.event.removeListener(W),J(google.maps.event.addListener(Q,"dragend",O)))},[O]),h.useEffect(()=>{Q&&M&&(ue!==null&&google.maps.event.removeListener(ue),Z(google.maps.event.addListener(Q,"dragstart",M)))},[M]),h.useEffect(()=>{Q&&D&&(_e!==null&&google.maps.event.removeListener(_e),ke(google.maps.event.addListener(Q,"mousedown",D)))},[D]),h.useEffect(()=>{Q&&R&&(Be!==null&&google.maps.event.removeListener(Be),Se(google.maps.event.addListener(Q,"mouseout",R)))},[R]),h.useEffect(()=>{Q&&I&&(P!==null&&google.maps.event.removeListener(P),le(google.maps.event.addListener(Q,"mouseover",I)))},[I]),h.useEffect(()=>{Q&&H&&(se!==null&&google.maps.event.removeListener(se),Me(google.maps.event.addListener(Q,"mouseup",H)))},[H]),h.useEffect(()=>{Q&&Y&&(pe!==null&&google.maps.event.removeListener(pe),Ue(google.maps.event.addListener(Q,"rightclick",Y)))},[Y]),h.useEffect(()=>{Q&&_&&(Ge!==null&&google.maps.event.removeListener(Ge),Ke(google.maps.event.addListener(Q,"click",_)))},[_]),h.useEffect(()=>{Q&&E&&(We!==null&&google.maps.event.removeListener(We),et(google.maps.event.addListener(Q,"drag",E)))},[E]),h.useEffect(()=>{Q&&G&&(Te!==null&&google.maps.event.removeListener(Te),Ve(google.maps.event.addListener(Q,"clickable_changed",G)))},[G]),h.useEffect(()=>{Q&&ie&&(qe!==null&&google.maps.event.removeListener(qe),ht(google.maps.event.addListener(Q,"cursor_changed",ie)))},[ie]),h.useEffect(()=>{Q&&Oe&&(wt!==null&&google.maps.event.removeListener(wt),ut(google.maps.event.addListener(Q,"animation_changed",Oe)))},[Oe]),h.useEffect(()=>{Q&&ce&&(St!==null&&google.maps.event.removeListener(St),bt(google.maps.event.addListener(Q,"draggable_changed",ce)))},[ce]),h.useEffect(()=>{Q&&te&&(Nt!==null&&google.maps.event.removeListener(Nt),cn(google.maps.event.addListener(Q,"flat_changed",te)))},[te]),h.useEffect(()=>{Q&&k&&(Vt!==null&&google.maps.event.removeListener(Vt),Qn(google.maps.event.addListener(Q,"icon_changed",k)))},[k]),h.useEffect(()=>{Q&&z&&(Jn!==null&&google.maps.event.removeListener(Jn),Yn(google.maps.event.addListener(Q,"position_changed",z)))},[z]),h.useEffect(()=>{Q&&U&&(He!==null&&google.maps.event.removeListener(He),er(google.maps.event.addListener(Q,"shape_changed",U)))},[U]),h.useEffect(()=>{Q&&K&&(Ze!==null&&google.maps.event.removeListener(Ze),ln(google.maps.event.addListener(Q,"title_changed",K)))},[K]),h.useEffect(()=>{Q&&T&&(An!==null&&google.maps.event.removeListener(An),$t(google.maps.event.addListener(Q,"visible_changed",T)))},[T]),h.useEffect(()=>{Q&&A&&(un!==null&&google.maps.event.removeListener(un),hr(google.maps.event.addListener(Q,"zindex_changed",A)))},[A]),h.useEffect(()=>{var xe=io(io(io({},r||nd),i?nd:{map:q}),{},{position:e}),ge=new google.maps.Marker(xe);return i?i.addMarker(ge,!!s):ge.setMap(q),e&&ge.setPosition(e),typeof m<"u"&&ge.setVisible(m),typeof d<"u"&&ge.setDraggable(d),typeof p<"u"&&ge.setClickable(p),typeof v=="string"&&ge.setCursor(v),x&&ge.setIcon(x),typeof w<"u"&&ge.setLabel(w),typeof S<"u"&&ge.setOpacity(S),b&&ge.setShape(b),typeof N=="string"&&ge.setTitle(N),typeof j=="number"&&ge.setZIndex(j),C&&X(google.maps.event.addListener(ge,"dblclick",C)),O&&J(google.maps.event.addListener(ge,"dragend",O)),M&&Z(google.maps.event.addListener(ge,"dragstart",M)),D&&ke(google.maps.event.addListener(ge,"mousedown",D)),R&&Se(google.maps.event.addListener(ge,"mouseout",R)),I&&le(google.maps.event.addListener(ge,"mouseover",I)),H&&Me(google.maps.event.addListener(ge,"mouseup",H)),Y&&Ue(google.maps.event.addListener(ge,"rightclick",Y)),_&&Ke(google.maps.event.addListener(ge,"click",_)),E&&et(google.maps.event.addListener(ge,"drag",E)),G&&Ve(google.maps.event.addListener(ge,"clickable_changed",G)),ie&&ht(google.maps.event.addListener(ge,"cursor_changed",ie)),Oe&&ut(google.maps.event.addListener(ge,"animation_changed",Oe)),ce&&bt(google.maps.event.addListener(ge,"draggable_changed",ce)),te&&cn(google.maps.event.addListener(ge,"flat_changed",te)),k&&Qn(google.maps.event.addListener(ge,"icon_changed",k)),z&&Yn(google.maps.event.addListener(ge,"position_changed",z)),U&&er(google.maps.event.addListener(ge,"shape_changed",U)),K&&ln(google.maps.event.addListener(ge,"title_changed",K)),T&&$t(google.maps.event.addListener(ge,"visible_changed",T)),A&&hr(google.maps.event.addListener(ge,"zindex_changed",A)),be(ge),F&&F(ge),()=>{Ce!==null&&google.maps.event.removeListener(Ce),W!==null&&google.maps.event.removeListener(W),ue!==null&&google.maps.event.removeListener(ue),_e!==null&&google.maps.event.removeListener(_e),Be!==null&&google.maps.event.removeListener(Be),P!==null&&google.maps.event.removeListener(P),se!==null&&google.maps.event.removeListener(se),pe!==null&&google.maps.event.removeListener(pe),Ge!==null&&google.maps.event.removeListener(Ge),Te!==null&&google.maps.event.removeListener(Te),qe!==null&&google.maps.event.removeListener(qe),wt!==null&&google.maps.event.removeListener(wt),St!==null&&google.maps.event.removeListener(St),Nt!==null&&google.maps.event.removeListener(Nt),Vt!==null&&google.maps.event.removeListener(Vt),Jn!==null&&google.maps.event.removeListener(Jn),Ze!==null&&google.maps.event.removeListener(Ze),An!==null&&google.maps.event.removeListener(An),un!==null&&google.maps.event.removeListener(un),V&&V(ge),i?i.removeMarker(ge,!!s):ge&&ge.setMap(null)}},[]);var mr=h.useMemo(()=>c?h.Children.map(c,xe=>{if(!h.isValidElement(xe))return xe;var ge=xe;return h.cloneElement(ge,{anchor:Q})}):null,[c,Q]);return l.jsx(l.Fragment,{children:mr})||null}h.memo(XD);class KD extends h.PureComponent{constructor(){super(...arguments),Le(this,"registeredEvents",[])}componentDidMount(){var e=this;return M1(function*(){var r=io(io(io({},e.props.options||nd),e.props.clusterer?nd:{map:e.context}),{},{position:e.props.position});e.marker=new google.maps.Marker(r),e.props.clusterer?e.props.clusterer.addMarker(e.marker,!!e.props.noClustererRedraw):e.marker.setMap(e.context),e.registeredEvents=At({updaterMap:e0,eventMap:Jx,prevProps:{},nextProps:e.props,instance:e.marker}),e.props.onLoad&&e.props.onLoad(e.marker)})()}componentDidUpdate(e){this.marker&&(zt(this.registeredEvents),this.registeredEvents=At({updaterMap:e0,eventMap:Jx,prevProps:e,nextProps:this.props,instance:this.marker}))}componentWillUnmount(){this.marker&&(this.props.onUnmount&&this.props.onUnmount(this.marker),zt(this.registeredEvents),this.props.clusterer?this.props.clusterer.removeMarker(this.marker,!!this.props.noClustererRedraw):this.marker&&this.marker.setMap(null))}render(){var e=this.props.children?h.Children.map(this.props.children,r=>{if(!h.isValidElement(r))return r;var i=r;return h.cloneElement(i,{anchor:this.marker})}):null;return e||null}}Le(KD,"contextType",Ot);var QD=function(){function t(e,r){e.getClusterer().extend(t,google.maps.OverlayView),this.cluster=e,this.clusterClassName=this.cluster.getClusterer().getClusterClass(),this.className=this.clusterClassName,this.styles=r,this.center=void 0,this.div=null,this.sums=null,this.visible=!1,this.boundsChangedListener=null,this.url="",this.height=0,this.width=0,this.anchorText=[0,0],this.anchorIcon=[0,0],this.textColor="black",this.textSize=11,this.textDecoration="none",this.fontWeight="bold",this.fontStyle="normal",this.fontFamily="Arial,sans-serif",this.backgroundPosition="0 0",this.cMouseDownInCluster=null,this.cDraggingMapByCluster=null,this.timeOut=null,this.setMap(e.getMap()),this.onBoundsChanged=this.onBoundsChanged.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onClick=this.onClick.bind(this),this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onAdd=this.onAdd.bind(this),this.onRemove=this.onRemove.bind(this),this.draw=this.draw.bind(this),this.hide=this.hide.bind(this),this.show=this.show.bind(this),this.useStyle=this.useStyle.bind(this),this.setCenter=this.setCenter.bind(this),this.getPosFromLatLng=this.getPosFromLatLng.bind(this)}return t.prototype.onBoundsChanged=function(){this.cDraggingMapByCluster=this.cMouseDownInCluster},t.prototype.onMouseDown=function(){this.cMouseDownInCluster=!0,this.cDraggingMapByCluster=!1},t.prototype.onClick=function(e){if(this.cMouseDownInCluster=!1,!this.cDraggingMapByCluster){var r=this.cluster.getClusterer();if(google.maps.event.trigger(r,"click",this.cluster),google.maps.event.trigger(r,"clusterclick",this.cluster),r.getZoomOnClick()){var i=r.getMaxZoom(),s=this.cluster.getBounds(),c=r.getMap();c!==null&&"fitBounds"in c&&c.fitBounds(s),this.timeOut=window.setTimeout(function(){var d=r.getMap();if(d!==null){"fitBounds"in d&&d.fitBounds(s);var m=d.getZoom()||0;i!==null&&m>i&&d.setZoom(i+1)}},100)}e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}},t.prototype.onMouseOver=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseover",this.cluster)},t.prototype.onMouseOut=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseout",this.cluster)},t.prototype.onAdd=function(){var e;this.div=document.createElement("div"),this.div.className=this.className,this.visible&&this.show(),(e=this.getPanes())===null||e===void 0||e.overlayMouseTarget.appendChild(this.div);var r=this.getMap();r!==null&&(this.boundsChangedListener=google.maps.event.addListener(r,"bounds_changed",this.onBoundsChanged),this.div.addEventListener("mousedown",this.onMouseDown),this.div.addEventListener("click",this.onClick),this.div.addEventListener("mouseover",this.onMouseOver),this.div.addEventListener("mouseout",this.onMouseOut))},t.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.hide(),this.boundsChangedListener!==null&&google.maps.event.removeListener(this.boundsChangedListener),this.div.removeEventListener("mousedown",this.onMouseDown),this.div.removeEventListener("click",this.onClick),this.div.removeEventListener("mouseover",this.onMouseOver),this.div.removeEventListener("mouseout",this.onMouseOut),this.div.parentNode.removeChild(this.div),this.timeOut!==null&&(window.clearTimeout(this.timeOut),this.timeOut=null),this.div=null)},t.prototype.draw=function(){if(this.visible&&this.div!==null&&this.center){var e=this.getPosFromLatLng(this.center);this.div.style.top=e!==null?"".concat(e.y,"px"):"0",this.div.style.left=e!==null?"".concat(e.x,"px"):"0"}},t.prototype.hide=function(){this.div&&(this.div.style.display="none"),this.visible=!1},t.prototype.show=function(){var e,r,i,s,c,d;if(this.div&&this.center){var m=this.sums===null||typeof this.sums.title>"u"||this.sums.title===""?this.cluster.getClusterer().getTitle():this.sums.title,f=this.backgroundPosition.split(" "),p=parseInt(((e=f[0])===null||e===void 0?void 0:e.replace(/^\s+|\s+$/g,""))||"0",10),v=parseInt(((r=f[1])===null||r===void 0?void 0:r.replace(/^\s+|\s+$/g,""))||"0",10),x=this.getPosFromLatLng(this.center);this.div.className=this.className,this.div.setAttribute("style","cursor: pointer; position: absolute; top: ".concat(x!==null?"".concat(x.y,"px"):"0","; left: ").concat(x!==null?"".concat(x.x,"px"):"0","; width: ").concat(this.width,"px; height: ").concat(this.height,"px; "));var w=document.createElement("img");w.alt=m,w.src=this.url,w.width=this.width,w.height=this.height,w.setAttribute("style","position: absolute; top: ".concat(v,"px; left: ").concat(p,"px")),this.cluster.getClusterer().enableRetinaIcons||(w.style.clip="rect(-".concat(v,"px, -").concat(p+this.width,"px, -").concat(v+this.height,", -").concat(p,")"));var S=document.createElement("div");S.setAttribute("style","position: absolute; top: ".concat(this.anchorText[0],"px; left: ").concat(this.anchorText[1],"px; color: ").concat(this.textColor,"; font-size: ").concat(this.textSize,"px; font-family: ").concat(this.fontFamily,"; font-weight: ").concat(this.fontWeight,"; fontStyle: ").concat(this.fontStyle,"; text-decoration: ").concat(this.textDecoration,"; text-align: center; width: ").concat(this.width,"px; line-height: ").concat(this.height,"px")),!((i=this.sums)===null||i===void 0)&&i.text&&(S.innerText="".concat((s=this.sums)===null||s===void 0?void 0:s.text)),!((c=this.sums)===null||c===void 0)&&c.html&&(S.innerHTML="".concat((d=this.sums)===null||d===void 0?void 0:d.html)),this.div.innerHTML="",this.div.appendChild(w),this.div.appendChild(S),this.div.title=m,this.div.style.display=""}this.visible=!0},t.prototype.useStyle=function(e){this.sums=e;var r=this.cluster.getClusterer().getStyles(),i=r[Math.min(r.length-1,Math.max(0,e.index-1))];i&&(this.url=i.url,this.height=i.height,this.width=i.width,i.className&&(this.className="".concat(this.clusterClassName," ").concat(i.className)),this.anchorText=i.anchorText||[0,0],this.anchorIcon=i.anchorIcon||[this.height/2,this.width/2],this.textColor=i.textColor||"black",this.textSize=i.textSize||11,this.textDecoration=i.textDecoration||"none",this.fontWeight=i.fontWeight||"bold",this.fontStyle=i.fontStyle||"normal",this.fontFamily=i.fontFamily||"Arial,sans-serif",this.backgroundPosition=i.backgroundPosition||"0 0")},t.prototype.setCenter=function(e){this.center=e},t.prototype.getPosFromLatLng=function(e){var r=this.getProjection().fromLatLngToDivPixel(e);return r!==null&&(r.x-=this.anchorIcon[1],r.y-=this.anchorIcon[0]),r},t}(),JD=function(){function t(e){this.markerClusterer=e,this.map=this.markerClusterer.getMap(),this.gridSize=this.markerClusterer.getGridSize(),this.minClusterSize=this.markerClusterer.getMinimumClusterSize(),this.averageCenter=this.markerClusterer.getAverageCenter(),this.markers=[],this.center=void 0,this.bounds=null,this.clusterIcon=new QD(this,this.markerClusterer.getStyles()),this.getSize=this.getSize.bind(this),this.getMarkers=this.getMarkers.bind(this),this.getCenter=this.getCenter.bind(this),this.getMap=this.getMap.bind(this),this.getClusterer=this.getClusterer.bind(this),this.getBounds=this.getBounds.bind(this),this.remove=this.remove.bind(this),this.addMarker=this.addMarker.bind(this),this.isMarkerInClusterBounds=this.isMarkerInClusterBounds.bind(this),this.calculateBounds=this.calculateBounds.bind(this),this.updateIcon=this.updateIcon.bind(this),this.isMarkerAlreadyAdded=this.isMarkerAlreadyAdded.bind(this)}return t.prototype.getSize=function(){return this.markers.length},t.prototype.getMarkers=function(){return this.markers},t.prototype.getCenter=function(){return this.center},t.prototype.getMap=function(){return this.map},t.prototype.getClusterer=function(){return this.markerClusterer},t.prototype.getBounds=function(){for(var e=new google.maps.LatLngBounds(this.center,this.center),r=this.getMarkers(),i=0,s=r;i<s.length;i++){var c=s[i],d=c.getPosition();d&&e.extend(d)}return e},t.prototype.remove=function(){this.clusterIcon.setMap(null),this.markers=[],delete this.markers},t.prototype.addMarker=function(e){var r;if(this.isMarkerAlreadyAdded(e))return!1;if(this.center){if(this.averageCenter){var i=e.getPosition();if(i){var s=this.markers.length+1;this.center=new google.maps.LatLng((this.center.lat()*(s-1)+i.lat())/s,(this.center.lng()*(s-1)+i.lng())/s),this.calculateBounds()}}}else{var i=e.getPosition();i&&(this.center=i,this.calculateBounds())}e.isAdded=!0,this.markers.push(e);var c=this.markers.length,d=this.markerClusterer.getMaxZoom(),m=(r=this.map)===null||r===void 0?void 0:r.getZoom();if(d!==null&&typeof m<"u"&&m>d)e.getMap()!==this.map&&e.setMap(this.map);else if(c<this.minClusterSize)e.getMap()!==this.map&&e.setMap(this.map);else if(c===this.minClusterSize)for(var f=0,p=this.markers;f<p.length;f++){var v=p[f];v.setMap(null)}else e.setMap(null);return!0},t.prototype.isMarkerInClusterBounds=function(e){if(this.bounds!==null){var r=e.getPosition();if(r)return this.bounds.contains(r)}return!1},t.prototype.calculateBounds=function(){this.bounds=this.markerClusterer.getExtendedBounds(new google.maps.LatLngBounds(this.center,this.center))},t.prototype.updateIcon=function(){var e,r=this.markers.length,i=this.markerClusterer.getMaxZoom(),s=(e=this.map)===null||e===void 0?void 0:e.getZoom();if(i!==null&&typeof s<"u"&&s>i){this.clusterIcon.hide();return}if(r<this.minClusterSize){this.clusterIcon.hide();return}this.center&&this.clusterIcon.setCenter(this.center),this.clusterIcon.useStyle(this.markerClusterer.getCalculator()(this.markers,this.markerClusterer.getStyles().length)),this.clusterIcon.show()},t.prototype.isMarkerAlreadyAdded=function(e){if(this.markers.includes)return this.markers.includes(e);for(var r=0;r<this.markers.length;r++)if(e===this.markers[r])return!0;return!1},t}();function eR(t,e){var r=t.length,i=r.toString().length,s=Math.min(i,e);return{text:r.toString(),index:s,title:""}}var tR=2e3,nR=500,rR="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",aR="png",iR=[53,56,66,78,90],sR="cluster",A1=function(){function t(e,r,i){r===void 0&&(r=[]),i===void 0&&(i={}),this.getMinimumClusterSize=this.getMinimumClusterSize.bind(this),this.setMinimumClusterSize=this.setMinimumClusterSize.bind(this),this.getEnableRetinaIcons=this.getEnableRetinaIcons.bind(this),this.setEnableRetinaIcons=this.setEnableRetinaIcons.bind(this),this.addToClosestCluster=this.addToClosestCluster.bind(this),this.getImageExtension=this.getImageExtension.bind(this),this.setImageExtension=this.setImageExtension.bind(this),this.getExtendedBounds=this.getExtendedBounds.bind(this),this.getAverageCenter=this.getAverageCenter.bind(this),this.setAverageCenter=this.setAverageCenter.bind(this),this.getTotalClusters=this.getTotalClusters.bind(this),this.fitMapToMarkers=this.fitMapToMarkers.bind(this),this.getIgnoreHidden=this.getIgnoreHidden.bind(this),this.setIgnoreHidden=this.setIgnoreHidden.bind(this),this.getClusterClass=this.getClusterClass.bind(this),this.setClusterClass=this.setClusterClass.bind(this),this.getTotalMarkers=this.getTotalMarkers.bind(this),this.getZoomOnClick=this.getZoomOnClick.bind(this),this.setZoomOnClick=this.setZoomOnClick.bind(this),this.getBatchSizeIE=this.getBatchSizeIE.bind(this),this.setBatchSizeIE=this.setBatchSizeIE.bind(this),this.createClusters=this.createClusters.bind(this),this.onZoomChanged=this.onZoomChanged.bind(this),this.getImageSizes=this.getImageSizes.bind(this),this.setImageSizes=this.setImageSizes.bind(this),this.getCalculator=this.getCalculator.bind(this),this.setCalculator=this.setCalculator.bind(this),this.removeMarkers=this.removeMarkers.bind(this),this.resetViewport=this.resetViewport.bind(this),this.getImagePath=this.getImagePath.bind(this),this.setImagePath=this.setImagePath.bind(this),this.pushMarkerTo=this.pushMarkerTo.bind(this),this.removeMarker=this.removeMarker.bind(this),this.clearMarkers=this.clearMarkers.bind(this),this.setupStyles=this.setupStyles.bind(this),this.getGridSize=this.getGridSize.bind(this),this.setGridSize=this.setGridSize.bind(this),this.getClusters=this.getClusters.bind(this),this.getMaxZoom=this.getMaxZoom.bind(this),this.setMaxZoom=this.setMaxZoom.bind(this),this.getMarkers=this.getMarkers.bind(this),this.addMarkers=this.addMarkers.bind(this),this.getStyles=this.getStyles.bind(this),this.setStyles=this.setStyles.bind(this),this.addMarker=this.addMarker.bind(this),this.onRemove=this.onRemove.bind(this),this.getTitle=this.getTitle.bind(this),this.setTitle=this.setTitle.bind(this),this.repaint=this.repaint.bind(this),this.onIdle=this.onIdle.bind(this),this.redraw=this.redraw.bind(this),this.onAdd=this.onAdd.bind(this),this.draw=this.draw.bind(this),this.extend=this.extend.bind(this),this.extend(t,google.maps.OverlayView),this.markers=[],this.clusters=[],this.listeners=[],this.activeMap=null,this.ready=!1,this.gridSize=i.gridSize||60,this.minClusterSize=i.minimumClusterSize||2,this.maxZoom=i.maxZoom||null,this.styles=i.styles||[],this.title=i.title||"",this.zoomOnClick=!0,i.zoomOnClick!==void 0&&(this.zoomOnClick=i.zoomOnClick),this.averageCenter=!1,i.averageCenter!==void 0&&(this.averageCenter=i.averageCenter),this.ignoreHidden=!1,i.ignoreHidden!==void 0&&(this.ignoreHidden=i.ignoreHidden),this.enableRetinaIcons=!1,i.enableRetinaIcons!==void 0&&(this.enableRetinaIcons=i.enableRetinaIcons),this.imagePath=i.imagePath||rR,this.imageExtension=i.imageExtension||aR,this.imageSizes=i.imageSizes||iR,this.calculator=i.calculator||eR,this.batchSize=i.batchSize||tR,this.batchSizeIE=i.batchSizeIE||nR,this.clusterClass=i.clusterClass||sR,navigator.userAgent.toLowerCase().indexOf("msie")!==-1&&(this.batchSize=this.batchSizeIE),this.timerRefStatic=null,this.setupStyles(),this.addMarkers(r,!0),this.setMap(e)}return t.prototype.onZoomChanged=function(){var e,r;this.resetViewport(!1),(((e=this.getMap())===null||e===void 0?void 0:e.getZoom())===(this.get("minZoom")||0)||((r=this.getMap())===null||r===void 0?void 0:r.getZoom())===this.get("maxZoom"))&&google.maps.event.trigger(this,"idle")},t.prototype.onIdle=function(){this.redraw()},t.prototype.onAdd=function(){var e=this.getMap();this.activeMap=e,this.ready=!0,this.repaint(),e!==null&&(this.listeners=[google.maps.event.addListener(e,"zoom_changed",this.onZoomChanged),google.maps.event.addListener(e,"idle",this.onIdle)])},t.prototype.onRemove=function(){for(var e=0,r=this.markers;e<r.length;e++){var i=r[e];i.getMap()!==this.activeMap&&i.setMap(this.activeMap)}for(var s=0,c=this.clusters;s<c.length;s++){var d=c[s];d.remove()}this.clusters=[];for(var m=0,f=this.listeners;m<f.length;m++){var p=f[m];google.maps.event.removeListener(p)}this.listeners=[],this.activeMap=null,this.ready=!1},t.prototype.draw=function(){},t.prototype.getMap=function(){return null},t.prototype.getPanes=function(){return null},t.prototype.getProjection=function(){return{fromContainerPixelToLatLng:function(){return null},fromDivPixelToLatLng:function(){return null},fromLatLngToContainerPixel:function(){return null},fromLatLngToDivPixel:function(){return null},getVisibleRegion:function(){return null},getWorldWidth:function(){return 0}}},t.prototype.setMap=function(){},t.prototype.addListener=function(){return{remove:function(){}}},t.prototype.bindTo=function(){},t.prototype.get=function(){},t.prototype.notify=function(){},t.prototype.set=function(){},t.prototype.setValues=function(){},t.prototype.unbind=function(){},t.prototype.unbindAll=function(){},t.prototype.setupStyles=function(){if(!(this.styles.length>0))for(var e=0;e<this.imageSizes.length;e++)this.styles.push({url:"".concat(this.imagePath+(e+1),".").concat(this.imageExtension),height:this.imageSizes[e]||0,width:this.imageSizes[e]||0})},t.prototype.fitMapToMarkers=function(){for(var e=this.getMarkers(),r=new google.maps.LatLngBounds,i=0,s=e;i<s.length;i++){var c=s[i],d=c.getPosition();d&&r.extend(d)}var m=this.getMap();m!==null&&"fitBounds"in m&&m.fitBounds(r)},t.prototype.getGridSize=function(){return this.gridSize},t.prototype.setGridSize=function(e){this.gridSize=e},t.prototype.getMinimumClusterSize=function(){return this.minClusterSize},t.prototype.setMinimumClusterSize=function(e){this.minClusterSize=e},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.setMaxZoom=function(e){this.maxZoom=e},t.prototype.getStyles=function(){return this.styles},t.prototype.setStyles=function(e){this.styles=e},t.prototype.getTitle=function(){return this.title},t.prototype.setTitle=function(e){this.title=e},t.prototype.getZoomOnClick=function(){return this.zoomOnClick},t.prototype.setZoomOnClick=function(e){this.zoomOnClick=e},t.prototype.getAverageCenter=function(){return this.averageCenter},t.prototype.setAverageCenter=function(e){this.averageCenter=e},t.prototype.getIgnoreHidden=function(){return this.ignoreHidden},t.prototype.setIgnoreHidden=function(e){this.ignoreHidden=e},t.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons},t.prototype.setEnableRetinaIcons=function(e){this.enableRetinaIcons=e},t.prototype.getImageExtension=function(){return this.imageExtension},t.prototype.setImageExtension=function(e){this.imageExtension=e},t.prototype.getImagePath=function(){return this.imagePath},t.prototype.setImagePath=function(e){this.imagePath=e},t.prototype.getImageSizes=function(){return this.imageSizes},t.prototype.setImageSizes=function(e){this.imageSizes=e},t.prototype.getCalculator=function(){return this.calculator},t.prototype.setCalculator=function(e){this.calculator=e},t.prototype.getBatchSizeIE=function(){return this.batchSizeIE},t.prototype.setBatchSizeIE=function(e){this.batchSizeIE=e},t.prototype.getClusterClass=function(){return this.clusterClass},t.prototype.setClusterClass=function(e){this.clusterClass=e},t.prototype.getMarkers=function(){return this.markers},t.prototype.getTotalMarkers=function(){return this.markers.length},t.prototype.getClusters=function(){return this.clusters},t.prototype.getTotalClusters=function(){return this.clusters.length},t.prototype.addMarker=function(e,r){this.pushMarkerTo(e),r||this.redraw()},t.prototype.addMarkers=function(e,r){for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var s=e[i];s&&this.pushMarkerTo(s)}r||this.redraw()},t.prototype.pushMarkerTo=function(e){var r=this;e.getDraggable()&&google.maps.event.addListener(e,"dragend",function(){r.ready&&(e.isAdded=!1,r.repaint())}),e.isAdded=!1,this.markers.push(e)},t.prototype.removeMarker_=function(e){var r=-1;if(this.markers.indexOf)r=this.markers.indexOf(e);else for(var i=0;i<this.markers.length;i++)if(e===this.markers[i]){r=i;break}return r===-1?!1:(e.setMap(null),this.markers.splice(r,1),!0)},t.prototype.removeMarker=function(e,r){var i=this.removeMarker_(e);return!r&&i&&this.repaint(),i},t.prototype.removeMarkers=function(e,r){for(var i=!1,s=0,c=e;s<c.length;s++){var d=c[s];i=i||this.removeMarker_(d)}return!r&&i&&this.repaint(),i},t.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers=[]},t.prototype.repaint=function(){var e=this.clusters.slice();this.clusters=[],this.resetViewport(!1),this.redraw(),setTimeout(function(){for(var i=0,s=e;i<s.length;i++){var c=s[i];c.remove()}},0)},t.prototype.getExtendedBounds=function(e){var r=this.getProjection(),i=r.fromLatLngToDivPixel(new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()));i!==null&&(i.x+=this.gridSize,i.y-=this.gridSize);var s=r.fromLatLngToDivPixel(new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()));if(s!==null&&(s.x-=this.gridSize,s.y+=this.gridSize),i!==null){var c=r.fromDivPixelToLatLng(i);c!==null&&e.extend(c)}if(s!==null){var d=r.fromDivPixelToLatLng(s);d!==null&&e.extend(d)}return e},t.prototype.redraw=function(){this.createClusters(0)},t.prototype.resetViewport=function(e){for(var r=0,i=this.clusters;r<i.length;r++){var s=i[r];s.remove()}this.clusters=[];for(var c=0,d=this.markers;c<d.length;c++){var m=d[c];m.isAdded=!1,e&&m.setMap(null)}},t.prototype.distanceBetweenPoints=function(e,r){var i=6371,s=(r.lat()-e.lat())*Math.PI/180,c=(r.lng()-e.lng())*Math.PI/180,d=Math.sin(s/2)*Math.sin(s/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(r.lat()*Math.PI/180)*Math.sin(c/2)*Math.sin(c/2);return i*(2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)))},t.prototype.isMarkerInBounds=function(e,r){var i=e.getPosition();return i?r.contains(i):!1},t.prototype.addToClosestCluster=function(e){for(var r,i=4e4,s=null,c=0,d=this.clusters;c<d.length;c++){var m=d[c];r=m;var f=r.getCenter(),p=e.getPosition();if(f&&p){var v=this.distanceBetweenPoints(f,p);v<i&&(i=v,s=r)}}s&&s.isMarkerInClusterBounds(e)?s.addMarker(e):(r=new JD(this),r.addMarker(e),this.clusters.push(r))},t.prototype.createClusters=function(e){var r=this;if(this.ready){e===0&&(google.maps.event.trigger(this,"clusteringbegin",this),this.timerRefStatic!==null&&(window.clearTimeout(this.timerRefStatic),delete this.timerRefStatic));for(var i=this.getMap(),s=i!==null&&("getBounds"in i)?i.getBounds():null,c=(i==null?void 0:i.getZoom())||0,d=c>3?new google.maps.LatLngBounds(s==null?void 0:s.getSouthWest(),s==null?void 0:s.getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625)),m=this.getExtendedBounds(d),f=Math.min(e+this.batchSize,this.markers.length),p=e;p<f;p++){var v=this.markers[p];v&&!v.isAdded&&this.isMarkerInBounds(v,m)&&(!this.ignoreHidden||this.ignoreHidden&&v.getVisible())&&this.addToClosestCluster(v)}if(f<this.markers.length)this.timerRefStatic=window.setTimeout(function(){r.createClusters(f)},0);else{this.timerRefStatic=null,google.maps.event.trigger(this,"clusteringend",this);for(var x=0,w=this.clusters;x<w.length;x++){var S=w[x];S.updateIcon()}}}},t.prototype.extend=function(e,r){return(function(s){for(var c in s.prototype){var d=c;this.prototype[d]=s.prototype[d]}return this}).apply(e,[r])},t}();function t0(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,i)}return r}function oR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?t0(Object(r),!0).forEach(function(i){Le(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):t0(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}var Tr={onClick:"click",onClusteringBegin:"clusteringbegin",onClusteringEnd:"clusteringend",onMouseOut:"mouseout",onMouseOver:"mouseover"},Ft={averageCenter(t,e){t.setAverageCenter(e)},batchSizeIE(t,e){t.setBatchSizeIE(e)},calculator(t,e){t.setCalculator(e)},clusterClass(t,e){t.setClusterClass(e)},enableRetinaIcons(t,e){t.setEnableRetinaIcons(e)},gridSize(t,e){t.setGridSize(e)},ignoreHidden(t,e){t.setIgnoreHidden(e)},imageExtension(t,e){t.setImageExtension(e)},imagePath(t,e){t.setImagePath(e)},imageSizes(t,e){t.setImageSizes(e)},maxZoom(t,e){t.setMaxZoom(e)},minimumClusterSize(t,e){t.setMinimumClusterSize(e)},styles(t,e){t.setStyles(e)},title(t,e){t.setTitle(e)},zoomOnClick(t,e){t.setZoomOnClick(e)}},lR={};function cR(t){var{children:e,options:r,averageCenter:i,batchSizeIE:s,calculator:c,clusterClass:d,enableRetinaIcons:m,gridSize:f,ignoreHidden:p,imageExtension:v,imagePath:x,imageSizes:w,maxZoom:S,minimumClusterSize:b,styles:N,title:j,zoomOnClick:_,onClick:C,onClusteringBegin:E,onClusteringEnd:O,onMouseOver:M,onMouseOut:R,onLoad:I,onUnmount:H}=t,[D,Y]=h.useState(null),G=h.useContext(Ot),[ie,Oe]=h.useState(null),[ce,te]=h.useState(null),[k,z]=h.useState(null),[U,K]=h.useState(null),[T,A]=h.useState(null);return h.useEffect(()=>{D&&R&&(U!==null&&google.maps.event.removeListener(U),K(google.maps.event.addListener(D,Tr.onMouseOut,R)))},[R]),h.useEffect(()=>{D&&M&&(T!==null&&google.maps.event.removeListener(T),A(google.maps.event.addListener(D,Tr.onMouseOver,M)))},[M]),h.useEffect(()=>{D&&C&&(ie!==null&&google.maps.event.removeListener(ie),Oe(google.maps.event.addListener(D,Tr.onClick,C)))},[C]),h.useEffect(()=>{D&&E&&(ce!==null&&google.maps.event.removeListener(ce),te(google.maps.event.addListener(D,Tr.onClusteringBegin,E)))},[E]),h.useEffect(()=>{D&&O&&(k!==null&&google.maps.event.removeListener(k),te(google.maps.event.addListener(D,Tr.onClusteringEnd,O)))},[O]),h.useEffect(()=>{typeof i<"u"&&D!==null&&Ft.averageCenter(D,i)},[D,i]),h.useEffect(()=>{typeof s<"u"&&D!==null&&Ft.batchSizeIE(D,s)},[D,s]),h.useEffect(()=>{typeof c<"u"&&D!==null&&Ft.calculator(D,c)},[D,c]),h.useEffect(()=>{typeof d<"u"&&D!==null&&Ft.clusterClass(D,d)},[D,d]),h.useEffect(()=>{typeof m<"u"&&D!==null&&Ft.enableRetinaIcons(D,m)},[D,m]),h.useEffect(()=>{typeof f<"u"&&D!==null&&Ft.gridSize(D,f)},[D,f]),h.useEffect(()=>{typeof p<"u"&&D!==null&&Ft.ignoreHidden(D,p)},[D,p]),h.useEffect(()=>{typeof v<"u"&&D!==null&&Ft.imageExtension(D,v)},[D,v]),h.useEffect(()=>{typeof x<"u"&&D!==null&&Ft.imagePath(D,x)},[D,x]),h.useEffect(()=>{typeof w<"u"&&D!==null&&Ft.imageSizes(D,w)},[D,w]),h.useEffect(()=>{typeof S<"u"&&D!==null&&Ft.maxZoom(D,S)},[D,S]),h.useEffect(()=>{typeof b<"u"&&D!==null&&Ft.minimumClusterSize(D,b)},[D,b]),h.useEffect(()=>{typeof N<"u"&&D!==null&&Ft.styles(D,N)},[D,N]),h.useEffect(()=>{typeof j<"u"&&D!==null&&Ft.title(D,j)},[D,j]),h.useEffect(()=>{typeof _<"u"&&D!==null&&Ft.zoomOnClick(D,_)},[D,_]),h.useEffect(()=>{if(G){var F=oR({},r||lR),V=new A1(G,[],F);return i&&Ft.averageCenter(V,i),s&&Ft.batchSizeIE(V,s),c&&Ft.calculator(V,c),d&&Ft.clusterClass(V,d),m&&Ft.enableRetinaIcons(V,m),f&&Ft.gridSize(V,f),p&&Ft.ignoreHidden(V,p),v&&Ft.imageExtension(V,v),x&&Ft.imagePath(V,x),w&&Ft.imageSizes(V,w),S&&Ft.maxZoom(V,S),b&&Ft.minimumClusterSize(V,b),N&&Ft.styles(V,N),j&&Ft.title(V,j),_&&Ft.zoomOnClick(V,_),R&&K(google.maps.event.addListener(V,Tr.onMouseOut,R)),M&&A(google.maps.event.addListener(V,Tr.onMouseOver,M)),C&&Oe(google.maps.event.addListener(V,Tr.onClick,C)),E&&te(google.maps.event.addListener(V,Tr.onClusteringBegin,E)),O&&z(google.maps.event.addListener(V,Tr.onClusteringEnd,O)),Y(V),I&&I(V),()=>{U!==null&&google.maps.event.removeListener(U),T!==null&&google.maps.event.removeListener(T),ie!==null&&google.maps.event.removeListener(ie),ce!==null&&google.maps.event.removeListener(ce),k!==null&&google.maps.event.removeListener(k),H&&H(V)}}},[]),D!==null&&e(D)||null}h.memo(cR);class uR extends h.PureComponent{constructor(){super(...arguments),Le(this,"registeredEvents",[]),Le(this,"state",{markerClusterer:null}),Le(this,"setClustererCallback",()=>{this.state.markerClusterer!==null&&this.props.onLoad&&this.props.onLoad(this.state.markerClusterer)})}componentDidMount(){if(this.context){var e=new A1(this.context,[],this.props.options);this.registeredEvents=At({updaterMap:Ft,eventMap:Tr,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({markerClusterer:e}),this.setClustererCallback)}}componentDidUpdate(e){this.state.markerClusterer&&(zt(this.registeredEvents),this.registeredEvents=At({updaterMap:Ft,eventMap:Tr,prevProps:e,nextProps:this.props,instance:this.state.markerClusterer}))}componentWillUnmount(){this.state.markerClusterer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.markerClusterer),zt(this.registeredEvents),this.state.markerClusterer.setMap(null))}render(){return this.state.markerClusterer!==null?this.props.children(this.state.markerClusterer):null}}Le(uR,"contextType",Ot);function n0(t){t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()}var D1=function(){function t(e){e===void 0&&(e={}),this.getCloseClickHandler=this.getCloseClickHandler.bind(this),this.closeClickHandler=this.closeClickHandler.bind(this),this.createInfoBoxDiv=this.createInfoBoxDiv.bind(this),this.addClickHandler=this.addClickHandler.bind(this),this.getCloseBoxImg=this.getCloseBoxImg.bind(this),this.getBoxWidths=this.getBoxWidths.bind(this),this.setBoxStyle=this.setBoxStyle.bind(this),this.setPosition=this.setPosition.bind(this),this.getPosition=this.getPosition.bind(this),this.setOptions=this.setOptions.bind(this),this.setContent=this.setContent.bind(this),this.setVisible=this.setVisible.bind(this),this.getContent=this.getContent.bind(this),this.getVisible=this.getVisible.bind(this),this.setZIndex=this.setZIndex.bind(this),this.getZIndex=this.getZIndex.bind(this),this.onRemove=this.onRemove.bind(this),this.panBox=this.panBox.bind(this),this.extend=this.extend.bind(this),this.close=this.close.bind(this),this.draw=this.draw.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.open=this.open.bind(this),this.extend(t,google.maps.OverlayView),this.content=e.content||"",this.disableAutoPan=e.disableAutoPan||!1,this.maxWidth=e.maxWidth||0,this.pixelOffset=e.pixelOffset||new google.maps.Size(0,0),this.position=e.position||new google.maps.LatLng(0,0),this.zIndex=e.zIndex||null,this.boxClass=e.boxClass||"infoBox",this.boxStyle=e.boxStyle||{},this.closeBoxMargin=e.closeBoxMargin||"2px",this.closeBoxURL=e.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",e.closeBoxURL===""&&(this.closeBoxURL=""),this.infoBoxClearance=e.infoBoxClearance||new google.maps.Size(1,1),typeof e.visible>"u"&&(typeof e.isHidden>"u"?e.visible=!0:e.visible=!e.isHidden),this.isHidden=!e.visible,this.alignBottom=e.alignBottom||!1,this.pane=e.pane||"floatPane",this.enableEventPropagation=e.enableEventPropagation||!1,this.div=null,this.closeListener=null,this.moveListener=null,this.mapListener=null,this.contextListener=null,this.eventListeners=null,this.fixedWidthSet=null}return t.prototype.createInfoBoxDiv=function(){var e=this,r=function(v){v.returnValue=!1,v.preventDefault&&v.preventDefault(),e.enableEventPropagation||n0(v)};if(!this.div){this.div=document.createElement("div"),this.setBoxStyle(),typeof this.content=="string"?this.div.innerHTML=this.getCloseBoxImg()+this.content:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(this.content));var i=this.getPanes();if(i!==null&&i[this.pane].appendChild(this.div),this.addClickHandler(),this.div.style.width)this.fixedWidthSet=!0;else if(this.maxWidth!==0&&this.div.offsetWidth>this.maxWidth)this.div.style.width=this.maxWidth+"px",this.fixedWidthSet=!0;else{var s=this.getBoxWidths();this.div.style.width=this.div.offsetWidth-s.left-s.right+"px",this.fixedWidthSet=!1}if(this.panBox(this.disableAutoPan),!this.enableEventPropagation){this.eventListeners=[];for(var c=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],d=0,m=c;d<m.length;d++){var f=m[d];this.eventListeners.push(google.maps.event.addListener(this.div,f,n0))}this.eventListeners.push(google.maps.event.addListener(this.div,"mouseover",function(){e.div&&(e.div.style.cursor="default")}))}this.contextListener=google.maps.event.addListener(this.div,"contextmenu",r),google.maps.event.trigger(this,"domready")}},t.prototype.getCloseBoxImg=function(){var e="";return this.closeBoxURL!==""&&(e='<img alt=""',e+=' aria-hidden="true"',e+=" src='"+this.closeBoxURL+"'",e+=" align=right",e+=" style='",e+=" position: relative;",e+=" cursor: pointer;",e+=" margin: "+this.closeBoxMargin+";",e+="'>"),e},t.prototype.addClickHandler=function(){this.closeListener=this.div&&this.div.firstChild&&this.closeBoxURL!==""?google.maps.event.addListener(this.div.firstChild,"click",this.getCloseClickHandler()):null},t.prototype.closeClickHandler=function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(this,"closeclick"),this.close()},t.prototype.getCloseClickHandler=function(){return this.closeClickHandler},t.prototype.panBox=function(e){if(this.div&&!e){var r=this.getMap();if(r instanceof google.maps.Map){var i=0,s=0,c=r.getBounds();c&&!c.contains(this.position)&&r.setCenter(this.position);var d=r.getDiv(),m=d.offsetWidth,f=d.offsetHeight,p=this.pixelOffset.width,v=this.pixelOffset.height,x=this.div.offsetWidth,w=this.div.offsetHeight,S=this.infoBoxClearance.width,b=this.infoBoxClearance.height,N=this.getProjection(),j=N.fromLatLngToContainerPixel(this.position);j!==null&&(j.x<-p+S?i=j.x+p-S:j.x+x+p+S>m&&(i=j.x+x+p+S-m),this.alignBottom?j.y<-v+b+w?s=j.y+v-b-w:j.y+v+b>f&&(s=j.y+v+b-f):j.y<-v+b?s=j.y+v-b:j.y+w+v+b>f&&(s=j.y+w+v+b-f)),i===0&&s===0||r.panBy(i,s)}}},t.prototype.setBoxStyle=function(){if(this.div){this.div.className=this.boxClass,this.div.style.cssText="";var e=this.boxStyle;for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(this.div.style[r]=e[r]);if(this.div.style.webkitTransform="translateZ(0)",typeof this.div.style.opacity<"u"&&this.div.style.opacity!==""){var i=parseFloat(this.div.style.opacity||"");this.div.style.msFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+i*100+')"',this.div.style.filter="alpha(opacity="+i*100+")"}this.div.style.position="absolute",this.div.style.visibility="hidden",this.zIndex!==null&&(this.div.style.zIndex=this.zIndex+""),this.div.style.overflow||(this.div.style.overflow="auto")}},t.prototype.getBoxWidths=function(){var e={top:0,bottom:0,left:0,right:0};if(!this.div)return e;if(document.defaultView){var r=this.div.ownerDocument,i=r&&r.defaultView?r.defaultView.getComputedStyle(this.div,""):null;i&&(e.top=parseInt(i.borderTopWidth||"",10)||0,e.bottom=parseInt(i.borderBottomWidth||"",10)||0,e.left=parseInt(i.borderLeftWidth||"",10)||0,e.right=parseInt(i.borderRightWidth||"",10)||0)}else if(document.documentElement.currentStyle){var s=this.div.currentStyle;s&&(e.top=parseInt(s.borderTopWidth||"",10)||0,e.bottom=parseInt(s.borderBottomWidth||"",10)||0,e.left=parseInt(s.borderLeftWidth||"",10)||0,e.right=parseInt(s.borderRightWidth||"",10)||0)}return e},t.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.div.parentNode.removeChild(this.div),this.div=null)},t.prototype.draw=function(){if(this.createInfoBoxDiv(),this.div){var e=this.getProjection(),r=e.fromLatLngToDivPixel(this.position);r!==null&&(this.div.style.left=r.x+this.pixelOffset.width+"px",this.alignBottom?this.div.style.bottom=-(r.y+this.pixelOffset.height)+"px":this.div.style.top=r.y+this.pixelOffset.height+"px"),this.isHidden?this.div.style.visibility="hidden":this.div.style.visibility="visible"}},t.prototype.setOptions=function(e){e===void 0&&(e={}),typeof e.boxClass<"u"&&(this.boxClass=e.boxClass,this.setBoxStyle()),typeof e.boxStyle<"u"&&(this.boxStyle=e.boxStyle,this.setBoxStyle()),typeof e.content<"u"&&this.setContent(e.content),typeof e.disableAutoPan<"u"&&(this.disableAutoPan=e.disableAutoPan),typeof e.maxWidth<"u"&&(this.maxWidth=e.maxWidth),typeof e.pixelOffset<"u"&&(this.pixelOffset=e.pixelOffset),typeof e.alignBottom<"u"&&(this.alignBottom=e.alignBottom),typeof e.position<"u"&&this.setPosition(e.position),typeof e.zIndex<"u"&&this.setZIndex(e.zIndex),typeof e.closeBoxMargin<"u"&&(this.closeBoxMargin=e.closeBoxMargin),typeof e.closeBoxURL<"u"&&(this.closeBoxURL=e.closeBoxURL),typeof e.infoBoxClearance<"u"&&(this.infoBoxClearance=e.infoBoxClearance),typeof e.isHidden<"u"&&(this.isHidden=e.isHidden),typeof e.visible<"u"&&(this.isHidden=!e.visible),typeof e.enableEventPropagation<"u"&&(this.enableEventPropagation=e.enableEventPropagation),this.div&&this.draw()},t.prototype.setContent=function(e){this.content=e,this.div&&(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.fixedWidthSet||(this.div.style.width=""),typeof e=="string"?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e)),this.fixedWidthSet||(this.div.style.width=this.div.offsetWidth+"px",typeof e=="string"?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e))),this.addClickHandler()),google.maps.event.trigger(this,"content_changed")},t.prototype.setPosition=function(e){this.position=e,this.div&&this.draw(),google.maps.event.trigger(this,"position_changed")},t.prototype.setVisible=function(e){this.isHidden=!e,this.div&&(this.div.style.visibility=this.isHidden?"hidden":"visible")},t.prototype.setZIndex=function(e){this.zIndex=e,this.div&&(this.div.style.zIndex=e+""),google.maps.event.trigger(this,"zindex_changed")},t.prototype.getContent=function(){return this.content},t.prototype.getPosition=function(){return this.position},t.prototype.getZIndex=function(){return this.zIndex},t.prototype.getVisible=function(){var e=this.getMap();return typeof e>"u"||e===null?!1:!this.isHidden},t.prototype.show=function(){this.isHidden=!1,this.div&&(this.div.style.visibility="visible")},t.prototype.hide=function(){this.isHidden=!0,this.div&&(this.div.style.visibility="hidden")},t.prototype.open=function(e,r){var i=this;r&&(this.position=r.getPosition(),this.moveListener=google.maps.event.addListener(r,"position_changed",function(){var s=r.getPosition();i.setPosition(s)}),this.mapListener=google.maps.event.addListener(r,"map_changed",function(){i.setMap(r.map)})),this.setMap(e),this.div&&this.panBox()},t.prototype.close=function(){if(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.eventListeners){for(var e=0,r=this.eventListeners;e<r.length;e++){var i=r[e];google.maps.event.removeListener(i)}this.eventListeners=null}this.moveListener&&(google.maps.event.removeListener(this.moveListener),this.moveListener=null),this.mapListener&&(google.maps.event.removeListener(this.mapListener),this.mapListener=null),this.contextListener&&(google.maps.event.removeListener(this.contextListener),this.contextListener=null),this.setMap(null)},t.prototype.extend=function(e,r){return(function(s){for(var c in s.prototype)Object.prototype.hasOwnProperty.call(this,c)||(this.prototype[c]=s.prototype[c]);return this}).apply(e,[r])},t}(),dR=["position"],fR=["position"];function r0(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,i)}return r}function rd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?r0(Object(r),!0).forEach(function(i){Le(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):r0(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}var a0={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},i0={options(t,e){t.setOptions(e)},position(t,e){e instanceof google.maps.LatLng?t.setPosition(e):t.setPosition(new google.maps.LatLng(e.lat,e.lng))},visible(t,e){t.setVisible(e)},zIndex(t,e){t.setZIndex(e)}},hR={};function mR(t){var{children:e,anchor:r,options:i,position:s,zIndex:c,onCloseClick:d,onDomReady:m,onContentChanged:f,onPositionChanged:p,onZindexChanged:v,onLoad:x,onUnmount:w}=t,S=h.useContext(Ot),[b,N]=h.useState(null),[j,_]=h.useState(null),[C,E]=h.useState(null),[O,M]=h.useState(null),[R,I]=h.useState(null),[H,D]=h.useState(null),Y=h.useRef(null);return h.useEffect(()=>{S&&b!==null&&(b.close(),r?b.open(S,r):b.getPosition()&&b.open(S))},[S,b,r]),h.useEffect(()=>{i&&b!==null&&b.setOptions(i)},[b,i]),h.useEffect(()=>{if(s&&b!==null){var G=s instanceof google.maps.LatLng?s:new google.maps.LatLng(s.lat,s.lng);b.setPosition(G)}},[s]),h.useEffect(()=>{typeof c=="number"&&b!==null&&b.setZIndex(c)},[c]),h.useEffect(()=>{b&&d&&(j!==null&&google.maps.event.removeListener(j),_(google.maps.event.addListener(b,"closeclick",d)))},[d]),h.useEffect(()=>{b&&m&&(C!==null&&google.maps.event.removeListener(C),E(google.maps.event.addListener(b,"domready",m)))},[m]),h.useEffect(()=>{b&&f&&(O!==null&&google.maps.event.removeListener(O),M(google.maps.event.addListener(b,"content_changed",f)))},[f]),h.useEffect(()=>{b&&p&&(R!==null&&google.maps.event.removeListener(R),I(google.maps.event.addListener(b,"position_changed",p)))},[p]),h.useEffect(()=>{b&&v&&(H!==null&&google.maps.event.removeListener(H),D(google.maps.event.addListener(b,"zindex_changed",v)))},[v]),h.useEffect(()=>{if(S){var G=i||hR,{position:ie}=G,Oe=Lp(G,dR),ce;ie&&!(ie instanceof google.maps.LatLng)&&(ce=new google.maps.LatLng(ie.lat,ie.lng));var te=new D1(rd(rd({},Oe),ce?{position:ce}:{}));Y.current=document.createElement("div"),N(te),d&&_(google.maps.event.addListener(te,"closeclick",d)),m&&E(google.maps.event.addListener(te,"domready",m)),f&&M(google.maps.event.addListener(te,"content_changed",f)),p&&I(google.maps.event.addListener(te,"position_changed",p)),v&&D(google.maps.event.addListener(te,"zindex_changed",v)),te.setContent(Y.current),r?te.open(S,r):te.getPosition()?te.open(S):Tn(!1,"You must provide either an anchor or a position prop for <InfoBox>."),x&&x(te)}return()=>{b!==null&&(j&&google.maps.event.removeListener(j),O&&google.maps.event.removeListener(O),C&&google.maps.event.removeListener(C),R&&google.maps.event.removeListener(R),H&&google.maps.event.removeListener(H),w&&w(b),b.close())}},[]),Y.current?cs.createPortal(h.Children.only(e),Y.current):null}h.memo(mR);class pR extends h.PureComponent{constructor(){super(...arguments),Le(this,"registeredEvents",[]),Le(this,"containerElement",null),Le(this,"state",{infoBox:null}),Le(this,"open",(e,r)=>{r?this.context!==null&&e.open(this.context,r):e.getPosition()?this.context!==null&&e.open(this.context):Tn(!1,"You must provide either an anchor or a position prop for <InfoBox>.")}),Le(this,"setInfoBoxCallback",()=>{this.state.infoBox!==null&&this.containerElement!==null&&(this.state.infoBox.setContent(this.containerElement),this.open(this.state.infoBox,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoBox))})}componentDidMount(){var e=this.props.options||{},{position:r}=e,i=Lp(e,fR),s;r&&!(r instanceof google.maps.LatLng)&&(s=new google.maps.LatLng(r.lat,r.lng));var c=new D1(rd(rd({},i),s?{position:s}:{}));this.containerElement=document.createElement("div"),this.registeredEvents=At({updaterMap:i0,eventMap:a0,prevProps:{},nextProps:this.props,instance:c}),this.setState({infoBox:c},this.setInfoBoxCallback)}componentDidUpdate(e){var{infoBox:r}=this.state;r!==null&&(zt(this.registeredEvents),this.registeredEvents=At({updaterMap:i0,eventMap:a0,prevProps:e,nextProps:this.props,instance:r}))}componentWillUnmount(){var{onUnmount:e}=this.props,{infoBox:r}=this.state;r!==null&&(e&&e(r),zt(this.registeredEvents),r.close())}render(){return this.containerElement?cs.createPortal(h.Children.only(this.props.children),this.containerElement):null}}Le(pR,"contextType",Ot);var tm,s0;function gR(){return s0||(s0=1,tm=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var i,s,c;if(Array.isArray(e)){if(i=e.length,i!=r.length)return!1;for(s=i;s--!==0;)if(!t(e[s],r[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(c=Object.keys(e),i=c.length,i!==Object.keys(r).length)return!1;for(s=i;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,c[s]))return!1;for(s=i;s--!==0;){var d=c[s];if(!t(e[d],r[d]))return!1}return!0}return e!==e&&r!==r}),tm}var vR=gR(),o0=E1(vR),l0=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],nm=1,_l=8;class kp{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");var[r,i]=new Uint8Array(e,0,2);if(r!==219)throw new Error("Data does not appear to be in a KDBush format.");var s=i>>4;if(s!==nm)throw new Error("Got v".concat(s," data when expected v").concat(nm,"."));var c=l0[i&15];if(!c)throw new Error("Unrecognized array type.");var[d]=new Uint16Array(e,2,1),[m]=new Uint32Array(e,4,1);return new kp(m,d,c,e)}constructor(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:64,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Float64Array,s=arguments.length>3?arguments[3]:void 0;if(isNaN(e)||e<0)throw new Error("Unpexpected numItems value: ".concat(e,"."));this.numItems=+e,this.nodeSize=Math.min(Math.max(+r,2),65535),this.ArrayType=i,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;var c=l0.indexOf(this.ArrayType),d=e*2*this.ArrayType.BYTES_PER_ELEMENT,m=e*this.IndexArrayType.BYTES_PER_ELEMENT,f=(8-m%8)%8;if(c<0)throw new Error("Unexpected typed array class: ".concat(i,"."));s&&s instanceof ArrayBuffer?(this.data=s,this.ids=new this.IndexArrayType(this.data,_l,e),this.coords=new this.ArrayType(this.data,_l+m+f,e*2),this._pos=e*2,this._finished=!0):(this.data=new ArrayBuffer(_l+d+m+f),this.ids=new this.IndexArrayType(this.data,_l,e),this.coords=new this.ArrayType(this.data,_l+m+f,e*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(nm<<4)+c]),new Uint16Array(this.data,2,1)[0]=r,new Uint32Array(this.data,4,1)[0]=e)}add(e,r){var i=this._pos>>1;return this.ids[i]=i,this.coords[this._pos++]=e,this.coords[this._pos++]=r,i}finish(){var e=this._pos>>1;if(e!==this.numItems)throw new Error("Added ".concat(e," items when expected ").concat(this.numItems,"."));return Um(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,r,i,s){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:c,coords:d,nodeSize:m}=this,f=[0,c.length-1,0],p=[];f.length;){var v=f.pop()||0,x=f.pop()||0,w=f.pop()||0;if(x-w<=m){for(var S=w;S<=x;S++){var b=d[2*S],N=d[2*S+1];b>=e&&b<=i&&N>=r&&N<=s&&p.push(c[S])}continue}var j=w+x>>1,_=d[2*j],C=d[2*j+1];_>=e&&_<=i&&C>=r&&C<=s&&p.push(c[j]),(v===0?e<=_:r<=C)&&(f.push(w),f.push(j-1),f.push(1-v)),(v===0?i>=_:s>=C)&&(f.push(j+1),f.push(x),f.push(1-v))}return p}within(e,r,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:s,coords:c,nodeSize:d}=this,m=[0,s.length-1,0],f=[],p=i*i;m.length;){var v=m.pop()||0,x=m.pop()||0,w=m.pop()||0;if(x-w<=d){for(var S=w;S<=x;S++)c0(c[2*S],c[2*S+1],e,r)<=p&&f.push(s[S]);continue}var b=w+x>>1,N=c[2*b],j=c[2*b+1];c0(N,j,e,r)<=p&&f.push(s[b]),(v===0?e-i<=N:r-i<=j)&&(m.push(w),m.push(b-1),m.push(1-v)),(v===0?e+i>=N:r+i>=j)&&(m.push(b+1),m.push(x),m.push(1-v))}return f}}function Um(t,e,r,i,s,c){if(!(s-i<=r)){var d=i+s>>1;R1(t,e,d,i,s,c),Um(t,e,r,i,d-1,1-c),Um(t,e,r,d+1,s,1-c)}}function R1(t,e,r,i,s,c){for(;s>i;){if(s-i>600){var d=s-i+1,m=r-i+1,f=Math.log(d),p=.5*Math.exp(2*f/3),v=.5*Math.sqrt(f*p*(d-p)/d)*(m-d/2<0?-1:1),x=Math.max(i,Math.floor(r-m*p/d+v)),w=Math.min(s,Math.floor(r+(d-m)*p/d+v));R1(t,e,r,x,w,c)}var S=e[2*r+c],b=i,N=s;for(Nl(t,e,i,r),e[2*s+c]>S&&Nl(t,e,i,s);b<N;){for(Nl(t,e,b,N),b++,N--;e[2*b+c]<S;)b++;for(;e[2*N+c]>S;)N--}e[2*i+c]===S?Nl(t,e,i,N):(N++,Nl(t,e,N,s)),N<=r&&(i=N+1),r<=N&&(s=N-1)}}function Nl(t,e,r,i){rm(t,r,i),rm(e,2*r,2*i),rm(e,2*r+1,2*i+1)}function rm(t,e,r){var i=t[e];t[e]=t[r],t[r]=i}function c0(t,e,r,i){var s=t-r,c=e-i;return s*s+c*c}var bR={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},u0=Math.fround||(t=>e=>(t[0]=+e,t[0]))(new Float32Array(1)),Ji=2,Ni=3,am=4,_i=5,P1=6;class yR{constructor(e){this.options=Object.assign(Object.create(bR),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){var{log:r,minZoom:i,maxZoom:s}=this.options;r&&console.time("total time");var c="prepare ".concat(e.length," points");r&&console.time(c),this.points=e;for(var d=[],m=0;m<e.length;m++){var f=e[m];if(f.geometry){var[p,v]=f.geometry.coordinates,x=u0(_u(p)),w=u0(Nu(v));d.push(x,w,1/0,m,-1,1),this.options.reduce&&d.push(0)}}var S=this.trees[s+1]=this._createTree(d);r&&console.timeEnd(c);for(var b=s;b>=i;b--){var N=+Date.now();S=this.trees[b]=this._createTree(this._cluster(S,b)),r&&console.log("z%d: %d clusters in %dms",b,S.numItems,+Date.now()-N)}return r&&console.timeEnd("total time"),this}getClusters(e,r){var i=((e[0]+180)%360+360)%360-180,s=Math.max(-90,Math.min(90,e[1])),c=e[2]===180?180:((e[2]+180)%360+360)%360-180,d=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)i=-180,c=180;else if(i>c){var m=this.getClusters([i,s,180,d],r),f=this.getClusters([-180,s,c,d],r);return m.concat(f)}var p=this.trees[this._limitZoom(r)],v=p.range(_u(i),Nu(d),_u(c),Nu(s)),x=p.data,w=[];for(var S of v){var b=this.stride*S;w.push(x[b+_i]>1?d0(x,b,this.clusterProps):this.points[x[b+Ni]])}return w}getChildren(e){var r=this._getOriginId(e),i=this._getOriginZoom(e),s="No cluster with the specified id.",c=this.trees[i];if(!c)throw new Error(s);var d=c.data;if(r*this.stride>=d.length)throw new Error(s);var m=this.options.radius/(this.options.extent*Math.pow(2,i-1)),f=d[r*this.stride],p=d[r*this.stride+1],v=c.within(f,p,m),x=[];for(var w of v){var S=w*this.stride;d[S+am]===e&&x.push(d[S+_i]>1?d0(d,S,this.clusterProps):this.points[d[S+Ni]])}if(x.length===0)throw new Error(s);return x}getLeaves(e,r,i){r=r||10,i=i||0;var s=[];return this._appendLeaves(s,e,r,i,0),s}getTile(e,r,i){var s=this.trees[this._limitZoom(e)],c=Math.pow(2,e),{extent:d,radius:m}=this.options,f=m/d,p=(i-f)/c,v=(i+1+f)/c,x={features:[]};return this._addTileFeatures(s.range((r-f)/c,p,(r+1+f)/c,v),s.data,r,i,c,x),r===0&&this._addTileFeatures(s.range(1-f/c,p,1,v),s.data,c,i,c,x),r===c-1&&this._addTileFeatures(s.range(0,p,f/c,v),s.data,-1,i,c,x),x.features.length?x:null}getClusterExpansionZoom(e){for(var r=this._getOriginZoom(e)-1;r<=this.options.maxZoom;){var i=this.getChildren(e);if(r++,i.length!==1)break;e=i[0].properties.cluster_id}return r}_appendLeaves(e,r,i,s,c){var d=this.getChildren(r);for(var m of d){var f=m.properties;if(f&&f.cluster?c+f.point_count<=s?c+=f.point_count:c=this._appendLeaves(e,f.cluster_id,i,s,c):c<s?c++:e.push(m),e.length===i)break}return c}_createTree(e){for(var r=new kp(e.length/this.stride|0,this.options.nodeSize,Float32Array),i=0;i<e.length;i+=this.stride)r.add(e[i],e[i+1]);return r.finish(),r.data=e,r}_addTileFeatures(e,r,i,s,c,d){for(var m of e){var f=m*this.stride,p=r[f+_i]>1,v=void 0,x=void 0,w=void 0;if(p)v=z1(r,f,this.clusterProps),x=r[f],w=r[f+1];else{var S=this.points[r[f+Ni]];v=S.properties;var[b,N]=S.geometry.coordinates;x=_u(b),w=Nu(N)}var j={type:1,geometry:[[Math.round(this.options.extent*(x*c-i)),Math.round(this.options.extent*(w*c-s))]],tags:v},_=void 0;p||this.options.generateId?_=r[f+Ni]:_=this.points[r[f+Ni]].id,_!==void 0&&(j.id=_),d.features.push(j)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,r){for(var{radius:i,extent:s,reduce:c,minPoints:d}=this.options,m=i/(s*Math.pow(2,r)),f=e.data,p=[],v=this.stride,x=0;x<f.length;x+=v)if(!(f[x+Ji]<=r)){f[x+Ji]=r;var w=f[x],S=f[x+1],b=e.within(f[x],f[x+1],m),N=f[x+_i],j=N;for(var _ of b){var C=_*v;f[C+Ji]>r&&(j+=f[C+_i])}if(j>N&&j>=d){var E=w*N,O=S*N,M=void 0,R=-1,I=((x/v|0)<<5)+(r+1)+this.points.length;for(var H of b){var D=H*v;if(!(f[D+Ji]<=r)){f[D+Ji]=r;var Y=f[D+_i];E+=f[D]*Y,O+=f[D+1]*Y,f[D+am]=I,c&&(M||(M=this._map(f,x,!0),R=this.clusterProps.length,this.clusterProps.push(M)),c(M,this._map(f,D)))}}f[x+am]=I,p.push(E/j,O/j,1/0,I,-1,j),c&&p.push(R)}else{for(var G=0;G<v;G++)p.push(f[x+G]);if(j>1)for(var ie of b){var Oe=ie*v;if(!(f[Oe+Ji]<=r)){f[Oe+Ji]=r;for(var ce=0;ce<v;ce++)p.push(f[Oe+ce])}}}}return p}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,r,i){if(e[r+_i]>1){var s=this.clusterProps[e[r+P1]];return i?Object.assign({},s):s}var c=this.points[e[r+Ni]].properties,d=this.options.map(c);return i&&d===c?Object.assign({},d):d}}function d0(t,e,r){return{type:"Feature",id:t[e+Ni],properties:z1(t,e,r),geometry:{type:"Point",coordinates:[xR(t[e]),wR(t[e+1])]}}}function z1(t,e,r){var i=t[e+_i],s=i>=1e4?"".concat(Math.round(i/1e3),"k"):i>=1e3?"".concat(Math.round(i/100)/10,"k"):i,c=t[e+P1],d=c===-1?{}:Object.assign({},r[c]);return Object.assign(d,{cluster:!0,cluster_id:t[e+Ni],point_count:i,point_count_abbreviated:s})}function _u(t){return t/360+.5}function Nu(t){var e=Math.sin(t*Math.PI/180),r=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return r<0?0:r>1?1:r}function xR(t){return(t-.5)*360}function wR(t){var e=(180-t*360)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function SR(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(r[i[s]]=t[i[s]]);return r}class jr{static isAdvancedMarkerAvailable(e){return google.maps.marker&&e.getMapCapabilities().isAdvancedMarkersAvailable===!0}static isAdvancedMarker(e){return google.maps.marker&&e instanceof google.maps.marker.AdvancedMarkerElement}static setMap(e,r){this.isAdvancedMarker(e)?e.map=r:e.setMap(r)}static getPosition(e){if(this.isAdvancedMarker(e)){if(e.position){if(e.position instanceof google.maps.LatLng)return e.position;if(e.position.lat&&e.position.lng)return new google.maps.LatLng(e.position.lat,e.position.lng)}return new google.maps.LatLng(null)}return e.getPosition()}static getVisible(e){return this.isAdvancedMarker(e)?!0:e.getVisible()}}class Vm{constructor(e){var{markers:r,position:i}=e;this.markers=r,i&&(i instanceof google.maps.LatLng?this._position=i:this._position=new google.maps.LatLng(i))}get bounds(){if(!(this.markers.length===0&&!this._position)){var e=new google.maps.LatLngBounds(this._position,this._position);for(var r of this.markers)e.extend(jr.getPosition(r));return e}}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(e=>jr.getVisible(e)).length}push(e){this.markers.push(e)}delete(){this.marker&&(jr.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class jR{constructor(e){var{maxZoom:r=16}=e;this.maxZoom=r}noop(e){var{markers:r}=e;return _R(r)}}var _R=t=>{var e=t.map(r=>new Vm({position:jr.getPosition(r),markers:[r]}));return e};class NR extends jR{constructor(e){var{maxZoom:r,radius:i=60}=e,s=SR(e,["maxZoom","radius"]);super({maxZoom:r}),this.state={zoom:-1},this.superCluster=new yR(Object.assign({maxZoom:this.maxZoom,radius:i},s))}calculate(e){var r=!1,i={zoom:e.map.getZoom()};if(!o0(e.markers,this.markers)){r=!0,this.markers=[...e.markers];var s=this.markers.map(c=>{var d=jr.getPosition(c),m=[d.lng(),d.lat()];return{type:"Feature",geometry:{type:"Point",coordinates:m},properties:{marker:c}}});this.superCluster.load(s)}return r||(this.state.zoom<=this.maxZoom||i.zoom<=this.maxZoom)&&(r=!o0(this.state,i)),this.state=i,r&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:r}}cluster(e){var{map:r}=e;return this.superCluster.getClusters([-180,-90,180,90],Math.round(r.getZoom())).map(i=>this.transformCluster(i))}transformCluster(e){var{geometry:{coordinates:[r,i]},properties:s}=e;if(s.cluster)return new Vm({markers:this.superCluster.getLeaves(s.cluster_id,1/0).map(d=>d.properties.marker),position:{lat:i,lng:r}});var c=s.marker;return new Vm({markers:[c],position:jr.getPosition(c)})}}class CR{constructor(e,r){this.markers={sum:e.length};var i=r.map(c=>c.count),s=i.reduce((c,d)=>c+d,0);this.clusters={count:r.length,markers:{mean:s/r.length,sum:s,min:Math.min(...i),max:Math.max(...i)}}}}class ER{render(e,r,i){var{count:s,position:c}=e,d=s>Math.max(10,r.clusters.markers.mean)?"#ff0000":"#0000ff",m='<svg fill="'.concat(d,`" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">
<circle cx="120" cy="120" opacity=".6" r="70" />
<circle cx="120" cy="120" opacity=".3" r="90" />
<circle cx="120" cy="120" opacity=".2" r="110" />
<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">`).concat(s,`</text>
</svg>`),f="Cluster of ".concat(s," markers"),p=Number(google.maps.Marker.MAX_ZINDEX)+s;if(jr.isAdvancedMarkerAvailable(i)){var v=new DOMParser,x=v.parseFromString(m,"image/svg+xml").documentElement;x.setAttribute("transform","translate(0 25)");var w={map:i,position:c,zIndex:p,title:f,content:x};return new google.maps.marker.AdvancedMarkerElement(w)}var S={position:c,zIndex:p,title:f,icon:{url:"data:image/svg+xml;base64,".concat(btoa(m)),anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(S)}}function OR(t,e){for(var r in e.prototype)t.prototype[r]=e.prototype[r]}class Tp{constructor(){OR(Tp,google.maps.OverlayView)}}var Tl;(function(t){t.CLUSTERING_BEGIN="clusteringbegin",t.CLUSTERING_END="clusteringend",t.CLUSTER_CLICK="click"})(Tl||(Tl={}));var MR=(t,e,r)=>{r.fitBounds(e.bounds)};class LR extends Tp{constructor(e){var{map:r,markers:i=[],algorithmOptions:s={},algorithm:c=new NR(s),renderer:d=new ER,onClusterClick:m=MR}=e;super(),this.markers=[...i],this.clusters=[],this.algorithm=c,this.renderer=d,this.onClusterClick=m,r&&this.setMap(r)}addMarker(e,r){this.markers.includes(e)||(this.markers.push(e),r||this.render())}addMarkers(e,r){e.forEach(i=>{this.addMarker(i,!0)}),r||this.render()}removeMarker(e,r){var i=this.markers.indexOf(e);return i===-1?!1:(jr.setMap(e,null),this.markers.splice(i,1),r||this.render(),!0)}removeMarkers(e,r){var i=!1;return e.forEach(s=>{i=this.removeMarker(s,!0)||i}),i&&!r&&this.render(),i}clearMarkers(e){this.markers.length=0,e||this.render()}render(){var e=this.getMap();if(e instanceof google.maps.Map&&e.getProjection()){google.maps.event.trigger(this,Tl.CLUSTERING_BEGIN,this);var{clusters:r,changed:i}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});if(i||i==null){var s=new Set;for(var c of r)c.markers.length==1&&s.add(c.markers[0]);var d=[];for(var m of this.clusters)m.marker!=null&&(m.markers.length==1?s.has(m.marker)||jr.setMap(m.marker,null):d.push(m.marker));this.clusters=r,this.renderClusters(),requestAnimationFrame(()=>d.forEach(f=>jr.setMap(f,null)))}google.maps.event.trigger(this,Tl.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(e=>jr.setMap(e,null)),this.clusters.forEach(e=>e.delete()),this.clusters=[]}renderClusters(){var e=new CR(this.markers,this.clusters),r=this.getMap();this.clusters.forEach(i=>{i.markers.length===1?i.marker=i.markers[0]:(i.marker=this.renderer.render(i,e,r),i.markers.forEach(s=>jr.setMap(s,null)),this.onClusterClick&&i.marker.addListener("click",s=>{google.maps.event.trigger(this,Tl.CLUSTER_CLICK,i),this.onClusterClick(s,i,r)})),jr.setMap(i.marker,r)})}}function f0(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,i)}return r}function h0(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?f0(Object(r),!0).forEach(function(i){Le(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f0(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function kR(t){var e=jD(),[r,i]=h.useState(null);return h.useEffect(()=>{if(e&&r===null){var s=new LR(h0(h0({},t),{},{map:e}));i(s)}},[e]),r}function TR(t){var{children:e,options:r}=t,i=kR(r);return i!==null?e(i):null}h.memo(TR);var m0={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},p0={options(t,e){t.setOptions(e)},position(t,e){t.setPosition(e)},zIndex(t,e){t.setZIndex(e)}};function AR(t){var{children:e,anchor:r,options:i,position:s,zIndex:c,onCloseClick:d,onDomReady:m,onContentChanged:f,onPositionChanged:p,onZindexChanged:v,onLoad:x,onUnmount:w}=t,S=h.useContext(Ot),[b,N]=h.useState(null),[j,_]=h.useState(null),[C,E]=h.useState(null),[O,M]=h.useState(null),[R,I]=h.useState(null),[H,D]=h.useState(null),Y=h.useRef(null);return h.useEffect(()=>{b!==null&&(b.close(),r?b.open(S,r):b.getPosition()&&b.open(S))},[S,b,r]),h.useEffect(()=>{i&&b!==null&&b.setOptions(i)},[b,i]),h.useEffect(()=>{s&&b!==null&&b.setPosition(s)},[s]),h.useEffect(()=>{typeof c=="number"&&b!==null&&b.setZIndex(c)},[c]),h.useEffect(()=>{b&&d&&(j!==null&&google.maps.event.removeListener(j),_(google.maps.event.addListener(b,"closeclick",d)))},[d]),h.useEffect(()=>{b&&m&&(C!==null&&google.maps.event.removeListener(C),E(google.maps.event.addListener(b,"domready",m)))},[m]),h.useEffect(()=>{b&&f&&(O!==null&&google.maps.event.removeListener(O),M(google.maps.event.addListener(b,"content_changed",f)))},[f]),h.useEffect(()=>{b&&p&&(R!==null&&google.maps.event.removeListener(R),I(google.maps.event.addListener(b,"position_changed",p)))},[p]),h.useEffect(()=>{b&&v&&(H!==null&&google.maps.event.removeListener(H),D(google.maps.event.addListener(b,"zindex_changed",v)))},[v]),h.useEffect(()=>{var G=new google.maps.InfoWindow(i);return N(G),Y.current=document.createElement("div"),d&&_(google.maps.event.addListener(G,"closeclick",d)),m&&E(google.maps.event.addListener(G,"domready",m)),f&&M(google.maps.event.addListener(G,"content_changed",f)),p&&I(google.maps.event.addListener(G,"position_changed",p)),v&&D(google.maps.event.addListener(G,"zindex_changed",v)),G.setContent(Y.current),s&&G.setPosition(s),c&&G.setZIndex(c),r?G.open(S,r):G.getPosition()?G.open(S):Tn(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>."),x&&x(G),()=>{j&&google.maps.event.removeListener(j),O&&google.maps.event.removeListener(O),C&&google.maps.event.removeListener(C),R&&google.maps.event.removeListener(R),H&&google.maps.event.removeListener(H),w&&w(G),G.close()}},[]),Y.current?cs.createPortal(h.Children.only(e),Y.current):null}h.memo(AR);class DR extends h.PureComponent{constructor(){super(...arguments),Le(this,"registeredEvents",[]),Le(this,"containerElement",null),Le(this,"state",{infoWindow:null}),Le(this,"open",(e,r)=>{r?e.open(this.context,r):e.getPosition()?e.open(this.context):Tn(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>.")}),Le(this,"setInfoWindowCallback",()=>{this.state.infoWindow!==null&&this.containerElement!==null&&(this.state.infoWindow.setContent(this.containerElement),this.open(this.state.infoWindow,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoWindow))})}componentDidMount(){var e=new google.maps.InfoWindow(this.props.options);this.containerElement=document.createElement("div"),this.registeredEvents=At({updaterMap:p0,eventMap:m0,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({infoWindow:e}),this.setInfoWindowCallback)}componentDidUpdate(e){this.state.infoWindow!==null&&(zt(this.registeredEvents),this.registeredEvents=At({updaterMap:p0,eventMap:m0,prevProps:e,nextProps:this.props,instance:this.state.infoWindow}))}componentWillUnmount(){this.state.infoWindow!==null&&(zt(this.registeredEvents),this.props.onUnmount&&this.props.onUnmount(this.state.infoWindow),this.state.infoWindow.close())}render(){return this.containerElement?cs.createPortal(h.Children.only(this.props.children),this.containerElement):null}}Le(DR,"contextType",Ot);function g0(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,i)}return r}function ad(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?g0(Object(r),!0).forEach(function(i){Le(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):g0(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}var v0={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},b0={draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},path(t,e){t.setPath(e)},visible(t,e){t.setVisible(e)}},RR={};function PR(t){var{options:e,draggable:r,editable:i,visible:s,path:c,onDblClick:d,onDragEnd:m,onDragStart:f,onMouseDown:p,onMouseMove:v,onMouseOut:x,onMouseOver:w,onMouseUp:S,onRightClick:b,onClick:N,onDrag:j,onLoad:_,onUnmount:C}=t,E=h.useContext(Ot),[O,M]=h.useState(null),[R,I]=h.useState(null),[H,D]=h.useState(null),[Y,G]=h.useState(null),[ie,Oe]=h.useState(null),[ce,te]=h.useState(null),[k,z]=h.useState(null),[U,K]=h.useState(null),[T,A]=h.useState(null),[F,V]=h.useState(null),[q,Q]=h.useState(null),[be,Ce]=h.useState(null);return h.useEffect(()=>{O!==null&&O.setMap(E)},[E]),h.useEffect(()=>{typeof e<"u"&&O!==null&&O.setOptions(e)},[O,e]),h.useEffect(()=>{typeof r<"u"&&O!==null&&O.setDraggable(r)},[O,r]),h.useEffect(()=>{typeof i<"u"&&O!==null&&O.setEditable(i)},[O,i]),h.useEffect(()=>{typeof s<"u"&&O!==null&&O.setVisible(s)},[O,s]),h.useEffect(()=>{typeof c<"u"&&O!==null&&O.setPath(c)},[O,c]),h.useEffect(()=>{O&&d&&(R!==null&&google.maps.event.removeListener(R),I(google.maps.event.addListener(O,"dblclick",d)))},[d]),h.useEffect(()=>{O&&m&&(H!==null&&google.maps.event.removeListener(H),D(google.maps.event.addListener(O,"dragend",m)))},[m]),h.useEffect(()=>{O&&f&&(Y!==null&&google.maps.event.removeListener(Y),G(google.maps.event.addListener(O,"dragstart",f)))},[f]),h.useEffect(()=>{O&&p&&(ie!==null&&google.maps.event.removeListener(ie),Oe(google.maps.event.addListener(O,"mousedown",p)))},[p]),h.useEffect(()=>{O&&v&&(ce!==null&&google.maps.event.removeListener(ce),te(google.maps.event.addListener(O,"mousemove",v)))},[v]),h.useEffect(()=>{O&&x&&(k!==null&&google.maps.event.removeListener(k),z(google.maps.event.addListener(O,"mouseout",x)))},[x]),h.useEffect(()=>{O&&w&&(U!==null&&google.maps.event.removeListener(U),K(google.maps.event.addListener(O,"mouseover",w)))},[w]),h.useEffect(()=>{O&&S&&(T!==null&&google.maps.event.removeListener(T),A(google.maps.event.addListener(O,"mouseup",S)))},[S]),h.useEffect(()=>{O&&b&&(F!==null&&google.maps.event.removeListener(F),V(google.maps.event.addListener(O,"rightclick",b)))},[b]),h.useEffect(()=>{O&&N&&(q!==null&&google.maps.event.removeListener(q),Q(google.maps.event.addListener(O,"click",N)))},[N]),h.useEffect(()=>{O&&j&&(be!==null&&google.maps.event.removeListener(be),Ce(google.maps.event.addListener(O,"drag",j)))},[j]),h.useEffect(()=>{var X=new google.maps.Polyline(ad(ad({},e||RR),{},{map:E}));return c&&X.setPath(c),typeof s<"u"&&X.setVisible(s),typeof i<"u"&&X.setEditable(i),typeof r<"u"&&X.setDraggable(r),d&&I(google.maps.event.addListener(X,"dblclick",d)),m&&D(google.maps.event.addListener(X,"dragend",m)),f&&G(google.maps.event.addListener(X,"dragstart",f)),p&&Oe(google.maps.event.addListener(X,"mousedown",p)),v&&te(google.maps.event.addListener(X,"mousemove",v)),x&&z(google.maps.event.addListener(X,"mouseout",x)),w&&K(google.maps.event.addListener(X,"mouseover",w)),S&&A(google.maps.event.addListener(X,"mouseup",S)),b&&V(google.maps.event.addListener(X,"rightclick",b)),N&&Q(google.maps.event.addListener(X,"click",N)),j&&Ce(google.maps.event.addListener(X,"drag",j)),M(X),_&&_(X),()=>{R!==null&&google.maps.event.removeListener(R),H!==null&&google.maps.event.removeListener(H),Y!==null&&google.maps.event.removeListener(Y),ie!==null&&google.maps.event.removeListener(ie),ce!==null&&google.maps.event.removeListener(ce),k!==null&&google.maps.event.removeListener(k),U!==null&&google.maps.event.removeListener(U),T!==null&&google.maps.event.removeListener(T),F!==null&&google.maps.event.removeListener(F),q!==null&&google.maps.event.removeListener(q),C&&C(X),X.setMap(null)}},[]),null}h.memo(PR);class Im extends h.PureComponent{constructor(){super(...arguments),Le(this,"registeredEvents",[]),Le(this,"state",{polyline:null}),Le(this,"setPolylineCallback",()=>{this.state.polyline!==null&&this.props.onLoad&&this.props.onLoad(this.state.polyline)})}componentDidMount(){var e=new google.maps.Polyline(ad(ad({},this.props.options),{},{map:this.context}));this.registeredEvents=At({updaterMap:b0,eventMap:v0,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{polyline:e}},this.setPolylineCallback)}componentDidUpdate(e){this.state.polyline!==null&&(zt(this.registeredEvents),this.registeredEvents=At({updaterMap:b0,eventMap:v0,prevProps:e,nextProps:this.props,instance:this.state.polyline}))}componentWillUnmount(){this.state.polyline!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.polyline),zt(this.registeredEvents),this.state.polyline.setMap(null))}render(){return null}}Le(Im,"contextType",Ot);function y0(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,i)}return r}function x0(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?y0(Object(r),!0).forEach(function(i){Le(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y0(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}var w0={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},S0={draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},path(t,e){t.setPath(e)},paths(t,e){t.setPaths(e)},visible(t,e){t.setVisible(e)}};function zR(t){var{options:e,draggable:r,editable:i,visible:s,path:c,paths:d,onDblClick:m,onDragEnd:f,onDragStart:p,onMouseDown:v,onMouseMove:x,onMouseOut:w,onMouseOver:S,onMouseUp:b,onRightClick:N,onClick:j,onDrag:_,onLoad:C,onUnmount:E,onEdit:O}=t,M=h.useContext(Ot),[R,I]=h.useState(null),[H,D]=h.useState(null),[Y,G]=h.useState(null),[ie,Oe]=h.useState(null),[ce,te]=h.useState(null),[k,z]=h.useState(null),[U,K]=h.useState(null),[T,A]=h.useState(null),[F,V]=h.useState(null),[q,Q]=h.useState(null),[be,Ce]=h.useState(null),[X,W]=h.useState(null);return h.useEffect(()=>{R!==null&&R.setMap(M)},[M]),h.useEffect(()=>{typeof e<"u"&&R!==null&&R.setOptions(e)},[R,e]),h.useEffect(()=>{typeof r<"u"&&R!==null&&R.setDraggable(r)},[R,r]),h.useEffect(()=>{typeof i<"u"&&R!==null&&R.setEditable(i)},[R,i]),h.useEffect(()=>{typeof s<"u"&&R!==null&&R.setVisible(s)},[R,s]),h.useEffect(()=>{typeof c<"u"&&R!==null&&R.setPath(c)},[R,c]),h.useEffect(()=>{typeof d<"u"&&R!==null&&R.setPaths(d)},[R,d]),h.useEffect(()=>{R&&typeof m=="function"&&(H!==null&&google.maps.event.removeListener(H),D(google.maps.event.addListener(R,"dblclick",m)))},[m]),h.useEffect(()=>{R&&(google.maps.event.addListener(R.getPath(),"insert_at",()=>{O==null||O(R)}),google.maps.event.addListener(R.getPath(),"set_at",()=>{O==null||O(R)}),google.maps.event.addListener(R.getPath(),"remove_at",()=>{O==null||O(R)}))},[R,O]),h.useEffect(()=>{R&&typeof f=="function"&&(Y!==null&&google.maps.event.removeListener(Y),G(google.maps.event.addListener(R,"dragend",f)))},[f]),h.useEffect(()=>{R&&typeof p=="function"&&(ie!==null&&google.maps.event.removeListener(ie),Oe(google.maps.event.addListener(R,"dragstart",p)))},[p]),h.useEffect(()=>{R&&typeof v=="function"&&(ce!==null&&google.maps.event.removeListener(ce),te(google.maps.event.addListener(R,"mousedown",v)))},[v]),h.useEffect(()=>{R&&typeof x=="function"&&(k!==null&&google.maps.event.removeListener(k),z(google.maps.event.addListener(R,"mousemove",x)))},[x]),h.useEffect(()=>{R&&typeof w=="function"&&(U!==null&&google.maps.event.removeListener(U),K(google.maps.event.addListener(R,"mouseout",w)))},[w]),h.useEffect(()=>{R&&typeof S=="function"&&(T!==null&&google.maps.event.removeListener(T),A(google.maps.event.addListener(R,"mouseover",S)))},[S]),h.useEffect(()=>{R&&typeof b=="function"&&(F!==null&&google.maps.event.removeListener(F),V(google.maps.event.addListener(R,"mouseup",b)))},[b]),h.useEffect(()=>{R&&typeof N=="function"&&(q!==null&&google.maps.event.removeListener(q),Q(google.maps.event.addListener(R,"rightclick",N)))},[N]),h.useEffect(()=>{R&&typeof j=="function"&&(be!==null&&google.maps.event.removeListener(be),Ce(google.maps.event.addListener(R,"click",j)))},[j]),h.useEffect(()=>{R&&typeof _=="function"&&(X!==null&&google.maps.event.removeListener(X),W(google.maps.event.addListener(R,"drag",_)))},[_]),h.useEffect(()=>{var J=new google.maps.Polygon(x0(x0({},e),{},{map:M}));return c&&J.setPath(c),d&&J.setPaths(d),typeof s<"u"&&J.setVisible(s),typeof i<"u"&&J.setEditable(i),typeof r<"u"&&J.setDraggable(r),m&&D(google.maps.event.addListener(J,"dblclick",m)),f&&G(google.maps.event.addListener(J,"dragend",f)),p&&Oe(google.maps.event.addListener(J,"dragstart",p)),v&&te(google.maps.event.addListener(J,"mousedown",v)),x&&z(google.maps.event.addListener(J,"mousemove",x)),w&&K(google.maps.event.addListener(J,"mouseout",w)),S&&A(google.maps.event.addListener(J,"mouseover",S)),b&&V(google.maps.event.addListener(J,"mouseup",b)),N&&Q(google.maps.event.addListener(J,"rightclick",N)),j&&Ce(google.maps.event.addListener(J,"click",j)),_&&W(google.maps.event.addListener(J,"drag",_)),I(J),C&&C(J),()=>{H!==null&&google.maps.event.removeListener(H),Y!==null&&google.maps.event.removeListener(Y),ie!==null&&google.maps.event.removeListener(ie),ce!==null&&google.maps.event.removeListener(ce),k!==null&&google.maps.event.removeListener(k),U!==null&&google.maps.event.removeListener(U),T!==null&&google.maps.event.removeListener(T),F!==null&&google.maps.event.removeListener(F),q!==null&&google.maps.event.removeListener(q),be!==null&&google.maps.event.removeListener(be),E&&E(J),J.setMap(null)}},[]),null}h.memo(zR);class $1 extends h.PureComponent{constructor(){super(...arguments),Le(this,"registeredEvents",[])}componentDidMount(){var e=this.props.options||{};this.polygon=new google.maps.Polygon(e),this.polygon.setMap(this.context),this.registeredEvents=At({updaterMap:S0,eventMap:w0,prevProps:{},nextProps:this.props,instance:this.polygon}),this.props.onLoad&&this.props.onLoad(this.polygon)}componentDidUpdate(e){this.polygon&&(zt(this.registeredEvents),this.registeredEvents=At({updaterMap:S0,eventMap:w0,prevProps:e,nextProps:this.props,instance:this.polygon}))}componentWillUnmount(){this.polygon&&(this.props.onUnmount&&this.props.onUnmount(this.polygon),zt(this.registeredEvents),this.polygon&&this.polygon.setMap(null))}render(){return null}}Le($1,"contextType",Ot);function j0(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,i)}return r}function id(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?j0(Object(r),!0).forEach(function(i){Le(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):j0(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}var _0={onBoundsChanged:"bounds_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},N0={bounds(t,e){t.setBounds(e)},draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},visible(t,e){t.setVisible(e)}};function $R(t){var{options:e,bounds:r,draggable:i,editable:s,visible:c,onDblClick:d,onDragEnd:m,onDragStart:f,onMouseDown:p,onMouseMove:v,onMouseOut:x,onMouseOver:w,onMouseUp:S,onRightClick:b,onClick:N,onDrag:j,onBoundsChanged:_,onLoad:C,onUnmount:E}=t,O=h.useContext(Ot),[M,R]=h.useState(null),[I,H]=h.useState(null),[D,Y]=h.useState(null),[G,ie]=h.useState(null),[Oe,ce]=h.useState(null),[te,k]=h.useState(null),[z,U]=h.useState(null),[K,T]=h.useState(null),[A,F]=h.useState(null),[V,q]=h.useState(null),[Q,be]=h.useState(null),[Ce,X]=h.useState(null),[W,J]=h.useState(null);return h.useEffect(()=>{M!==null&&M.setMap(O)},[O]),h.useEffect(()=>{typeof e<"u"&&M!==null&&M.setOptions(e)},[M,e]),h.useEffect(()=>{typeof i<"u"&&M!==null&&M.setDraggable(i)},[M,i]),h.useEffect(()=>{typeof s<"u"&&M!==null&&M.setEditable(s)},[M,s]),h.useEffect(()=>{typeof c<"u"&&M!==null&&M.setVisible(c)},[M,c]),h.useEffect(()=>{typeof r<"u"&&M!==null&&M.setBounds(r)},[M,r]),h.useEffect(()=>{M&&d&&(I!==null&&google.maps.event.removeListener(I),H(google.maps.event.addListener(M,"dblclick",d)))},[d]),h.useEffect(()=>{M&&m&&(D!==null&&google.maps.event.removeListener(D),Y(google.maps.event.addListener(M,"dragend",m)))},[m]),h.useEffect(()=>{M&&f&&(G!==null&&google.maps.event.removeListener(G),ie(google.maps.event.addListener(M,"dragstart",f)))},[f]),h.useEffect(()=>{M&&p&&(Oe!==null&&google.maps.event.removeListener(Oe),ce(google.maps.event.addListener(M,"mousedown",p)))},[p]),h.useEffect(()=>{M&&v&&(te!==null&&google.maps.event.removeListener(te),k(google.maps.event.addListener(M,"mousemove",v)))},[v]),h.useEffect(()=>{M&&x&&(z!==null&&google.maps.event.removeListener(z),U(google.maps.event.addListener(M,"mouseout",x)))},[x]),h.useEffect(()=>{M&&w&&(K!==null&&google.maps.event.removeListener(K),T(google.maps.event.addListener(M,"mouseover",w)))},[w]),h.useEffect(()=>{M&&S&&(A!==null&&google.maps.event.removeListener(A),F(google.maps.event.addListener(M,"mouseup",S)))},[S]),h.useEffect(()=>{M&&b&&(V!==null&&google.maps.event.removeListener(V),q(google.maps.event.addListener(M,"rightclick",b)))},[b]),h.useEffect(()=>{M&&N&&(Q!==null&&google.maps.event.removeListener(Q),be(google.maps.event.addListener(M,"click",N)))},[N]),h.useEffect(()=>{M&&j&&(Ce!==null&&google.maps.event.removeListener(Ce),X(google.maps.event.addListener(M,"drag",j)))},[j]),h.useEffect(()=>{M&&_&&(W!==null&&google.maps.event.removeListener(W),J(google.maps.event.addListener(M,"bounds_changed",_)))},[_]),h.useEffect(()=>{var ue=new google.maps.Rectangle(id(id({},e),{},{map:O}));return typeof c<"u"&&ue.setVisible(c),typeof s<"u"&&ue.setEditable(s),typeof i<"u"&&ue.setDraggable(i),typeof r<"u"&&ue.setBounds(r),d&&H(google.maps.event.addListener(ue,"dblclick",d)),m&&Y(google.maps.event.addListener(ue,"dragend",m)),f&&ie(google.maps.event.addListener(ue,"dragstart",f)),p&&ce(google.maps.event.addListener(ue,"mousedown",p)),v&&k(google.maps.event.addListener(ue,"mousemove",v)),x&&U(google.maps.event.addListener(ue,"mouseout",x)),w&&T(google.maps.event.addListener(ue,"mouseover",w)),S&&F(google.maps.event.addListener(ue,"mouseup",S)),b&&q(google.maps.event.addListener(ue,"rightclick",b)),N&&be(google.maps.event.addListener(ue,"click",N)),j&&X(google.maps.event.addListener(ue,"drag",j)),_&&J(google.maps.event.addListener(ue,"bounds_changed",_)),R(ue),C&&C(ue),()=>{I!==null&&google.maps.event.removeListener(I),D!==null&&google.maps.event.removeListener(D),G!==null&&google.maps.event.removeListener(G),Oe!==null&&google.maps.event.removeListener(Oe),te!==null&&google.maps.event.removeListener(te),z!==null&&google.maps.event.removeListener(z),K!==null&&google.maps.event.removeListener(K),A!==null&&google.maps.event.removeListener(A),V!==null&&google.maps.event.removeListener(V),Q!==null&&google.maps.event.removeListener(Q),Ce!==null&&google.maps.event.removeListener(Ce),W!==null&&google.maps.event.removeListener(W),E&&E(ue),ue.setMap(null)}},[]),null}h.memo($R);class UR extends h.PureComponent{constructor(){super(...arguments),Le(this,"registeredEvents",[]),Le(this,"state",{rectangle:null}),Le(this,"setRectangleCallback",()=>{this.state.rectangle!==null&&this.props.onLoad&&this.props.onLoad(this.state.rectangle)})}componentDidMount(){var e=new google.maps.Rectangle(id(id({},this.props.options),{},{map:this.context}));this.registeredEvents=At({updaterMap:N0,eventMap:_0,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{rectangle:e}},this.setRectangleCallback)}componentDidUpdate(e){this.state.rectangle!==null&&(zt(this.registeredEvents),this.registeredEvents=At({updaterMap:N0,eventMap:_0,prevProps:e,nextProps:this.props,instance:this.state.rectangle}))}componentWillUnmount(){this.state.rectangle!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.rectangle),zt(this.registeredEvents),this.state.rectangle.setMap(null))}render(){return null}}Le(UR,"contextType",Ot);function C0(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,i)}return r}function sd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?C0(Object(r),!0).forEach(function(i){Le(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):C0(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}var E0={onCenterChanged:"center_changed",onRadiusChanged:"radius_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},O0={center(t,e){t.setCenter(e)},draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},radius(t,e){t.setRadius(e)},visible(t,e){t.setVisible(e)}},VR={};function IR(t){var{options:e,center:r,radius:i,draggable:s,editable:c,visible:d,onDblClick:m,onDragEnd:f,onDragStart:p,onMouseDown:v,onMouseMove:x,onMouseOut:w,onMouseOver:S,onMouseUp:b,onRightClick:N,onClick:j,onDrag:_,onCenterChanged:C,onRadiusChanged:E,onLoad:O,onUnmount:M}=t,R=h.useContext(Ot),[I,H]=h.useState(null),[D,Y]=h.useState(null),[G,ie]=h.useState(null),[Oe,ce]=h.useState(null),[te,k]=h.useState(null),[z,U]=h.useState(null),[K,T]=h.useState(null),[A,F]=h.useState(null),[V,q]=h.useState(null),[Q,be]=h.useState(null),[Ce,X]=h.useState(null),[W,J]=h.useState(null),[ue,Z]=h.useState(null),[_e,ke]=h.useState(null);return h.useEffect(()=>{I!==null&&I.setMap(R)},[R]),h.useEffect(()=>{typeof e<"u"&&I!==null&&I.setOptions(e)},[I,e]),h.useEffect(()=>{typeof s<"u"&&I!==null&&I.setDraggable(s)},[I,s]),h.useEffect(()=>{typeof c<"u"&&I!==null&&I.setEditable(c)},[I,c]),h.useEffect(()=>{typeof d<"u"&&I!==null&&I.setVisible(d)},[I,d]),h.useEffect(()=>{typeof i=="number"&&I!==null&&I.setRadius(i)},[I,i]),h.useEffect(()=>{typeof r<"u"&&I!==null&&I.setCenter(r)},[I,r]),h.useEffect(()=>{I&&m&&(D!==null&&google.maps.event.removeListener(D),Y(google.maps.event.addListener(I,"dblclick",m)))},[m]),h.useEffect(()=>{I&&f&&(G!==null&&google.maps.event.removeListener(G),ie(google.maps.event.addListener(I,"dragend",f)))},[f]),h.useEffect(()=>{I&&p&&(Oe!==null&&google.maps.event.removeListener(Oe),ce(google.maps.event.addListener(I,"dragstart",p)))},[p]),h.useEffect(()=>{I&&v&&(te!==null&&google.maps.event.removeListener(te),k(google.maps.event.addListener(I,"mousedown",v)))},[v]),h.useEffect(()=>{I&&x&&(z!==null&&google.maps.event.removeListener(z),U(google.maps.event.addListener(I,"mousemove",x)))},[x]),h.useEffect(()=>{I&&w&&(K!==null&&google.maps.event.removeListener(K),T(google.maps.event.addListener(I,"mouseout",w)))},[w]),h.useEffect(()=>{I&&S&&(A!==null&&google.maps.event.removeListener(A),F(google.maps.event.addListener(I,"mouseover",S)))},[S]),h.useEffect(()=>{I&&b&&(V!==null&&google.maps.event.removeListener(V),q(google.maps.event.addListener(I,"mouseup",b)))},[b]),h.useEffect(()=>{I&&N&&(Q!==null&&google.maps.event.removeListener(Q),be(google.maps.event.addListener(I,"rightclick",N)))},[N]),h.useEffect(()=>{I&&j&&(Ce!==null&&google.maps.event.removeListener(Ce),X(google.maps.event.addListener(I,"click",j)))},[j]),h.useEffect(()=>{I&&_&&(W!==null&&google.maps.event.removeListener(W),J(google.maps.event.addListener(I,"drag",_)))},[_]),h.useEffect(()=>{I&&C&&(ue!==null&&google.maps.event.removeListener(ue),Z(google.maps.event.addListener(I,"center_changed",C)))},[j]),h.useEffect(()=>{I&&E&&(_e!==null&&google.maps.event.removeListener(_e),ke(google.maps.event.addListener(I,"radius_changed",E)))},[E]),h.useEffect(()=>{var Be=new google.maps.Circle(sd(sd({},e||VR),{},{map:R}));return typeof i=="number"&&Be.setRadius(i),typeof r<"u"&&Be.setCenter(r),typeof i=="number"&&Be.setRadius(i),typeof d<"u"&&Be.setVisible(d),typeof c<"u"&&Be.setEditable(c),typeof s<"u"&&Be.setDraggable(s),m&&Y(google.maps.event.addListener(Be,"dblclick",m)),f&&ie(google.maps.event.addListener(Be,"dragend",f)),p&&ce(google.maps.event.addListener(Be,"dragstart",p)),v&&k(google.maps.event.addListener(Be,"mousedown",v)),x&&U(google.maps.event.addListener(Be,"mousemove",x)),w&&T(google.maps.event.addListener(Be,"mouseout",w)),S&&F(google.maps.event.addListener(Be,"mouseover",S)),b&&q(google.maps.event.addListener(Be,"mouseup",b)),N&&be(google.maps.event.addListener(Be,"rightclick",N)),j&&X(google.maps.event.addListener(Be,"click",j)),_&&J(google.maps.event.addListener(Be,"drag",_)),C&&Z(google.maps.event.addListener(Be,"center_changed",C)),E&&ke(google.maps.event.addListener(Be,"radius_changed",E)),H(Be),O&&O(Be),()=>{D!==null&&google.maps.event.removeListener(D),G!==null&&google.maps.event.removeListener(G),Oe!==null&&google.maps.event.removeListener(Oe),te!==null&&google.maps.event.removeListener(te),z!==null&&google.maps.event.removeListener(z),K!==null&&google.maps.event.removeListener(K),A!==null&&google.maps.event.removeListener(A),V!==null&&google.maps.event.removeListener(V),Q!==null&&google.maps.event.removeListener(Q),Ce!==null&&google.maps.event.removeListener(Ce),ue!==null&&google.maps.event.removeListener(ue),_e!==null&&google.maps.event.removeListener(_e),M&&M(Be),Be.setMap(null)}},[]),null}h.memo(IR);class U1 extends h.PureComponent{constructor(){super(...arguments),Le(this,"registeredEvents",[]),Le(this,"state",{circle:null}),Le(this,"setCircleCallback",()=>{this.state.circle!==null&&this.props.onLoad&&this.props.onLoad(this.state.circle)})}componentDidMount(){var e=new google.maps.Circle(sd(sd({},this.props.options),{},{map:this.context}));this.registeredEvents=At({updaterMap:O0,eventMap:E0,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{circle:e}},this.setCircleCallback)}componentDidUpdate(e){this.state.circle!==null&&(zt(this.registeredEvents),this.registeredEvents=At({updaterMap:O0,eventMap:E0,prevProps:e,nextProps:this.props,instance:this.state.circle}))}componentWillUnmount(){if(this.state.circle!==null){var e;this.props.onUnmount&&this.props.onUnmount(this.state.circle),zt(this.registeredEvents),(e=this.state.circle)===null||e===void 0||e.setMap(null)}}render(){return null}}Le(U1,"contextType",Ot);function M0(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,i)}return r}function od(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?M0(Object(r),!0).forEach(function(i){Le(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):M0(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}var L0={onClick:"click",onDblClick:"dblclick",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick",onAddFeature:"addfeature",onRemoveFeature:"removefeature",onRemoveProperty:"removeproperty",onSetGeometry:"setgeometry",onSetProperty:"setproperty"},k0={add(t,e){t.add(e)},addgeojson(t,e,r){t.addGeoJson(e,r)},contains(t,e){t.contains(e)},foreach(t,e){t.forEach(e)},loadgeojson(t,e,r,i){t.loadGeoJson(e,r,i)},overridestyle(t,e,r){t.overrideStyle(e,r)},remove(t,e){t.remove(e)},revertstyle(t,e){t.revertStyle(e)},controlposition(t,e){t.setControlPosition(e)},controls(t,e){t.setControls(e)},drawingmode(t,e){t.setDrawingMode(e)},map(t,e){t.setMap(e)},style(t,e){t.setStyle(e)},togeojson(t,e){t.toGeoJson(e)}};function BR(t){var{options:e,onClick:r,onDblClick:i,onMouseDown:s,onMouseMove:c,onMouseOut:d,onMouseOver:m,onMouseUp:f,onRightClick:p,onAddFeature:v,onRemoveFeature:x,onRemoveProperty:w,onSetGeometry:S,onSetProperty:b,onLoad:N,onUnmount:j}=t,_=h.useContext(Ot),[C,E]=h.useState(null),[O,M]=h.useState(null),[R,I]=h.useState(null),[H,D]=h.useState(null),[Y,G]=h.useState(null),[ie,Oe]=h.useState(null),[ce,te]=h.useState(null),[k,z]=h.useState(null),[U,K]=h.useState(null),[T,A]=h.useState(null),[F,V]=h.useState(null),[q,Q]=h.useState(null),[be,Ce]=h.useState(null),[X,W]=h.useState(null);return h.useEffect(()=>{C!==null&&C.setMap(_)},[_]),h.useEffect(()=>{C&&i&&(O!==null&&google.maps.event.removeListener(O),M(google.maps.event.addListener(C,"dblclick",i)))},[i]),h.useEffect(()=>{C&&s&&(R!==null&&google.maps.event.removeListener(R),I(google.maps.event.addListener(C,"mousedown",s)))},[s]),h.useEffect(()=>{C&&c&&(H!==null&&google.maps.event.removeListener(H),D(google.maps.event.addListener(C,"mousemove",c)))},[c]),h.useEffect(()=>{C&&d&&(Y!==null&&google.maps.event.removeListener(Y),G(google.maps.event.addListener(C,"mouseout",d)))},[d]),h.useEffect(()=>{C&&m&&(ie!==null&&google.maps.event.removeListener(ie),Oe(google.maps.event.addListener(C,"mouseover",m)))},[m]),h.useEffect(()=>{C&&f&&(ce!==null&&google.maps.event.removeListener(ce),te(google.maps.event.addListener(C,"mouseup",f)))},[f]),h.useEffect(()=>{C&&p&&(k!==null&&google.maps.event.removeListener(k),z(google.maps.event.addListener(C,"rightclick",p)))},[p]),h.useEffect(()=>{C&&r&&(U!==null&&google.maps.event.removeListener(U),K(google.maps.event.addListener(C,"click",r)))},[r]),h.useEffect(()=>{C&&v&&(T!==null&&google.maps.event.removeListener(T),A(google.maps.event.addListener(C,"addfeature",v)))},[v]),h.useEffect(()=>{C&&x&&(F!==null&&google.maps.event.removeListener(F),V(google.maps.event.addListener(C,"removefeature",x)))},[x]),h.useEffect(()=>{C&&w&&(q!==null&&google.maps.event.removeListener(q),Q(google.maps.event.addListener(C,"removeproperty",w)))},[w]),h.useEffect(()=>{C&&S&&(be!==null&&google.maps.event.removeListener(be),Ce(google.maps.event.addListener(C,"setgeometry",S)))},[S]),h.useEffect(()=>{C&&b&&(X!==null&&google.maps.event.removeListener(X),W(google.maps.event.addListener(C,"setproperty",b)))},[b]),h.useEffect(()=>{if(_!==null){var J=new google.maps.Data(od(od({},e),{},{map:_}));i&&M(google.maps.event.addListener(J,"dblclick",i)),s&&I(google.maps.event.addListener(J,"mousedown",s)),c&&D(google.maps.event.addListener(J,"mousemove",c)),d&&G(google.maps.event.addListener(J,"mouseout",d)),m&&Oe(google.maps.event.addListener(J,"mouseover",m)),f&&te(google.maps.event.addListener(J,"mouseup",f)),p&&z(google.maps.event.addListener(J,"rightclick",p)),r&&K(google.maps.event.addListener(J,"click",r)),v&&A(google.maps.event.addListener(J,"addfeature",v)),x&&V(google.maps.event.addListener(J,"removefeature",x)),w&&Q(google.maps.event.addListener(J,"removeproperty",w)),S&&Ce(google.maps.event.addListener(J,"setgeometry",S)),b&&W(google.maps.event.addListener(J,"setproperty",b)),E(J),N&&N(J)}return()=>{C&&(O!==null&&google.maps.event.removeListener(O),R!==null&&google.maps.event.removeListener(R),H!==null&&google.maps.event.removeListener(H),Y!==null&&google.maps.event.removeListener(Y),ie!==null&&google.maps.event.removeListener(ie),ce!==null&&google.maps.event.removeListener(ce),k!==null&&google.maps.event.removeListener(k),U!==null&&google.maps.event.removeListener(U),T!==null&&google.maps.event.removeListener(T),F!==null&&google.maps.event.removeListener(F),q!==null&&google.maps.event.removeListener(q),be!==null&&google.maps.event.removeListener(be),X!==null&&google.maps.event.removeListener(X),j&&j(C),C.setMap(null))}},[]),null}h.memo(BR);class HR extends h.PureComponent{constructor(){super(...arguments),Le(this,"registeredEvents",[]),Le(this,"state",{data:null}),Le(this,"setDataCallback",()=>{this.state.data!==null&&this.props.onLoad&&this.props.onLoad(this.state.data)})}componentDidMount(){if(this.context!==null){var e=new google.maps.Data(od(od({},this.props.options),{},{map:this.context}));this.registeredEvents=At({updaterMap:k0,eventMap:L0,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({data:e}),this.setDataCallback)}}componentDidUpdate(e){this.state.data!==null&&(zt(this.registeredEvents),this.registeredEvents=At({updaterMap:k0,eventMap:L0,prevProps:e,nextProps:this.props,instance:this.state.data}))}componentWillUnmount(){this.state.data!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.data),zt(this.registeredEvents),this.state.data&&this.state.data.setMap(null))}render(){return null}}Le(HR,"contextType",Ot);function T0(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,i)}return r}function A0(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?T0(Object(r),!0).forEach(function(i){Le(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):T0(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}var D0={onClick:"click",onDefaultViewportChanged:"defaultviewport_changed",onStatusChanged:"status_changed"},R0={options(t,e){t.setOptions(e)},url(t,e){t.setUrl(e)},zIndex(t,e){t.setZIndex(e)}};class FR extends h.PureComponent{constructor(){super(...arguments),Le(this,"registeredEvents",[]),Le(this,"state",{kmlLayer:null}),Le(this,"setKmlLayerCallback",()=>{this.state.kmlLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.kmlLayer)})}componentDidMount(){var e=new google.maps.KmlLayer(A0(A0({},this.props.options),{},{map:this.context}));this.registeredEvents=At({updaterMap:R0,eventMap:D0,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{kmlLayer:e}},this.setKmlLayerCallback)}componentDidUpdate(e){this.state.kmlLayer!==null&&(zt(this.registeredEvents),this.registeredEvents=At({updaterMap:R0,eventMap:D0,prevProps:e,nextProps:this.props,instance:this.state.kmlLayer}))}componentWillUnmount(){this.state.kmlLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.kmlLayer),zt(this.registeredEvents),this.state.kmlLayer.setMap(null))}render(){return null}}Le(FR,"contextType",Ot);function V1(t,e){return typeof e=="function"?e(t.offsetWidth,t.offsetHeight):{x:0,y:0}}function YR(t,e){return new e(t.lat,t.lng)}function qR(t,e){return new e(new google.maps.LatLng(t.ne.lat,t.ne.lng),new google.maps.LatLng(t.sw.lat,t.sw.lng))}function GR(t,e,r){return t instanceof e?t:r(t,e)}function WR(t,e,r){return t instanceof e?t:r(t,e)}function ZR(t,e,r){var i=t&&t.fromLatLngToDivPixel(r.getNorthEast()),s=t&&t.fromLatLngToDivPixel(r.getSouthWest());return i&&s?{left:"".concat(s.x+e.x,"px"),top:"".concat(i.y+e.y,"px"),width:"".concat(i.x-s.x-e.x,"px"),height:"".concat(s.y-i.y-e.y,"px")}:{left:"-9999px",top:"-9999px"}}function XR(t,e,r){var i=t&&t.fromLatLngToDivPixel(r);if(i){var{x:s,y:c}=i;return{left:"".concat(s+e.x,"px"),top:"".concat(c+e.y,"px")}}return{left:"-9999px",top:"-9999px"}}function I1(t,e,r,i){return r!==void 0?ZR(t,e,WR(r,google.maps.LatLngBounds,qR)):XR(t,e,GR(i,google.maps.LatLng,YR))}function KR(t,e){return t.left===e.left&&t.top===e.top&&t.width===e.height&&t.height===e.height}function P0(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,i)}return r}function QR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?P0(Object(r),!0).forEach(function(i){Le(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P0(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function JR(t,e,r,i,s){class c extends google.maps.OverlayView{constructor(m,f,p,v){super(),this.container=m,this.pane=f,this.position=p,this.bounds=v}onAdd(){var m,f=(m=this.getPanes())===null||m===void 0?void 0:m[this.pane];f==null||f.appendChild(this.container)}draw(){var m=this.getProjection(),f=QR({},this.container?V1(this.container,s):{x:0,y:0}),p=I1(m,f,this.bounds,this.position);for(var[v,x]of Object.entries(p))this.container.style[v]=x}onRemove(){this.container.parentNode!==null&&this.container.parentNode.removeChild(this.container)}}return new c(t,e,r,i)}function z0(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,i)}return r}function eP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?z0(Object(r),!0).forEach(function(i){Le(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):z0(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function $0(t){if(!t)return"";var e=t instanceof google.maps.LatLng?t:new google.maps.LatLng(t.lat,t.lng);return e+""}function U0(t){if(!t)return"";var e=t instanceof google.maps.LatLngBounds?t:new google.maps.LatLngBounds(new google.maps.LatLng(t.south,t.east),new google.maps.LatLng(t.north,t.west));return e+""}function tP(t){var{position:e,bounds:r,mapPaneName:i,zIndex:s,onLoad:c,onUnmount:d,getPixelPositionOffset:m,children:f}=t,p=h.useContext(Ot),v=h.useMemo(()=>{var w=document.createElement("div");return w.style.position="absolute",w},[]),x=h.useMemo(()=>JR(v,i,e,r,m),[v,i,e,r]);return h.useEffect(()=>(c==null||c(x),x==null||x.setMap(p),()=>{d==null||d(x),x==null||x.setMap(null)}),[p,x]),h.useEffect(()=>{v.style.zIndex="".concat(s)},[s,v]),cs.createPortal(f,v)}h.memo(tP);class yo extends h.PureComponent{constructor(e){super(e),Le(this,"state",{paneEl:null,containerStyle:{position:"absolute"}}),Le(this,"updatePane",()=>{var i=this.props.mapPaneName,s=this.overlayView.getPanes();Tn(!!i,"OverlayView requires props.mapPaneName but got %s",i),s?this.setState({paneEl:s[i]}):this.setState({paneEl:null})}),Le(this,"onAdd",()=>{var i,s;this.updatePane(),(i=(s=this.props).onLoad)===null||i===void 0||i.call(s,this.overlayView)}),Le(this,"onPositionElement",()=>{var i=this.overlayView.getProjection(),s=eP({x:0,y:0},this.containerRef.current?V1(this.containerRef.current,this.props.getPixelPositionOffset):{}),c=I1(i,s,this.props.bounds,this.props.position);if(!KR(c,{left:this.state.containerStyle.left,top:this.state.containerStyle.top,width:this.state.containerStyle.width,height:this.state.containerStyle.height})){var d,m,f,p;this.setState({containerStyle:{top:(d=c.top)!==null&&d!==void 0?d:0,left:(m=c.left)!==null&&m!==void 0?m:0,width:(f=c.width)!==null&&f!==void 0?f:0,height:(p=c.height)!==null&&p!==void 0?p:0,position:"absolute"}})}}),Le(this,"draw",()=>{this.onPositionElement()}),Le(this,"onRemove",()=>{var i,s;this.setState(()=>({paneEl:null})),(i=(s=this.props).onUnmount)===null||i===void 0||i.call(s,this.overlayView)}),this.containerRef=h.createRef();var r=new google.maps.OverlayView;r.onAdd=this.onAdd,r.draw=this.draw,r.onRemove=this.onRemove,this.overlayView=r}componentDidMount(){this.overlayView.setMap(this.context)}componentDidUpdate(e){var r=$0(e.position),i=$0(this.props.position),s=U0(e.bounds),c=U0(this.props.bounds);(r!==i||s!==c)&&this.overlayView.draw(),e.mapPaneName!==this.props.mapPaneName&&this.updatePane()}componentWillUnmount(){this.overlayView.setMap(null)}render(){var e=this.state.paneEl;return e?cs.createPortal(l.jsx("div",{ref:this.containerRef,style:this.state.containerStyle,children:h.Children.only(this.props.children)}),e):null}}Le(yo,"FLOAT_PANE","floatPane");Le(yo,"MAP_PANE","mapPane");Le(yo,"MARKER_LAYER","markerLayer");Le(yo,"OVERLAY_LAYER","overlayLayer");Le(yo,"OVERLAY_MOUSE_TARGET","overlayMouseTarget");Le(yo,"contextType",Ot);function nP(){}function V0(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,i)}return r}function I0(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?V0(Object(r),!0).forEach(function(i){Le(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):V0(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}var B0={onDblClick:"dblclick",onClick:"click"},H0={opacity(t,e){t.setOpacity(e)}};function rP(t){var{url:e,bounds:r,options:i,visible:s}=t,c=h.useContext(Ot),d=new google.maps.LatLngBounds(new google.maps.LatLng(r.south,r.west),new google.maps.LatLng(r.north,r.east)),m=h.useMemo(()=>new google.maps.GroundOverlay(e,d,i),[]);return h.useEffect(()=>{m!==null&&m.setMap(c)},[c]),h.useEffect(()=>{typeof e<"u"&&m!==null&&(m.set("url",e),m.setMap(c))},[m,e]),h.useEffect(()=>{typeof s<"u"&&m!==null&&m.setOpacity(s?1:0)},[m,s]),h.useEffect(()=>{var f=new google.maps.LatLngBounds(new google.maps.LatLng(r.south,r.west),new google.maps.LatLng(r.north,r.east));typeof r<"u"&&m!==null&&(m.set("bounds",f),m.setMap(c))},[m,r]),null}h.memo(rP);class B1 extends h.PureComponent{constructor(){super(...arguments),Le(this,"registeredEvents",[]),Le(this,"state",{groundOverlay:null}),Le(this,"setGroundOverlayCallback",()=>{this.state.groundOverlay!==null&&this.props.onLoad&&this.props.onLoad(this.state.groundOverlay)})}componentDidMount(){Tn(!!this.props.url||!!this.props.bounds,"For GroundOverlay, url and bounds are passed in to constructor and are immutable after instantiated. This is the behavior of Google Maps JavaScript API v3 ( See https://developers.google.com/maps/documentation/javascript/reference#GroundOverlay) Hence, use the corresponding two props provided by `react-google-maps-api`, url and bounds. In some cases, you'll need the GroundOverlay component to reflect the changes of url and bounds. You can leverage the React's key property to remount the component. Typically, just `key={url}` would serve your need. See https://github.com/tomchentw/react-google-maps/issues/655");var e=new google.maps.GroundOverlay(this.props.url,this.props.bounds,I0(I0({},this.props.options),{},{map:this.context}));this.registeredEvents=At({updaterMap:H0,eventMap:B0,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{groundOverlay:e}},this.setGroundOverlayCallback)}componentDidUpdate(e){this.state.groundOverlay!==null&&(zt(this.registeredEvents),this.registeredEvents=At({updaterMap:H0,eventMap:B0,prevProps:e,nextProps:this.props,instance:this.state.groundOverlay}))}componentWillUnmount(){this.state.groundOverlay&&(this.props.onUnmount&&this.props.onUnmount(this.state.groundOverlay),this.state.groundOverlay.setMap(null))}render(){return null}}Le(B1,"defaultProps",{onLoad:nP});Le(B1,"contextType",Ot);function F0(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,i)}return r}function ld(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?F0(Object(r),!0).forEach(function(i){Le(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):F0(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}var Y0={},q0={data(t,e){t.setData(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)}};function aP(t){var{data:e,onLoad:r,onUnmount:i,options:s}=t,c=h.useContext(Ot),[d,m]=h.useState(null);return h.useEffect(()=>{google.maps.visualization||Tn(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} in useJsApiScript? %s',google.maps.visualization)},[]),h.useEffect(()=>{Tn(!!e,"data property is required in HeatmapLayer %s",e)},[e]),h.useEffect(()=>{d!==null&&d.setMap(c)},[c]),h.useEffect(()=>{s&&d!==null&&d.setOptions(s)},[d,s]),h.useEffect(()=>{var f=new google.maps.visualization.HeatmapLayer(ld(ld({},s),{},{data:e,map:c}));return m(f),r&&r(f),()=>{d!==null&&(i&&i(d),d.setMap(null))}},[]),null}h.memo(aP);class iP extends h.PureComponent{constructor(){super(...arguments),Le(this,"registeredEvents",[]),Le(this,"state",{heatmapLayer:null}),Le(this,"setHeatmapLayerCallback",()=>{this.state.heatmapLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.heatmapLayer)})}componentDidMount(){Tn(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} to <LoadScript />? %s',google.maps.visualization),Tn(!!this.props.data,"data property is required in HeatmapLayer %s",this.props.data);var e=new google.maps.visualization.HeatmapLayer(ld(ld({},this.props.options),{},{data:this.props.data,map:this.context}));this.registeredEvents=At({updaterMap:q0,eventMap:Y0,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{heatmapLayer:e}},this.setHeatmapLayerCallback)}componentDidUpdate(e){zt(this.registeredEvents),this.registeredEvents=At({updaterMap:q0,eventMap:Y0,prevProps:e,nextProps:this.props,instance:this.state.heatmapLayer})}componentWillUnmount(){this.state.heatmapLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.heatmapLayer),zt(this.registeredEvents),this.state.heatmapLayer.setMap(null))}render(){return null}}Le(iP,"contextType",Ot);var G0={onCloseClick:"closeclick",onPanoChanged:"pano_changed",onPositionChanged:"position_changed",onPovChanged:"pov_changed",onResize:"resize",onStatusChanged:"status_changed",onVisibleChanged:"visible_changed",onZoomChanged:"zoom_changed"},W0={register(t,e,r){t.registerPanoProvider(e,r)},links(t,e){t.setLinks(e)},motionTracking(t,e){t.setMotionTracking(e)},options(t,e){t.setOptions(e)},pano(t,e){t.setPano(e)},position(t,e){t.setPosition(e)},pov(t,e){t.setPov(e)},visible(t,e){t.setVisible(e)},zoom(t,e){t.setZoom(e)}};class sP extends h.PureComponent{constructor(){super(...arguments),Le(this,"registeredEvents",[]),Le(this,"state",{streetViewPanorama:null}),Le(this,"setStreetViewPanoramaCallback",()=>{this.state.streetViewPanorama!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewPanorama)})}componentDidMount(){var e,r,i=(e=(r=this.context)===null||r===void 0?void 0:r.getStreetView())!==null&&e!==void 0?e:null;this.registeredEvents=At({updaterMap:W0,eventMap:G0,prevProps:{},nextProps:this.props,instance:i}),this.setState(()=>({streetViewPanorama:i}),this.setStreetViewPanoramaCallback)}componentDidUpdate(e){this.state.streetViewPanorama!==null&&(zt(this.registeredEvents),this.registeredEvents=At({updaterMap:W0,eventMap:G0,prevProps:e,nextProps:this.props,instance:this.state.streetViewPanorama}))}componentWillUnmount(){this.state.streetViewPanorama!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.streetViewPanorama),zt(this.registeredEvents),this.state.streetViewPanorama.setVisible(!1))}render(){return null}}Le(sP,"contextType",Ot);class oP extends h.PureComponent{constructor(){super(...arguments),Le(this,"state",{streetViewService:null}),Le(this,"setStreetViewServiceCallback",()=>{this.state.streetViewService!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewService)})}componentDidMount(){var e=new google.maps.StreetViewService;this.setState(function(){return{streetViewService:e}},this.setStreetViewServiceCallback)}componentWillUnmount(){this.state.streetViewService!==null&&this.props.onUnmount&&this.props.onUnmount(this.state.streetViewService)}render(){return null}}Le(oP,"contextType",Ot);var Z0={onDirectionsChanged:"directions_changed"},X0={directions(t,e){t.setDirections(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},panel(t,e){t.setPanel(e)},routeIndex(t,e){t.setRouteIndex(e)}};class lP extends h.PureComponent{constructor(){super(...arguments),Le(this,"registeredEvents",[]),Le(this,"state",{directionsRenderer:null}),Le(this,"setDirectionsRendererCallback",()=>{this.state.directionsRenderer!==null&&(this.state.directionsRenderer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.directionsRenderer))})}componentDidMount(){var e=new google.maps.DirectionsRenderer(this.props.options);this.registeredEvents=At({updaterMap:X0,eventMap:Z0,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{directionsRenderer:e}},this.setDirectionsRendererCallback)}componentDidUpdate(e){this.state.directionsRenderer!==null&&(zt(this.registeredEvents),this.registeredEvents=At({updaterMap:X0,eventMap:Z0,prevProps:e,nextProps:this.props,instance:this.state.directionsRenderer}))}componentWillUnmount(){this.state.directionsRenderer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.directionsRenderer),zt(this.registeredEvents),this.state.directionsRenderer&&this.state.directionsRenderer.setMap(null))}render(){return null}}Le(lP,"contextType",Ot);var K0={onPlacesChanged:"places_changed"},Q0={bounds(t,e){t.setBounds(e)}};class cP extends h.PureComponent{constructor(){super(...arguments),Le(this,"registeredEvents",[]),Le(this,"containerElement",h.createRef()),Le(this,"state",{searchBox:null}),Le(this,"setSearchBoxCallback",()=>{this.state.searchBox!==null&&this.props.onLoad&&this.props.onLoad(this.state.searchBox)})}componentDidMount(){if(Tn(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places),this.containerElement!==null&&this.containerElement.current!==null){var e=this.containerElement.current.querySelector("input");if(e!==null){var r=new google.maps.places.SearchBox(e,this.props.options);this.registeredEvents=At({updaterMap:Q0,eventMap:K0,prevProps:{},nextProps:this.props,instance:r}),this.setState(function(){return{searchBox:r}},this.setSearchBoxCallback)}}}componentDidUpdate(e){this.state.searchBox!==null&&(zt(this.registeredEvents),this.registeredEvents=At({updaterMap:Q0,eventMap:K0,prevProps:e,nextProps:this.props,instance:this.state.searchBox}))}componentWillUnmount(){this.state.searchBox!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.searchBox),zt(this.registeredEvents))}render(){return l.jsx("div",{ref:this.containerElement,children:h.Children.only(this.props.children)})}}Le(cP,"contextType",Ot);var J0={onPlaceChanged:"place_changed"},ew={bounds(t,e){t.setBounds(e)},restrictions(t,e){t.setComponentRestrictions(e)},fields(t,e){t.setFields(e)},options(t,e){t.setOptions(e)},types(t,e){t.setTypes(e)}};class H1 extends h.PureComponent{constructor(){super(...arguments),Le(this,"registeredEvents",[]),Le(this,"containerElement",h.createRef()),Le(this,"state",{autocomplete:null}),Le(this,"setAutocompleteCallback",()=>{this.state.autocomplete!==null&&this.props.onLoad&&this.props.onLoad(this.state.autocomplete)})}componentDidMount(){var e;Tn(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places);var r=(e=this.containerElement.current)===null||e===void 0?void 0:e.querySelector("input");if(r){var i=new google.maps.places.Autocomplete(r,this.props.options);this.registeredEvents=At({updaterMap:ew,eventMap:J0,prevProps:{},nextProps:this.props,instance:i}),this.setState(()=>({autocomplete:i}),this.setAutocompleteCallback)}}componentDidUpdate(e){zt(this.registeredEvents),this.registeredEvents=At({updaterMap:ew,eventMap:J0,prevProps:e,nextProps:this.props,instance:this.state.autocomplete})}componentWillUnmount(){this.state.autocomplete!==null&&zt(this.registeredEvents)}render(){return l.jsx("div",{ref:this.containerElement,className:this.props.className,children:h.Children.only(this.props.children)})}}Le(H1,"defaultProps",{className:""});Le(H1,"contextType",Ot);const uP="1d47f70c3cee1162b7dddfcf",dP={lat:45.9432,lng:24.9668};function tw(t){const e=document.createElement("div");return e.style.transform="translate(-50%,-50%)",e.style.padding="4px 8px",e.style.borderRadius="9999px",e.style.background="white",e.style.boxShadow="0 1px 4px rgba(0,0,0,.3)",e.style.fontSize="12px",e.style.fontWeight="600",e.textContent=t??"",e}function fP({map:t,position:e,label:r,draggable:i=!1,onClick:s,onDragEnd:c}){const d=h.useRef(null),m=h.useRef(null),f=h.useRef(null);return h.useEffect(()=>{var p,v,x;if(!(!t||!((x=(v=(p=window.google)==null?void 0:p.maps)==null?void 0:v.marker)!=null&&x.AdvancedMarkerElement)))return d.current?(d.current.position=e,d.current.content=tw(r),d.current.gmpDraggable=!!i):(d.current=new window.google.maps.marker.AdvancedMarkerElement({map:t,position:e,content:tw(r),gmpDraggable:!!i}),s&&(m.current=d.current.addListener("click",s)),c&&i&&(f.current=d.current.addListener("dragend",w=>{const{latLng:S}=w;S&&c({lat:S.lat(),lng:S.lng()})}))),()=>{m.current&&(window.google.maps.event.removeListener(m.current),m.current=null),f.current&&(window.google.maps.event.removeListener(f.current),f.current=null),d.current&&(d.current.map=null,d.current=null)}},[t,e==null?void 0:e.lat,e==null?void 0:e.lng,r,i,s,c]),null}function hP(){const[t,e]=h.useState([]),[r,i]=h.useState(""),[s,c]=h.useState(null),[d,m]=h.useState(!1),[f,p]=h.useState(""),[v,x]=h.useState({field:null,direction:"asc"});h.useEffect(()=>{(async()=>{const{data:O}=await vt.get("/api/stations",{headers:{"Cache-Control":"no-cache"}});e(O??[])})()},[]);const w=async O=>{m(!0);try{if(O.id)await vt.put(`/api/stations/${O.id}`,O),e(M=>M.map(R=>R.id===O.id?O:R));else{const{data:M}=await vt.post("/api/stations",O);e(R=>[...R,M])}c(null)}finally{m(!1)}},S=Array.from(new Set((t??[]).map(O=>O==null?void 0:O.county).filter(Boolean))).sort((O,M)=>String(O).localeCompare(String(M),"ro",{sensitivity:"base"})),b=O=>{O&&x(M=>M.field===O?{field:O,direction:M.direction==="asc"?"desc":"asc"}:{field:O,direction:"asc"})},N=r.trim().toLowerCase(),j=new Set(["name","locality","county"]),_=(t??[]).filter(O=>((O==null?void 0:O.name)||"").toLowerCase().includes(N)).filter(O=>f?((O==null?void 0:O.county)||"")===f:!0),C=(()=>{const{field:O,direction:M}=v;if(!O||!j.has(O))return _;const R=M==="desc"?-1:1;return[..._].sort((I,H)=>{const D=String((I==null?void 0:I[O])??""),Y=String((H==null?void 0:H[O])??"");return D.localeCompare(Y,"ro",{sensitivity:"base"})*R})})(),E=(O,M)=>{const R=v.field===O,I=R?v.direction==="asc"?"":"":"";return l.jsx("th",{className:"p-2 border text-left",children:l.jsxs("button",{type:"button",onClick:()=>b(O),className:"flex items-center gap-1 text-left font-medium",children:[l.jsx("span",{children:M}),l.jsx("span",{className:`text-xs ${R?"text-gray-700":"text-gray-400"}`,children:I})]})})};return l.jsxs("div",{className:"p-6",children:[l.jsx("h1",{className:"text-xl font-semibold mb-4",children:"Staii"}),l.jsxs("div",{className:"flex flex-wrap gap-4 mb-4",children:[l.jsxs("label",{className:"flex flex-col text-sm text-gray-700",children:[l.jsx("span",{className:"mb-1",children:"Caut dup nume"}),l.jsx("input",{placeholder:"Ex: Bucureti Nord",className:"border rounded px-3 py-1",value:r,onChange:O=>i(O.target.value)})]}),l.jsxs("label",{className:"flex flex-col text-sm text-gray-700 min-w-[200px]",children:[l.jsx("span",{className:"mb-1",children:"Filtreaz dup jude"}),l.jsxs("select",{className:"border rounded px-3 py-1",value:f,onChange:O=>p(O.target.value),children:[l.jsx("option",{value:"",children:"Toate judeele"}),S.map(O=>l.jsx("option",{value:O,children:O},O))]})]})]}),l.jsxs("table",{className:"w-full border text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[E("name","Nume"),E("locality","Localitate"),E("county","Jude"),l.jsx("th",{className:"p-2 border",children:"Lat"}),l.jsx("th",{className:"p-2 border",children:"Lon"}),l.jsx("th",{className:"p-2 border",children:"Aciuni"})]})}),l.jsx("tbody",{children:C.map(O=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-2",children:O.name}),l.jsx("td",{className:"border p-2",children:O.locality}),l.jsx("td",{className:"border p-2",children:O.county}),l.jsx("td",{className:"border p-2",children:O.latitude}),l.jsx("td",{className:"border p-2",children:O.longitude}),l.jsxs("td",{className:"border p-2 space-x-2",children:[l.jsx("button",{onClick:()=>c({...O}),className:"bg-blue-600 text-white px-2 py-1 rounded",children:"Editeaz"}),l.jsx("button",{onClick:async()=>{await vt.delete(`/api/stations/${O.id}`),e(M=>M.filter(R=>R.id!==O.id))},className:"bg-red-600 text-white px-2 py-1 rounded",children:"terge"})]})]},O.id))})]}),l.jsx("button",{onClick:()=>c({id:null,name:"",locality:"",county:"",latitude:null,longitude:null}),className:"mt-4 bg-blue-600 text-white px-4 py-2 rounded",children:"+ Adaug staie"}),s&&l.jsx(mP,{data:s,onClose:()=>c(null),onSave:w,saving:d})]})}function mP({data:t,onClose:e,onSave:r,saving:i}){var w;const[s,c]=h.useState({id:t.id??null,name:t.name??"",locality:t.locality??"",county:t.county??"",latitude:t.latitude??"",longitude:t.longitude??""}),[d,m]=h.useState(null),[f,p]=h.useState(Number.isFinite(+t.latitude)&&Number.isFinite(+t.longitude)?{lat:+t.latitude,lng:+t.longitude}:null),v=!!((w=window.google)!=null&&w.maps),x=S=>{const b=S.latLng.lat(),N=S.latLng.lng();p({lat:b,lng:N}),c(j=>({...j,latitude:b,longitude:N}))};return l.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-start justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-lg mt-10",children:[l.jsx("h2",{className:"text-lg font-medium px-6 py-4 border-b",children:s.id?"Editeaz staia":"Adaug staie"}),l.jsxs("div",{className:"p-6 space-y-4",children:[l.jsx(Cl,{label:"Name",value:s.name,onChange:S=>c(b=>({...b,name:S}))}),l.jsx(Cl,{label:"Locality",value:s.locality,onChange:S=>c(b=>({...b,locality:S}))}),l.jsx(Cl,{label:"County",value:s.county,onChange:S=>c(b=>({...b,county:S}))}),l.jsx(Cl,{label:"Latitude",value:s.latitude,onChange:S=>c(b=>({...b,latitude:S}))}),l.jsx(Cl,{label:"Longitude",value:s.longitude,onChange:S=>c(b=>({...b,longitude:S}))}),v?l.jsx(O1,{onLoad:S=>m(S),onClick:x,center:f??dP,zoom:f?12:6,options:{mapId:uP,gestureHandling:"greedy",scrollwheel:!0},mapContainerStyle:{width:"100%",height:300},children:d&&f&&l.jsx(fP,{map:d,position:f,label:"S",draggable:!0,onDragEnd:({lat:S,lng:b})=>{p({lat:S,lng:b}),c(N=>({...N,latitude:S,longitude:b}))}})}):l.jsx("div",{className:"text-sm text-gray-500 border rounded p-3",children:"Harta nu e nc disponibil. Asigur-te c Google Maps JS e ncrcat la nivelul aplicaiei (MapProvider)."})]}),l.jsxs("div",{className:"flex justify-end gap-3 px-6 py-4 border-t",children:[l.jsx("button",{onClick:e,className:"px-4 py-2 rounded bg-gray-300",children:"Anuleaz"}),l.jsx("button",{disabled:i,onClick:()=>r({...s,latitude:s.latitude===""?null:Number(s.latitude),longitude:s.longitude===""?null:Number(s.longitude)}),className:"px-4 py-2 rounded bg-green-600 text-white disabled:opacity-50",children:i?"Se salveaz":"Salveaz"})]})]})})}function Cl({label:t,value:e,onChange:r,readOnly:i=!1}){return l.jsxs("label",{className:"block",children:[l.jsx("span",{className:"text-xs text-gray-600",children:t}),l.jsx("input",{className:"w-full border rounded px-3 py-1 mt-1 disabled:bg-gray-100",value:e??"",readOnly:i,onChange:s=>r==null?void 0:r(s.target.value)})]})}function pP(){const[t,e]=h.useState([]),[r,i]=h.useState([]),[s,c]=h.useState(null),[d,m]=h.useState(new Map),[f,p]=h.useState(!1),[v,x]=h.useState(!1),[w,S]=h.useState([]),[b,N]=h.useState(""),[j,_]=h.useState(new Set),[C,E]=h.useState({key:"route_name",direction:"asc"});h.useEffect(()=>{vt.get("/api/discount-types").then(k=>e(k.data)),vt.get("/api/discount-types/schedules/all").then(k=>i(k.data)),vt.get("/api/pricing-categories").then(k=>{const z=Array.isArray(k.data)?k.data:[];S(z)}).catch(()=>S([]))},[]),h.useEffect(()=>{t.length!==0&&c(k=>{var U;if(k!=null)return k;const z=(U=t[0])==null?void 0:U.id;return typeof z=="number"?z:null})},[t]),h.useEffect(()=>{if(!s)return;const k=d.get(s);if(k!=null&&k.loaded)return;let z=!1;return p(!0),vt.get(`/api/discount-types/${s}/schedules`).then(U=>{if(z)return;const K=Array.isArray(U.data)?U.data:[],T=new Set,A=new Set;K.forEach(F=>{if(F==null)return;if(typeof F=="number"){const q=Number(F);Number.isFinite(q)&&T.add(q);return}const V=Number(F.route_schedule_id??F.id??F);Number.isFinite(V)&&((F.visible_agents??F.agents??F.apply??!1)&&T.add(V),(F.visible_online??F.online??!1)&&A.add(V))}),m(F=>{const V=new Map(F);return V.set(s,{agents:T,online:A,loaded:!0,dirty:!1}),V})}).catch(()=>{z||m(U=>{const K=new Map(U);return K.set(s,{agents:new Set,online:new Set,loaded:!0,dirty:!1}),K})}).finally(()=>{z||p(!1)}),()=>{z=!0}},[s,d]),h.useEffect(()=>{if(!b){_(new Set);return}vt.get(`/api/pricing-categories/${b}/schedules`).then(k=>_(new Set(k.data))).catch(()=>_(new Set))},[b]);const O=s?d.get(s):null,M=(O==null?void 0:O.agents)??new Set,R=(O==null?void 0:O.online)??new Set,I=!!(O!=null&&O.dirty);function H(k){s&&m(z=>{const U=new Map(z),K=U.get(s)||{agents:new Set,online:new Set,loaded:!0,dirty:!1},T=new Set(K.agents);return T.has(k)?T.delete(k):T.add(k),U.set(s,{...K,agents:T,dirty:!0,loaded:!0}),U})}function D(k){s&&m(z=>{const U=new Map(z),K=U.get(s)||{agents:new Set,online:new Set,loaded:!0,dirty:!1},T=new Set(K.online);return T.has(k)?T.delete(k):T.add(k),U.set(s,{...K,online:T,dirty:!0,loaded:!0}),U})}async function Y(){if(!s)return;const k=d.get(s)||{agents:new Set,online:new Set},z=new Set([...k.agents??[],...k.online??[]]),U=Array.from(z).map(K=>{var T,A;return{scheduleId:K,visibleAgents:((T=k.agents)==null?void 0:T.has(K))??!1,visibleOnline:((A=k.online)==null?void 0:A.has(K))??!1}});x(!0);try{await vt.put(`/api/discount-types/${s}/schedules`,{schedules:U}),m(K=>{const T=new Map(K),A=T.get(s);return A&&T.set(s,{...A,dirty:!1}),T}),alert("Salvat!")}catch(K){console.error("DiscountAppliesTab: nu pot salva reducerile",K),alert("Eroare la salvare")}finally{x(!1)}}function G(k){_(z=>{const U=new Set(z);return U.has(k)?U.delete(k):U.add(k),U})}function ie(){vt.put(`/api/pricing-categories/${b}/schedules`,{scheduleIds:Array.from(j)}).then(()=>alert("Salvat!")).catch(()=>alert("Eroare la salvare"))}const Oe=k=>{let z="asc";C.key===k&&C.direction==="asc"&&(z="desc"),E({key:k,direction:z})},ce=h.useMemo(()=>{const k=[...r];return k.sort((z,U)=>{let K=z[C.key],T=U[C.key];return typeof K=="string"&&(K=K.toLowerCase()),typeof T=="string"&&(T=T.toLowerCase()),K<T?C.direction==="asc"?-1:1:K>T?C.direction==="asc"?1:-1:0}),k},[r,C]),te=t.find(k=>k.id===s)||null;return l.jsxs("div",{className:"space-y-10",children:[l.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Se aplic la"}),l.jsxs("section",{className:"mb-10",children:[l.jsx("h3",{className:"text-base font-semibold mb-2",children:"Reducerile"}),l.jsxs("div",{className:"flex flex-col gap-3 mb-4",children:[l.jsx("div",{className:"flex flex-wrap gap-2",children:t.map(k=>{const z=d.get(k.id),U=z==null?void 0:z.dirty,K=s===k.id;return l.jsxs("button",{type:"button",onClick:()=>c(k.id),className:["px-2 py-1 text-sm rounded border transition-colors",K?"bg-blue-600 border-blue-600 text-white":"bg-gray-100 border-gray-300 text-gray-800 hover:bg-gray-200"].join(" "),children:[k.label,U?l.jsx("span",{className:"ml-2 text-[10px] font-semibold uppercase",children:"modificat"}):null]},k.id)})}),t.length>0&&l.jsx("div",{className:"text-xs text-gray-600",children:te?`Configurezi: ${te.label}`:"Selecteaz o reducere pentru a configura programrile disponibile."})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-auto text-sm table-auto border-collapse",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsxs("th",{onClick:()=>Oe("route_name"),className:"p-1 border text-left cursor-pointer select-none bg-gray-200",children:["Traseu ",C.key==="route_name"?C.direction==="asc"?"":"":""]}),l.jsxs("th",{onClick:()=>Oe("departure"),className:"p-1 border text-left cursor-pointer select-none bg-gray-200",children:["Ora ",C.key==="departure"?C.direction==="asc"?"":"":""]}),l.jsxs("th",{onClick:()=>Oe("direction"),className:"p-1 border text-left cursor-pointer select-none bg-gray-200",children:["Direcie ",C.key==="direction"?C.direction==="asc"?"":"":""]}),l.jsx("th",{className:"p-1 border text-left bg-gray-200",children:"Ageni"}),l.jsx("th",{className:"p-1 border text-left bg-gray-200",children:"Online"})]})}),l.jsx("tbody",{children:ce.map((k,z)=>l.jsxs("tr",{className:z%2===0?"bg-white":"bg-gray-50",children:[l.jsx("td",{className:"p-1 border",children:k.route_name}),l.jsx("td",{className:"p-1 border",children:k.departure}),l.jsx("td",{className:"p-1 border",children:k.direction}),l.jsx("td",{className:"p-1 border text-center",children:l.jsx("input",{type:"checkbox",checked:M.has(k.id),onChange:()=>H(k.id),disabled:!s})}),l.jsx("td",{className:"p-1 border text-center",children:l.jsx("input",{type:"checkbox",checked:R.has(k.id),onChange:()=>D(k.id),disabled:!s})})]},k.id))})]})}),l.jsxs("div",{className:"text-left mt-4",children:[l.jsx("button",{className:"px-3 py-1 text-sm bg-green-600 text-white rounded disabled:opacity-60",disabled:!s||v||f||!I,onClick:Y,children:v?"Se salveaz":"Salveaz"}),f&&l.jsx("span",{className:"ml-3 text-xs text-gray-500",children:"Se ncarc reducerile selectate"})]})]}),l.jsxs("section",{children:[l.jsx("h3",{className:"text-base font-semibold mb-2",children:"Categorii de pre"}),l.jsx("div",{className:"mb-4",children:l.jsxs("select",{className:"p-2 text-sm border rounded",value:b,onChange:k=>N(k.target.value),children:[l.jsx("option",{value:"",children:"Alege categorie"}),w.map(k=>l.jsx("option",{value:k.id,children:k.name},k.id))]})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-auto text-sm table-auto border-collapse",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsxs("th",{onClick:()=>Oe("route_name"),className:"p-1 border text-left cursor-pointer select-none bg-gray-200",children:["Traseu ",C.key==="route_name"?C.direction==="asc"?"":"":""]}),l.jsxs("th",{onClick:()=>Oe("departure"),className:"p-1 border text-left cursor-pointer select-none bg-gray-200",children:["Ora ",C.key==="departure"?C.direction==="asc"?"":"":""]}),l.jsxs("th",{onClick:()=>Oe("direction"),className:"p-1 border text-left cursor-pointer select-none bg-gray-200",children:["Direcie ",C.key==="direction"?C.direction==="asc"?"":"":""]}),l.jsx("th",{className:"p-1 border text-left bg-gray-200",children:"Disponibil"})]})}),l.jsx("tbody",{children:ce.map((k,z)=>l.jsxs("tr",{className:z%2===0?"bg-white":"bg-gray-50",children:[l.jsx("td",{className:"p-1 border",children:k.route_name}),l.jsx("td",{className:"p-1 border",children:k.departure}),l.jsx("td",{className:"p-1 border",children:k.direction}),l.jsx("td",{className:"p-1 border text-center",children:l.jsx("input",{type:"checkbox",checked:j.has(k.id),onChange:()=>G(k.id),disabled:!b})})]},k.id))})]})}),l.jsx("div",{className:"text-left mt-4",children:l.jsx("button",{className:"px-3 py-1 text-sm bg-green-600 text-white rounded",disabled:!b,onClick:ie,children:"Salveaz"})})]})]})}const gP=()=>{const[t,e]=h.useState([]),[r,i]=h.useState({code:"",label:"",value_off:"",type:"percent"}),[s,c]=h.useState(!1),[d,m]=h.useState(null),[f,p]=h.useState({key:"id",direction:"asc"}),v=async()=>{const j=await vt.get("/api/discount-types");e(j.data)};h.useEffect(()=>{v()},[]);const x=async()=>{!r.code||!r.label||!r.value_off||(d?await vt.put(`/api/discount-types/${d.id}`,r):await vt.post("/api/discount-types",r),c(!1),m(null),i({code:"",label:"",value_off:"",type:"percent"}),v())},w=j=>{m(j),i({code:j.code,label:j.label,value_off:j.value_off,type:j.type}),c(!0)},S=async j=>{var _,C;if(window.confirm("Sigur doreti s tergi aceast reducere?"))try{await vt.delete(`/api/discount-types/${j}`),e(t.filter(E=>E.id!==j))}catch(E){const O=((C=(_=E.response)==null?void 0:_.data)==null?void 0:C.message)||"Eroare la tergere";console.error("Eroare la tergere:",E),alert(O)}},b=j=>{let _="asc";f.key===j&&f.direction==="asc"&&(_="desc"),p({key:j,direction:_})},N=h.useMemo(()=>{const j=[...t];return j.sort((_,C)=>{let E=_[f.key],O=C[f.key];return f.key==="value_off"?(E=parseFloat(E),O=parseFloat(O)):(typeof E=="string"&&(E=E.toLowerCase()),typeof O=="string"&&(O=O.toLowerCase())),E<O?f.direction==="asc"?-1:1:E>O?f.direction==="asc"?1:-1:0}),j},[t,f]);return l.jsxs("div",{className:"space-y-10",children:[l.jsxs("div",{className:"overflow-x-auto",children:[l.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Tipuri de reduceri"}),l.jsx("button",{className:"mb-4 px-3 py-1 text-sm bg-blue-600 text-white rounded",onClick:()=>{m(null),i({code:"",label:"",value_off:"",type:"percent"}),c(!0)},children:"+ Adaug"}),l.jsxs("table",{className:"w-auto text-sm table-auto border-collapse",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsxs("th",{onClick:()=>b("code"),className:"p-1 border text-left cursor-pointer select-none bg-gray-200",children:["Cod ",f.key==="code"?f.direction==="asc"?"":"":""]}),l.jsxs("th",{onClick:()=>b("label"),className:"p-1 border text-left cursor-pointer select-none bg-gray-200",children:["Etichet ",f.key==="label"?f.direction==="asc"?"":"":""]}),l.jsxs("th",{onClick:()=>b("value_off"),className:"p-1 border text-left cursor-pointer select-none bg-gray-200",children:["Reducere ",f.key==="value_off"?f.direction==="asc"?"":"":""]}),l.jsx("th",{className:"p-1 border text-left bg-gray-200",children:"Aciuni"})]})}),l.jsx("tbody",{children:N.map((j,_)=>l.jsxs("tr",{className:_%2===0?"bg-white":"bg-gray-50",children:[l.jsx("td",{className:"p-1 border",children:j.code}),l.jsx("td",{className:"p-1 border",children:j.label}),l.jsx("td",{className:"p-1 border",children:`${parseFloat(j.value_off)%1===0?parseInt(j.value_off):parseFloat(j.value_off)}${j.type==="percent"?"%":""}`}),l.jsxs("td",{className:"p-1 border space-x-2",children:[l.jsx("button",{className:"px-2 py-1 text-xs bg-blue-500 text-white rounded",onClick:()=>w(j),children:"Editeaz"}),l.jsx("button",{className:"px-2 py-1 text-xs bg-red-500 text-white rounded",onClick:()=>S(j.id),children:"terge"})]})]},j.id))})]}),s&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-80",children:[l.jsx("h3",{className:"mb-4 text-lg font-semibold",children:d?"Editeaz Reducere":"Adaug Reducere"}),l.jsx("input",{type:"text",placeholder:"Cod",className:"w-full mb-2 px-2 py-1 border rounded text-sm",value:r.code,onChange:j=>i({...r,code:j.target.value})}),l.jsx("input",{type:"text",placeholder:"Etichet",className:"w-full mb-2 px-2 py-1 border rounded text-sm",value:r.label,onChange:j=>i({...r,label:j.target.value})}),l.jsx("input",{type:"number",placeholder:"Reducere",className:"w-full mb-2 px-2 py-1 border rounded text-sm",value:r.value_off,onChange:j=>i({...r,value_off:j.target.value})}),l.jsxs("div",{className:"mb-2 text-sm",children:[l.jsxs("label",{className:"mr-4",children:[l.jsx("input",{type:"radio",value:"percent",checked:r.type==="percent",onChange:()=>i({...r,type:"percent"}),className:"mr-1"}),"Procent"]}),l.jsxs("label",{children:[l.jsx("input",{type:"radio",value:"fixed",checked:r.type==="fixed",onChange:()=>i({...r,type:"fixed"}),className:"mr-1"}),"Valoare fix"]})]}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx("button",{className:"px-3 py-1 bg-gray-300 rounded text-sm",onClick:()=>{c(!1),m(null)},children:"Anuleaz"}),l.jsx("button",{className:"px-3 py-1 bg-green-600 text-white rounded text-sm",onClick:x,children:"Salveaz"})]})]})})]}),l.jsx(pP,{})]})},xi=t=>{if(t==null||t==="")return"";const e=Number(t);return Number.isNaN(e)?"":Number.isInteger(e)?String(e):e.toFixed(2).replace(/\.00$/,"").replace(/(\.\d*?[1-9])0+$/,"$1")},Cu=t=>{const e={};return t.forEach(r=>{e[r]={},t.forEach(i=>{e[r][i]={price:"",price_return:"",r_price:"",r_price_return:""}})}),e};function vP(){const[t,e]=h.useState([]),[r,i]=h.useState([]),[s,c]=h.useState([]),[d,m]=h.useState([]),[f,p]=h.useState({}),[v,x]=h.useState([]),[w,S]=h.useState(!1),[b,N]=h.useState(""),[j,_]=h.useState(""),[C,E]=h.useState(()=>new Date().toISOString().slice(0,10)),[O,M]=h.useState(""),[R,I]=h.useState(""),[H,D]=h.useState(""),[Y,G]=h.useState(""),[ie,Oe]=h.useState(""),[ce,te]=h.useState(()=>new Date().toISOString().slice(0,10)),[k,z]=h.useState([]),[U,K]=h.useState(""),[T,A]=h.useState([]),[F,V]=h.useState([]),[q,Q]=h.useState(!1),be=h.useMemo(()=>{const P=new Map;return s.forEach(le=>{P.set(le.name,le.station_id)}),P},[s]);h.useEffect(()=>{(async()=>{try{const[le,se]=await Promise.all([fetch("/api/routes"),fetch("/api/pricing-categories")]),[Me,pe]=await Promise.all([le.ok?le.json():Promise.resolve([]),se.ok?se.json():Promise.resolve([])]);e(Array.isArray(Me)?Me:[]),i(Array.isArray(pe)?pe:[])}catch(le){console.error("AdminPriceLists: nu pot ncrca rutele sau categoriile",le),e([]),i([])}})()},[]),h.useEffect(()=>{var le;if(r.length===0||j)return;const P=(le=r[0])==null?void 0:le.id;P&&_(String(P))},[r,j]),h.useEffect(()=>{if(c([]),m([]),p({}),x([]),M(""),!b)return;const P=new AbortController;return(async()=>{try{const se=await fetch(`/api/routes/${b}/stations`,{signal:P.signal});if(!se.ok)throw new Error(`HTTP ${se.status}`);const Me=await se.json();if(P.signal.aborted)return;const pe=Array.isArray(Me)?[...Me].sort((Ge,Ke)=>(Ge.sequence??0)-(Ke.sequence??0)):[],Ue=pe.map(Ge=>Ge.name);c(pe),m(Ue)}catch(se){se.name!=="AbortError"&&console.error("AdminPriceLists: nu pot ncrca staiile rutei",se)}})(),()=>P.abort()},[b]),h.useEffect(()=>{if(!b||!j||!C){x([]),M("");return}const P=new AbortController;return(async()=>{try{const se=await fetch(`/api/price-lists?route=${b}&category=${j}&date=${C}`,{signal:P.signal});if(!se.ok)throw new Error(`HTTP ${se.status}`);const Me=await se.json();if(P.signal.aborted)return;const pe=Array.isArray(Me)?Me:[];x(pe),M(pe[0]?String(pe[0].id):"")}catch(se){se.name!=="AbortError"&&console.error("AdminPriceLists: nu pot ncrca versiunile",se),x([]),M("")}})(),()=>P.abort()},[b,j,C]),h.useEffect(()=>{if(!O){d.length&&p(Cu(d));return}const P=new AbortController;return(async()=>{S(!0);try{const se=await fetch(`/api/price-lists/${O}/items`,{signal:P.signal});if(!se.ok)throw new Error(`HTTP ${se.status}`);const Me=await se.json();if(P.signal.aborted)return;const pe=Array.isArray(Me)?Me:[];p(()=>{const Ue=Cu(d),Ge=new Map(d.map((Ke,We)=>[Ke,We]));return pe.forEach(Ke=>{var qe,ht,wt;const We=Ke.from_stop||((qe=s.find(ut=>ut.station_id===Ke.from_station_id))==null?void 0:qe.name),et=Ke.to_stop||((ht=s.find(ut=>ut.station_id===Ke.to_station_id))==null?void 0:ht.name);if(!We||!et)return;const Te=Ge.get(We),Ve=Ge.get(et);Te==null||Ve==null||(wt=Ue[We])!=null&&wt[et]&&(Te<Ve?(Ue[We][et].price=xi(Ke.price),Ue[We][et].price_return=xi(Ke.price_return??"")):Te>Ve&&(Ue[We][et].r_price=xi(Ke.price),Ue[We][et].r_price_return=xi(Ke.price_return??"")))}),Ue})}catch(se){se.name!=="AbortError"&&console.error("AdminPriceLists: nu pot ncrca preurile",se),p(Cu(d))}finally{S(!1)}})(),()=>P.abort()},[O,d,s]),h.useEffect(()=>{I(""),D("")},[b,j,O,d]),h.useEffect(()=>{if(A([]),V([]),!Y)return;const P=new AbortController;return(async()=>{try{const se=await fetch(`/api/routes/${Y}/stations`,{signal:P.signal});if(!se.ok)throw new Error(`HTTP ${se.status}`);const Me=await se.json();if(P.signal.aborted)return;const pe=Array.isArray(Me)?[...Me].sort((Ge,Ke)=>(Ge.sequence??0)-(Ke.sequence??0)):[],Ue=pe.map(Ge=>Ge.name);A(pe),V(Ue)}catch(se){se.name!=="AbortError"&&console.error("AdminPriceLists: nu pot ncrca staiile pentru import",se),A([]),V([])}})(),()=>P.abort()},[Y]),h.useEffect(()=>{if(z([]),K(""),!Y||!ie||!ce)return;const P=new AbortController;return(async()=>{try{const se=await fetch(`/api/price-lists?route=${Y}&category=${ie}&date=${ce}`,{signal:P.signal});if(!se.ok)throw new Error(`HTTP ${se.status}`);const Me=await se.json();if(P.signal.aborted)return;const pe=Array.isArray(Me)?Me:[];z(pe),K(pe[0]?String(pe[0].id):"")}catch(se){se.name!=="AbortError"&&console.error("AdminPriceLists: nu pot ncrca versiunile pentru import",se),z([]),K("")}})(),()=>P.abort()},[Y,ie,ce]);const Ce=P=>{I(le=>le===P?"":P)},X=P=>{D(le=>le===P?"":P)},W=(P,le,se,Me)=>{Me!==""&&!/^\d+(\.\d{0,2})?$/.test(Me)||p(pe=>({...pe,[P]:{...pe[P],[le]:{...pe[P][le],[se]:Me}}}))},J=async()=>{if(!b||!j){alert("Selecteaz traseul i categoria.");return}const P=[];let le=null;if(d.forEach((se,Me)=>{le||d.forEach((pe,Ue)=>{var We,et;if(le||Ue<=Me)return;const Ge=(We=f[se])==null?void 0:We[pe];if(Ge){const Te=(Ge.price??"")!=="",Ve=(Ge.price_return??"")!=="";if(Te&&!/^\d+(\.\d{0,2})?$/.test(Ge.price)){le=`Pre invalid (T) ntre ${se} i ${pe}`;return}if(Ve&&!/^\d+(\.\d{0,2})?$/.test(Ge.price_return)){le=`Pre invalid (T/R) ntre ${se} i ${pe}`;return}(Te||Ve)&&P.push({from_station_id:be.get(se),to_station_id:be.get(pe),from_stop:se,to_stop:pe,price:Te?Number(Ge.price):0,price_return:Ve?Number(Ge.price_return):null,currency:"RON"})}const Ke=(et=f[pe])==null?void 0:et[se];if(Ke){const Te=(Ke.r_price??"")!=="",Ve=(Ke.r_price_return??"")!=="";if(Te&&!/^\d+(\.\d{0,2})?$/.test(Ke.r_price)){le=`Pre invalid (R) ntre ${pe} i ${se}`;return}if(Ve&&!/^\d+(\.\d{0,2})?$/.test(Ke.r_price_return)){le=`Pre invalid (R/T) ntre ${pe} i ${se}`;return}(Te||Ve)&&P.push({from_station_id:be.get(pe),to_station_id:be.get(se),from_stop:pe,to_stop:se,price:Te?Number(Ke.r_price):0,price_return:Ve?Number(Ke.r_price_return):null,currency:"RON"})}})}),le){alert(le);return}if(!P.length){alert("Completeaz cel puin un pre.");return}try{const se=await fetch("/api/price-lists",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({route:Number(b),category:Number(j),effective_from:C,name:`${b}-${j}-${C}`,version:1,created_by:1,items:P})});if(!se.ok){const Ke=await se.json().catch(()=>({error:"Eroare la salvare"}));throw new Error(Ke.error||"Eroare la salvare")}const Me=await se.json();alert(`Salvat cu succes! ID: ${Me.id}`);const pe=await fetch(`/api/price-lists?route=${b}&category=${j}&date=${C}`),Ue=pe.ok?await pe.json():[],Ge=Array.isArray(Ue)?Ue:[];x(Ge),M(Ge[0]?String(Ge[0].id):"")}catch(se){console.error("AdminPriceLists: nu pot salva lista de preuri",se),alert(se.message||"Eroare la salvare")}},ue=P=>{const le={};return d.forEach(se=>{le[se]={},d.forEach(Me=>{var Ue;const pe=((Ue=P[se])==null?void 0:Ue[Me])??{price:"",price_return:"",r_price:"",r_price_return:""};le[se][Me]={price:pe.price??"",price_return:pe.price_return??"",r_price:pe.r_price??"",r_price_return:pe.r_price_return??""}})}),le},Z=()=>{d.length&&p(P=>{const le=ue(P);return d.forEach((se,Me)=>{d.forEach((pe,Ue)=>{var We,et;if(Ue<=Me)return;const Ge=(We=P[se])==null?void 0:We[pe],Ke=(et=le[pe])==null?void 0:et[se];!Ge||!Ke||(Ke.r_price=Ge.price,Ke.r_price_return=Ge.price_return)})}),le})},_e=()=>{d.length&&p(P=>{const le=ue(P);return d.forEach((se,Me)=>{d.forEach((pe,Ue)=>{var We,et;if(Ue<=Me)return;const Ge=(We=P[pe])==null?void 0:We[se],Ke=(et=le[se])==null?void 0:et[pe];!Ge||!Ke||(Ke.price=Ge.r_price,Ke.price_return=Ge.r_price_return)})}),le})},ke=(P,le)=>{const se=R&&P===R,Me=H&&le===H;return se&&Me?"bg-emerald-200":se?"bg-blue-100":Me?"bg-amber-100":""},Be=async()=>{if(!U){alert("Selecteaz o versiune pentru import.");return}if(!d.length){alert("Nu exist staii n lista curent.");return}if(!F.length){alert("Nu exist staii disponibile pentru lista surs selectat.");return}if(!(d.length===F.length&&d.every((se,Me)=>se===F[Me]))){alert("Staiile nu se potrivesc ca numr i ordine ntre lista curent i lista surs.");return}try{Q(!0);const se=await fetch(`/api/price-lists/${U}/items`);if(!se.ok)throw new Error(`HTTP ${se.status}`);const Me=await se.json(),pe=Array.isArray(Me)?Me:[];p(()=>{const Ue=Cu(d),Ge=new Map(d.map((Ke,We)=>[Ke,We]));return pe.forEach(Ke=>{var qe,ht,wt;const We=Ke.from_stop||((qe=T.find(ut=>ut.station_id===Ke.from_station_id))==null?void 0:qe.name),et=Ke.to_stop||((ht=T.find(ut=>ut.station_id===Ke.to_station_id))==null?void 0:ht.name);if(!We||!et)return;const Te=Ge.get(We),Ve=Ge.get(et);Te==null||Ve==null||(wt=Ue[We])!=null&&wt[et]&&(Te<Ve?(Ue[We][et].price=xi(Ke.price),Ue[We][et].price_return=xi(Ke.price_return??"")):Te>Ve&&(Ue[We][et].r_price=xi(Ke.price),Ue[We][et].r_price_return=xi(Ke.price_return??"")))}),Ue}),alert("Preurile au fost importate cu succes.")}catch(se){console.error("AdminPriceLists: nu pot importa preurile",se),alert(se.message||"Nu pot importa preurile")}finally{Q(!1)}},Se=d.length>0&&F.length>0&&d.length===F.length&&d.every((P,le)=>P===F[le]);return l.jsxs("div",{className:"space-y-4 max-w-full",children:[l.jsxs("div",{className:"flex flex-col gap-4 xl:flex-row xl:items-start xl:justify-between",children:[l.jsxs("div",{className:"flex flex-col gap-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-x-6 gap-y-2 w-fit text-sm",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"text-xs text-gray-700 font-semibold",children:"Traseu:"}),l.jsxs("select",{value:b,onChange:P=>N(P.target.value),className:"border border-gray-300 rounded px-2 py-1 w-[200px]",children:[l.jsx("option",{value:"",children:"Selecteaz traseu"}),t.map(P=>l.jsx("option",{value:P.id,children:P.name},P.id))]})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"text-xs text-gray-700 font-semibold",children:"Categorie:"}),l.jsxs("select",{value:j,onChange:P=>_(P.target.value),className:"border border-gray-300 rounded px-2 py-1 w-[200px]",children:[l.jsx("option",{value:"",children:"Selecteaz categorie"}),r.map(P=>l.jsx("option",{value:P.id,children:P.name},P.id))]})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"text-xs text-gray-700 font-semibold",children:"Dat aplicare:"}),l.jsx("input",{type:"date",value:C,onChange:P=>E(P.target.value),className:"border border-gray-300 rounded px-2 py-1 w-[200px]"})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"text-xs text-gray-700 font-semibold",children:"Versiune:"}),l.jsxs("select",{value:O,onChange:P=>M(P.target.value),className:"border border-gray-300 rounded px-2 py-1 w-[200px]",children:[l.jsx("option",{value:"",children:"Selecteaz versiune"}),v.map(P=>l.jsxs("option",{value:P.id,children:[new Date(P.effective_from).toLocaleDateString()," (ver. ",P.version,")"]},P.id))]})]})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsx("button",{type:"button",onClick:Z,className:"px-2 py-1 bg-indigo-600 hover:bg-indigo-700 text-white rounded",children:"Copie Tur/Retur"}),l.jsx("button",{type:"button",onClick:_e,className:"px-2 py-1 bg-indigo-600 hover:bg-indigo-700 text-white rounded",children:"Copie Retur/Tur"}),l.jsx("button",{type:"button",onClick:J,className:"px-2 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded",children:"Salveaz"})]})]}),l.jsxs("div",{className:"border rounded bg-gray-50 p-3 space-y-3 w-full xl:w-[420px] xl:self-start",children:[l.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Import preuri din alt list"}),l.jsx("p",{className:"text-xs text-gray-600",children:"Importul reuete doar dac staiile i ordinea lor sunt identice cu lista curent."}),l.jsxs("div",{className:"grid grid-cols-2 gap-x-6 gap-y-2 text-sm",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"text-xs text-gray-700 font-semibold",children:"Traseu surs:"}),l.jsxs("select",{value:Y,onChange:P=>G(P.target.value),className:"border border-gray-300 rounded px-2 py-1 w-[200px]",children:[l.jsx("option",{value:"",children:"Selecteaz traseu"}),t.map(P=>l.jsx("option",{value:P.id,children:P.name},P.id))]})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"text-xs text-gray-700 font-semibold",children:"Categorie surs:"}),l.jsxs("select",{value:ie,onChange:P=>Oe(P.target.value),className:"border border-gray-300 rounded px-2 py-1 w-[200px]",children:[l.jsx("option",{value:"",children:"Selecteaz categorie"}),r.map(P=>l.jsx("option",{value:P.id,children:P.name},P.id))]})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"text-xs text-gray-700 font-semibold",children:"Dat aplicare:"}),l.jsx("input",{type:"date",value:ce,onChange:P=>te(P.target.value),className:"border border-gray-300 rounded px-2 py-1 w-[200px]"})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"text-xs text-gray-700 font-semibold",children:"Versiune:"}),l.jsxs("select",{value:U,onChange:P=>K(P.target.value),className:"border border-gray-300 rounded px-2 py-1 w-[200px]",children:[l.jsx("option",{value:"",children:"Selecteaz versiune"}),k.map(P=>l.jsxs("option",{value:P.id,children:[new Date(P.effective_from).toLocaleDateString()," (ver. ",P.version,")"]},P.id))]})]})]}),l.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center",children:[l.jsx("button",{type:"button",onClick:Be,disabled:q,className:`px-3 py-1 rounded text-white ${q?"bg-gray-400 cursor-not-allowed":"bg-emerald-600 hover:bg-emerald-700"}`,children:q?"Se import":"Import preuri"}),Se?l.jsx("span",{className:"text-xs text-emerald-700 font-medium",children:"Staiile se potrivesc."}):Y&&ie&&U&&F.length>0?l.jsx("span",{className:"text-xs text-amber-600",children:"Staiile nu se potrivesc ca numr sau ordine."}):null]})]})]}),d.length>0&&l.jsx("div",{className:"inline-block border rounded shadow bg-white p-2 max-h-[70vh] max-w-full overflow-auto",children:l.jsxs("table",{className:"min-w-max table-fixed border-collapse text-[13px]",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{className:["border px-1 py-1 text-center w-[120px] min-w-[120px] h-[50px] sticky top-0 left-0 z-30 bg-gray-100"].join(" "),children:"Staie"}),d.map(P=>{const le=ke(null,P);return l.jsx("th",{className:["border px-1 py-1 text-center w-[90px] min-w-[90px] h-[32px] truncate sticky top-0 z-20 bg-gray-100",le].filter(Boolean).join(" "),children:l.jsx("button",{type:"button",onClick:()=>X(P),className:"w-full h-full cursor-pointer select-none focus:outline-none",title:"Selecteaz coloana",children:P})},P)})]})}),l.jsx("tbody",{children:w?l.jsx("tr",{children:l.jsx("td",{colSpan:d.length+1,className:"border px-1 py-1 text-center",children:"Se ncarc preurile"})}):d.map((P,le)=>l.jsxs("tr",{className:le%2===0?"bg-white":"bg-gray-100",children:[l.jsx("td",{className:["border px-1 py-1 text-black font-bold text-center w-[120px] min-w-[120px] h-[32px] align-middle sticky left-0 z-30 bg-white",ke(P,null)].filter(Boolean).join(" "),children:l.jsx("button",{type:"button",onClick:()=>Ce(P),className:"w-full h-full cursor-pointer select-none focus:outline-none",title:"Selecteaz linia",children:P})}),d.map((se,Me)=>{var Ke,We;const pe=ke(P,se);if(Me===le)return l.jsx("td",{className:["border px-1 py-1 text-center w-[90px] min-w-[90px] h-[32px] align-middle bg-gray-100",pe].filter(Boolean).join(" "),children:l.jsx("div",{className:"w-full h-[50px]"})},`${P}-${se}`);const Ue=(Ke=f[P])==null?void 0:Ke[se];if(Me>le)return l.jsx("td",{className:["border px-1 py-1 text-center w-[90px] min-w-[90px] h-[32px] align-middle",pe].filter(Boolean).join(" "),children:l.jsxs("div",{className:"flex flex-col items-stretch gap-[4px]",children:[l.jsx("span",{className:"text-[10px] font-semibold uppercase text-gray-600 text-center",children:"Tur"}),l.jsxs("div",{className:"flex items-center gap-[4px]",children:[l.jsx("label",{className:"w-[24px] text-[9px] font-medium text-gray-600 text-center",children:"T"}),l.jsx("input",{className:"w-[54px] h-[20px] px-1 text-[13px] border border-gray-300 rounded text-center focus:outline-none",value:(Ue==null?void 0:Ue.price)??"",onChange:et=>W(P,se,"price",et.target.value)})]}),l.jsxs("div",{className:"flex items-center gap-[4px]",children:[l.jsx("label",{className:"w-[24px] text-[9px] font-medium text-gray-600 text-center",children:"T/R"}),l.jsx("input",{className:"w-[54px] h-[20px] px-1 text-[13px] border border-gray-300 rounded text-center focus:outline-none",value:(Ue==null?void 0:Ue.price_return)??"",onChange:et=>W(P,se,"price_return",et.target.value)})]})]})},`${P}-${se}`);const Ge=(We=f[P])==null?void 0:We[se];return l.jsx("td",{className:["border px-1 py-1 text-center w-[90px] min-w-[90px] h-[32px] align-middle",pe].filter(Boolean).join(" "),children:l.jsxs("div",{className:"flex flex-col items-stretch gap-[4px]",children:[l.jsx("span",{className:"text-[10px] font-semibold uppercase text-gray-600 text-center",children:"Retur"}),l.jsxs("div",{className:"flex items-center gap-[4px]",children:[l.jsx("label",{className:"w-[24px] text-[9px] font-medium text-gray-600 text-center",children:"R"}),l.jsx("input",{className:"w-[54px] h-[20px] px-1 text-[13px] border border-gray-300 rounded text-center focus:outline-none",value:(Ge==null?void 0:Ge.r_price)??"",onChange:et=>W(P,se,"r_price",et.target.value)})]}),l.jsxs("div",{className:"flex items-center gap-[4px]",children:[l.jsx("label",{className:"w-[24px] text-[9px] font-medium text-gray-600 text-center",children:"R/T"}),l.jsx("input",{className:"w-[54px] h-[20px] px-1 text-[13px] border border-gray-300 rounded text-center focus:outline-none",value:(Ge==null?void 0:Ge.r_price_return)??"",onChange:et=>W(P,se,"r_price_return",et.target.value)})]})]})},`${P}-${se}`)})]},P))})]})})]})}function bP(){const[t,e]=h.useState([]),[r,i]=h.useState([]),[s,c]=h.useState(!0),[d,m]=h.useState(null),[f,p]=h.useState(!1),[v,x]=h.useState({id:null,name:"",username:"",phone:"",email:"",role:"driver",active:!0,operator_id:null}),[w,S]=h.useState({email:"",role:"agent",operator_id:null,ttl_hours:72}),[b,N]=h.useState(null),[j,_]=h.useState(!1),[C,E]=h.useState(null),[O,M]=h.useState(!1),[R,I]=h.useState(!1),[H,D]=h.useState(null),[Y,G]=h.useState({key:"id",direction:"asc"});h.useEffect(()=>{ie(),Oe(),ce()},[]);const ie=async()=>{try{c(!0);const V=await fetch("/api/employees?active=all");if(!V.ok)throw new Error("Nu am putut ncrca angajaii");const q=await V.json();e(Array.isArray(q)?q:[])}catch(V){console.error("fetchAll employees failed",V),e([])}finally{c(!1)}},Oe=async()=>{var V;try{const q=await fetch("/api/operators");if(!q.ok)throw new Error("Nu am putut ncrca operatorii");const Q=await q.json();i(Array.isArray(Q)?Q:[]);const be=Array.isArray(Q)&&((V=Q[0])==null?void 0:V.id)||null;x(Ce=>({...Ce,operator_id:Ce.operator_id??be})),S(Ce=>({...Ce,operator_id:Ce.operator_id??be}))}catch(q){console.error("fetchOperators failed",q),i([])}},ce=async()=>{var V;try{const q=await fetch("/api/auth/me");if(q.ok){const Q=await q.json();m(((V=Q==null?void 0:Q.user)==null?void 0:V.role)??null)}}catch(q){console.error("loadRole failed",q),m(null)}},te=()=>{var V;x({id:null,name:"",username:"",phone:"",email:"",role:"driver",active:!0,operator_id:((V=r[0])==null?void 0:V.id)??null}),p(!0)},k=V=>{x({...V,username:V.username??""}),p(!0)},z=()=>p(!1),U=async()=>{const V={...v,username:v.username&&v.username.trim()?v.username.trim():null,operator_id:v.operator_id?Number(v.operator_id):null,active:v.active?1:0},q=v.id?"PUT":"POST",Q=v.id?`/api/employees/${v.id}`:"/api/employees",be=await fetch(Q,{method:q,headers:{"Content-Type":"application/json"},body:JSON.stringify(V)});if(!be.ok){console.error("save failed",await be.text());return}await ie(),z()},K=async V=>{window.confirm("terge angajatul?")&&(await fetch(`/api/employees/${V}`,{method:"DELETE"}),ie())},T=async V=>{V.preventDefault();const q=w.email.trim();if(!q){E("Completeaz emailul destinatarului.");return}M(!0),E(null),N(null),_(!1),I(!1),D(null);try{const Q={email:q,role:w.role,ttl_hours:Number(w.ttl_hours)||72};w.operator_id&&(Q.operator_id=Number(w.operator_id));const be=await fetch("/api/invitations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)});if(!be.ok){const W=await be.text();E(W||"Nu am putut genera invitaia.");return}const Ce=await be.json(),X=(Ce==null?void 0:Ce.invite_url)||`${window.location.origin}/invita/${Ce.token}`;N(X),I(!!(Ce!=null&&Ce.email_sent)),D(q||null),S(W=>({...W,email:""}))}catch(Q){console.error("createInvitation failed",Q),E("A aprut o eroare la generarea invitaiei.")}finally{M(!1)}},A=V=>{let q="asc";Y.key===V&&Y.direction==="asc"&&(q="desc"),G({key:V,direction:q})},F=h.useMemo(()=>{const V=[...t];return V.sort((q,Q)=>{let be=q[Y.key],Ce=Q[Y.key];return(be===null||typeof be>"u")&&(be=""),(Ce===null||typeof Ce>"u")&&(Ce=""),typeof be=="string"&&(be=be.toLowerCase()),typeof Ce=="string"&&(Ce=Ce.toLowerCase()),be<Ce?Y.direction==="asc"?-1:1:be>Ce?Y.direction==="asc"?1:-1:0}),V},[t,Y]);return s?l.jsx("p",{children:"Se ncarc angajaii"}):l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Angajai"}),l.jsx("button",{onClick:te,className:"mb-4 px-3 py-1 text-sm bg-green-600 text-white rounded",children:"+ Adaug"}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-auto text-sm table-auto border-collapse",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsxs("th",{onClick:()=>A("id"),className:"p-1 border text-left cursor-pointer select-none",children:["# ",Y.key==="id"?Y.direction==="asc"?"":"":""]}),l.jsxs("th",{onClick:()=>A("name"),className:"p-1 border text-left cursor-pointer select-none",children:["Nume ",Y.key==="name"?Y.direction==="asc"?"":"":""]}),l.jsxs("th",{onClick:()=>A("username"),className:"p-1 border text-left cursor-pointer select-none",children:["Utilizator ",Y.key==="username"?Y.direction==="asc"?"":"":""]}),l.jsxs("th",{onClick:()=>A("phone"),className:"p-1 border text-left cursor-pointer select-none",children:["Telefon ",Y.key==="phone"?Y.direction==="asc"?"":"":""]}),l.jsxs("th",{onClick:()=>A("email"),className:"p-1 border text-left cursor-pointer select-none",children:["Email ",Y.key==="email"?Y.direction==="asc"?"":"":""]}),l.jsxs("th",{onClick:()=>A("role"),className:"p-1 border text-left cursor-pointer select-none",children:["Rol ",Y.key==="role"?Y.direction==="asc"?"":"":""]}),l.jsxs("th",{onClick:()=>A("active"),className:"p-1 border text-left cursor-pointer select-none",children:["Activ ",Y.key==="active"?Y.direction==="asc"?"":"":""]}),l.jsxs("th",{onClick:()=>A("operator_id"),className:"p-1 border text-left cursor-pointer select-none",children:["Operator ",Y.key==="operator_id"?Y.direction==="asc"?"":"":""]}),l.jsx("th",{className:"p-1 border text-left",children:"Aciuni"})]})}),l.jsx("tbody",{children:F.map((V,q)=>{var Q;return l.jsxs("tr",{className:`${q%2===0?"bg-white":"bg-gray-50"} ${V.active?"":"opacity-60"}`,children:[l.jsx("td",{className:"p-1 border",children:V.id}),l.jsx("td",{className:"p-1 border",children:V.name}),l.jsx("td",{className:"p-1 border",children:V.username||""}),l.jsx("td",{className:"p-1 border",children:V.phone||""}),l.jsx("td",{className:"p-1 border",children:V.email||""}),l.jsx("td",{className:"p-1 border",children:V.role}),l.jsx("td",{className:"p-1 border",children:l.jsx("input",{type:"checkbox",checked:!!V.active,onChange:async()=>{await fetch(`/api/employees/${V.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({active:!V.active})}),ie()}})}),l.jsx("td",{className:"p-1 border",children:((Q=r.find(be=>be.id===V.operator_id))==null?void 0:Q.name)||""}),l.jsxs("td",{className:"p-1 border space-x-2",children:[l.jsx("button",{onClick:()=>k(V),className:"px-2 py-1 text-xs bg-blue-500 text-white rounded",children:"Editeaz"}),l.jsx("button",{onClick:()=>K(V.id),className:"px-2 py-1 text-xs bg-red-500 text-white rounded",children:"terge"})]})]},V.id)})})]})}),f&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center",children:l.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-80",children:[l.jsxs("h3",{className:"mb-4 text-lg font-semibold",children:[v.id?"Editeaz":"Adaug"," angajat"]}),l.jsxs("label",{className:"block mb-2 text-sm",children:["Nume",l.jsx("input",{className:"w-full p-2 border rounded text-sm",value:v.name,onChange:V=>x({...v,name:V.target.value})})]}),l.jsxs("label",{className:"block mb-2 text-sm",children:["Utilizator (username)",l.jsx("input",{className:"w-full p-2 border rounded text-sm",value:v.username??"",onChange:V=>x({...v,username:V.target.value}),placeholder:"ex: prenume.nume"})]}),l.jsxs("label",{className:"block mb-2 text-sm",children:["Telefon",l.jsx("input",{className:"w-full p-2 border rounded text-sm",value:v.phone,onChange:V=>x({...v,phone:V.target.value})})]}),l.jsxs("label",{className:"block mb-2 text-sm",children:["Email",l.jsx("input",{className:"w-full p-2 border rounded text-sm",value:v.email,onChange:V=>x({...v,email:V.target.value})})]}),l.jsxs("label",{className:"block mb-2 text-sm",children:["Rol",l.jsxs("select",{className:"w-full p-2 border rounded text-sm",value:v.role,onChange:V=>x({...v,role:V.target.value}),children:[l.jsx("option",{value:"driver",children:"Driver"}),l.jsx("option",{value:"agent",children:"Agent"}),l.jsx("option",{value:"operator_admin",children:"Operator admin"}),l.jsx("option",{value:"admin",children:"Admin"})]})]}),l.jsxs("label",{className:"block mb-2 text-sm flex items-center",children:[l.jsx("input",{type:"checkbox",className:"mr-2",checked:!!v.active,onChange:V=>x({...v,active:V.target.checked})}),"Activ"]}),l.jsxs("label",{className:"block mb-4 text-sm",children:["Operator",l.jsxs("select",{className:"w-full p-2 border rounded text-sm",value:v.operator_id??"",onChange:V=>x({...v,operator_id:V.target.value?Number(V.target.value):null}),children:[l.jsx("option",{value:"",children:"Fr operator specific"}),r.map(V=>l.jsx("option",{value:V.id,children:V.name},V.id))]})]}),l.jsxs("div",{className:"text-right space-x-2",children:[l.jsx("button",{onClick:z,className:"px-3 py-1 bg-gray-300 rounded text-sm",children:"Anuleaz"}),l.jsx("button",{onClick:U,className:"px-3 py-1 bg-green-600 text-white rounded text-sm",children:"Salveaz"})]})]})}),l.jsxs("section",{className:"mt-10 max-w-xl",children:[l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Invitaii rapide"}),l.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Trimite un link de nscriere unui viitor coleg. Invitaia expir automat dup perioada aleas."}),l.jsxs("form",{onSubmit:T,className:"space-y-4 bg-gray-50 border border-gray-200 rounded p-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"invite-email",children:"Email destinatar"}),l.jsx("input",{id:"invite-email",type:"email",required:!0,value:w.email,onChange:V=>S(q=>({...q,email:V.target.value})),className:"w-full border rounded px-3 py-2 text-sm",placeholder:"nume@exemplu.ro"})]}),l.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[l.jsxs("label",{className:"block text-sm font-medium",children:["Rol acordat",l.jsxs("select",{className:"mt-1 w-full border rounded px-3 py-2 text-sm",value:w.role,onChange:V=>S(q=>({...q,role:V.target.value})),children:[l.jsx("option",{value:"agent",children:"Agent"}),l.jsx("option",{value:"driver",children:"ofer"}),l.jsx("option",{value:"operator_admin",children:"Operator admin"}),l.jsx("option",{value:"admin",children:"Admin"})]})]}),l.jsxs("label",{className:"block text-sm font-medium",children:["Valabilitate (ore)",l.jsx("input",{type:"number",min:"1",className:"mt-1 w-full border rounded px-3 py-2 text-sm",value:w.ttl_hours,onChange:V=>S(q=>({...q,ttl_hours:V.target.value}))})]})]}),r.length>0&&l.jsxs("label",{className:"block text-sm font-medium",children:["Operator asignat",l.jsxs("select",{className:"mt-1 w-full border rounded px-3 py-2 text-sm",value:w.operator_id??"",onChange:V=>S(q=>({...q,operator_id:V.target.value||null})),disabled:d==="operator_admin",children:[l.jsx("option",{value:"",children:"Fr operator specific"}),r.map(V=>l.jsx("option",{value:V.id,children:V.name},V.id))]})]}),C&&l.jsx("div",{className:"text-sm text-red-600 bg-red-50 border border-red-200 rounded px-3 py-2",children:C}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"submit",className:"px-4 py-2 text-sm bg-green-600 text-white rounded disabled:opacity-60",disabled:O,children:O?"Se genereaz":"Genereaz invitaia"}),l.jsx("span",{className:"text-xs text-gray-500",children:"Vom salva automat angajatul cnd folosete linkul."})]})]}),b&&l.jsxs("div",{className:"mt-4 bg-green-50 border border-green-200 rounded px-4 py-3 text-sm",children:[l.jsx("p",{className:"font-semibold text-green-700",children:"Invitaie generat!"}),l.jsx("p",{className:"mt-1 text-green-700",children:"Trimite linkul de mai jos colegului:"}),R?l.jsxs("p",{className:"mt-2 text-xs text-green-600",children:["Email trimis automat ctre ",H||"destinatar","."]}):l.jsx("p",{className:"mt-2 text-xs text-amber-600",children:"Emailul automat nu a putut fi trimis. Copiaz linkul manual i transmite-l colegului."}),l.jsxs("div",{className:"mt-3 flex flex-col gap-2 sm:flex-row sm:items-center",children:[l.jsx("input",{readOnly:!0,value:b,className:"flex-1 border border-green-300 rounded px-3 py-2 bg-white text-green-900"}),l.jsx("button",{type:"button",className:"px-3 py-2 bg-green-600 text-white rounded",onClick:async()=>{var V;try{(V=navigator==null?void 0:navigator.clipboard)!=null&&V.writeText?(await navigator.clipboard.writeText(b),_(!0)):_(!1)}catch(q){console.error("copy failed",q),_(!1)}},children:"Copiaz linkul"})]}),j&&l.jsx("p",{className:"mt-2 text-xs text-green-600",children:"Link copiat n clipboard."})]})]})]})}const Ap="-",yP=t=>{const e=wP(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:i}=t;return{getClassGroupId:d=>{const m=d.split(Ap);return m[0]===""&&m.length!==1&&m.shift(),F1(m,e)||xP(d)},getConflictingClassGroupIds:(d,m)=>{const f=r[d]||[];return m&&i[d]?[...f,...i[d]]:f}}},F1=(t,e)=>{var d;if(t.length===0)return e.classGroupId;const r=t[0],i=e.nextPart.get(r),s=i?F1(t.slice(1),i):void 0;if(s)return s;if(e.validators.length===0)return;const c=t.join(Ap);return(d=e.validators.find(({validator:m})=>m(c)))==null?void 0:d.classGroupId},nw=/^\[(.+)\]$/,xP=t=>{if(nw.test(t)){const e=nw.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},wP=t=>{const{theme:e,classGroups:r}=t,i={nextPart:new Map,validators:[]};for(const s in r)Bm(r[s],i,s,e);return i},Bm=(t,e,r,i)=>{t.forEach(s=>{if(typeof s=="string"){const c=s===""?e:rw(e,s);c.classGroupId=r;return}if(typeof s=="function"){if(SP(s)){Bm(s(i),e,r,i);return}e.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([c,d])=>{Bm(d,rw(e,c),r,i)})})},rw=(t,e)=>{let r=t;return e.split(Ap).forEach(i=>{r.nextPart.has(i)||r.nextPart.set(i,{nextPart:new Map,validators:[]}),r=r.nextPart.get(i)}),r},SP=t=>t.isThemeGetter,jP=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,i=new Map;const s=(c,d)=>{r.set(c,d),e++,e>t&&(e=0,i=r,r=new Map)};return{get(c){let d=r.get(c);if(d!==void 0)return d;if((d=i.get(c))!==void 0)return s(c,d),d},set(c,d){r.has(c)?r.set(c,d):s(c,d)}}},Hm="!",Fm=":",_P=Fm.length,NP=t=>{const{prefix:e,experimentalParseClassName:r}=t;let i=s=>{const c=[];let d=0,m=0,f=0,p;for(let b=0;b<s.length;b++){let N=s[b];if(d===0&&m===0){if(N===Fm){c.push(s.slice(f,b)),f=b+_P;continue}if(N==="/"){p=b;continue}}N==="["?d++:N==="]"?d--:N==="("?m++:N===")"&&m--}const v=c.length===0?s:s.substring(f),x=CP(v),w=x!==v,S=p&&p>f?p-f:void 0;return{modifiers:c,hasImportantModifier:w,baseClassName:x,maybePostfixModifierPosition:S}};if(e){const s=e+Fm,c=i;i=d=>d.startsWith(s)?c(d.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:d,maybePostfixModifierPosition:void 0}}if(r){const s=i;i=c=>r({className:c,parseClassName:s})}return i},CP=t=>t.endsWith(Hm)?t.substring(0,t.length-1):t.startsWith(Hm)?t.substring(1):t,EP=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(i=>[i,!0]));return i=>{if(i.length<=1)return i;const s=[];let c=[];return i.forEach(d=>{d[0]==="["||e[d]?(s.push(...c.sort(),d),c=[]):c.push(d)}),s.push(...c.sort()),s}},OP=t=>({cache:jP(t.cacheSize),parseClassName:NP(t),sortModifiers:EP(t),...yP(t)}),MP=/\s+/,LP=(t,e)=>{const{parseClassName:r,getClassGroupId:i,getConflictingClassGroupIds:s,sortModifiers:c}=e,d=[],m=t.trim().split(MP);let f="";for(let p=m.length-1;p>=0;p-=1){const v=m[p],{isExternal:x,modifiers:w,hasImportantModifier:S,baseClassName:b,maybePostfixModifierPosition:N}=r(v);if(x){f=v+(f.length>0?" "+f:f);continue}let j=!!N,_=i(j?b.substring(0,N):b);if(!_){if(!j){f=v+(f.length>0?" "+f:f);continue}if(_=i(b),!_){f=v+(f.length>0?" "+f:f);continue}j=!1}const C=c(w).join(":"),E=S?C+Hm:C,O=E+_;if(d.includes(O))continue;d.push(O);const M=s(_,j);for(let R=0;R<M.length;++R){const I=M[R];d.push(E+I)}f=v+(f.length>0?" "+f:f)}return f};function kP(){let t=0,e,r,i="";for(;t<arguments.length;)(e=arguments[t++])&&(r=Y1(e))&&(i&&(i+=" "),i+=r);return i}const Y1=t=>{if(typeof t=="string")return t;let e,r="";for(let i=0;i<t.length;i++)t[i]&&(e=Y1(t[i]))&&(r&&(r+=" "),r+=e);return r};function TP(t,...e){let r,i,s,c=d;function d(f){const p=e.reduce((v,x)=>x(v),t());return r=OP(p),i=r.cache.get,s=r.cache.set,c=m,m(f)}function m(f){const p=i(f);if(p)return p;const v=LP(f,r);return s(f,v),v}return function(){return c(kP.apply(null,arguments))}}const Ln=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},q1=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,G1=/^\((?:(\w[\w-]*):)?(.+)\)$/i,AP=/^\d+\/\d+$/,DP=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,RP=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,PP=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,zP=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,$P=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Js=t=>AP.test(t),kt=t=>!!t&&!Number.isNaN(Number(t)),wi=t=>!!t&&Number.isInteger(Number(t)),im=t=>t.endsWith("%")&&kt(t.slice(0,-1)),La=t=>DP.test(t),UP=()=>!0,VP=t=>RP.test(t)&&!PP.test(t),W1=()=>!1,IP=t=>zP.test(t),BP=t=>$P.test(t),HP=t=>!nt(t)&&!rt(t),FP=t=>xo(t,K1,W1),nt=t=>q1.test(t),es=t=>xo(t,Q1,VP),sm=t=>xo(t,ZP,kt),aw=t=>xo(t,Z1,W1),YP=t=>xo(t,X1,BP),Eu=t=>xo(t,J1,IP),rt=t=>G1.test(t),El=t=>wo(t,Q1),qP=t=>wo(t,XP),iw=t=>wo(t,Z1),GP=t=>wo(t,K1),WP=t=>wo(t,X1),Ou=t=>wo(t,J1,!0),xo=(t,e,r)=>{const i=q1.exec(t);return i?i[1]?e(i[1]):r(i[2]):!1},wo=(t,e,r=!1)=>{const i=G1.exec(t);return i?i[1]?e(i[1]):r:!1},Z1=t=>t==="position"||t==="percentage",X1=t=>t==="image"||t==="url",K1=t=>t==="length"||t==="size"||t==="bg-size",Q1=t=>t==="length",ZP=t=>t==="number",XP=t=>t==="family-name",J1=t=>t==="shadow",KP=()=>{const t=Ln("color"),e=Ln("font"),r=Ln("text"),i=Ln("font-weight"),s=Ln("tracking"),c=Ln("leading"),d=Ln("breakpoint"),m=Ln("container"),f=Ln("spacing"),p=Ln("radius"),v=Ln("shadow"),x=Ln("inset-shadow"),w=Ln("text-shadow"),S=Ln("drop-shadow"),b=Ln("blur"),N=Ln("perspective"),j=Ln("aspect"),_=Ln("ease"),C=Ln("animate"),E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],O=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],M=()=>[...O(),rt,nt],R=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto","contain","none"],H=()=>[rt,nt,f],D=()=>[Js,"full","auto",...H()],Y=()=>[wi,"none","subgrid",rt,nt],G=()=>["auto",{span:["full",wi,rt,nt]},wi,rt,nt],ie=()=>[wi,"auto",rt,nt],Oe=()=>["auto","min","max","fr",rt,nt],ce=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],te=()=>["start","end","center","stretch","center-safe","end-safe"],k=()=>["auto",...H()],z=()=>[Js,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...H()],U=()=>[t,rt,nt],K=()=>[...O(),iw,aw,{position:[rt,nt]}],T=()=>["no-repeat",{repeat:["","x","y","space","round"]}],A=()=>["auto","cover","contain",GP,FP,{size:[rt,nt]}],F=()=>[im,El,es],V=()=>["","none","full",p,rt,nt],q=()=>["",kt,El,es],Q=()=>["solid","dashed","dotted","double"],be=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ce=()=>[kt,im,iw,aw],X=()=>["","none",b,rt,nt],W=()=>["none",kt,rt,nt],J=()=>["none",kt,rt,nt],ue=()=>[kt,rt,nt],Z=()=>[Js,"full",...H()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[La],breakpoint:[La],color:[UP],container:[La],"drop-shadow":[La],ease:["in","out","in-out"],font:[HP],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[La],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[La],shadow:[La],spacing:["px",kt],text:[La],"text-shadow":[La],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Js,nt,rt,j]}],container:["container"],columns:[{columns:[kt,nt,rt,m]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:M()}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:D()}],"inset-x":[{"inset-x":D()}],"inset-y":[{"inset-y":D()}],start:[{start:D()}],end:[{end:D()}],top:[{top:D()}],right:[{right:D()}],bottom:[{bottom:D()}],left:[{left:D()}],visibility:["visible","invisible","collapse"],z:[{z:[wi,"auto",rt,nt]}],basis:[{basis:[Js,"full","auto",m,...H()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[kt,Js,"auto","initial","none",nt]}],grow:[{grow:["",kt,rt,nt]}],shrink:[{shrink:["",kt,rt,nt]}],order:[{order:[wi,"first","last","none",rt,nt]}],"grid-cols":[{"grid-cols":Y()}],"col-start-end":[{col:G()}],"col-start":[{"col-start":ie()}],"col-end":[{"col-end":ie()}],"grid-rows":[{"grid-rows":Y()}],"row-start-end":[{row:G()}],"row-start":[{"row-start":ie()}],"row-end":[{"row-end":ie()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Oe()}],"auto-rows":[{"auto-rows":Oe()}],gap:[{gap:H()}],"gap-x":[{"gap-x":H()}],"gap-y":[{"gap-y":H()}],"justify-content":[{justify:[...ce(),"normal"]}],"justify-items":[{"justify-items":[...te(),"normal"]}],"justify-self":[{"justify-self":["auto",...te()]}],"align-content":[{content:["normal",...ce()]}],"align-items":[{items:[...te(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...te(),{baseline:["","last"]}]}],"place-content":[{"place-content":ce()}],"place-items":[{"place-items":[...te(),"baseline"]}],"place-self":[{"place-self":["auto",...te()]}],p:[{p:H()}],px:[{px:H()}],py:[{py:H()}],ps:[{ps:H()}],pe:[{pe:H()}],pt:[{pt:H()}],pr:[{pr:H()}],pb:[{pb:H()}],pl:[{pl:H()}],m:[{m:k()}],mx:[{mx:k()}],my:[{my:k()}],ms:[{ms:k()}],me:[{me:k()}],mt:[{mt:k()}],mr:[{mr:k()}],mb:[{mb:k()}],ml:[{ml:k()}],"space-x":[{"space-x":H()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":H()}],"space-y-reverse":["space-y-reverse"],size:[{size:z()}],w:[{w:[m,"screen",...z()]}],"min-w":[{"min-w":[m,"screen","none",...z()]}],"max-w":[{"max-w":[m,"screen","none","prose",{screen:[d]},...z()]}],h:[{h:["screen","lh",...z()]}],"min-h":[{"min-h":["screen","lh","none",...z()]}],"max-h":[{"max-h":["screen","lh",...z()]}],"font-size":[{text:["base",r,El,es]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,rt,sm]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",im,nt]}],"font-family":[{font:[qP,nt,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,rt,nt]}],"line-clamp":[{"line-clamp":[kt,"none",rt,sm]}],leading:[{leading:[c,...H()]}],"list-image":[{"list-image":["none",rt,nt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",rt,nt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:U()}],"text-color":[{text:U()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Q(),"wavy"]}],"text-decoration-thickness":[{decoration:[kt,"from-font","auto",rt,es]}],"text-decoration-color":[{decoration:U()}],"underline-offset":[{"underline-offset":[kt,"auto",rt,nt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:H()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",rt,nt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",rt,nt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:K()}],"bg-repeat":[{bg:T()}],"bg-size":[{bg:A()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},wi,rt,nt],radial:["",rt,nt],conic:[wi,rt,nt]},WP,YP]}],"bg-color":[{bg:U()}],"gradient-from-pos":[{from:F()}],"gradient-via-pos":[{via:F()}],"gradient-to-pos":[{to:F()}],"gradient-from":[{from:U()}],"gradient-via":[{via:U()}],"gradient-to":[{to:U()}],rounded:[{rounded:V()}],"rounded-s":[{"rounded-s":V()}],"rounded-e":[{"rounded-e":V()}],"rounded-t":[{"rounded-t":V()}],"rounded-r":[{"rounded-r":V()}],"rounded-b":[{"rounded-b":V()}],"rounded-l":[{"rounded-l":V()}],"rounded-ss":[{"rounded-ss":V()}],"rounded-se":[{"rounded-se":V()}],"rounded-ee":[{"rounded-ee":V()}],"rounded-es":[{"rounded-es":V()}],"rounded-tl":[{"rounded-tl":V()}],"rounded-tr":[{"rounded-tr":V()}],"rounded-br":[{"rounded-br":V()}],"rounded-bl":[{"rounded-bl":V()}],"border-w":[{border:q()}],"border-w-x":[{"border-x":q()}],"border-w-y":[{"border-y":q()}],"border-w-s":[{"border-s":q()}],"border-w-e":[{"border-e":q()}],"border-w-t":[{"border-t":q()}],"border-w-r":[{"border-r":q()}],"border-w-b":[{"border-b":q()}],"border-w-l":[{"border-l":q()}],"divide-x":[{"divide-x":q()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":q()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Q(),"hidden","none"]}],"divide-style":[{divide:[...Q(),"hidden","none"]}],"border-color":[{border:U()}],"border-color-x":[{"border-x":U()}],"border-color-y":[{"border-y":U()}],"border-color-s":[{"border-s":U()}],"border-color-e":[{"border-e":U()}],"border-color-t":[{"border-t":U()}],"border-color-r":[{"border-r":U()}],"border-color-b":[{"border-b":U()}],"border-color-l":[{"border-l":U()}],"divide-color":[{divide:U()}],"outline-style":[{outline:[...Q(),"none","hidden"]}],"outline-offset":[{"outline-offset":[kt,rt,nt]}],"outline-w":[{outline:["",kt,El,es]}],"outline-color":[{outline:U()}],shadow:[{shadow:["","none",v,Ou,Eu]}],"shadow-color":[{shadow:U()}],"inset-shadow":[{"inset-shadow":["none",x,Ou,Eu]}],"inset-shadow-color":[{"inset-shadow":U()}],"ring-w":[{ring:q()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:U()}],"ring-offset-w":[{"ring-offset":[kt,es]}],"ring-offset-color":[{"ring-offset":U()}],"inset-ring-w":[{"inset-ring":q()}],"inset-ring-color":[{"inset-ring":U()}],"text-shadow":[{"text-shadow":["none",w,Ou,Eu]}],"text-shadow-color":[{"text-shadow":U()}],opacity:[{opacity:[kt,rt,nt]}],"mix-blend":[{"mix-blend":[...be(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":be()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[kt]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ce()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ce()}],"mask-image-linear-from-color":[{"mask-linear-from":U()}],"mask-image-linear-to-color":[{"mask-linear-to":U()}],"mask-image-t-from-pos":[{"mask-t-from":Ce()}],"mask-image-t-to-pos":[{"mask-t-to":Ce()}],"mask-image-t-from-color":[{"mask-t-from":U()}],"mask-image-t-to-color":[{"mask-t-to":U()}],"mask-image-r-from-pos":[{"mask-r-from":Ce()}],"mask-image-r-to-pos":[{"mask-r-to":Ce()}],"mask-image-r-from-color":[{"mask-r-from":U()}],"mask-image-r-to-color":[{"mask-r-to":U()}],"mask-image-b-from-pos":[{"mask-b-from":Ce()}],"mask-image-b-to-pos":[{"mask-b-to":Ce()}],"mask-image-b-from-color":[{"mask-b-from":U()}],"mask-image-b-to-color":[{"mask-b-to":U()}],"mask-image-l-from-pos":[{"mask-l-from":Ce()}],"mask-image-l-to-pos":[{"mask-l-to":Ce()}],"mask-image-l-from-color":[{"mask-l-from":U()}],"mask-image-l-to-color":[{"mask-l-to":U()}],"mask-image-x-from-pos":[{"mask-x-from":Ce()}],"mask-image-x-to-pos":[{"mask-x-to":Ce()}],"mask-image-x-from-color":[{"mask-x-from":U()}],"mask-image-x-to-color":[{"mask-x-to":U()}],"mask-image-y-from-pos":[{"mask-y-from":Ce()}],"mask-image-y-to-pos":[{"mask-y-to":Ce()}],"mask-image-y-from-color":[{"mask-y-from":U()}],"mask-image-y-to-color":[{"mask-y-to":U()}],"mask-image-radial":[{"mask-radial":[rt,nt]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ce()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ce()}],"mask-image-radial-from-color":[{"mask-radial-from":U()}],"mask-image-radial-to-color":[{"mask-radial-to":U()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":O()}],"mask-image-conic-pos":[{"mask-conic":[kt]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ce()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ce()}],"mask-image-conic-from-color":[{"mask-conic-from":U()}],"mask-image-conic-to-color":[{"mask-conic-to":U()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:K()}],"mask-repeat":[{mask:T()}],"mask-size":[{mask:A()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",rt,nt]}],filter:[{filter:["","none",rt,nt]}],blur:[{blur:X()}],brightness:[{brightness:[kt,rt,nt]}],contrast:[{contrast:[kt,rt,nt]}],"drop-shadow":[{"drop-shadow":["","none",S,Ou,Eu]}],"drop-shadow-color":[{"drop-shadow":U()}],grayscale:[{grayscale:["",kt,rt,nt]}],"hue-rotate":[{"hue-rotate":[kt,rt,nt]}],invert:[{invert:["",kt,rt,nt]}],saturate:[{saturate:[kt,rt,nt]}],sepia:[{sepia:["",kt,rt,nt]}],"backdrop-filter":[{"backdrop-filter":["","none",rt,nt]}],"backdrop-blur":[{"backdrop-blur":X()}],"backdrop-brightness":[{"backdrop-brightness":[kt,rt,nt]}],"backdrop-contrast":[{"backdrop-contrast":[kt,rt,nt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",kt,rt,nt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[kt,rt,nt]}],"backdrop-invert":[{"backdrop-invert":["",kt,rt,nt]}],"backdrop-opacity":[{"backdrop-opacity":[kt,rt,nt]}],"backdrop-saturate":[{"backdrop-saturate":[kt,rt,nt]}],"backdrop-sepia":[{"backdrop-sepia":["",kt,rt,nt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":H()}],"border-spacing-x":[{"border-spacing-x":H()}],"border-spacing-y":[{"border-spacing-y":H()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",rt,nt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[kt,"initial",rt,nt]}],ease:[{ease:["linear","initial",_,rt,nt]}],delay:[{delay:[kt,rt,nt]}],animate:[{animate:["none",C,rt,nt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[N,rt,nt]}],"perspective-origin":[{"perspective-origin":M()}],rotate:[{rotate:W()}],"rotate-x":[{"rotate-x":W()}],"rotate-y":[{"rotate-y":W()}],"rotate-z":[{"rotate-z":W()}],scale:[{scale:J()}],"scale-x":[{"scale-x":J()}],"scale-y":[{"scale-y":J()}],"scale-z":[{"scale-z":J()}],"scale-3d":["scale-3d"],skew:[{skew:ue()}],"skew-x":[{"skew-x":ue()}],"skew-y":[{"skew-y":ue()}],transform:[{transform:[rt,nt,"","none","gpu","cpu"]}],"transform-origin":[{origin:M()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Z()}],"translate-x":[{"translate-x":Z()}],"translate-y":[{"translate-y":Z()}],"translate-z":[{"translate-z":Z()}],"translate-none":["translate-none"],accent:[{accent:U()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:U()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",rt,nt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":H()}],"scroll-mx":[{"scroll-mx":H()}],"scroll-my":[{"scroll-my":H()}],"scroll-ms":[{"scroll-ms":H()}],"scroll-me":[{"scroll-me":H()}],"scroll-mt":[{"scroll-mt":H()}],"scroll-mr":[{"scroll-mr":H()}],"scroll-mb":[{"scroll-mb":H()}],"scroll-ml":[{"scroll-ml":H()}],"scroll-p":[{"scroll-p":H()}],"scroll-px":[{"scroll-px":H()}],"scroll-py":[{"scroll-py":H()}],"scroll-ps":[{"scroll-ps":H()}],"scroll-pe":[{"scroll-pe":H()}],"scroll-pt":[{"scroll-pt":H()}],"scroll-pr":[{"scroll-pr":H()}],"scroll-pb":[{"scroll-pb":H()}],"scroll-pl":[{"scroll-pl":H()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",rt,nt]}],fill:[{fill:["none",...U()]}],"stroke-w":[{stroke:[kt,El,es,sm]}],stroke:[{stroke:["none",...U()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},QP=TP(KP);function Ua(...t){return QP(ho(t))}const Ym=h.forwardRef(({className:t,...e},r)=>l.jsx("div",{ref:r,className:Ua("rounded-xl border bg-card text-card-foreground shadow",t),...e}));Ym.displayName="Card";const JP=h.forwardRef(({className:t,...e},r)=>l.jsx("div",{ref:r,className:Ua("flex flex-col space-y-1.5 p-6",t),...e}));JP.displayName="CardHeader";const e3=h.forwardRef(({className:t,...e},r)=>l.jsx("div",{ref:r,className:Ua("font-semibold leading-none tracking-tight",t),...e}));e3.displayName="CardTitle";const t3=h.forwardRef(({className:t,...e},r)=>l.jsx("div",{ref:r,className:Ua("text-sm text-muted-foreground",t),...e}));t3.displayName="CardDescription";const qm=h.forwardRef(({className:t,...e},r)=>l.jsx("div",{ref:r,className:Ua("p-6 pt-0",t),...e}));qm.displayName="CardContent";const n3=h.forwardRef(({className:t,...e},r)=>l.jsx("div",{ref:r,className:Ua("flex items-center p-6 pt-0",t),...e}));n3.displayName="CardFooter";function sw(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function r3(...t){return e=>{let r=!1;const i=t.map(s=>{const c=sw(s,e);return!r&&typeof c=="function"&&(r=!0),c});if(r)return()=>{for(let s=0;s<i.length;s++){const c=i[s];typeof c=="function"?c():sw(t[s],null)}}}}function ej(t){const e=i3(t),r=h.forwardRef((i,s)=>{const{children:c,...d}=i,m=h.Children.toArray(c),f=m.find(o3);if(f){const p=f.props.children,v=m.map(x=>x===f?h.Children.count(p)>1?h.Children.only(null):h.isValidElement(p)?p.props.children:null:x);return l.jsx(e,{...d,ref:s,children:h.isValidElement(p)?h.cloneElement(p,void 0,v):null})}return l.jsx(e,{...d,ref:s,children:c})});return r.displayName=`${t}.Slot`,r}var a3=ej("Slot");function i3(t){const e=h.forwardRef((r,i)=>{const{children:s,...c}=r;if(h.isValidElement(s)){const d=c3(s),m=l3(c,s.props);return s.type!==h.Fragment&&(m.ref=i?r3(i,d):d),h.cloneElement(s,m)}return h.Children.count(s)>1?h.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var s3=Symbol("radix.slottable");function o3(t){return h.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===s3}function l3(t,e){const r={...e};for(const i in e){const s=t[i],c=e[i];/^on[A-Z]/.test(i)?s&&c?r[i]=(...m)=>{const f=c(...m);return s(...m),f}:s&&(r[i]=s):i==="style"?r[i]={...s,...c}:i==="className"&&(r[i]=[s,c].filter(Boolean).join(" "))}return{...t,...r}}function c3(t){var i,s;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}const ow=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,lw=ho,tj=(t,e)=>r=>{var i;if((e==null?void 0:e.variants)==null)return lw(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:c}=e,d=Object.keys(s).map(p=>{const v=r==null?void 0:r[p],x=c==null?void 0:c[p];if(v===null)return null;const w=ow(v)||ow(x);return s[p][w]}),m=r&&Object.entries(r).reduce((p,v)=>{let[x,w]=v;return w===void 0||(p[x]=w),p},{}),f=e==null||(i=e.compoundVariants)===null||i===void 0?void 0:i.reduce((p,v)=>{let{class:x,className:w,...S}=v;return Object.entries(S).every(b=>{let[N,j]=b;return Array.isArray(j)?j.includes({...c,...m}[N]):{...c,...m}[N]===j})?[...p,x,w]:p},[]);return lw(t,d,f,r==null?void 0:r.class,r==null?void 0:r.className)},u3=tj("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),nj=h.forwardRef(({className:t,variant:e,size:r,asChild:i=!1,...s},c)=>{const d=i?a3:"button";return l.jsx(d,{className:Ua(u3({variant:e,size:r,className:t})),ref:c,...s})});nj.displayName="Button";const sa=h.forwardRef(({className:t,type:e,...r},i)=>l.jsx("input",{type:e,className:Ua("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:i,...r}));sa.displayName="Input";var d3=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],f3=d3.reduce((t,e)=>{const r=ej(`Primitive.${e}`),i=h.forwardRef((s,c)=>{const{asChild:d,...m}=s,f=d?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(f,{...m,ref:c})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{}),h3="Label",rj=h.forwardRef((t,e)=>l.jsx(f3.label,{...t,ref:e,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));rj.displayName=h3;var aj=rj;const m3=tj("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),kn=h.forwardRef(({className:t,...e},r)=>l.jsx(aj,{ref:r,className:Ua(m3(),t),...e}));kn.displayName=aj.displayName;function p3(){const[t,e]=h.useState([]),r=()=>({code:"",label:"",type:"percent",value_off:0,valid_from:"",valid_to:"",active:!0,channels:{online:!0,agent:!1},min_price:"",max_discount:"",max_total_uses:"",max_uses_per_person:"",combinable:!1,route_ids:[],route_schedule_ids:[],hours:[],weekdays:[]}),[i,s]=h.useState(r()),[c,d]=h.useState(null),[m,f]=h.useState([]),[p,v]=h.useState([]),x=async()=>{try{const _=await fetch("/api/promo-codes"),C=_.ok?await _.json():[];e(Array.isArray(C)?C:[])}catch{e([])}};h.useEffect(()=>{x();const _=new Date().toISOString().slice(0,10);fetch(`/api/routes?date=${_}`).then(C=>C.ok?C.json():[]).then(C=>{const E=Array.isArray(C)?C:[];f(E.map(M=>({id:M.id,name:M.name})));const O=[];E.forEach(M=>{(M.schedules||[]).forEach(R=>{O.push({id:R.scheduleId??R.id,label:`${M.name}  ${R.departure}`,routeId:M.id})})}),v(O)}).catch(()=>{f([]),v([])})},[]);const w=async _=>{if(_.preventDefault(),!i.code.trim()||!i.label.trim()||!String(i.value_off).trim()){alert("Completeaz: Cod, Label i Valoare");return}const C={...i,code:(i.code||"").toUpperCase().trim(),channels:[i.channels.online?"online":null,i.channels.agent?"agent":null].filter(Boolean).join(",")},E=c?`/api/promo-codes/${c}`:"/api/promo-codes",M=await fetch(E,{method:c?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)});if(M.ok)s(r()),d(null),x();else{const R=await M.json().catch(()=>null);alert((R==null?void 0:R.error)||"Eroare la salvare")}},S=_=>{d(_.id),s({code:_.code,label:_.label,type:_.type,value_off:_.value_off,valid_from:_.valid_from?_.valid_from.replace("Z","").slice(0,16):"",valid_to:_.valid_to?_.valid_to.replace("Z","").slice(0,16):"",active:!!_.active,channels:{online:(_.channels||"").includes("online"),agent:(_.channels||"").includes("agent")},min_price:_.min_price??"",max_discount:_.max_discount??"",max_total_uses:_.max_total_uses??"",max_uses_per_person:_.max_uses_per_person??"",combinable:!!_.combinable,route_ids:[],route_schedule_ids:[],hours:[],weekdays:[]}),window.scrollTo({top:0,behavior:"smooth"})},b=()=>{d(null),s(r())},N=async _=>{(await fetch(`/api/promo-codes/${_}/toggle`,{method:"PATCH"})).ok&&x()},j=async _=>{if(!window.confirm("Sigur tergi acest cod promo?"))return;(await fetch(`/api/promo-codes/${_}`,{method:"DELETE"})).ok&&x()};return l.jsxs("div",{className:"space-y-6",children:[l.jsx(Ym,{children:l.jsx(qm,{className:"p-4",children:l.jsxs("form",{onSubmit:w,className:"grid md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx(kn,{children:"Cod"}),l.jsx(sa,{value:i.code,onChange:_=>s(C=>({...C,code:_.target.value})),placeholder:"EX: FALL25"})]}),l.jsxs("div",{children:[l.jsx(kn,{children:"Label"}),l.jsx(sa,{value:i.label,onChange:_=>s(C=>({...C,label:_.target.value}))})]}),l.jsxs("div",{children:[l.jsx(kn,{children:"Tip"}),l.jsxs("select",{className:"w-full border rounded h-10 px-2",value:i.type,onChange:_=>s(C=>({...C,type:_.target.value})),children:[l.jsx("option",{value:"percent",children:"Procent"}),l.jsx("option",{value:"fixed",children:"Fix (lei)"})]})]}),l.jsxs("div",{children:[l.jsx(kn,{children:"Valoare"}),l.jsx(sa,{type:"number",step:"0.01",value:i.value_off,onChange:_=>s(C=>({...C,value_off:_.target.value}))})]}),l.jsxs("div",{children:[l.jsx(kn,{children:"Valabil de la"}),l.jsx(sa,{type:"datetime-local",value:i.valid_from,onChange:_=>s(C=>({...C,valid_from:_.target.value}))})]}),l.jsxs("div",{children:[l.jsx(kn,{children:"Valabil pn la"}),l.jsx(sa,{type:"datetime-local",value:i.valid_to,onChange:_=>s(C=>({...C,valid_to:_.target.value}))})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("input",{id:"online",type:"checkbox",checked:i.channels.online,onChange:_=>s(C=>({...C,channels:{...C.channels,online:_.target.checked}}))}),l.jsx(kn,{htmlFor:"online",className:"m-0",children:"Online"}),l.jsx("input",{id:"agent",type:"checkbox",checked:i.channels.agent,onChange:_=>s(C=>({...C,channels:{...C.channels,agent:_.target.checked}}))}),l.jsx(kn,{htmlFor:"agent",className:"m-0",children:"Offline (agent)"})]}),l.jsxs("div",{children:[l.jsx(kn,{children:"Prag minim (lei)"}),l.jsx(sa,{type:"number",step:"0.01",value:i.min_price,onChange:_=>s(C=>({...C,min_price:_.target.value}))})]}),l.jsxs("div",{children:[l.jsx(kn,{children:"Plafon reducere (lei)"}),l.jsx(sa,{type:"number",step:"0.01",value:i.max_discount,onChange:_=>s(C=>({...C,max_discount:_.target.value}))})]}),l.jsxs("div",{children:[l.jsx(kn,{children:"Max. utilizri total"}),l.jsx(sa,{type:"number",value:i.max_total_uses,onChange:_=>s(C=>({...C,max_total_uses:_.target.value}))})]}),l.jsxs("div",{children:[l.jsx(kn,{children:"Max. utilizri/persoan"}),l.jsx(sa,{type:"number",value:i.max_uses_per_person,onChange:_=>s(C=>({...C,max_uses_per_person:_.target.value}))})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{id:"combinable",type:"checkbox",checked:i.combinable,onChange:_=>s(C=>({...C,combinable:_.target.checked}))}),l.jsx(kn,{htmlFor:"combinable",className:"m-0",children:"Combinabil cu alte reduceri"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{id:"active",type:"checkbox",checked:i.active,onChange:_=>s(C=>({...C,active:_.target.checked}))}),l.jsx(kn,{htmlFor:"active",className:"m-0",children:"Activ"})]}),l.jsxs("div",{className:"md:col-span-3 mt-2 p-3 border rounded",children:[l.jsx("div",{className:"font-semibold mb-3",children:"Filtrare (scope)  opional"}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(kn,{children:"Trasee permise"}),l.jsx("div",{className:"border rounded max-h-40 overflow-auto p-2",children:m.map(_=>l.jsxs("label",{className:"flex items-center gap-2 py-1",children:[l.jsx("input",{type:"checkbox",checked:(i.route_ids||[]).includes(_.id),onChange:C=>{s(E=>{const O=new Set(E.route_ids);return C.target.checked?O.add(_.id):O.delete(_.id),{...E,route_ids:[...O]}})}}),l.jsx("span",{children:_.name})]},_.id))}),l.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Dac nu selectezi nimic: valabil pe toate traseele."})]}),l.jsxs("div",{children:[l.jsx(kn,{children:"Orar(e) permise"}),Array.isArray(p)&&p.length>0?l.jsx("div",{className:"border rounded max-h-40 overflow-auto p-2",children:p.map(_=>l.jsxs("label",{className:"flex items-center gap-2 py-1",children:[l.jsx("input",{type:"checkbox",checked:(i.route_schedule_ids||[]).includes(_.id),onChange:C=>{s(E=>{const O=new Set(E.route_schedule_ids||[]);return C.target.checked?O.add(_.id):O.delete(_.id),{...E,route_schedule_ids:[...O]}})}}),l.jsx("span",{children:_.label})]},_.id))}):l.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Nu exist orare returnate de /api/routes. Poi folosi Intervale orare zilnice."}),l.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Dac nu selectezi nimic: valabil pe toate orele."})]})]}),l.jsxs("div",{className:"mt-4",children:[l.jsx(kn,{children:"Intervale orare zilnice (opional)"}),l.jsx(g3,{value:i.hours,onChange:_=>s(C=>({...C,hours:_}))}),l.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Ex.: 08:0010:00 i 16:0018:00. Dac nu pui nimic: valabil toat ziua."})]}),l.jsxs("div",{className:"mt-4",children:[l.jsx(kn,{children:"Zile ale sptmnii (opional)"}),l.jsx("div",{className:"flex flex-wrap gap-3 mt-2",children:["D","L","Ma","Mi","J","V","S"].map((_,C)=>l.jsxs("label",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"checkbox",checked:(i.weekdays||[]).includes(C),onChange:E=>{s(O=>{const M=new Set(O.weekdays);return E.target.checked?M.add(C):M.delete(C),{...O,weekdays:[...M].sort()}})}}),l.jsx("span",{children:_})]},C))}),l.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Dac nu bifezi: valabil n toate zilele."})]})]}),l.jsxs("div",{className:"md:col-span-3 flex items-center gap-2",children:[l.jsx(nj,{type:"submit",children:c?"Salveaz modificrile":"Salveaz"}),c&&l.jsx("button",{type:"button",onClick:b,className:"h-10 px-3 rounded border",children:"Anuleaz editarea"})]})]})})}),l.jsx(Ym,{children:l.jsxs(qm,{className:"p-4",children:[l.jsx("div",{className:"font-semibold mb-2",children:"Coduri existente"}),l.jsx("div",{className:"overflow-auto",children:l.jsxs("table",{className:"min-w-[1100px] w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"text-left border-b",children:[l.jsx("th",{className:"py-2",children:"ID"}),l.jsx("th",{children:"Cod"}),l.jsx("th",{children:"Label"}),l.jsx("th",{children:"Tip"}),l.jsx("th",{children:"Valoare"}),l.jsx("th",{children:"Active"}),l.jsx("th",{children:"Canale"}),l.jsx("th",{children:"Scope"}),l.jsx("th",{className:"py-2",children:"Aciuni"})]})}),l.jsx("tbody",{children:t.map(_=>{var C,E,O,M;return l.jsxs("tr",{className:"border-b",children:[l.jsx("td",{className:"py-2",children:_.id}),l.jsx("td",{children:_.code}),l.jsx("td",{children:_.label}),l.jsx("td",{children:_.type}),l.jsx("td",{children:_.value_off}),l.jsx("td",{children:_.active?"DA":"NU"}),l.jsx("td",{children:_.channels}),l.jsxs("td",{className:"text-xs text-gray-600",children:["r:",((C=_._scope)==null?void 0:C.routes)??0," / s:",((E=_._scope)==null?void 0:E.schedules)??0," / h:",((O=_._scope)==null?void 0:O.hours)??0," / d:",((M=_._scope)==null?void 0:M.weekdays)??0]}),l.jsx("td",{className:"py-2",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>S(_),className:"px-2 py-1 border rounded",children:"Editeaz"}),l.jsx("button",{onClick:()=>N(_.id),className:"px-2 py-1 border rounded",children:_.active?"Dezactiveaz":"Activeaz"}),l.jsx("button",{onClick:()=>j(_.id),className:"px-2 py-1 border rounded text-red-600",children:"terge"})]})})]},_.id)})})]})})]})})]})}function g3({value:t,onChange:e}){const[r,i]=h.useState("08:00"),[s,c]=h.useState("10:00"),d=()=>{if(!r||!s)return;const[f,p]=r.split(":").map(Number),[v,x]=s.split(":").map(Number),w=f*60+p;v*60+x<=w||e([...t||[],{start:r,end:s}])},m=f=>{const p=[...t||[]];p.splice(f,1),e(p)};return l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"time",className:"border rounded px-2 h-10",value:r,onChange:f=>i(f.target.value)}),l.jsx("span",{children:""}),l.jsx("input",{type:"time",className:"border rounded px-2 h-10",value:s,onChange:f=>c(f.target.value)}),l.jsx("button",{type:"button",onClick:d,className:"h-10 px-3 rounded bg-gray-800 text-white",children:"Adaug"})]}),(t||[]).length>0&&l.jsx("div",{className:"flex flex-wrap gap-2",children:t.map((f,p)=>l.jsxs("span",{className:"px-2 py-1 border rounded inline-flex items-center gap-2",children:[f.start,"",f.end,l.jsx("button",{type:"button",onClick:()=>m(p),className:"text-red-600",children:""})]},p))})]})}function v3(){const[t,e]=h.useState([]),[r,i]=h.useState([]),[s,c]=h.useState("permanent"),[d,m]=h.useState({offline:!0,online:!0}),[f,p]=h.useState({date:"",weekday:"",routeId:"",schedule_id:""}),[v,x]=h.useState(!0),[w,S]=h.useState(null),[b,N]=h.useState("route"),j=["Dum","Lun","Mar","Mie","Joi","Vin","Sm"],_=(D,Y)=>{const G=(D||"").trim();return G?`${G.toUpperCase()} ${Y}`:Y},C=()=>{p({date:"",weekday:"",routeId:"",schedule_id:""}),m({offline:!0,online:!0})},E=async()=>{x(!0);try{const D=new Date().toISOString().slice(0,10),[Y,G]=await Promise.all([fetch("/api/trips/admin/disabled-schedules"),fetch(`/api/routes?date=${D}`)]);if(!Y.ok||!G.ok)throw new Error("Network error");const ie=await Y.json(),Oe=await G.json();e(ie);const ce=[];Oe.forEach(te=>{te.schedules.forEach(k=>{ce.push({routeId:te.id,scheduleId:k.scheduleId??k.id,routeName:te.name,departure:k.departure,direction:k.direction||"",key:`${te.id}-${k.scheduleId??k.id}`})})}),i(ce),S(null)}catch(D){S(D)}finally{x(!1)}};h.useEffect(()=>{E()},[]);const O=r.filter(D=>!t.some(Y=>Y.schedule_id!==D.scheduleId?!1:!!(Y.rule_type==="permanent"||s==="weekly"&&(Y.rule_type==="weekday"&&Y.weekday.toString()===f.weekday||Y.rule_type==="date"&&f.weekday&&new Date(Y.exception_date).getDay().toString()===f.weekday)||s==="specific"&&(Y.rule_type==="date"&&Y.exception_date===f.date||Y.rule_type==="weekday"&&f.date&&new Date(f.date).getDay()===Y.weekday)))),M=[...t].sort((D,Y)=>b==="route"?D.route_name.localeCompare(Y.route_name):b==="-route"?Y.route_name.localeCompare(D.route_name):b==="hour"?_(D.direction,D.hour).localeCompare(_(Y.direction,Y.hour)):b==="-hour"?_(Y.direction,Y.hour).localeCompare(_(D.direction,D.hour)):0),R=async D=>{D.preventDefault();const Y={schedule_id:Number(f.schedule_id)};if(s==="weekly"&&(Y.weekday=Number(f.weekday)),s==="specific"&&(Y.exception_date=f.date),!d.offline&&!d.online){window.alert("Selecteaz cel puin o opiune de anulare (offline sau online).");return}Y.disable_run=!!d.offline,Y.disable_online=!!d.online;const G=await fetch("/api/trips/exceptions/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Y)});if(G.status===409){const ie=await G.json().catch(()=>({}));window.alert(ie.error||"Exist rezervri active n viitor pentru aceast curs. Mut pasagerii nainte de a o dezactiva.");return}if(!G.ok){const ie=await G.json().catch(()=>({}));window.alert(ie.error||"Eroare la salvarea regulii. ncearc din nou.");return}C(),c("permanent"),E()},I=async(D,Y)=>{const G={schedule_id:D.schedule_id,exception_date:D.rule_type==="date"?D.exception_date:null,weekday:D.rule_type==="weekday"?D.weekday:null,disable_run:Y==="disable_run"?!D.disable_run:D.disable_run,disable_online:Y==="disable_online"?!D.disable_online:D.disable_online},ie=await fetch("/api/trips/exceptions/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(G)});if(ie.status===409){const Oe=await ie.json().catch(()=>({}));window.alert(Oe.error||"Exist rezervri active n viitor pentru aceast curs. Mut pasagerii nainte de a o dezactiva.");return}if(!ie.ok){const Oe=await ie.json().catch(()=>({}));window.alert(Oe.error||"Eroare la actualizarea regulii. ncearc din nou.");return}E()},H=async D=>{window.confirm("Sigur tergi regula?")&&(await fetch(`/api/trips/admin/disabled-schedules/${D.id}`,{method:"DELETE"}),E())};return v?l.jsx("div",{children:"Loading"}):w?l.jsx("div",{className:"text-red-600",children:w.message}):l.jsxs("div",{className:"p-4 space-y-6",children:[l.jsxs("form",{onSubmit:R,className:"p-4 bg-white rounded shadow space-y-4",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-medium mr-4",children:"Cum vrei s anulezi?"}),["permanent","weekly","specific"].map(D=>l.jsxs("label",{className:"inline-flex items-center mr-4 capitalize",children:[l.jsx("input",{type:"radio",className:"accent-blue-600",checked:s===D,onChange:()=>{c(D),C()}}),l.jsx("span",{className:"ml-1",children:D})]},D))]}),s==="weekly"&&l.jsxs("select",{required:!0,value:f.weekday,onChange:D=>p(Y=>({...Y,weekday:D.target.value})),className:"border p-2 rounded",children:[l.jsx("option",{value:"",children:"Zi sptmn"}),j.map((D,Y)=>l.jsx("option",{value:Y,children:D},Y))]}),s==="specific"&&l.jsx("input",{type:"date",required:!0,value:f.date,onChange:D=>p(Y=>({...Y,date:D.target.value})),className:"border p-2 rounded"}),l.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[l.jsxs("select",{required:!0,value:f.routeId,onChange:D=>p(Y=>({...Y,routeId:D.target.value,schedule_id:""})),className:"border p-2 rounded",children:[l.jsx("option",{value:"",children:"Alege traseu"}),[...new Set(O.map(D=>D.routeId))].map(D=>{var G;const Y=(G=O.find(ie=>ie.routeId===D))==null?void 0:G.routeName;return l.jsx("option",{value:D,children:Y},D)})]}),l.jsxs("select",{required:!0,value:f.schedule_id,onChange:D=>p(Y=>({...Y,schedule_id:D.target.value})),className:"border p-2 rounded",children:[l.jsx("option",{value:"",children:"Alege or"}),O.filter(D=>D.routeId===Number(f.routeId)).map(D=>l.jsx("option",{value:D.scheduleId,children:_(D.direction,D.departure)},D.scheduleId))]}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-gray-500",children:"Opiuni anulare"}),l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[l.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[l.jsx("input",{type:"checkbox",className:"h-4 w-4 accent-blue-600",checked:d.offline,onChange:D=>m(Y=>({...Y,offline:D.target.checked}))}),l.jsx("span",{children:"Anulat offline"})]}),l.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[l.jsx("input",{type:"checkbox",className:"h-4 w-4 accent-blue-600",checked:d.online,onChange:D=>m(Y=>({...Y,online:D.target.checked}))}),l.jsx("span",{children:"Anulat online"})]})]})]}),l.jsx("button",{type:"submit",className:"bg-green-600 text-white px-3 py-2 rounded",children:"Adaug"})]})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"table-auto w-full text-sm divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsxs("th",{className:"px-4 py-2 cursor-pointer",onClick:()=>N(b==="route"?"-route":"route"),children:["Rut ",b==="route"?"":b==="-route"?"":""]}),l.jsxs("th",{className:"px-4 py-2 cursor-pointer",onClick:()=>N(b==="hour"?"-hour":"hour"),children:["Or ",b==="hour"?"":b==="-hour"?"":""]}),l.jsx("th",{className:"px-4 py-2",children:"Tip"}),l.jsx("th",{className:"px-4 py-2",children:"Dat/Zi"}),l.jsx("th",{className:"px-4 py-2 text-center",children:"Anulat offline"}),l.jsx("th",{className:"px-4 py-2 text-center",children:"Anulat online"}),l.jsx("th",{className:"px-4 py-2 text-center",children:"Aciuni"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:M.map(D=>l.jsxs("tr",{className:D.disable_run?"bg-red-50":"",children:[l.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:D.route_name}),l.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:_(D.direction,D.hour)}),l.jsx("td",{className:"px-4 py-2 capitalize",children:D.rule_type}),l.jsxs("td",{className:"px-4 py-2",children:[D.rule_type==="date"&&D.exception_date,D.rule_type==="weekday"&&j[D.weekday],D.rule_type==="permanent"&&"Permanent"]}),l.jsx("td",{className:"px-4 py-2 text-center",children:l.jsx("input",{type:"checkbox",className:"h-4 w-4 accent-red-600",checked:D.disable_run,onChange:()=>I(D,"disable_run"),"aria-label":"Anulat offline"})}),l.jsx("td",{className:"px-4 py-2 text-center",children:l.jsx("input",{type:"checkbox",className:"h-4 w-4 accent-amber-500",checked:D.disable_online,onChange:()=>I(D,"disable_online"),"aria-label":"Anulat online"})}),l.jsx("td",{className:"px-4 py-2 text-center",children:l.jsx("button",{onClick:()=>H(D),className:"text-red-600 hover:underline",children:"terge"})})]},D.id))})]})})]})}const om=[{value:"microbuz",label:"Microbuz"},{value:"autocar",label:"Autocar"}],b3=[{value:"empty",label:"Gol (configurez manual)"},{value:"microbus_2x1_20",label:"Microbuz 2+1 (20 locuri, cu ofer/ghid)"},{value:"coach_2x2_51",label:"Autocar 2+2 (51 locuri, cu ofer/ghid)"},{value:"copy_other",label:"Copiaz layout de la alt main"}];function Sr({label:t,children:e}){return l.jsxs("label",{className:"block mb-3",children:[l.jsx("span",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),e]})}function ia(t){return l.jsx("input",{...t,className:"w-full rounded-lg border border-gray-300 px-3 py-2 outline-none focus:ring-2 focus:ring-blue-500 "+(t.className||"")})}function Si(t){return l.jsx("select",{...t,className:"w-full rounded-lg border border-gray-300 px-3 py-2 outline-none focus:ring-2 focus:ring-blue-500 "+(t.className||"")})}function y3(){const[t,e]=h.useState([]),[r,i]=h.useState(!1),[s,c]=h.useState(""),[d,m]=h.useState([]),[f,p]=h.useState(""),[v,x]=h.useState(""),[w,S]=h.useState(!1),[b,N]=h.useState({name:"",plate_number:"",type:"",operator_id:"",seat_count:"",template:"empty"}),[j,_]=h.useState(null),[C,E]=h.useState(null),[O,M]=h.useState(!1),[R,I]=h.useState([]),[H,D]=h.useState(!1),[Y,G]=h.useState(0),[ie,Oe]=h.useState(0),[ce,te]=h.useState(null),k=P=>P.id??P._tmpId;function z(P){const le=Math.min(...P.filter(pe=>!pe._delete).map(pe=>Number(pe.row)).filter(pe=>Number.isFinite(pe)),1),se=Math.max(...P.filter(pe=>!pe._delete).map(pe=>Number(pe.row)).filter(pe=>Number.isFinite(pe)),1),Me=Math.max(...P.filter(pe=>!pe._delete).map(pe=>Number(pe.seat_col)).filter(pe=>Number.isFinite(pe)),1);return{minRow:le,maxRow:se,cols:Me}}function U(P,le,se){return P.some(Me=>!Me._delete&&Number(Me.row)===le&&Number(Me.seat_col)===se)}function K(P){const{minRow:le,maxRow:se,cols:Me}=z(P),pe=se;for(let Ue=1;Ue<=Math.max(Me,1);Ue++)if(!U(P,pe,Ue))return{row:pe,col:Ue};return{row:se+1,col:1}}function T(P,le,se,Me=1){let{minRow:pe,maxRow:Ue,cols:Ge}=z(P),Ke=le,We=se;for(;;){if(!U(P,Ke,We))return{row:Ke,col:We};We+=Me,We<1&&(Ke=Math.max(pe,Ke-1),We=Ge),We>Ge&&(Ke+=1,We=1,Ue=Math.max(Ue,Ke))}}h.useEffect(()=>{A()},[]),h.useEffect(()=>{F()},[f,v]);async function A(){try{const P=await fetch("/api/operators");if(!P.ok)throw new Error(`HTTP ${P.status}`);const le=await P.json();m(Array.isArray(le)?le:[])}catch(P){console.error(P)}}async function F(){try{i(!0),c("");const P=new URLSearchParams;f&&P.set("operator_id",f),v&&P.set("type",v);const le=`/api/vehicles${P.toString()?"?"+P:""}`,se=await fetch(le);if(!se.ok)throw new Error(`HTTP ${se.status}`);const Me=await se.json();e(Array.isArray(Me)?Me:[])}catch(P){console.error(P),c("Nu am putut ncrca lista de maini.")}finally{i(!1)}}async function V(P){_(P),E(null),I([]),G(0),Oe(0);try{const le=await fetch(`/api/vehicles/${P}`);if(!le.ok)throw new Error(`HTTP ${le.status}`);const se=await le.json();E(se);const Me=await fetch(`/api/vehicles/${P}/seats`);if(!Me.ok)throw new Error(`HTTP ${Me.status}`);const pe=await Me.json(),Ue=(Array.isArray(pe)?pe:[]).map(Ge=>({...Ge,_tmpId:Ge._tmpId||Ge.id||`tmp_${Date.now()}_${Math.random().toString(36).slice(2,7)}`}));I(Ue)}catch(le){console.error(le),c("Nu am putut ncrca editorul pentru aceast main.")}}async function q(){if(C!=null&&C.id){M(!0),c("");try{const P=await fetch(`/api/vehicles/${C.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:C.name??"",seat_count:C.seat_count??null,type:C.type??"",plate_number:C.plate_number??"",operator_id:C.operator_id??null})});if(!P.ok)throw new Error(`HTTP ${P.status}`);await F()}catch(P){console.error(P),c("Nu am putut salva detaliile mainii.")}finally{M(!1)}}}async function Q(P){if(window.confirm("Sigur tergi aceast main? Operaia nu poate fi anulat."))try{const le=await fetch(`/api/vehicles/${P}`,{method:"DELETE"});if(!le.ok){const se=await le.json().catch(()=>({}));le.status===409?alert(se.error||"Maina este folosit pe curse i nu poate fi tears."):alert(se.error||`Eroare la tergere (HTTP ${le.status})`);return}j===P&&(_(null),E(null),I([])),await F()}catch(le){console.error(le),alert("Eroare la tergerea vehiculului.")}}async function be(){if(C!=null&&C.id){D(!0),c("");try{for(const pe of R)if(!pe._delete&&(pe.row==null||pe.seat_col==null)){D(!1),c("Toate locurile trebuie s aib rnd i coloan.");return}const P=await fetch(`/api/vehicles/${C.id}/seats/bulk`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)});if(!P.ok)throw new Error(`HTTP ${P.status}`);const se=await(await fetch(`/api/vehicles/${C.id}/seats`)).json(),Me=(Array.isArray(se)?se:[]).map(pe=>({...pe,_tmpId:pe._tmpId||pe.id||`tmp_${Date.now()}_${Math.random().toString(36).slice(2,7)}`}));I(Me),await F()}catch(P){console.error(P),c("Nu am putut salva layoutul locurilor.")}finally{D(!1)}}}function Ce(P){const le=P.map(Me=>Number(String(Me.label).trim())).filter(Me=>Number.isFinite(Me)),se=le.length?Math.max(...le)+1:1;return String(se)}function X(){const P=Ce(R),le=K(R);I(se=>[...se,{vehicle_id:C==null?void 0:C.id,seat_number:null,position:null,row:le.row,seat_col:le.col,is_available:1,label:P,seat_type:"normal",pair_id:null,_tmpId:`tmp_${Date.now()}_${Math.random().toString(36).slice(2,7)}`}])}function W(P,le){if(U(R,P,le))return;const se=Ce(R);I(Me=>[...Me,{vehicle_id:C==null?void 0:C.id,seat_number:null,position:null,row:P,seat_col:le,is_available:1,label:se,seat_type:"normal",pair_id:null,_tmpId:`tmp_${Date.now()}_${Math.random().toString(36).slice(2,7)}`}])}function J(P,le){I(se=>se.map(Me=>k(Me)===P?{...Me,...le}:Me))}function ue(P){I(le=>le.flatMap(se=>k(se)!==P?[se]:se.id?[{...se,_delete:!se._delete}]:[]))}function Z(P,le){const se=[];let Me=1;const pe=(Ue,Ge,Ke="normal",We=null)=>{se.push({vehicle_id:le,row:Ue,seat_col:Ge,seat_number:null,position:null,is_available:1,label:We??String(Me++),seat_type:Ke,pair_id:null})};if(pe(0,1,"driver","ofer"),pe(0,3,"guide","Ghid"),P==="empty")return se;if(P==="microbus_2x1_20"){for(let Ue=1;Ue<=6;Ue++)pe(Ue,1),pe(Ue,2),pe(Ue,4);return pe(7,1),pe(7,4),se}if(P==="coach_2x2_51"){for(let Ue=1;Ue<=12;Ue++)pe(Ue,1),pe(Ue,2),pe(Ue,4),pe(Ue,5);return pe(13,1),pe(13,2),pe(13,4),se}return se}const _e=h.useMemo(()=>z(R),[R]),ke=_e.maxRow-_e.minRow+1+Y,Be=Math.max(1,_e.cols)+ie;return l.jsxs("div",{className:"p-4",children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Administrare  Maini"}),l.jsxs("div",{className:"mb-6 rounded-2xl border border-gray-200 p-4 shadow-sm bg-white",children:[l.jsxs("div",{className:"flex flex-wrap items-end gap-3 mb-4",children:[l.jsx(Sr,{label:"Operator",children:l.jsxs(Si,{value:f,onChange:P=>p(P.target.value),children:[l.jsx("option",{value:"",children:"Toi"}),d.map(P=>l.jsx("option",{value:P.id,children:P.name},P.id))]})}),l.jsx(Sr,{label:"Tip",children:l.jsxs(Si,{value:v,onChange:P=>x(P.target.value),children:[l.jsx("option",{value:"",children:"Toate"}),om.map(P=>l.jsx("option",{value:P.value,children:P.label},P.value))]})}),l.jsx("button",{className:"ml-auto rounded-xl bg-gray-100 hover:bg-gray-200 px-4 py-2",onClick:F,children:"Rencarc"}),l.jsx("button",{className:"rounded-xl bg-blue-600 text-white px-4 py-2 hover:bg-blue-700",onClick:()=>S(!0),children:"Adaug main"})]}),r?l.jsx("div",{className:"text-gray-500",children:"Se ncarc lista"}):s?l.jsx("div",{className:"text-red-600",children:s}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"text-left text-gray-600",children:[l.jsx("th",{className:"py-2 pr-4",children:"Nume"}),l.jsx("th",{className:"py-2 pr-4",children:"Nr. nmatr."}),l.jsx("th",{className:"py-2 pr-4",children:"Tip"}),l.jsx("th",{className:"py-2 pr-4",children:"Operator"}),l.jsx("th",{className:"py-2 pr-4",children:"Locuri"}),l.jsx("th",{className:"py-2"})]})}),l.jsxs("tbody",{children:[t.map(P=>{var le;return l.jsxs("tr",{className:"border-t",children:[l.jsx("td",{className:"py-2 pr-4",children:P.name}),l.jsx("td",{className:"py-2 pr-4",children:P.plate_number}),l.jsx("td",{className:"py-2 pr-4 capitalize",children:P.type}),l.jsx("td",{className:"py-2 pr-4",children:P.operator_name??((le=d.find(se=>se.id===P.operator_id))==null?void 0:le.name)??"-"}),l.jsx("td",{className:"py-2 pr-4",children:P.seat_count}),l.jsx("td",{className:"py-2",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{className:"rounded-xl bg-blue-600 text-white px-3 py-1.5 hover:bg-blue-700",onClick:()=>V(P.id),children:"Editeaz"}),l.jsx("button",{className:"rounded-xl bg-red-600 text-white px-3 py-1.5 hover:bg-red-700",onClick:()=>Q(P.id),children:"terge"})]})})]},P.id)}),t.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"py-4 text-gray-500",children:"Nu exist maini pentru filtrul selectat."})})]})]})})]}),w&&l.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-[999]",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-5 w-full max-w-xl",children:[l.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Adaug main"}),l.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[l.jsx(Sr,{label:"Nume",children:l.jsx(ia,{value:b.name,onChange:P=>N({...b,name:P.target.value})})}),l.jsx(Sr,{label:"Numr nmatriculare",children:l.jsx(ia,{value:b.plate_number,onChange:P=>N({...b,plate_number:P.target.value})})}),l.jsx(Sr,{label:"Tip",children:l.jsxs(Si,{value:b.type,onChange:P=>N({...b,type:P.target.value}),children:[l.jsx("option",{value:"",children:""}),om.map(P=>l.jsx("option",{value:P.value,children:P.label},P.value))]})}),l.jsx(Sr,{label:"Operator",children:l.jsxs(Si,{value:b.operator_id,onChange:P=>N({...b,operator_id:P.target.value}),children:[l.jsx("option",{value:"",children:""}),d.map(P=>l.jsx("option",{value:P.id,children:P.name},P.id))]})}),l.jsx(Sr,{label:"Nr. locuri (informativ)",children:l.jsx(ia,{type:"number",value:b.seat_count,onChange:P=>N({...b,seat_count:P.target.value})})}),l.jsxs(Sr,{label:"ablon locuri",children:[l.jsx(Si,{value:b.template,onChange:P=>N({...b,template:P.target.value}),children:b3.map(P=>l.jsx("option",{value:P.value,children:P.label},P.value))}),b.template==="copy_other"&&l.jsxs("div",{className:"mt-2",children:[l.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Alege maina surs"}),l.jsxs("select",{value:b.copyFromId||"",onChange:P=>N(le=>({...le,copyFromId:P.target.value})),className:"border rounded-lg px-2 py-1 w-full",children:[l.jsx("option",{value:"",children:"Selecteaz o main existent"}),t.map(P=>l.jsxs("option",{value:P.id,children:[P.name," (",P.plate_number,")"]},P.id))]})]})]})]}),l.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[l.jsx("button",{className:"rounded-xl bg-gray-100 px-4 py-2",onClick:()=>S(!1),children:"Anuleaz"}),l.jsx("button",{className:"rounded-xl bg-green-600 text-white px-4 py-2",onClick:Se,children:"Creeaz"})]})]})}),j&&C&&l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"rounded-2xl border border-gray-200 p-4 shadow-sm bg-white",children:[l.jsx("h3",{className:"text-lg font-medium mb-4",children:"Detalii vehicul"}),l.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[l.jsx(Sr,{label:"Nume",children:l.jsx(ia,{value:C.name||"",onChange:P=>E({...C,name:P.target.value})})}),l.jsx(Sr,{label:"Numr nmatriculare",children:l.jsx(ia,{value:C.plate_number||"",onChange:P=>E({...C,plate_number:P.target.value})})}),l.jsx(Sr,{label:"Tip",children:l.jsxs(Si,{value:C.type||"",onChange:P=>E({...C,type:P.target.value}),children:[l.jsx("option",{value:"",children:""}),om.map(P=>l.jsx("option",{value:P.value,children:P.label},P.value))]})}),l.jsx(Sr,{label:"Operator",children:l.jsxs(Si,{value:C.operator_id||"",onChange:P=>E({...C,operator_id:P.target.value?Number(P.target.value):null}),children:[l.jsx("option",{value:"",children:""}),d.map(P=>l.jsx("option",{value:P.id,children:P.name},P.id))]})}),l.jsx(Sr,{label:"Locuri (informativ)",children:l.jsx(ia,{type:"number",value:C.seat_count??"",onChange:P=>E({...C,seat_count:Number(P.target.value)||null})})})]}),l.jsx("div",{className:"mt-4 flex gap-3",children:l.jsx("button",{onClick:q,disabled:O,className:"rounded-xl bg-blue-600 text-white px-4 py-2 hover:bg-blue-700 disabled:opacity-60",children:O?"Se salveaz":"Salveaz detalii"})})]}),l.jsxs("div",{className:"rounded-2xl border border-gray-200 p-4 shadow-sm bg-white",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h3",{className:"text-lg font-medium",children:"Layout locuri"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>Oe(P=>P+1),className:"rounded-xl bg-gray-100 px-3 py-2 hover:bg-gray-200",children:"+ Coloan dreapta"}),l.jsx("button",{onClick:()=>G(P=>P+1),className:"rounded-xl bg-gray-100 px-3 py-2 hover:bg-gray-200",children:"+ Rnd jos"}),l.jsx("button",{onClick:X,className:"rounded-xl bg-gray-100 px-3 py-2 hover:bg-gray-200",children:"+ Adaug loc"}),l.jsx("button",{onClick:be,disabled:H,className:"rounded-xl bg-green-600 text-white px-4 py-2 hover:bg-green-700 disabled:opacity-60",children:H?"Se salveaz":"Salveaz layout"})]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("div",{className:"bg-gray-50 rounded-2xl p-4 overflow-auto",style:{border:"1px solid #e5e7eb"},children:l.jsx("div",{className:"grid gap-2",style:{gridTemplateColumns:`repeat(${Be}, minmax(44px, 1fr))`},children:Array.from({length:ke*Be}).map((P,le)=>{const se=Math.floor(le/Be),Me=_e.minRow+se,pe=le%Be+1,Ue=R.find(We=>Number(We.row)===Me&&Number(We.seat_col)===pe&&!We._delete);if(!Ue)return l.jsx("div",{onDragOver:We=>We.preventDefault(),onDrop:()=>{ce&&(U(R,Me,pe)||J(ce,{row:Me,seat_col:pe}),te(null))},className:"h-11 rounded-lg bg-transparent border border-dashed border-gray-300 hover:border-blue-400 hover:bg-blue-50 transition",title:`Adaug loc la r${Me} c${pe}`,onClick:()=>W(Me,pe)},`empty_${Me}_${pe}`);const Ge=Ue.seat_type==="driver"||String(Ue.label||"").toLowerCase().includes("ofer")||String(Ue.label||"").toLowerCase().includes("sofer"),Ke=Ue.seat_type==="guide"||String(Ue.label||"").toLowerCase().includes("ghid");return l.jsx("div",{draggable:!0,onDragStart:()=>te(k(Ue)),onDragEnd:()=>te(null),title:`r${Me} c${pe}`,className:`h-11 rounded-lg flex items-center justify-center text-sm font-semibold select-none
                          ${Ue._delete?"bg-red-100 text-red-600 border border-red-300":Ge?"bg-gray-700 text-white":Ke?"bg-slate-500 text-white":"bg-emerald-500 text-white"}`,children:Ue.label||`${Me}:${pe}`},`${k(Ue)}_${le}`)})})}),l.jsx("p",{className:"text-xs text-gray-500 mt-2",children:" Rndul 0 (sus) este pentru ofer/Ghid. Poi trage un loc n alt celul liber sau poi da click pe o celul liber ca s adaugi acolo."})]}),l.jsx("div",{className:"overflow-auto max-h-[420px] border rounded-xl",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-50 sticky top-0",children:l.jsxs("tr",{className:"text-left text-gray-600",children:[l.jsx("th",{className:"py-2 px-3",children:"Label"}),l.jsx("th",{className:"py-2 px-3",children:"Tip"}),l.jsx("th",{className:"py-2 px-3",children:"Rnd"}),l.jsx("th",{className:"py-2 px-3",children:"Coloan"}),l.jsx("th",{className:"py-2 px-3",children:"Pair ID"}),l.jsx("th",{className:"py-2 px-3"})]})}),l.jsxs("tbody",{children:[R.slice().sort((P,le)=>P.row-le.row||P.seat_col-le.seat_col||String(P.label).localeCompare(String(le.label))).map(P=>{const le=k(P);return l.jsxs("tr",{className:`border-t ${P._delete?"bg-red-50":""}`,children:[l.jsx("td",{className:"py-1.5 px-3",children:l.jsx(ia,{value:P.label??"",onChange:se=>J(le,{label:se.target.value})})}),l.jsx("td",{className:"py-1.5 px-3",children:l.jsxs(Si,{value:P.seat_type||"normal",onChange:se=>J(le,{seat_type:se.target.value}),children:[l.jsx("option",{value:"normal",children:"norm."}),l.jsx("option",{value:"driver",children:"driver"}),l.jsx("option",{value:"guide",children:"guide"}),l.jsx("option",{value:"foldable",children:"foldable"}),l.jsx("option",{value:"wheelchair",children:"wheelchair"})]})}),l.jsx("td",{className:"py-1.5 px-3 w-36",children:l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-100 hover:bg-gray-200",onClick:()=>{const se=R.filter(pe=>k(pe)!==le),Me=T(se,(P.row??0)-1,P.seat_col,-1);J(le,{row:Me.row})},children:""}),l.jsx(ia,{type:"number",value:P.row??"",onChange:se=>J(le,{row:Number(se.target.value)||0}),onBlur:()=>{const se=R.filter(Ue=>k(Ue)!==le),Me=Number(P.row)||0,pe=Number(P.seat_col)||1;if(U(se,Me,pe)){const Ue=T(se,Me,pe,1);J(le,{row:Ue.row,seat_col:Ue.col})}}}),l.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-100 hover:bg-gray-200",onClick:()=>{const se=R.filter(pe=>k(pe)!==le),Me=T(se,(P.row??0)+1,P.seat_col,1);J(le,{row:Me.row})},children:""})]})}),l.jsx("td",{className:"py-1.5 px-3 w-36",children:l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-100 hover:bg-gray-200",onClick:()=>{const se=Math.max(1,(P.seat_col||1)-1),Me=R.filter(Ue=>k(Ue)!==le),pe=T(Me,P.row??0,se,-1);J(le,{row:pe.row,seat_col:pe.col})},children:""}),l.jsx(ia,{type:"number",value:P.seat_col??"",onChange:se=>J(le,{seat_col:Number(se.target.value)||0}),onBlur:()=>{const se=R.filter(Ue=>k(Ue)!==le),Me=Number(P.row)||0,pe=Number(P.seat_col)||1;if(U(se,Me,pe)){const Ue=T(se,Me,pe,1);J(le,{row:Ue.row,seat_col:Ue.col})}}}),l.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-100 hover:bg-gray-200",onClick:()=>{const se=R.filter(pe=>k(pe)!==le),Me=T(se,P.row??0,(P.seat_col||1)+1,1);J(le,{row:Me.row,seat_col:Me.col})},children:""})]})}),l.jsx("td",{className:"py-1.5 px-3 w-28",children:l.jsx(ia,{type:"number",value:P.pair_id??"",onChange:se=>J(le,{pair_id:Number(se.target.value)||null})})}),l.jsx("td",{className:"py-1.5 px-3",children:l.jsx("button",{className:`rounded-lg px-3 py-1.5 text-sm ${P._delete?"bg-gray-200":"bg-red-600 text-white hover:bg-red-700"}`,onClick:()=>ue(le),children:P._delete?"Anuleaz":"terge"})})]},le)}),R.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"py-4 px-3 text-gray-500",children:"Nu exist locuri. Apas + Adaug loc."})})]})]})})]})]})]});async function Se(){try{if(!b.name||!b.type){alert("Completeaz Nume i Tip.");return}const P={name:b.name,plate_number:b.plate_number||"",type:b.type,operator_id:b.operator_id?Number(b.operator_id):null,seat_count:b.seat_count?Number(b.seat_count):null},le=await fetch("/api/vehicles",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)});if(!le.ok){alert("Nu am putut crea maina. Verific backend-ul pentru POST /api/vehicles.");return}const se=await le.json(),Me=(se==null?void 0:se.id)??(se==null?void 0:se.insertId)??null;if(!Me){alert("Nu am primit ID-ul noii maini de la server.");return}if(b.template==="copy_other"&&b.copyFromId){console.log("Copiere layout de la vehicul:",b.copyFromId);const Ue=await(await fetch(`/api/vehicles/${b.copyFromId}/seats`)).json();if(Array.isArray(Ue)&&Ue.length>0){const Ge=Ue.map(We=>({...We,id:void 0,vehicle_id:Me}));(await fetch(`/api/vehicles/${Me}/seats/bulk`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ge)})).ok||alert("Nu s-a putut copia layoutul.")}}else if(b.template!=="empty"){const pe=Z(b.template,Me);await fetch(`/api/vehicles/${Me}/seats/bulk`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(pe)})}S(!1),N({name:"",plate_number:"",type:"",operator_id:"",seat_count:"",template:"empty",copyFromId:""}),await F(),await V(Me)}catch(P){console.error(P),alert("Eroare la crearea mainii.")}}}function x3(){const[t,e]=h.useState([]),[r,i]=h.useState([]),[s,c]=h.useState(!0);h.useEffect(()=>{let f=!0;return(async()=>{try{const[p,v]=await Promise.all([fetch("/api/routes").then(S=>S.json()),fetch("/api/user/route-order",{credentials:"include"}).then(S=>S.json())]);if(!f)return;const x={};(Array.isArray(v)?v:[]).forEach(S=>{x[S.route_id]=S.position_idx});const w=[...p].sort((S,b)=>{const N=x[S.id]??1/0,j=x[b.id]??1/0;return N!==j?N-j:S.name.localeCompare(b.name)});e(w),i(w.map((S,b)=>({route_id:S.id,position_idx:b+1})))}catch(p){console.error(p)}finally{f&&c(!1)}})(),()=>{f=!1}},[]);const d=(f,p)=>{i(v=>{const x=[...v],w=p==="up"?f-1:f+1;return w<0||w>=x.length||([x[f],x[w]]=[x[w],x[f]],x.forEach((S,b)=>S.position_idx=b+1)),x}),e(v=>{const x=[...v],w=p==="up"?f-1:f+1;return w<0||w>=x.length||([x[f],x[w]]=[x[w],x[f]]),x})},m=async()=>{try{await fetch("/api/user/route-order",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({order:r})}),alert("Salvat!")}catch(f){console.error(f),alert("Eroare la salvare.")}};return s?l.jsx("div",{children:"Se ncarc"}):l.jsxs("div",{className:"space-y-3",children:[l.jsx("h2",{className:"text-lg font-semibold",children:"Preferine utilizator"}),l.jsxs("div",{className:"p-3 bg-white rounded shadow",children:[l.jsx("div",{className:"text-sm mb-2",children:"Ordinea rutelor (se aplic n pagina de rezervri doar pentru utilizatorul curent):"}),l.jsx("ul",{className:"space-y-1",children:t.map((f,p)=>l.jsxs("li",{className:"flex items-center justify-between border rounded px-2 py-1",children:[l.jsxs("div",{className:"truncate",children:[p+1,". ",f.name]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{className:"px-2 py-1 border rounded text-xs",onClick:()=>d(p,"up"),disabled:p===0,title:"Mut n sus",children:""}),l.jsx("button",{className:"px-2 py-1 border rounded text-xs",onClick:()=>d(p,"down"),disabled:p===t.length-1,title:"Mut n jos",children:""})]})]},f.id))}),l.jsx("div",{className:"mt-3",children:l.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white rounded",onClick:m,children:"Salveaz ordinea"})})]}),l.jsxs("div",{className:"p-3 bg-white rounded shadow",children:[l.jsx("div",{className:"text-sm mb-2",children:"Preferine UI (exemplu  de extins pe viitor):"}),l.jsx("div",{className:"text-xs text-gray-500",children:"Dark mode, culori diagram etc. vor aprea aici cnd decizi."})]})]})}function w3(){const[t,e]=h.useState(!0),[r,i]=h.useState(!1),[s,c]=h.useState(""),[d,m]=h.useState(""),[f,p]=h.useState("");h.useEffect(()=>{let x=!1;return(async()=>{try{const S=await fetch("/api/fiscal-settings");if(!S.ok)throw new Error("Nu s-au putut ncrca setrile fiscale");const b=await S.json().catch(()=>({}));x||c(typeof(b==null?void 0:b.receipt_note)=="string"?b.receipt_note:"")}catch(S){console.error(S),x||m(S.message||"Nu s-au putut ncrca setrile fiscale")}finally{x||e(!1)}})(),()=>{x=!0}},[]);const v=async x=>{x.preventDefault(),i(!0),m(""),p("");try{const w=await fetch("/api/fiscal-settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({receipt_note:s})});if(!w.ok){const S=await w.json().catch(()=>({}));throw new Error((S==null?void 0:S.error)||"Nu s-au putut salva setrile")}p("Setrile au fost salvate.")}catch(w){console.error(w),m(w.message||"Nu s-au putut salva setrile")}finally{i(!1)}};return l.jsxs("div",{className:"space-y-4",children:[l.jsx("h2",{className:"text-lg font-semibold",children:"Setri fiscalizare"}),t?l.jsx("div",{children:"Se ncarc"}):l.jsxs("form",{onSubmit:v,className:"bg-white rounded shadow p-4 space-y-4 max-w-xl",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"receipt-note",className:"block text-sm font-medium text-gray-700",children:"Text implicit pe bon fiscal"}),l.jsx("input",{id:"receipt-note",type:"text",className:"mt-1 block w-full border rounded px-3 py-2 text-sm",placeholder:"ex: Bilet Botoani  Iai (Agent: nume)",value:s,maxLength:120,onChange:x=>c(x.target.value)}),l.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Acest text se adaug la descrierea tiprit pe bonul fiscal."})]}),d&&l.jsx("div",{className:"text-sm text-red-600",children:d}),f&&l.jsx("div",{className:"text-sm text-green-600",children:f}),l.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded disabled:opacity-60",disabled:r,children:r?"Se salveaz":"Salveaz setrile"})]})]})}function S3(){const[t,e]=h.useState("drivers"),[r,i]=h.useState(null),[s,c]=h.useState(!0);h.useEffect(()=>{(async()=>{var f;try{const v=await(await fetch("/api/auth/me",{credentials:"include"})).json().catch(()=>({}));i(((f=v==null?void 0:v.user)==null?void 0:f.role)||null)}catch{i(null)}finally{c(!1)}})()},[]);const d=(m,f)=>l.jsx("button",{className:t===m?"bg-blue-600 text-white px-3 py-1 rounded":"bg-gray-200 px-3 py-1 rounded",onClick:()=>e(m),children:f});return l.jsxs("div",{className:"p-4",children:[s&&l.jsx("div",{children:"Se ncarc..."}),!s&&!["admin","operator_admin","agent"].includes(r)&&l.jsx("div",{className:"text-red-600",children:"Acces interzis."}),!s&&["admin","operator_admin","agent"].includes(r)&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[d("drivers","oferi"),d("prefs","Preferine"),"   ",["admin","operator_admin"].includes(r)&&l.jsxs(l.Fragment,{children:[d("rute","Rute"),d("stations","Staii"),d("discounts","Tipuri Discount"),d("prices","Liste preuri"),d("employees","Angajai"),d("disabled","Curse Dezactivate"),d("vehicles","Maini"),d("promo","Coduri promo"),d("fiscal","Fiscalizare")]})]}),t==="drivers"&&l.jsx(gD,{}),t==="prefs"&&l.jsx(x3,{}),["admin","operator_admin"].includes(r)&&l.jsxs(l.Fragment,{children:[t==="rute"&&l.jsx(bD,{}),t==="stations"&&l.jsx(hP,{}),t==="discounts"&&l.jsx(gP,{}),t==="prices"&&l.jsx(vP,{}),t==="employees"&&l.jsx(bP,{}),t==="disabled"&&l.jsx(v3,{}),t==="vehicles"&&l.jsx(y3,{}),t==="promo"&&l.jsx(p3,{}),t==="fiscal"&&l.jsx(w3,{})]})]})]})}function j3({value:t,onChange:e}){const[r,i]=h.useState([]);return h.useEffect(()=>{fetch("/api/operators").then(s=>s.json()).then(i).catch(console.error)},[]),r.length?l.jsxs("select",{value:t??"",onChange:s=>e(Number(s.target.value)),className:"border rounded px-2 py-1",children:[l.jsx("option",{value:"",disabled:!0,children:"Alege operator"}),r.map(s=>l.jsx("option",{value:s.id,children:s.name},s.id))]}):l.jsx("span",{className:"text-gray-400 text-sm",children:"Se ncarc operatorii"})}function _3({value:t,onChange:e}){const r=i=>s=>e({...t,[i]:s.target.value});return l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("label",{className:"text-sm",children:"de la"}),l.jsx("input",{type:"date",value:t.start,onChange:r("start"),className:"border rounded px-2 py-1"}),l.jsx("label",{className:"text-sm",children:"pn la"}),l.jsx("input",{type:"date",value:t.end,onChange:r("end"),className:"border rounded px-2 py-1"})]})}function N3({value:t,onChange:e}){const[r,i]=h.useState([]),[s,c]=h.useState(!0);return h.useEffect(()=>{fetch("/api/agencies").then(d=>d.json()).then(d=>{i(d),c(!1)}).catch(()=>c(!1))},[]),s?l.jsx("span",{className:"text-gray-400 text-sm",children:"Agenii"}):l.jsxs("select",{value:t??"",onChange:d=>e(d.target.value||null),className:"border rounded px-2 py-1",children:[l.jsx("option",{value:"",children:"Toate ageniile"}),r.map(d=>l.jsx("option",{value:d.id,children:d.name},d.id))]})}function C3({value:t,onChange:e,agencyId:r}){const[i,s]=h.useState([]),[c,d]=h.useState(!0);return h.useEffect(()=>{if(!r){s([]),d(!1);return}d(!0),fetch(`/api/employees?agency_id=${r}`).then(m=>m.json()).then(m=>{s(m),d(!1)}).catch(()=>d(!1))},[r]),c?l.jsx("span",{className:"text-gray-400 text-sm",children:"Ageni"}):l.jsxs("select",{value:t??"",onChange:m=>e(m.target.value||null),className:"border rounded px-2 py-1",children:[l.jsx("option",{value:"",children:"Toi agenii"}),i.map(m=>l.jsx("option",{value:m.id,children:m.name},m.id))]})}var Iu={exports:{}},E3=Iu.exports,cw;function O3(){return cw||(cw=1,function(t,e){(function(r,i){t.exports=i()})(E3,function(){var r=1e3,i=6e4,s=36e5,c="millisecond",d="second",m="minute",f="hour",p="day",v="week",x="month",w="quarter",S="year",b="date",N="Invalid Date",j=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,_=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,C={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(ce){var te=["th","st","nd","rd"],k=ce%100;return"["+ce+(te[(k-20)%10]||te[k]||te[0])+"]"}},E=function(ce,te,k){var z=String(ce);return!z||z.length>=te?ce:""+Array(te+1-z.length).join(k)+ce},O={s:E,z:function(ce){var te=-ce.utcOffset(),k=Math.abs(te),z=Math.floor(k/60),U=k%60;return(te<=0?"+":"-")+E(z,2,"0")+":"+E(U,2,"0")},m:function ce(te,k){if(te.date()<k.date())return-ce(k,te);var z=12*(k.year()-te.year())+(k.month()-te.month()),U=te.clone().add(z,x),K=k-U<0,T=te.clone().add(z+(K?-1:1),x);return+(-(z+(k-U)/(K?U-T:T-U))||0)},a:function(ce){return ce<0?Math.ceil(ce)||0:Math.floor(ce)},p:function(ce){return{M:x,y:S,w:v,d:p,D:b,h:f,m,s:d,ms:c,Q:w}[ce]||String(ce||"").toLowerCase().replace(/s$/,"")},u:function(ce){return ce===void 0}},M="en",R={};R[M]=C;var I="$isDayjsObject",H=function(ce){return ce instanceof ie||!(!ce||!ce[I])},D=function ce(te,k,z){var U;if(!te)return M;if(typeof te=="string"){var K=te.toLowerCase();R[K]&&(U=K),k&&(R[K]=k,U=K);var T=te.split("-");if(!U&&T.length>1)return ce(T[0])}else{var A=te.name;R[A]=te,U=A}return!z&&U&&(M=U),U||!z&&M},Y=function(ce,te){if(H(ce))return ce.clone();var k=typeof te=="object"?te:{};return k.date=ce,k.args=arguments,new ie(k)},G=O;G.l=D,G.i=H,G.w=function(ce,te){return Y(ce,{locale:te.$L,utc:te.$u,x:te.$x,$offset:te.$offset})};var ie=function(){function ce(k){this.$L=D(k.locale,null,!0),this.parse(k),this.$x=this.$x||k.x||{},this[I]=!0}var te=ce.prototype;return te.parse=function(k){this.$d=function(z){var U=z.date,K=z.utc;if(U===null)return new Date(NaN);if(G.u(U))return new Date;if(U instanceof Date)return new Date(U);if(typeof U=="string"&&!/Z$/i.test(U)){var T=U.match(j);if(T){var A=T[2]-1||0,F=(T[7]||"0").substring(0,3);return K?new Date(Date.UTC(T[1],A,T[3]||1,T[4]||0,T[5]||0,T[6]||0,F)):new Date(T[1],A,T[3]||1,T[4]||0,T[5]||0,T[6]||0,F)}}return new Date(U)}(k),this.init()},te.init=function(){var k=this.$d;this.$y=k.getFullYear(),this.$M=k.getMonth(),this.$D=k.getDate(),this.$W=k.getDay(),this.$H=k.getHours(),this.$m=k.getMinutes(),this.$s=k.getSeconds(),this.$ms=k.getMilliseconds()},te.$utils=function(){return G},te.isValid=function(){return this.$d.toString()!==N},te.isSame=function(k,z){var U=Y(k);return this.startOf(z)<=U&&U<=this.endOf(z)},te.isAfter=function(k,z){return Y(k)<this.startOf(z)},te.isBefore=function(k,z){return this.endOf(z)<Y(k)},te.$g=function(k,z,U){return G.u(k)?this[z]:this.set(U,k)},te.unix=function(){return Math.floor(this.valueOf()/1e3)},te.valueOf=function(){return this.$d.getTime()},te.startOf=function(k,z){var U=this,K=!!G.u(z)||z,T=G.p(k),A=function(W,J){var ue=G.w(U.$u?Date.UTC(U.$y,J,W):new Date(U.$y,J,W),U);return K?ue:ue.endOf(p)},F=function(W,J){return G.w(U.toDate()[W].apply(U.toDate("s"),(K?[0,0,0,0]:[23,59,59,999]).slice(J)),U)},V=this.$W,q=this.$M,Q=this.$D,be="set"+(this.$u?"UTC":"");switch(T){case S:return K?A(1,0):A(31,11);case x:return K?A(1,q):A(0,q+1);case v:var Ce=this.$locale().weekStart||0,X=(V<Ce?V+7:V)-Ce;return A(K?Q-X:Q+(6-X),q);case p:case b:return F(be+"Hours",0);case f:return F(be+"Minutes",1);case m:return F(be+"Seconds",2);case d:return F(be+"Milliseconds",3);default:return this.clone()}},te.endOf=function(k){return this.startOf(k,!1)},te.$set=function(k,z){var U,K=G.p(k),T="set"+(this.$u?"UTC":""),A=(U={},U[p]=T+"Date",U[b]=T+"Date",U[x]=T+"Month",U[S]=T+"FullYear",U[f]=T+"Hours",U[m]=T+"Minutes",U[d]=T+"Seconds",U[c]=T+"Milliseconds",U)[K],F=K===p?this.$D+(z-this.$W):z;if(K===x||K===S){var V=this.clone().set(b,1);V.$d[A](F),V.init(),this.$d=V.set(b,Math.min(this.$D,V.daysInMonth())).$d}else A&&this.$d[A](F);return this.init(),this},te.set=function(k,z){return this.clone().$set(k,z)},te.get=function(k){return this[G.p(k)]()},te.add=function(k,z){var U,K=this;k=Number(k);var T=G.p(z),A=function(q){var Q=Y(K);return G.w(Q.date(Q.date()+Math.round(q*k)),K)};if(T===x)return this.set(x,this.$M+k);if(T===S)return this.set(S,this.$y+k);if(T===p)return A(1);if(T===v)return A(7);var F=(U={},U[m]=i,U[f]=s,U[d]=r,U)[T]||1,V=this.$d.getTime()+k*F;return G.w(V,this)},te.subtract=function(k,z){return this.add(-1*k,z)},te.format=function(k){var z=this,U=this.$locale();if(!this.isValid())return U.invalidDate||N;var K=k||"YYYY-MM-DDTHH:mm:ssZ",T=G.z(this),A=this.$H,F=this.$m,V=this.$M,q=U.weekdays,Q=U.months,be=U.meridiem,Ce=function(J,ue,Z,_e){return J&&(J[ue]||J(z,K))||Z[ue].slice(0,_e)},X=function(J){return G.s(A%12||12,J,"0")},W=be||function(J,ue,Z){var _e=J<12?"AM":"PM";return Z?_e.toLowerCase():_e};return K.replace(_,function(J,ue){return ue||function(Z){switch(Z){case"YY":return String(z.$y).slice(-2);case"YYYY":return G.s(z.$y,4,"0");case"M":return V+1;case"MM":return G.s(V+1,2,"0");case"MMM":return Ce(U.monthsShort,V,Q,3);case"MMMM":return Ce(Q,V);case"D":return z.$D;case"DD":return G.s(z.$D,2,"0");case"d":return String(z.$W);case"dd":return Ce(U.weekdaysMin,z.$W,q,2);case"ddd":return Ce(U.weekdaysShort,z.$W,q,3);case"dddd":return q[z.$W];case"H":return String(A);case"HH":return G.s(A,2,"0");case"h":return X(1);case"hh":return X(2);case"a":return W(A,F,!0);case"A":return W(A,F,!1);case"m":return String(F);case"mm":return G.s(F,2,"0");case"s":return String(z.$s);case"ss":return G.s(z.$s,2,"0");case"SSS":return G.s(z.$ms,3,"0");case"Z":return T}return null}(J)||T.replace(":","")})},te.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},te.diff=function(k,z,U){var K,T=this,A=G.p(z),F=Y(k),V=(F.utcOffset()-this.utcOffset())*i,q=this-F,Q=function(){return G.m(T,F)};switch(A){case S:K=Q()/12;break;case x:K=Q();break;case w:K=Q()/3;break;case v:K=(q-V)/6048e5;break;case p:K=(q-V)/864e5;break;case f:K=q/s;break;case m:K=q/i;break;case d:K=q/r;break;default:K=q}return U?K:G.a(K)},te.daysInMonth=function(){return this.endOf(x).$D},te.$locale=function(){return R[this.$L]},te.locale=function(k,z){if(!k)return this.$L;var U=this.clone(),K=D(k,z,!0);return K&&(U.$L=K),U},te.clone=function(){return G.w(this.$d,this)},te.toDate=function(){return new Date(this.valueOf())},te.toJSON=function(){return this.isValid()?this.toISOString():null},te.toISOString=function(){return this.$d.toISOString()},te.toString=function(){return this.$d.toUTCString()},ce}(),Oe=ie.prototype;return Y.prototype=Oe,[["$ms",c],["$s",d],["$m",m],["$H",f],["$W",p],["$M",x],["$y",S],["$D",b]].forEach(function(ce){Oe[ce[1]]=function(te){return this.$g(te,ce[0],ce[1])}}),Y.extend=function(ce,te){return ce.$i||(ce(te,ie,Y),ce.$i=!0),Y},Y.locale=D,Y.isDayjs=H,Y.unix=function(ce){return Y(1e3*ce)},Y.en=R[M],Y.Ls=R,Y.p={},Y})}(Iu)),Iu.exports}var M3=O3();const L3=Gm(M3);function k3({rows:t}){const[e,r]=h.useState({key:"route_name",direction:"asc"}),i=Array.isArray(t)?t:[],s=h.useMemo(()=>{const S={};return i.forEach(b=>{S[b.trip_id]||(S[b.trip_id]={meta:b,online:null,offline:null}),b.channel==="online"?S[b.trip_id].online=b:S[b.trip_id].offline=b}),Object.values(S)},[i]),c=h.useMemo(()=>{const{key:S,direction:b}=e;return[...s].sort((N,j)=>{let _=N.meta[S],C=j.meta[S];return S==="seats_total"&&(_=Number(_),C=Number(C)),_<C?b==="asc"?-1:1:_>C?b==="asc"?1:-1:0})},[s,e]),d=h.useMemo(()=>{const S={offline:{seats:0,discountCount:0,discountTotal:0,paid:0,due:0},online:{seats:0,discountCount:0,discountTotal:0,paid:0,due:0}};return s.forEach(({offline:b,online:N})=>{const j=b||{},_=N||{};S.offline.seats+=Number(j.seats_booked||0),S.online.seats+=Number(_.seats_booked||0),S.offline.discountCount+=Number(j.discount_count||0),S.online.discountCount+=Number(_.discount_count||0),S.offline.discountTotal+=Number(j.discount_total||0),S.online.discountTotal+=Number(_.discount_total||0),S.offline.paid+=Number(j.paid_total||0),S.online.paid+=Number(_.paid_total||0),S.offline.due+=Number(j.due_total||0),S.online.due+=Number(_.due_total||0)}),S},[s]);if(!i.length)return l.jsx("div",{className:"text-gray-500 italic",children:"Nu exist curse n intervalul selectat."});const m=S=>{r(b=>b.key===S?{key:S,direction:b.direction==="asc"?"desc":"asc"}:{key:S,direction:"asc"})},f=S=>e.key===S?e.direction==="asc"?" ":" ":"",p=(S,b,N="",j="",_="text-center")=>l.jsxs("div",{className:`flex flex-col ${_}`,children:[l.jsx("div",{className:`${N} px-1`,children:S}),l.jsx("div",{className:`${j} px-1`,children:b})]}),v=[{label:"Rut",key:"route_name",sortable:!0},{label:"Ora",key:"trip_time",sortable:!0},{label:"Nr. main",key:"vehicle_name",sortable:!0},{label:"Locuri",key:"seats_total",sortable:!0},{label:"Rezervri (off/online)",key:null},{label:"Reduceri # (off/online)",key:null},{label:"Reduceri lei (off/online)",key:null},{label:"ncasri efective (off/online)",key:null},{label:"De ncasat (off/online)",key:null},{label:"Data",key:null}],x="bg-yellow-50",w="bg-pink-50";return l.jsxs("table",{className:"w-full table-auto border text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsx("tr",{children:v.map(S=>l.jsxs("th",{className:`border px-2 py-1 whitespace-nowrap ${S.sortable?"cursor-pointer select-none":""}`,onClick:()=>S.sortable&&m(S.key),children:[S.label,S.sortable&&f(S.key)]},S.label))})}),l.jsx("tbody",{children:c.map(({meta:S,online:b,offline:N})=>{const j=Number(S.seats_total)||0,_=S.vehicle_plate??S.plate_number??S.vehicle_name??"",C=b||{seats_booked:0,discount_count:0,discount_total:0,paid_total:0,due_total:0},E=N||{seats_booked:0,discount_count:0,discount_total:0,paid_total:0,due_total:0};return l.jsxs("tr",{className:"hover:bg-blue-50",children:[l.jsx("td",{className:"border px-2 py-1 whitespace-nowrap",children:S.route_name}),l.jsx("td",{className:"border px-2 py-1 whitespace-nowrap",children:S.trip_time}),l.jsx("td",{className:"border px-2 py-1 whitespace-nowrap",children:_}),l.jsx("td",{className:"border px-1 py-1 text-center whitespace-nowrap",children:j}),l.jsx("td",{className:"border px-1 py-1 whitespace-nowrap",children:p(E.seats_booked,C.seats_booked,x,w)}),l.jsx("td",{className:"border px-1 py-1 whitespace-nowrap",children:p(E.discount_count,C.discount_count,x,w)}),l.jsx("td",{className:"border px-1 py-1 whitespace-nowrap",children:p(Number(E.discount_total).toFixed(2),Number(C.discount_total).toFixed(2),x,w,"text-right")}),l.jsx("td",{className:"border px-1 py-1 whitespace-nowrap",children:p(Number(E.paid_total).toFixed(2),Number(C.paid_total).toFixed(2),x,w,"text-right")}),l.jsx("td",{className:"border px-1 py-1 whitespace-nowrap",children:p(Number(E.due_total).toFixed(2),Number(C.due_total).toFixed(2),x,w,"text-right")}),l.jsx("td",{className:"border px-2 py-1 whitespace-nowrap",children:S.trip_date?L3(S.trip_date).format("DD.MM.YYYY"):""})]},S.trip_id)})}),l.jsx("tfoot",{children:l.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[l.jsx("td",{colSpan:4,className:"border px-2 py-1 text-right",children:"TOTAL"}),l.jsx("td",{className:"border px-1 py-1 whitespace-nowrap",children:p(d.offline.seats,d.online.seats,x,w)}),l.jsx("td",{className:"border px-1 py-1 whitespace-nowrap",children:p(d.offline.discountCount,d.online.discountCount,x,w)}),l.jsx("td",{className:"border px-1 py-1 whitespace-nowrap",children:p(d.offline.discountTotal.toFixed(2),d.online.discountTotal.toFixed(2),x,w,"text-right")}),l.jsx("td",{className:"border px-1 py-1 whitespace-nowrap",children:p(d.offline.paid.toFixed(2),d.online.paid.toFixed(2),x,w,"text-right")}),l.jsx("td",{className:"border px-1 py-1 whitespace-nowrap",children:p(d.offline.due.toFixed(2),d.online.due.toFixed(2),x,w,"text-right")}),l.jsx("td",{className:"border px-2 py-1"})]})})]})}function T3({user:t}){var be,Ce,X,W,J,ue;const e=new Date().toISOString().slice(0,10),[r,i]=h.useState(null),[s,c]=h.useState([]),[d,m]=h.useState(null),[f,p]=h.useState(null),[v,x]=h.useState(null),[w,S]=h.useState({start:e,end:e}),[b,N]=h.useState([]),[j,_]=h.useState(null),[C,E]=h.useState({trips:[],summary:{},toHandOver:0}),[O,M]=h.useState(!1),[R,I]=h.useState(null),H=(t==null?void 0:t.id)??null,[D,Y]=h.useState([]),[G,ie]=h.useState([]),[Oe,ce]=h.useState(!1),[te,k]=h.useState([]),[z,U]=h.useState({rows:0,payments:0,total:0}),K=h.useCallback(async()=>{if(!H){Y([]);return}try{const _e=await(await fetch(`/api/cash/unsettled?employeeId=${H}`)).json();Y(Array.isArray(_e)?_e:[])}catch(Z){console.error(Z),Y([])}},[H]),T=h.useCallback(async()=>{if(!H){ie([]);return}try{const _e=await(await fetch(`/api/cash/handovers/history?employeeId=${H}`)).json();ie(Array.isArray(_e)?_e:[])}catch(Z){console.error(Z),ie([])}},[H]);h.useEffect(()=>{if(!H){Y([]),ie([]);return}K(),T()},[H,T,K]);const A=h.useMemo(()=>D.reduce((Z,_e)=>Z+Number(_e.total_amount||0),0),[D]);h.useEffect(()=>{k(Z=>Z.filter(_e=>D.some(ke=>String(ke.operator_id)===String(_e))))},[D]),h.useEffect(()=>{const Z=D.filter(Be=>te.some(Se=>String(Se)===String(Be.operator_id))),_e=Z.reduce((Be,Se)=>Be+Number(Se.payments_count||0),0),ke=Z.reduce((Be,Se)=>Be+Number(Se.total_amount||0),0);U({rows:Z.length,payments:_e,total:ke})},[te,D]);const F=Z=>{k(_e=>{const ke=String(Z);return _e.some(Se=>String(Se)===ke)?_e.filter(Se=>String(Se)!==ke):[..._e,Z]})},V=()=>{if(!D.length){k([]);return}const Z=te.length&&te.length===D.length;k(Z?[]:D.map(_e=>_e.operator_id))},q=h.useMemo(()=>te.map(Z=>Number(Z)).filter(Z=>!Number.isNaN(Z)),[te]),Q=async()=>{var ke;if(!D.length){alert("Nu ai nimic de predat.");return}if(!H){alert("Nu eti autentificat ca agent.");return}const Z=z.rows,_e=Z?`Predai ncasrile CASH pentru ${Z} operator(i), total ${z.total.toFixed(2)} lei?`:"Nu ai selectat niciun operator. Predai toate ncasrile CASH nepredate (grupate pe operator)?";if(window.confirm(_e)){ce(!0);try{const Se=await(await fetch("/api/cash/handovers/preda",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({employeeId:H,operatorIds:q})})).json();if(Se!=null&&Se.ok){await K(),await T();const P=(Se.handovers||[]).reduce((se,Me)=>se+Number(Me.amount||0),0);alert(`${Z?"Predare parial reuit":"Predare reuit"}: ${((ke=Se.handovers)==null?void 0:ke.length)||0} lot(uri), total ${P.toFixed(2)} lei.`),k([])}else alert("A aprut o eroare la predare. Verific selecia i ncearc din nou.")}catch(Be){console.error(Be),alert("Eroare la predare. Verific conexiunea i ncearc din nou.")}finally{ce(!1)}}};return h.useEffect(()=>{if(!r||isNaN(Number(r))){c([]);return}fetch(`/api/routes?operator_id=${Number(r)}&date=${w.start}`).then(Z=>Z.json()).then(Z=>{const ke=(Array.isArray(Z==null?void 0:Z.routes)?Z.routes:Array.isArray(Z)?Z:[]).map(Be=>{const Se=Array.isArray(Be.schedules)?Be.schedules.map(P=>({departure:P==null?void 0:P.departure,direction:(P==null?void 0:P.direction)||""})).filter(P=>P.departure):[];return{id:Be.id,name:Be.name,hours:Se}});c(ke)}).catch(console.error)},[r,w.start]),h.useEffect(()=>{let Z=[];if(d){const ke=s.find(Be=>String(Be.id)===String(d));Z=Array.isArray(ke==null?void 0:ke.hours)?ke.hours:[]}else{const ke=[];for(const Be of s)(Be.hours||[]).forEach(Se=>ke.push(Se));Z=ke}const _e=Z.sort((ke,Be)=>ke.direction===Be.direction?ke.departure.localeCompare(Be.departure):ke.direction.localeCompare(Be.direction));N(_e),j&&!_e.some(ke=>ke.departure===j)&&_(null)},[d,s]),h.useEffect(()=>{if(!r)return;M(!0);const Z={operator_id:r,start:w.start,end:w.end};d&&(Z.route_id=d),f&&(Z.agency_id=f),v&&(Z.agent_id=v),j&&(Z.hour=j),fetch(`/api/reports/trips?${new URLSearchParams(Z)}`).then(_e=>_e.json()).then(_e=>{if(_e.error)throw new Error(_e.error);E(_e),I(null)}).catch(_e=>I(_e.message)).finally(()=>M(!1))},[r,w,d,f,v,j]),l.jsxs("div",{className:"p-4 flex flex-col gap-4",children:[l.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[l.jsx(j3,{value:r,onChange:i}),l.jsxs("select",{value:d??"",onChange:Z=>m(Z.target.value||null),className:"border rounded px-2 py-1",children:[l.jsx("option",{value:"",children:"Toate rutele"}),s.map(Z=>l.jsx("option",{value:Z.id,children:Z.name},Z.id))]}),l.jsxs("select",{value:j??"",onChange:Z=>_(Z.target.value||null),className:"border rounded px-2 py-1",disabled:!b.length,children:[l.jsx("option",{value:"",children:b.length?"Toate orele":"Fr ore"}),b.map((Z,_e)=>{var ke;return l.jsx("option",{value:Z.departure,children:`${((ke=Z.direction)==null?void 0:ke.toUpperCase())||"TUR"} ${Z.departure}${Z.route_name?"  "+Z.route_name:""}`},`${Z.direction||"tur"}-${Z.departure}-${Z.route_name||""}-${_e}`)})]}),l.jsx(N3,{value:f,onChange:Z=>{p(Z),x(null)}}),l.jsx(C3,{value:v,onChange:x,agencyId:f}),l.jsx(_3,{value:w,onChange:S})]}),R&&l.jsx("div",{className:"text-red-600",children:R}),O&&l.jsx("div",{className:"animate-pulse text-gray-400",children:"Se ncarc"}),!O&&!R&&l.jsxs(l.Fragment,{children:[l.jsx(k3,{rows:C.trips}),l.jsxs("div",{className:"mt-6 grid grid-cols-1 lg:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"border rounded-xl p-4 shadow-sm",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("h3",{className:"text-lg font-semibold",children:["Bani de predat ",H?`(agent #${H})`:""]}),l.jsx("button",{onClick:Q,disabled:!D.length||Oe,className:`px-3 py-2 rounded-lg text-white ${!D.length||Oe?"bg-gray-400":"bg-blue-600 hover:bg-blue-700"}`,children:Oe?"Se pred":"Pred banii"})]}),D.length===0?l.jsx("div",{className:"text-sm text-gray-500",children:H?"Nu exist pli CASH nepredate.":"Autentific-te pentru a vedea plile CASH nepredate."}):l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"text-left border-b",children:[l.jsx("th",{className:"py-2 w-10",children:l.jsx("input",{type:"checkbox",checked:D.length>0&&te.length===D.length,onChange:V,"aria-label":"Selecteaz toi operatorii"})}),l.jsx("th",{className:"py-2",children:"Operator"}),l.jsx("th",{className:"py-2",children:"# Pli"}),l.jsx("th",{className:"py-2",children:"Sum"})]})}),l.jsxs("tbody",{children:[D.map(Z=>l.jsxs("tr",{className:"border-b last:border-0",children:[l.jsx("td",{className:"py-2",children:l.jsx("input",{type:"checkbox",checked:te.some(_e=>String(_e)===String(Z.operator_id)),onChange:()=>F(Z.operator_id),"aria-label":`Selecteaz ${Z.operator_name}`})}),l.jsx("td",{className:"py-2",children:Z.operator_name}),l.jsx("td",{className:"py-2",children:Z.payments_count}),l.jsxs("td",{className:"py-2",children:[Number(Z.total_amount||0).toFixed(2)," lei"]})]},Z.operator_id)),z.rows>0&&l.jsxs("tr",{className:"font-semibold text-blue-700",children:[l.jsx("td",{className:"py-2"}),l.jsx("td",{className:"py-2",children:"Selectat"}),l.jsx("td",{className:"py-2",children:z.payments}),l.jsxs("td",{className:"py-2",children:[z.total.toFixed(2)," lei"]})]}),l.jsxs("tr",{className:"font-semibold",children:[l.jsx("td",{className:"py-2"}),l.jsx("td",{className:"py-2",children:"TOTAL"}),l.jsx("td",{className:"py-2",children:D.reduce((Z,_e)=>Z+Number(_e.payments_count||0),0)}),l.jsxs("td",{className:"py-2",children:[A.toFixed(2)," lei"]})]})]})]})]}),l.jsxs("div",{className:"border rounded-xl p-4 shadow-sm",children:[l.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Istoric predri"}),G.length===0?l.jsx("div",{className:"text-sm text-gray-500",children:"nc nu exist predri."}):l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"text-left border-b",children:[l.jsx("th",{className:"py-2",children:"Data"}),l.jsx("th",{className:"py-2",children:"Operator"}),l.jsx("th",{className:"py-2",children:"# Pli"}),l.jsx("th",{className:"py-2",children:"Sum"})]})}),l.jsx("tbody",{children:G.map(Z=>l.jsxs("tr",{className:"border-b last:border-0",children:[l.jsx("td",{className:"py-2",children:new Date(Z.created_at).toLocaleString()}),l.jsx("td",{className:"py-2",children:Z.operator_name}),l.jsx("td",{className:"py-2",children:Z.payments_count}),l.jsxs("td",{className:"py-2",children:[Number(Z.amount||0).toFixed(2)," lei"]})]},Z.id))})]})]})]}),l.jsx("div",{className:"mt-4 flex items-center justify-between",children:l.jsx("div",{className:"font-semibold",children:"Achitate"})}),l.jsx("table",{className:"w-full mt-4 text-sm border",children:l.jsxs("tbody",{className:"[&>tr:nth-child(odd)]:bg-gray-50",children:[l.jsxs("tr",{children:[l.jsx("td",{className:"px-2 py-1 whitespace-nowrap",children:"Bilete achitate (nr.)"}),l.jsx("td",{className:"px-2 py-1 text-right",children:((be=C.summary)==null?void 0:be.paid_seats)??0})]}),l.jsxs("tr",{children:[l.jsx("td",{className:"px-2 py-1 whitespace-nowrap",children:"ncasri nete (lei)"}),l.jsx("td",{className:"px-2 py-1 text-right",children:Number(((Ce=C.summary)==null?void 0:Ce.paid_total)??0).toFixed(2)})]}),l.jsxs("tr",{children:[l.jsx("td",{className:"px-2 py-1 whitespace-nowrap",children:"Reduceri aplicate (lei)"}),l.jsx("td",{className:"px-2 py-1 text-right",children:Number(((X=C.summary)==null?void 0:X.paid_discounts)??0).toFixed(2)})]}),l.jsxs("tr",{children:[l.jsx("td",{className:"px-2 py-1 whitespace-nowrap font-semibold",children:"Bani de predat (cash)"}),l.jsx("td",{className:"px-2 py-1 text-right font-semibold",children:A.toFixed(2)})]})]})}),l.jsx("table",{className:"w-full mt-4 text-sm border",children:l.jsxs("tbody",{className:"[&>tr:nth-child(odd)]:bg-gray-50",children:[l.jsxs("tr",{children:[l.jsx("td",{className:"px-2 py-1 whitespace-nowrap",children:"Rezervri nepltite (nr.)"}),l.jsx("td",{className:"px-2 py-1 text-right",children:((W=C.summary)==null?void 0:W.reserved_seats)??0})]}),l.jsxs("tr",{children:[l.jsx("td",{className:"px-2 py-1 whitespace-nowrap",children:"Valoare rezervri (lei)"}),l.jsx("td",{className:"px-2 py-1 text-right",children:Number(((J=C.summary)==null?void 0:J.reserved_total)??0).toFixed(2)})]}),l.jsxs("tr",{children:[l.jsx("td",{className:"px-2 py-1 whitespace-nowrap",children:"Reduceri rezervri (lei)"}),l.jsx("td",{className:"px-2 py-1 text-right",children:Number(((ue=C.summary)==null?void 0:ue.reserved_discounts)??0).toFixed(2)})]})]})}),Array.isArray(C.discountsByType)&&C.discountsByType.length>0&&l.jsxs("div",{className:"mt-4",children:[l.jsx("div",{className:"font-semibold mb-1",children:"Reducerile pe tip"}),l.jsxs("table",{className:"w-full text-sm border",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border px-2 py-1 text-left",children:"Tip reducere"}),l.jsx("th",{className:"border px-2 py-1 text-right",children:"Nr. achitate"}),l.jsx("th",{className:"border px-2 py-1 text-right",children:"Lei achitate"}),l.jsx("th",{className:"border px-2 py-1 text-right",children:"Nr. rezervri"}),l.jsx("th",{className:"border px-2 py-1 text-right",children:"Lei rezervri"})]})}),l.jsxs("tbody",{className:"[&>tr:nth-child(odd)]:bg-gray-50",children:[C.discountsByType.map(Z=>l.jsxs("tr",{children:[l.jsx("td",{className:"border px-2 py-1",children:Z.discount_label}),l.jsx("td",{className:"border px-2 py-1 text-right",children:Z.paid_count}),l.jsx("td",{className:"border px-2 py-1 text-right",children:Number(Z.paid_total).toFixed(2)}),l.jsx("td",{className:"border px-2 py-1 text-right",children:Z.reserved_count}),l.jsx("td",{className:"border px-2 py-1 text-right",children:Number(Z.reserved_total).toFixed(2)})]},Z.discount_type_id)),l.jsxs("tr",{className:"font-semibold",children:[l.jsx("td",{className:"border px-2 py-1",children:"TOTAL"}),l.jsx("td",{className:"border px-2 py-1 text-right",children:C.discountsByType.reduce((Z,_e)=>Z+Number(_e.paid_count||0),0)}),l.jsx("td",{className:"border px-2 py-1 text-right",children:C.discountsByType.reduce((Z,_e)=>Z+Number(_e.paid_total||0),0).toFixed(2)}),l.jsx("td",{className:"border px-2 py-1 text-right",children:C.discountsByType.reduce((Z,_e)=>Z+Number(_e.reserved_count||0),0)}),l.jsx("td",{className:"border px-2 py-1 text-right",children:C.discountsByType.reduce((Z,_e)=>Z+Number(_e.reserved_total||0),0).toFixed(2)})]})]})]})]})]})]})}/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),D3=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,i)=>i?i.toUpperCase():r.toLowerCase()),uw=t=>{const e=D3(t);return e.charAt(0).toUpperCase()+e.slice(1)},ij=(...t)=>t.filter((e,r,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===r).join(" ").trim(),R3=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var P3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z3=h.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:s="",children:c,iconNode:d,...m},f)=>h.createElement("svg",{ref:f,...P3,width:e,height:e,stroke:t,strokeWidth:i?Number(r)*24/Number(e):r,className:ij("lucide",s),...!c&&!R3(m)&&{"aria-hidden":"true"},...m},[...d.map(([p,v])=>h.createElement(p,v)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=(t,e)=>{const r=h.forwardRef(({className:i,...s},c)=>h.createElement(z3,{ref:c,iconNode:e,className:ij(`lucide-${A3(uw(t))}`,`lucide-${t}`,i),...s}));return r.displayName=uw(t),r};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $3=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],U3=Ld("chevron-down",$3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],I3=Ld("chevron-right",V3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],H3=Ld("trash-2",B3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Y3=Ld("x",F3),q3="1d47f70c3cee1162b7dddfcf",G3={lat:45.9432,lng:24.9668},W3={height:"100vh",width:"100%"},Ar=t=>{const e=Number(t);return Number.isFinite(e)?e:null},ji=(t,e)=>{const r=Ar(t),i=Ar(e);return r!=null&&i!=null?{lat:r,lng:i}:null};function sj(t){if(!t)return null;if(Array.isArray(t)&&t.length){if(typeof t[0]=="object"&&"lat"in t[0]&&"lng"in t[0])return t;if(Array.isArray(t[0])){const e=t,r=Math.abs(e[0][0])>90||Math.abs(e[0][1])<=90;return e.map(i=>r?{lat:i[1],lng:i[0]}:{lat:i[0],lng:i[1]})}}if(typeof t=="string"){const e=t.trim();if(e.toUpperCase().startsWith("POLYGON"))try{return e.substring(e.indexOf("((")+2,e.lastIndexOf("))")).split(",").map(s=>s.trim().split(/\s+/).map(Number)).map(([s,c])=>({lat:c,lng:s}))}catch{}try{const r=JSON.parse(e);return sj(r)}catch{return null}}return typeof t=="object"&&t.type==="Polygon"&&Array.isArray(t.coordinates)?(t.coordinates[0]||[]).map(([r,i])=>({lat:i,lng:r})):null}function Dp(t,e=!1,r={}){const{color:i,activeColor:s,textColor:c,size:d,activeSize:m}=r,v=e?s??(i||"#2563eb"):i??"#1e90ff",S=e?m??d??"26px":d??"20px",b=c??"white",N=document.createElement("div");N.style.position="relative",N.style.transform="translate(-50%, -50%)";const j=document.createElement("div");j.style.width=S,j.style.height=S,j.style.borderRadius="9999px",j.style.background=v,j.style.border="2px solid white",j.style.boxShadow="0 2px 6px rgba(0,0,0,0.35)",j.style.display="flex",j.style.alignItems="center",j.style.justifyContent="center",j.style.color=b,j.style.fontWeight="700",j.style.fontSize=e?"12px":"11px",j.textContent=t??"";const _=document.createElement("div");return _.style.position="absolute",_.style.left="50%",_.style.bottom="-8px",_.style.transform="translateX(-50%)",_.style.width="0",_.style.height="0",_.style.borderLeft="6px solid transparent",_.style.borderRight="6px solid transparent",_.style.borderTop=`8px solid ${v}`,N.appendChild(j),N.appendChild(_),N}function oj({map:t,position:e,label:r,contentEl:i,onClick:s,draggable:c=!1,onDragEnd:d}){const m=h.useRef(null),f=h.useRef([]);return h.useEffect(()=>{var v,x,w;if(!t||!((w=(x=(v=window.google)==null?void 0:v.maps)==null?void 0:x.marker)!=null&&w.AdvancedMarkerElement))return;const p=i??Dp(r,!1);return m.current?(m.current.position=e,m.current.content=p,m.current.gmpDraggable=!!c):(m.current=new window.google.maps.marker.AdvancedMarkerElement({map:t,position:e,content:p,gmpDraggable:!!c}),s&&f.current.push(m.current.addListener("click",s)),d&&c&&f.current.push(m.current.addListener("dragend",S=>{const{latLng:b}=S;b&&d({lat:b.lat(),lng:b.lng()})}))),()=>{f.current.forEach(S=>window.google.maps.event.removeListener(S)),f.current=[],m.current&&(m.current.map=null,m.current=null)}},[t,e==null?void 0:e.lat,e==null?void 0:e.lng,r,i,s,c,d]),null}function Z3({map:t,position:e,index:r,active:i,onClick:s}){const c=Dp(String(r),!!i);return l.jsx(oj,{map:t,position:e,contentEl:c,onClick:s})}function dw({map:t,position:e,type:r,active:i,draggable:s,onClick:c,onDragEnd:d}){const m=r==="tur",x=Dp(m?"U":"C",!!i,{color:m?"#f97316":"#8b5cf6",activeColor:m?"#ea580c":"#7c3aed",textColor:"white",size:"18px",activeSize:"24px"});return l.jsx(oj,{map:t,position:e,contentEl:x,onClick:c,draggable:!!s,onDragEnd:d})}function X3(){var Ce;const t=dd(),e=Number(t.routeId??t.id??t.route_id??0)||NaN||1,[r,i]=h.useState([]),[s,c]=h.useState(null),[d,m]=h.useState([]),[f,p]=h.useState(!1),[v,x]=h.useState(!1),[w,S]=h.useState(""),[b,N]=h.useState(()=>new Set),[j,_]=h.useState("idle"),[C,E]=h.useState([]),O=h.useRef(null),M=h.useRef({}),R=h.useRef(!1);h.useEffect(()=>{N(()=>new Set)},[e]),h.useEffect(()=>{let X=!1;const W=new AbortController;return i([]),c(null),_("idle"),E([]),R.current=!1,(async()=>{var J;try{const[ue,Z]=await Promise.all([vt.get(`/api/routes/${e}/stations`,{signal:W.signal,headers:{"Cache-Control":"no-cache"}}),vt.get("/api/stations",{signal:W.signal,headers:{"Cache-Control":"no-cache"}})]),_e=(ue.data??[]).sort((Se,P)=>Se.sequence-P.sequence);console.log("[API /routes/:id/stations]",_e.map(Se=>{var P,le;return{id:Se.id,station_id:Se.station_id,type:Se.geofence_type,radius:Se.geofence_radius_m,poly:((le=(P=Se.geofence_polygon)==null?void 0:P.slice)==null?void 0:le.call(P,0,40))||Se.geofence_polygon}}));const ke=_e.map(Se=>{const P=sj(Se.geofence_polygon),le=Se.geofence_type??(P?"polygon":Se.geofence_radius_m?"circle":"none");return{...Se,latitude:Ar(Se.latitude),longitude:Ar(Se.longitude),public_note_tur:typeof Se.public_note_tur=="string"?Se.public_note_tur:"",public_note_retur:typeof Se.public_note_retur=="string"?Se.public_note_retur:"",public_latitude_tur:Ar(Se.public_latitude_tur),public_longitude_tur:Ar(Se.public_longitude_tur),public_latitude_retur:Ar(Se.public_latitude_retur),public_longitude_retur:Ar(Se.public_longitude_retur),geofence_polygon:P,geofence_radius_m:Se.geofence_radius_m??null,geofence_type:le}});i(ke);const Be=(Z.data??[]).map(Se=>({...Se,latitude:Ar(Se.latitude),longitude:Ar(Se.longitude)}));m(Be)}catch(ue){if((J=vt.isCancel)!=null&&J.call(vt,ue)||(ue==null?void 0:ue.name)==="CanceledError")return;console.error("Fetch route failed",ue)}})(),()=>{W.abort()}},[e]);const[I,H]=h.useState(null),D=(X,W)=>{if(X.preventDefault(),I===W)return;const J=[...r],[ue]=J.splice(I,1);J.splice(W,0,ue),H(W),i(J.map((Z,_e)=>({...Z,sequence:_e+1})))},Y=()=>H(null),G=1e-6,ie=h.useCallback((X,W)=>{i(J=>{const ue=J[X];let Z=!1;for(const[ke,Be]of Object.entries(W)){const Se=ue[ke];if(typeof Be=="number"&&typeof Se=="number"){if(Math.abs(Be-Se)>G){Z=!0;break}}else if(JSON.stringify(Se)!==JSON.stringify(Be)){Z=!0;break}}if(!Z)return J;const _e=[...J];return _e[X]={...ue,...W},_e})},[]),Oe=X=>{r.some(W=>W.station_id===X.id)||(i(W=>[...W,{id:null,station_id:X.id,name:X.name,latitude:Ar(X.latitude),longitude:Ar(X.longitude),sequence:W.length+1,geofence_type:"circle",geofence_radius_m:200,geofence_polygon:null,distance_km:0,duration_min:0,public_note_tur:"",public_note_retur:"",public_latitude_tur:null,public_longitude_tur:null,public_latitude_retur:null,public_longitude_retur:null}]),p(!1),S(""))},ce=async X=>{if(!X){i(W=>W.filter(J=>J.id!==null).map((J,ue)=>({...J,sequence:ue+1})));return}confirm("tergi staia din traseu?")&&(await vt.delete(`/api/routes/route-stations/${X}`),i(W=>W.filter(J=>J.id!==X).map((J,ue)=>({...J,sequence:ue+1}))))},te=X=>{if(!Array.isArray(X)||X.length<3)return null;const W=X.map(Be=>[Number(Be.lng),Number(Be.lat)]),[J,ue]=W[0],[Z,_e]=W[W.length-1];return(Math.abs(J-Z)>1e-9||Math.abs(ue-_e)>1e-9)&&W.push([J,ue]),`POLYGON((${W.map(([Be,Se])=>`${Be} ${Se}`).join(", ")}))`},k=async()=>{var X,W,J,ue;x(!0);try{const Z=Se=>{if(typeof Se!="string")return null;const P=Se.trim();return P||null},_e=Se=>{if(Se===""||Se===null||Se===void 0)return null;const P=Number(Se);return Number.isFinite(P)?P:null},ke=r.map((Se,P)=>{const le=Se.geofence_type==="polygon"?"polygon":"circle",se=le==="polygon"?te(Se.geofence_polygon):null,Me=le==="circle"?Number(Se.geofence_radius_m)||0:null;return{id:Se.id??null,route_id:Number(e),station_id:Number(Se.station_id),sequence:P+1,distance_km:_e(Se.distance_km),duration_min:_e(Se.duration_min),dwell_time_minutes:Number(Se.dwell_time_minutes||0),geofence_type:le,geofence_radius_m:Me,geofence_polygon:se,public_note_tur:Z(Se.public_note_tur),public_note_retur:Z(Se.public_note_retur),public_latitude_tur:_e(Se.public_latitude_tur),public_longitude_tur:_e(Se.public_longitude_tur),public_latitude_retur:_e(Se.public_latitude_retur),public_longitude_retur:_e(Se.public_longitude_retur)}});if(ke.find(Se=>Se.geofence_type==="polygon"&&!Se.geofence_polygon)){alert("Poligonul trebuie s aib minim 3 puncte."),x(!1);return}await vt.put(`/api/routes/${e}/stations`,ke)}catch(Z){console.error("[SaveRoute] payload=",((X=Z==null?void 0:Z.config)==null?void 0:X.data)||"(no data)"),console.error("[SaveRoute] 500 response=",(W=Z==null?void 0:Z.response)==null?void 0:W.data),alert(`Eroare la salvat staiile.
`+(((ue=(J=Z==null?void 0:Z.response)==null?void 0:J.data)==null?void 0:ue.error)||(Z==null?void 0:Z.message)||"Server 500"))}finally{x(!1)}},z=X=>{if(O.current=X,r.length&&!R.current){const W=new window.google.maps.LatLngBounds;r.forEach(J=>{const ue=ji(J.latitude,J.longitude);ue&&W.extend(new window.google.maps.LatLng(ue.lat,ue.lng))}),X.fitBounds(W),R.current=!0}};h.useEffect(()=>{if(O.current&&r.length&&!R.current){const X=new window.google.maps.LatLngBounds;r.forEach(W=>{const J=ji(W.latitude,W.longitude);J&&X.extend(new window.google.maps.LatLng(J.lat,J.lng))}),O.current.fitBounds(X),R.current=!0}},[r]),h.useEffect(()=>{if(typeof s=="number"&&O.current){const X=r[s];if(X){const W=ji(X.latitude,X.longitude);W&&O.current.panTo(W)}}},[s,r]),h.useEffect(()=>{typeof s!="number"&&(_("idle"),E([]))},[s]);const U=h.useCallback(X=>{if(typeof s!="number")return;const W=X.latLng.lat(),J=X.latLng.lng();if(j==="setPublicTur"){ie(s,{public_latitude_tur:W,public_longitude_tur:J}),_("idle");return}if(j==="setPublicRetur"){ie(s,{public_latitude_retur:W,public_longitude_retur:J}),_("idle");return}if(j==="drawCircle"){const ue=r[s],Z=Number.isFinite(+ue.geofence_radius_m)?+ue.geofence_radius_m:200;ie(s,{geofence_type:"circle",geofence_radius_m:Z,geofence_polygon:null,latitude:W,longitude:J}),_("idle")}else j==="drawPolygon"&&E(ue=>[...ue,{lat:W,lng:J}])},[j,s,r,ie]),K=()=>{if(typeof s=="number"){if(C.length<3){alert("Poligonul are nevoie de minim 3 puncte.");return}ie(s,{geofence_type:"polygon",geofence_polygon:C,geofence_radius_m:null}),E([]),_("idle")}},T=()=>{E([]),_("idle")},A=h.useCallback(X=>{E([]),_(W=>W===X?"idle":X)},[]),F=h.useCallback(X=>{N(W=>{const J=new Set(W);return J.has(X)?J.delete(X):J.add(X),J})},[]),V=new Set(r.map(X=>X.station_id)),q=(d||[]).filter(X=>!V.has(X.id)).filter(X=>{var J,ue;const W=w.trim().toLowerCase();return W?((J=X.name)==null?void 0:J.toLowerCase().includes(W))||String(X.id).includes(W)||(((ue=X.city)==null?void 0:ue.toLowerCase())||"").includes(W):!0}).slice(0,200);h.useEffect(()=>{const X=W=>{W.key==="Escape"&&p(!1)};return f&&window.addEventListener("keydown",X),()=>window.removeEventListener("keydown",X)},[f]),h.useEffect(()=>{const X=W=>{W.key==="Escape"&&(_("idle"),E([]))};return window.addEventListener("keydown",X),()=>window.removeEventListener("keydown",X)},[]);const Q=!!((Ce=window.google)!=null&&Ce.maps),be=(()=>{switch(j){case"drawCircle":return"Click pe hart pentru a repoziiona cercul staiei.";case"drawPolygon":return"Adaug puncte pe hart pentru poligon, apoi finalizeaz.";case"setPublicTur":return"Click pe hart pentru a seta pinul public de urcare.";case"setPublicRetur":return"Click pe hart pentru a seta pinul public de coborre.";default:return null}})();return l.jsxs("div",{className:"flex",children:[l.jsxs("aside",{className:"w-80 border-r p-4 overflow-y-auto",children:[l.jsxs("div",{className:"flex items-baseline justify-between mb-2",children:[l.jsx("h1",{className:"font-semibold text-lg",children:"Staii traseu"}),l.jsxs("span",{className:"text-xs text-gray-500",children:["ruta #",e]})]}),r.map((X,W)=>{const J=X.id??`tmp-${W}`,ue=b.has(J);return l.jsxs("div",{draggable:!0,onDragStart:Z=>{H(W),Z.dataTransfer.effectAllowed="move"},onDragOver:Z=>D(Z,W),onDrop:Y,onClick:()=>c(W),className:`border rounded p-3 mb-3 cursor-pointer select-none ${W===s?"bg-blue-50 border-blue-400":""}`,children:[l.jsxs("div",{className:`flex justify-between items-center ${ue?"mb-2":""}`,children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",className:"p-1 rounded hover:bg-blue-100",onClick:Z=>{Z.stopPropagation(),c(W),F(J)},"aria-label":ue?"Restrnge detalii staie":"Extinde detalii staie",children:ue?l.jsx(U3,{size:16}):l.jsx(I3,{size:16})}),l.jsxs("span",{className:"font-medium",children:[W+1,". ",X.name]})]}),l.jsx("button",{className:"p-1 hover:text-red-600",onClick:Z=>{Z.stopPropagation(),ce(X.id)},children:l.jsx(H3,{size:16})})]}),ue&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[l.jsxs("label",{className:"flex flex-col",children:[l.jsx("span",{className:"text-gray-500",children:"Distan km"}),l.jsx("input",{type:"number",className:"border rounded px-2 py-0.5",value:X.distance_km??"",onChange:Z=>{const _e=Z.target.value;if(_e===""){ie(W,{distance_km:null});return}const ke=Number(_e);ie(W,{distance_km:Number.isFinite(ke)?ke:X.distance_km})},disabled:W===r.length-1})]}),l.jsxs("label",{className:"flex flex-col",children:[l.jsx("span",{className:"text-gray-500",children:"Timp min"}),l.jsx("input",{type:"number",className:"border rounded px-2 py-0.5",value:X.duration_min??"",onChange:Z=>{const _e=Z.target.value;if(_e===""){ie(W,{duration_min:null});return}const ke=Number(_e);ie(W,{duration_min:Number.isFinite(ke)?ke:X.duration_min})},disabled:W===r.length-1})]}),l.jsxs("label",{className:"flex flex-col",children:[l.jsx("span",{className:"text-gray-500",children:"Raz m"}),l.jsx("input",{type:"number",className:"border rounded px-2 py-0.5",value:X.geofence_radius_m??"",onChange:Z=>ie(W,{geofence_radius_m:Number.isFinite(+Z.target.value)?+Z.target.value:0,geofence_type:"circle",geofence_polygon:null})})]})]}),l.jsxs("div",{className:"mt-3 space-y-3 text-xs",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold text-gray-600",children:"Public (tur)"}),l.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-1",children:[l.jsxs("label",{className:"flex flex-col col-span-3",children:[l.jsx("span",{className:"text-gray-500",children:"Detaliu afiat pasagerilor"}),l.jsx("input",{type:"text",className:"border rounded px-2 py-0.5",value:X.public_note_tur??"",onChange:Z=>ie(W,{public_note_tur:Z.target.value})})]}),l.jsxs("label",{className:"flex flex-col",children:[l.jsx("span",{className:"text-gray-500",children:"Lat tur"}),l.jsx("input",{type:"number",step:"0.000001",className:"border rounded px-2 py-0.5",value:X.public_latitude_tur??"",onChange:Z=>{const _e=Z.target.value;if(_e===""){ie(W,{public_latitude_tur:null});return}const ke=Number(_e);ie(W,{public_latitude_tur:Number.isFinite(ke)?ke:X.public_latitude_tur})}})]}),l.jsxs("label",{className:"flex flex-col",children:[l.jsx("span",{className:"text-gray-500",children:"Lng tur"}),l.jsx("input",{type:"number",step:"0.000001",className:"border rounded px-2 py-0.5",value:X.public_longitude_tur??"",onChange:Z=>{const _e=Z.target.value;if(_e===""){ie(W,{public_longitude_tur:null});return}const ke=Number(_e);ie(W,{public_longitude_tur:Number.isFinite(ke)?ke:X.public_longitude_tur})}})]}),l.jsxs("div",{className:"col-span-3 flex flex-wrap gap-2",children:[l.jsx("button",{type:"button",className:`text-xs px-2 py-1 rounded border ${j==="setPublicTur"&&s===W?"bg-blue-600 text-white border-blue-600":"bg-white hover:bg-blue-50"}`,onClick:Z=>{Z.stopPropagation(),c(W),A("setPublicTur")},children:j==="setPublicTur"&&s===W?"Click pe hart":"Alege pe hart"}),Number.isFinite(X.public_latitude_tur)&&Number.isFinite(X.public_longitude_tur)&&l.jsx("button",{type:"button",className:"text-xs px-2 py-1 rounded border bg-white hover:bg-red-50 text-red-600 border-red-200",onClick:Z=>{Z.stopPropagation(),_("idle"),ie(W,{public_latitude_tur:null,public_longitude_tur:null})},children:"terge pin"})]})]})]}),l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold text-gray-600",children:"Public (retur)"}),l.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-1",children:[l.jsxs("label",{className:"flex flex-col col-span-3",children:[l.jsx("span",{className:"text-gray-500",children:"Detaliu afiat pasagerilor"}),l.jsx("input",{type:"text",className:"border rounded px-2 py-0.5",value:X.public_note_retur??"",onChange:Z=>ie(W,{public_note_retur:Z.target.value})})]}),l.jsxs("label",{className:"flex flex-col",children:[l.jsx("span",{className:"text-gray-500",children:"Lat retur"}),l.jsx("input",{type:"number",step:"0.000001",className:"border rounded px-2 py-0.5",value:X.public_latitude_retur??"",onChange:Z=>{const _e=Z.target.value;if(_e===""){ie(W,{public_latitude_retur:null});return}const ke=Number(_e);ie(W,{public_latitude_retur:Number.isFinite(ke)?ke:X.public_latitude_retur})}})]}),l.jsxs("label",{className:"flex flex-col",children:[l.jsx("span",{className:"text-gray-500",children:"Lng retur"}),l.jsx("input",{type:"number",step:"0.000001",className:"border rounded px-2 py-0.5",value:X.public_longitude_retur??"",onChange:Z=>{const _e=Z.target.value;if(_e===""){ie(W,{public_longitude_retur:null});return}const ke=Number(_e);ie(W,{public_longitude_retur:Number.isFinite(ke)?ke:X.public_longitude_retur})}})]}),l.jsxs("div",{className:"col-span-3 flex flex-wrap gap-2",children:[l.jsx("button",{type:"button",className:`text-xs px-2 py-1 rounded border ${j==="setPublicRetur"&&s===W?"bg-blue-600 text-white border-blue-600":"bg-white hover:bg-blue-50"}`,onClick:Z=>{Z.stopPropagation(),c(W),A("setPublicRetur")},children:j==="setPublicRetur"&&s===W?"Click pe hart":"Alege pe hart"}),Number.isFinite(X.public_latitude_retur)&&Number.isFinite(X.public_longitude_retur)&&l.jsx("button",{type:"button",className:"text-xs px-2 py-1 rounded border bg-white hover:bg-red-50 text-red-600 border-red-200",onClick:Z=>{Z.stopPropagation(),_("idle"),ie(W,{public_latitude_retur:null,public_longitude_retur:null})},children:"terge pin"})]})]})]})]}),l.jsx("div",{className:"text-xs italic mt-1",children:X.geofence_type!=="none"?`geofence: ${X.geofence_type}`:"fr geofence"})]})]},`${X.station_id}-${W}`)}),l.jsx("button",{onClick:()=>p(!0),className:"w-full bg-blue-600 text-white py-2 rounded mb-3",children:"+ Adaug staie"}),l.jsx("button",{onClick:k,disabled:v,className:"w-full bg-green-600 text-white py-2 rounded disabled:opacity-50",children:v?"Se salveaz":"Salveaz traseul"})]}),l.jsxs("main",{className:"flex-1 relative",children:[be&&l.jsx("div",{className:"absolute top-4 left-1/2 z-20 -translate-x-1/2 bg-white/95 text-gray-800 px-3 py-1.5 rounded shadow pointer-events-none text-sm",children:be}),l.jsxs("div",{className:"absolute left-4 bottom-40 z-10 bg-white/90 backdrop-blur px-3 py-2 rounded shadow border flex gap-2 items-center pointer-events-auto",children:[l.jsx("span",{className:"text-sm font-medium",children:"Geofence"}),l.jsx("button",{className:`text-sm px-2 py-1 rounded border ${j==="drawCircle"?"bg-blue-600 text-white":"bg-white"}`,onClick:()=>_(j==="drawCircle"?"idle":"drawCircle"),disabled:typeof s!="number",title:"Plaseaz cerc (click pe hart)",children:"Cerc"}),l.jsx("button",{className:`text-sm px-2 py-1 rounded border ${j==="drawPolygon"?"bg-blue-600 text-white":"bg-white"}`,onClick:()=>{_(j==="drawPolygon"?"idle":"drawPolygon"),E([])},disabled:typeof s!="number",title:"Deseneaz poligon (click-uri succesive)",children:"Poligon"}),j==="drawPolygon"&&l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"text-sm px-2 py-1 rounded border",onClick:K,children:"Finalizeaz"}),l.jsx("button",{className:"text-sm px-2 py-1 rounded border",onClick:T,children:"Anuleaz"})]})]}),f&&l.jsxs("div",{className:"absolute right-4 top-4 z-20 w-96 max-h-[80vh] overflow-hidden rounded-xl shadow-lg border bg-white",children:[l.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[l.jsx("div",{className:"font-medium",children:"Adaug staie"}),l.jsx("button",{className:"p-1",onClick:()=>p(!1),"aria-label":"nchide",children:l.jsx(Y3,{size:16})})]}),l.jsx("div",{className:"p-3",children:l.jsx("input",{autoFocus:!0,className:"w-full border rounded px-3 py-2 text-sm",placeholder:"Caut dup nume, id, ora...",value:w,onChange:X=>S(X.target.value)})}),l.jsxs("div",{className:"px-3 pb-3 text-xs text-gray-500",children:["Rezultate: ",q.length]}),l.jsxs("div",{className:"overflow-auto max-h-[60vh] px-3 pb-3",children:[q.map(X=>l.jsxs("button",{onClick:()=>Oe(X),className:"w-full text-left border rounded p-2 mb-2 hover:bg-blue-50",title:`Lat: ${X.latitude}, Lng: ${X.longitude}`,children:[l.jsx("div",{className:"font-medium text-sm",children:X.name}),l.jsxs("div",{className:"text-xs text-gray-500",children:["#",X.id,X.city?`  ${X.city}`:""]})]},X.id)),q.length===0&&l.jsx("div",{className:"text-sm text-gray-500",children:"Nu s-au gsit staii disponibile."})]})]}),Q?l.jsxs(O1,{mapContainerStyle:W3,defaultCenter:G3,zoom:6,options:{mapId:q3,gestureHandling:"greedy",scrollwheel:!0},onLoad:X=>{z(X),setTimeout(()=>{if(f){const W=document.querySelector('input[placeholder="Caut dup nume, id, ora..."]');W&&W.focus()}},0)},onClick:U,children:[r.length>1&&l.jsx(Im,{path:r.map(X=>ji(X.latitude,X.longitude)).filter(Boolean),options:{strokeWeight:3}}),O.current&&r.map((X,W)=>{const J=ji(X.latitude,X.longitude);return J?l.jsx(Z3,{map:O.current,position:J,index:W+1,active:W===s,onClick:()=>c(W)},`m-${X.station_id}-${W}`):null}),O.current&&r.map((X,W)=>{const J=ji(X.public_latitude_tur,X.public_longitude_tur);if(!J)return null;const ue=W===s;return l.jsx(dw,{map:O.current,position:J,type:"tur",active:ue&&j==="setPublicTur",draggable:ue,onClick:()=>c(W),onDragEnd:Z=>{ie(W,{public_latitude_tur:Z.lat,public_longitude_tur:Z.lng})}},`tur-${X.station_id}-${W}`)}),O.current&&r.map((X,W)=>{const J=ji(X.public_latitude_retur,X.public_longitude_retur);if(!J)return null;const ue=W===s;return l.jsx(dw,{map:O.current,position:J,type:"retur",active:ue&&j==="setPublicRetur",draggable:ue,onClick:()=>c(W),onDragEnd:Z=>{ie(W,{public_latitude_retur:Z.lat,public_longitude_retur:Z.lng})}},`retur-${X.station_id}-${W}`)}),r.map((X,W)=>{var _e;const J=W===s,ue={editable:J,draggable:J,strokeWeight:J?2:1,strokeOpacity:J?.9:.6,fillOpacity:J?.15:.08},Z={editable:J,draggable:J,strokeWeight:J?2:1,strokeOpacity:J?.9:.6,fillOpacity:J?.15:.08};if(X.geofence_type==="circle"&&Number.isFinite(+X.geofence_radius_m)&&+X.geofence_radius_m>0){const ke=ji(X.latitude,X.longitude);return ke?l.jsx(U1,{center:ke,radius:+X.geofence_radius_m,options:ue,onLoad:Be=>{J&&(M.current[W]=Be)},onUnmount:()=>{delete M.current[W]},onCenterChanged:()=>{if(!J)return;const Be=M.current[W];if(!Be)return;const Se=Be.getCenter();Se&&ie(W,{latitude:Se.lat(),longitude:Se.lng()})},onRadiusChanged:()=>{if(!J)return;const Be=M.current[W];if(!Be)return;const Se=Be.getRadius();ie(W,{geofence_radius_m:Se,geofence_type:"circle",geofence_polygon:null})}},`c-${W}`):null}return X.geofence_type==="polygon"&&((_e=X.geofence_polygon)!=null&&_e.length)?l.jsx($1,{paths:X.geofence_polygon,options:Z,onMouseUp:ke=>{if(!J)return;const Be=ke.getPath().getArray().map(Se=>({lat:Se.lat(),lng:Se.lng()}));ie(W,{geofence_polygon:Be,geofence_type:"polygon",geofence_radius_m:null})}},`p-${W}`):null}),j==="drawPolygon"&&C.length>0&&l.jsx(Im,{path:C,options:{strokeWeight:2}})]},`map-${e}`):l.jsx("div",{className:"p-4 text-gray-500",children:"Se ncarc harta..."})]})]})}function K3(){const[t,e]=h.useState(""),[r,i]=h.useState("name"),[s,c]=h.useState("asc"),[d,m]=h.useState(0),[f,p]=h.useState([]),[v,x]=h.useState(0),[w,S]=h.useState(!1),b=25,N=d*b,j=h.useMemo(()=>t,[t]);h.useEffect(()=>{let E=!0;return(async()=>{S(!0);try{const O=new URLSearchParams({q:j,sort:r,order:s,limit:String(b),offset:String(N)}),R=await(await fetch(`/api/people?${O.toString()}`)).json();if(!E)return;p(R.items||[]),x(R.total||0)}catch(O){if(!E)return;console.error("Eroare la ncrcarea pasagerilor",O)}finally{E&&S(!1)}})(),()=>{E=!1}},[j,r,s,N]);const _=Math.ceil(v/b),C=E=>{r!==E?(i(E),c("asc"),m(0)):(c(O=>O==="asc"?"desc":"asc"),m(0))};return l.jsxs("div",{className:"p-5 max-w-5xl mx-auto",children:[l.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Pasageri"}),l.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-4",children:[l.jsx("input",{className:"border rounded px-3 py-2 w-64",placeholder:"Caut dup nume sau telefon",value:t,onChange:E=>{e(E.target.value),m(0)}}),l.jsxs("div",{className:"ml-auto flex items-center gap-2 text-sm",children:[l.jsxs("button",{className:`px-3 py-2 border rounded ${r==="name"?"bg-gray-100":""}`,onClick:()=>C("name"),title:"Sorteaz dup nume",children:["Nume ",r==="name"?s==="asc"?"":"":""]}),l.jsxs("button",{className:`px-3 py-2 border rounded ${r==="phone"?"bg-gray-100":""}`,onClick:()=>C("phone"),title:"Sorteaz dup telefon",children:["Telefon ",r==="phone"?s==="asc"?"":"":""]})]})]}),l.jsx("div",{className:"bg-white border rounded overflow-hidden",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left p-2 border",children:"#"}),l.jsx("th",{className:"text-left p-2 border",children:"Nume"}),l.jsx("th",{className:"text-left p-2 border",children:"Telefon"}),l.jsx("th",{className:"text-left p-2 border",children:"Aciuni"})]})}),l.jsx("tbody",{children:w?l.jsx("tr",{children:l.jsx("td",{colSpan:4,className:"p-4 text-center",children:"Se ncarc"})}):f.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:4,className:"p-4 text-center text-gray-500",children:"Niciun rezultat"})}):f.map((E,O)=>l.jsxs("tr",{children:[l.jsx("td",{className:"p-2 border",children:N+O+1}),l.jsx("td",{className:"p-2 border",children:E.name||""}),l.jsx("td",{className:"p-2 border",children:E.phone||""}),l.jsx("td",{className:"p-2 border",children:l.jsx(Dr,{to:`/raport/${E.id}`,className:"inline-flex items-center px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",title:"Vezi raport",children:"Vizualizeaz"})})]},E.id))})]})}),_>1&&l.jsxs("div",{className:"mt-3 flex items-center justify-between text-sm",children:[l.jsxs("span",{children:["Total: ",v]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{disabled:d===0,className:"px-3 py-1 border rounded disabled:opacity-50",onClick:()=>m(E=>Math.max(E-1,0)),children:" napoi"}),l.jsxs("span",{children:["Pagina ",d+1," / ",_]}),l.jsx("button",{disabled:d>=_-1,className:"px-3 py-1 border rounded disabled:opacity-50",onClick:()=>m(E=>Math.min(E+1,_-1)),children:"nainte "})]})]})]})}function Q3({onLoggedIn:t}){const[e,r]=h.useState(""),[i,s]=h.useState(""),[c,d]=h.useState(!1),[m,f]=h.useState(""),p=ud(),v=async x=>{x.preventDefault(),f(""),d(!0);try{const w=await fetch("/api/auth/login",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:i})}),S=await w.json().catch(()=>({}));if(!w.ok||(S==null?void 0:S.ok)!==!0)f((S==null?void 0:S.error)||"Email sau parol greite.");else{const b=await fetch("/api/auth/me",{credentials:"include"}).then(N=>N.json()).catch(()=>({user:null}));t==null||t((b==null?void 0:b.user)||null),p("/",{replace:!0})}}catch{f("Eroare la autentificare.")}finally{d(!1)}};return l.jsxs("div",{className:"max-w-sm mx-auto mt-10 p-6 rounded border bg-white",children:[l.jsx("h1",{className:"text-xl font-semibold mb-4",children:"Autentificare"}),m&&l.jsx("div",{className:"mb-3 text-sm text-red-600",children:m}),l.jsxs("form",{onSubmit:v,className:"flex flex-col gap-3",children:[l.jsxs("label",{className:"flex flex-col gap-1",children:[l.jsx("span",{className:"text-sm",children:"Email sau telefon"}),l.jsx("input",{className:"border rounded px-3 py-2",type:"text",autoComplete:"username",value:e,onChange:x=>r(x.target.value),required:!0})]}),l.jsxs("label",{className:"flex flex-col gap-1",children:[l.jsx("span",{className:"text-sm",children:"Parol"}),l.jsx("input",{className:"border rounded px-3 py-2",type:"password",autoComplete:"current-password",value:i,onChange:x=>s(x.target.value),required:!0})]}),l.jsx("button",{type:"submit",disabled:c,className:"mt-2 bg-blue-600 hover:bg-blue-700 text-white rounded px-4 py-2 disabled:opacity-60",children:c?"Se conecteaz":"Login"})]})]})}function J3(){const[t,e]=h.useState([]),[r,i]=h.useState({from:"",to:"",action:""}),s=()=>{const c=new URLSearchParams(Object.entries(r).filter(([d,m])=>m));fetch(`/api/audit-logs?${c}`).then(d=>d.json()).then(e).catch(console.error)};return h.useEffect(s,[]),l.jsxs("div",{className:"p-6",children:[l.jsx("h1",{className:"text-xl font-bold mb-4",children:" Jurnal operaiuni"}),l.jsxs("div",{className:"flex gap-2 mb-4",children:[l.jsx("input",{placeholder:"De la (YYYY-MM-DD)",value:r.from,onChange:c=>i({...r,from:c.target.value})}),l.jsx("input",{placeholder:"Pn la (YYYY-MM-DD)",value:r.to,onChange:c=>i({...r,to:c.target.value})}),l.jsx("input",{placeholder:"Aciune",value:r.action,onChange:c=>i({...r,action:c.target.value})}),l.jsx("button",{onClick:s,className:"bg-blue-600 text-white px-3 py-1 rounded",children:"Filtreaz"})]}),l.jsxs("table",{className:"w-full text-sm border",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Dat"}),l.jsx("th",{className:"border p-2",children:"Aciune"}),l.jsx("th",{className:"border p-2",children:"Rezervare"}),l.jsx("th",{className:"border p-2",children:"Din"}),l.jsx("th",{className:"border p-2",children:"Data curs"}),l.jsx("th",{className:"border p-2",children:"Traseu"}),l.jsx("th",{className:"border p-2",children:"Ora"}),l.jsx("th",{className:"border p-2",children:"Segment"}),l.jsx("th",{className:"border p-2",children:"Loc"}),l.jsx("th",{className:"border p-2",children:"Actor"}),l.jsx("th",{className:"border p-2",children:"Sum"}),l.jsx("th",{className:"border p-2",children:"Metod"}),l.jsx("th",{className:"border p-2",children:"Channel"})]})}),l.jsx("tbody",{children:t.map(c=>l.jsxs("tr",{children:[l.jsx("td",{className:"border p-2",children:c.at}),l.jsx("td",{className:"border p-2",children:c.action_label||c.action}),l.jsx("td",{className:"border p-2",children:l.jsxs("a",{href:`/rezervare/${c.reservation_id}`,target:"_blank",rel:"noreferrer",className:"text-blue-600 underline",children:["#",c.reservation_id]})}),l.jsx("td",{className:"border p-2",children:c.from_reservation_id?l.jsxs("span",{children:[c.from_trip_date||"",c.from_hour?` ${c.from_hour}`:""," ",c.from_route_name?`| ${c.from_route_name}`:""," ",c.from_segment?`| ${c.from_segment}`:""," ",c.from_seat?`| loc ${c.from_seat}`:""]}):""}),l.jsx("td",{className:"border p-2",children:c.trip_date||""}),l.jsx("td",{className:"border p-2",children:c.route_name}),l.jsx("td",{className:"border p-2",children:c.hour}),l.jsx("td",{className:"border p-2",children:c.segment}),l.jsx("td",{className:"border p-2",children:c.seat}),l.jsx("td",{className:"border p-2",children:c.actor_name||c.actor_id}),l.jsx("td",{className:"border p-2",children:c.amount??""}),l.jsx("td",{className:"border p-2",children:c.payment_method??""}),l.jsx("td",{className:"border p-2",children:c.channel??""})]},c.event_id))})]})]})}function e4(){const{id:t}=dd(),[e,r]=h.useState(null),[i,s]=h.useState(""),[c,d]=h.useState(!0);if(h.useEffect(()=>{let x=!0;return d(!0),fetch(`/api/reservations/${t}/details`).then(w=>w.ok?w.json():w.json().then(S=>Promise.reject((S==null?void 0:S.error)||"Eroare server"))).then(w=>{x&&(r(w),s(""))}).catch(w=>{x&&s(String(w||"Eroare la ncrcare detalii"))}).finally(()=>{x&&d(!1)}),()=>{x=!1}},[t]),c)return l.jsx("div",{className:"p-4",children:"Se ncarc"});if(i)return l.jsxs("div",{className:"p-4 text-red-600",children:["Eroare: ",i]});if(!e)return l.jsx("div",{className:"p-4",children:"Nu s-au gsit detalii."});const m=e.reservation||{},f=e.pricing||{},p=e.payments||[],v=e.events||[];return l.jsxs("div",{className:"p-4 space-y-6",children:[l.jsxs("h1",{className:"text-xl font-semibold",children:["Detalii rezervare #",t]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"border rounded p-3",children:[l.jsx("h2",{className:"font-medium mb-2",children:"Rezervare"}),l.jsxs("div",{children:["Stare: ",l.jsx("b",{children:m.status})]}),l.jsxs("div",{children:["Curs: ",l.jsx("b",{children:m.trip_date})," ",m.trip_time,"  ",m.route_name]}),l.jsxs("div",{children:["Segment: ",l.jsxs("b",{children:[m.board_name,"  ",m.exit_name]})]}),l.jsxs("div",{children:["Loc: ",l.jsx("b",{children:m.seat_label})]}),l.jsxs("div",{children:["Creat de: ",l.jsx("b",{children:m.created_by??""})]}),l.jsxs("div",{children:["Creat la: ",l.jsx("b",{children:m.reservation_time??""})]}),m.observations?l.jsxs("div",{children:["Observaii: ",m.observations]}):null]}),l.jsxs("div",{className:"border rounded p-3",children:[l.jsx("h2",{className:"font-medium mb-2",children:"Pre & Pli"}),l.jsxs("div",{children:["Pre net: ",l.jsx("b",{children:(f==null?void 0:f.price_value)??""})]}),l.jsxs("div",{children:["Channel: ",l.jsx("b",{children:(f==null?void 0:f.booking_channel)??""})]}),l.jsxs("div",{children:["Operator: ",l.jsx("b",{children:(f==null?void 0:f.employee_id)??""})]}),l.jsxs("div",{className:"mt-2",children:[l.jsx("div",{className:"font-medium",children:"Pli"}),p.length===0?l.jsx("div",{children:""}):l.jsx("ul",{className:"list-disc pl-5",children:p.map(x=>l.jsxs("li",{children:[x.ts,": ",x.amount," RON  ",x.payment_method," ",x.transaction_id?`(txn ${x.transaction_id})`:""," ",x.collected_by?`| casier ${x.collected_by}`:""]},x.id))})]})]})]}),l.jsxs("div",{className:"border rounded p-3",children:[l.jsx("h2",{className:"font-medium mb-2",children:"Evenimente (audit)"}),v.length===0?l.jsx("div",{children:""}):l.jsxs("table",{className:"w-full text-sm border",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Dat"}),l.jsx("th",{className:"border p-2",children:"Aciune"}),l.jsx("th",{className:"border p-2",children:"Actor"}),l.jsx("th",{className:"border p-2",children:"Sum"}),l.jsx("th",{className:"border p-2",children:"Metod"}),l.jsx("th",{className:"border p-2",children:"Channel"})]})}),l.jsx("tbody",{children:v.map(x=>l.jsxs("tr",{children:[l.jsx("td",{className:"border p-2",children:x.at}),l.jsx("td",{className:"border p-2",children:x.action}),l.jsx("td",{className:"border p-2",children:x.actor_id}),l.jsx("td",{className:"border p-2",children:x.amount??""}),l.jsx("td",{className:"border p-2",children:x.payment_method??""}),l.jsx("td",{className:"border p-2",children:x.channel??""})]},x.event_id||x.id))})]})]})]})}const lm=new Set(["admin","operator_admin","agent"]),t4=5e3,fw=500;function n4(t){if(!t)return"";try{const e=new Date(t);return new Intl.DateTimeFormat("ro-RO",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"}).format(e)}catch{return t}}function hw(t,e){if(!Array.isArray(e)||e.length===0)return t;const r=new Map(t.map(s=>[s.id,s]));for(const s of e)r.has(s.id)||r.set(s.id,s);const i=Array.from(r.values());return i.sort((s,c)=>s.id-c.id),i.length>fw?i.slice(i.length-fw):i}function r4({user:t}){const[e,r]=h.useState(null),i=z=>r(z),s=()=>r(null);h.useEffect(()=>{if(!e)return;const z=U=>{U.key==="Escape"&&s()};return window.addEventListener("keydown",z),()=>window.removeEventListener("keydown",z)},[e]);const[c,d]=h.useState(!1),[m,f]=h.useState([]),[p,v]=h.useState(""),[x,w]=h.useState(null),[S,b]=h.useState(!1),[N,j]=h.useState(!1),[_,C]=h.useState(0),E=h.useRef(null),O=h.useRef(0),M=h.useRef(null),R=h.useRef(!0),I=h.useRef(null),H=h.useMemo(()=>t!=null&&t.id?`agent-chat:last-read:${t.id}`:null,[t==null?void 0:t.id]);h.useEffect(()=>(R.current=!0,()=>{R.current=!1}),[]),h.useEffect(()=>{if(H)try{const z=Number(window.localStorage.getItem(H)||"0");Number.isFinite(z)&&z>0&&C(z)}catch{}},[H]);const D=h.useCallback(z=>{if(!H)return;const U=Number(z)||0;C(U),j(!1);try{window.localStorage.setItem(H,String(U))}catch{}},[H]),Y=h.useCallback(async()=>{if(!lm.has(t==null?void 0:t.role))return;const z=O.current,U=z>0?`/api/chat/messages?afterId=${z}`:"/api/chat/messages?limit=100";try{const K=await fetch(U,{credentials:"include"});if(!K.ok)throw new Error("chat fetch error");const T=await K.json(),A=Array.isArray(T==null?void 0:T.messages)?T.messages:[];if(A.length===0)return;f(F=>{const V=hw(F,A),q=V[V.length-1];return q!=null&&q.id&&(O.current=q.id,!c&&q.id>_&&j(!0)),V})}catch{}},[c,_,t==null?void 0:t.role]);h.useEffect(()=>{if(lm.has(t==null?void 0:t.role))return Y(),E.current=setInterval(Y,t4),()=>{clearInterval(E.current),E.current=null}},[Y,t==null?void 0:t.role]),h.useEffect(()=>{if(!c||m.length===0)return;const z=m[m.length-1];z!=null&&z.id&&D(z.id),M.current&&(M.current.scrollTop=M.current.scrollHeight)},[c,m,D]);const G=()=>{d(z=>{const U=!z;if(!U)return U;const K=m[m.length-1];return K!=null&&K.id&&D(K.id),setTimeout(()=>{M.current&&(M.current.scrollTop=M.current.scrollHeight)},0),U})},ie=async({content:z,attachmentUrl:U,attachmentType:K})=>{const T={content:(z==null?void 0:z.trim())||"",attachmentType:U?K||"image":null,attachmentUrl:U||null},A=await fetch("/api/chat/messages",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(T)});if(!A.ok){const q=await A.json().catch(()=>({}));throw new Error((q==null?void 0:q.error)||"Nu am putut trimite mesajul.")}const F=await A.json(),V=F==null?void 0:F.message;V&&(f(q=>hw(q,[V])),O.current=V.id,D(V.id),setTimeout(()=>{M.current&&(M.current.scrollTop=M.current.scrollHeight)},0))},Oe=async z=>{z.preventDefault(),w(null);const U=p.trim();if(!U){w("Scrie un mesaj.");return}b(!0);try{await ie({content:U}),v("")}catch(K){w(K.message||"Nu am putut trimite mesajul.")}finally{R.current&&b(!1)}},ce=()=>{var z;return(z=I.current)==null?void 0:z.click()},te=async z=>{var K;const U=(K=z.target.files)==null?void 0:K[0];if(z.target.value="",!!U){w(null),b(!0);try{const T=new FormData;T.append("image",U);const A=await fetch("/api/chat/upload",{method:"POST",credentials:"include",body:T});if(!A.ok){const q=await A.json().catch(()=>({}));throw new Error((q==null?void 0:q.error)||"Upload euat.")}const F=await A.json(),V=F==null?void 0:F.url;if(!V)throw new Error("Rspuns invalid de la upload.");await ie({content:"",attachmentUrl:V,attachmentType:"image"})}catch(T){w(T.message||"Nu am putut ncrca imaginea.")}finally{R.current&&b(!1)}}};if(!t||!lm.has(t.role))return null;const k=m.length?m[m.length-1].id:_;return l.jsxs("div",{className:"fixed bottom-4 right-9 z-50",children:[l.jsxs("button",{type:"button",onClick:G,className:"relative rounded-full bg-transparent text-blue-600 px-5 py-3 shadow-lg border border-blue-600 hover:bg-blue-50 transition",children:["Chat ageni",(N||k>_&&!c)&&l.jsx("span",{className:"absolute -top-1 -right-1 inline-flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-xs font-semibold",children:"!"})]}),c&&l.jsxs("div",{className:"mt-3 w-96 max-w-[90vw] max-h-[40vh] rounded-lg bg-white shadow-2xl border border-gray-200 flex flex-col overflow-hidden",children:[l.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-4 py-3",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"Chatul agenilor"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Mesaje text sau imagine."})]}),l.jsx("button",{type:"button",onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600","aria-label":"nchide chatul",children:""})]}),l.jsx("div",{ref:M,className:"flex-1 overflow-y-auto px-4 py-3 bg-gray-50 space-y-3",children:m.length===0?l.jsx("p",{className:"text-center text-sm text-gray-500",children:"nc nu exist mesaje. Spune primul salut!"}):m.map(z=>{const U=z.userId===t.id;return l.jsxs("div",{className:`flex flex-col ${U?"items-end":"items-start"}`,children:[l.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[l.jsx("span",{className:"font-medium text-gray-700",children:z.authorName||"Agent"}),l.jsx("span",{children:n4(z.createdAt)})]}),l.jsxs("div",{className:`mt-1 max-w-full rounded-lg px-3 py-2 text-sm shadow ${U?"bg-blue-600 text-white rounded-br-none":"bg-white text-gray-800 border border-gray-200 rounded-bl-none"}`,children:[z.content&&l.jsx("div",{className:"whitespace-pre-wrap break-words",children:z.content}),z.attachmentUrl&&z.attachmentType==="image"&&(()=>{var A;const T=(A=z.attachmentUrl)!=null&&A.startsWith("/uploads/")?`http://localhost:5000${z.attachmentUrl}`:z.attachmentUrl;return l.jsx("img",{src:T,alt:"Imagine trimis",className:"mt-2 max-h-48 w-auto rounded cursor-zoom-in",loading:"lazy",onClick:()=>i(T)})})()]})]},z.id)})}),l.jsxs("form",{onSubmit:Oe,className:"border-t border-gray-200 px-4 py-3 space-y-2",children:[x&&l.jsx("p",{className:"text-sm text-red-600",children:x}),l.jsx("textarea",{value:p,onChange:z=>v(z.target.value),rows:2,placeholder:"Scrie mesajul aici...",className:"w-full resize-none rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring",onKeyDown:z=>{z.key==="Enter"&&!z.shiftKey&&(z.preventDefault(),Oe(z))}}),l.jsxs("div",{className:"flex items-center justify-between gap-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{ref:I,type:"file",accept:"image/*",hidden:!0,onChange:te}),l.jsx("button",{type:"button",onClick:ce,className:"rounded border border-gray-300 px-3 py-2 text-sm hover:bg-gray-50",disabled:S,children:" Imagine"})]}),l.jsx("button",{type:"submit",className:"rounded bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 disabled:opacity-50",disabled:S,children:S?"Se trimite...":"Trimite"})]})]}),e&&l.jsx("div",{className:"fixed inset-0 z-[999] bg-black/70 flex items-center justify-center p-4",onClick:s,role:"dialog","aria-modal":"true",children:l.jsxs("div",{className:"relative",onClick:z=>z.stopPropagation(),children:[l.jsx("button",{onClick:s,className:"absolute -top-3 -right-3 bg-white rounded-full w-8 h-8 grid place-items-center shadow","aria-label":"nchide",title:"nchide",children:""}),l.jsx("img",{src:e,alt:"Imagine",className:"max-h-[90vh] max-w-[90vw] rounded shadow-lg"}),l.jsx("div",{className:"mt-2 text-center",children:l.jsx("a",{href:e,target:"_blank",rel:"noreferrer",className:"text-white underline text-sm",title:"Deschide ntr-un tab nou",children:"Deschide n tab nou"})})]})})]})]})}function mw(){const{token:t}=dd(),[e,r]=h.useState({name:"",username:"",password:"",confirm:""}),[i,s]=h.useState(null),[c,d]=h.useState(!!t),[m,f]=h.useState(null),[p,v]=h.useState(!1),[x,w]=h.useState(null),[S,b]=h.useState(!1);h.useEffect(()=>{if(!t)return;let j=!1;return d(!0),f(null),fetch(`/api/invitations/${t}`).then(async _=>{if(!_.ok){const C=await _.json().catch(()=>null);throw new Error((C==null?void 0:C.error)||"Invitaia nu a fost gsit.")}return _.json()}).then(_=>{j||s(_)}).catch(_=>{j||f(_.message||"Invitaia nu a fost gsit.")}).finally(()=>{j||d(!1)}),()=>{j=!0}},[t]);const N=async j=>{if(j.preventDefault(),!t){w("Link de invitaie invalid.");return}if(m){w(m);return}if(i!=null&&i.expired){w("Invitaia este expirat. Solicit un link nou administratorului.");return}if(i!=null&&i.used_at){w("Aceast invitaie a fost deja folosit.");return}if(!e.name.trim()){w("Completeaz numele.");return}if(!e.username.trim()){w("Alege un nume de utilizator.");return}if(e.username.trim().length<3){w("Username-ul trebuie s aib cel puin 3 caractere.");return}if(e.password.length<8){w("Parola trebuie s aib minimum 8 caractere.");return}if(e.password!==e.confirm){w("Parolele nu coincid.");return}v(!0),w(null);try{const _=await fetch("/api/invitations/accept",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t,name:e.name.trim(),username:e.username.trim(),password:e.password})});if(!_.ok){const C=await _.json().catch(()=>null);w((C==null?void 0:C.error)||"Nu am putut valida invitaia.");return}b(!0)}catch(_){console.error("invite accept failed",_),w("A aprut o eroare neateptat. ncearc din nou.")}finally{v(!1)}};return l.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center px-4",children:l.jsxs("div",{className:"max-w-md w-full bg-white shadow rounded p-6",children:[l.jsx("h1",{className:"text-xl font-semibold text-center mb-2",children:"Activare invitaie"}),l.jsx("p",{className:"text-sm text-gray-600 text-center mb-6",children:"Completeaz datele de mai jos pentru a-i crea contul."}),!t&&l.jsx("div",{className:"text-red-600 text-sm mb-4",children:"Token lips sau invalid."}),c&&l.jsx("div",{className:"text-sm text-gray-500 mb-4",children:"Se verific invitaia"}),m&&l.jsx("div",{className:"text-sm text-red-600 bg-red-50 border border-red-200 rounded px-3 py-2 mb-4",children:m}),i&&!i.expired&&!i.used_at&&l.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded px-3 py-2 text-xs text-gray-600 mb-4",children:[l.jsxs("p",{children:["Email: ",l.jsx("span",{className:"font-medium",children:i.email})]}),i.role&&l.jsxs("p",{children:["Rol alocat: ",l.jsx("span",{className:"font-medium",children:i.role})]}),i.expires_at&&l.jsxs("p",{children:["Valabil pn la: ",l.jsx("span",{className:"font-medium",children:new Date(i.expires_at).toLocaleString("ro-RO")})]})]}),(i==null?void 0:i.expired)&&l.jsx("div",{className:"text-sm text-red-600 bg-red-50 border border-red-200 rounded px-3 py-2 mb-4",children:"Invitaia a expirat. Cere administratorului un alt link."}),(i==null?void 0:i.used_at)&&l.jsxs("div",{className:"text-sm text-amber-600 bg-amber-50 border border-amber-200 rounded px-3 py-2 mb-4",children:["Aceast invitaie a fost deja folosit pe ",new Date(i.used_at).toLocaleString("ro-RO"),"."]}),S?l.jsxs("div",{className:"text-center space-y-4",children:[l.jsx("p",{className:"text-green-600 font-semibold",children:"Cont creat cu succes!"}),l.jsx("p",{className:"text-sm text-gray-700",children:"Te poi autentifica acum folosind adresa ta de email i parola setat."}),l.jsx(Dr,{className:"inline-block px-4 py-2 bg-blue-600 text-white rounded",to:"/login",children:"Mergi la autentificare"})]}):l.jsxs("form",{onSubmit:N,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"invite-name",children:"Nume complet"}),l.jsx("input",{id:"invite-name",type:"text",className:"w-full border rounded px-3 py-2 text-sm",value:e.name,onChange:j=>r({...e,name:j.target.value}),placeholder:"Nume Prenume"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"invite-username",children:"Username"}),l.jsx("input",{id:"invite-username",type:"text",className:"w-full border rounded px-3 py-2 text-sm",value:e.username,onChange:j=>r({...e,username:j.target.value}),placeholder:"ex: prenume.nume",autoComplete:"username"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"invite-email",children:"Email invitaie"}),l.jsx("input",{id:"invite-email",type:"email",className:"w-full border rounded px-3 py-2 text-sm bg-gray-100",value:(i==null?void 0:i.email)||"",readOnly:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"invite-pass",children:"Parol"}),l.jsx("input",{id:"invite-pass",type:"password",className:"w-full border rounded px-3 py-2 text-sm",value:e.password,onChange:j=>r({...e,password:j.target.value}),placeholder:"Minim 8 caractere"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"invite-confirm",children:"Confirm parola"}),l.jsx("input",{id:"invite-confirm",type:"password",className:"w-full border rounded px-3 py-2 text-sm",value:e.confirm,onChange:j=>r({...e,confirm:j.target.value})})]}),x&&l.jsx("div",{className:"text-sm text-red-600 bg-red-50 border border-red-200 rounded px-3 py-2",children:x}),l.jsx("button",{type:"submit",className:"w-full py-2 bg-green-600 text-white rounded disabled:opacity-60",disabled:p||!t||!!m||(i==null?void 0:i.expired)||(i==null?void 0:i.used_at),children:p?"Se confirm":"Creeaz contul"})]})]})})}const a4="";function i4(){h.useEffect(()=>{if(window.__apiPatched)return;window.__apiPatched=!0;const v=window.fetch.bind(window);window.fetch=(x,w={})=>{let S,b={};typeof x=="string"?(S=x,b={}):x&&typeof x=="object"&&"url"in x?(S=x.url,b={method:x.method,headers:x.headers,body:x.body,mode:x.mode,credentials:x.credentials,cache:x.cache,redirect:x.redirect,referrer:x.referrer,referrerPolicy:x.referrerPolicy,integrity:x.integrity,keepalive:x.keepalive,signal:x.signal}):S="",S.startsWith("/api/")&&(S=a4+S);const N={credentials:"include",...b,...w};return w&&"credentials"in w?N.credentials=w.credentials:b&&"credentials"in b&&(N.credentials=b.credentials),v(S,N)}},[]);const[t,e]=h.useState(null),[r,i]=h.useState(null),[s,c]=h.useState(!0);h.useEffect(()=>{(async()=>{var x;try{const w=await fetch("/api/auth/me",{credentials:"include"});if(w.ok){const S=await w.json();e((S==null?void 0:S.user)||null),i(((x=S==null?void 0:S.user)==null?void 0:x.role)||"guest")}else e(null),i("guest")}catch{e(null),i("guest")}finally{c(!1)}})()},[]);const d=v=>v.includes(r),m=({allow:v,children:x})=>s?l.jsx("div",{className:"p-4",children:"Se ncarc..."}):d(v)?x:!r||r==="guest"?l.jsx(RN,{to:"/login",replace:!0}):l.jsx("div",{className:"p-4 text-red-600",children:"Acces interzis."}),f=()=>{const{pathname:v}=fa();return v==="/login"||v.startsWith("/invita")?null:l.jsxs("div",{className:"p-4 bg-gray-100 flex gap-6 items-center",children:[d(["admin","operator_admin","agent"])&&l.jsxs(l.Fragment,{children:[l.jsx(Dr,{to:"/",className:"text-blue-600 hover:underline",children:"Rezervri"}),l.jsx(Dr,{to:"/backup",className:"text-blue-600 hover:underline",children:"Backupuri"}),l.jsx(Dr,{to:"/admin/blacklist",className:"text-blue-600 hover:underline",children:"Blacklist"}),l.jsx(Dr,{to:"/pasageri",className:"text-blue-600 hover:underline",children:"Pasageri"})]}),d(["admin","operator_admin","agent"])&&l.jsx(Dr,{to:"/admin",className:"text-blue-600 hover:underline",children:"Administrare"}),d(["admin","operator_admin"])&&l.jsxs(l.Fragment,{children:[l.jsx(Dr,{to:"/admin/reports",className:"text-blue-600 hover:underline",children:"Rapoarte"}),l.jsx(Dr,{to:"/admin/log",className:"text-blue-600 hover:underline",children:"Log"})]}),r&&r!=="guest"&&l.jsx("button",{onClick:async()=>{try{await fetch("/api/auth/logout",{method:"POST",credentials:"include"})}catch{}e(null),i("guest"),window.location.href="/login"},className:"ml-auto text-blue-600 hover:underline",children:"Logout"})]})},p=()=>{const{pathname:v}=fa();return v==="/login"||v.startsWith("/invita")?null:l.jsx(r4,{user:t})};return l.jsxs(oC,{children:[l.jsx(f,{}),l.jsx(p,{}),l.jsxs(zN,{children:[l.jsx(cr,{path:"/",element:l.jsx(m,{allow:["admin","operator_admin","agent"],children:l.jsx(zT,{userRole:r,user:t})})}),l.jsx(cr,{path:"/backup",element:l.jsx(m,{allow:["admin","operator_admin","agent"],children:l.jsx($T,{})})}),l.jsx(cr,{path:"/admin/blacklist",element:l.jsx(m,{allow:["admin","operator_admin","agent"],children:l.jsx(hD,{})})}),l.jsx(cr,{path:"/raport/:personId",element:l.jsx(m,{allow:["admin","operator_admin","agent"],children:l.jsx(pD,{})})}),l.jsx(cr,{path:"/admin",element:l.jsx(m,{allow:["admin","operator_admin","agent"],children:l.jsx(S3,{})})}),l.jsx(cr,{path:"/admin/reports",element:l.jsx(m,{allow:["admin","operator_admin"],children:l.jsx(T3,{user:t})})}),l.jsx(cr,{path:"/admin/routes/:id/edit",element:l.jsx(m,{allow:["admin"],children:l.jsx(X3,{})})}),l.jsx(cr,{path:"/pasageri",element:l.jsx(m,{allow:["admin","operator_admin","agent"],children:l.jsx(K3,{})})}),l.jsx(cr,{path:"/login",element:l.jsx(Q3,{onLoggedIn:v=>{e(v),i((v==null?void 0:v.role)||"guest")}})}),l.jsx(cr,{path:"/invita",element:l.jsx(mw,{})}),l.jsx(cr,{path:"/invita/:token",element:l.jsx(mw,{})}),l.jsx(cr,{path:"/admin/log",element:l.jsx(m,{allow:["admin","operator_admin"],children:l.jsx(J3,{})})}),l.jsx(cr,{path:"/rezervare/:id",element:l.jsx(e4,{})})]})]})}const s4=["places","geometry","marker"];function o4(){const t=typeof window<"u"?window.location.hostname:"",e=["localhost","127.0.0.1"].includes(t),r=/^192\.168\./.test(t)||/^10\./.test(t)||/^172\.(1[6-9]|2\d|3[0-1])\./.test(t),i=e||r||t.endsWith(".local"),s=void 0;return i&&s?s:"AIzaSyAZMoYCEQXGpAbA1P0YtID1smLhT_X87XY"}function l4({children:t}){const e=h.useMemo(()=>o4(),[]),{isLoaded:r,loadError:i}=ID({id:"gmaps-js",googleMapsApiKey:e||"",libraries:s4});if(!e)return console.error("Google Maps API key nu este configurat."),l.jsxs("div",{className:"p-4 text-red-600",children:["Google Maps nu poate fi ncrcat: lipsete cheia API. Configureaz ",l.jsx("code",{children:"VITE_GMAPS_KEY"}),"pentru producie i, opional, ",l.jsx("code",{children:"VITE_GMAPS_KEY_LOCAL"})," pentru mediul local."]});if(i){const c=((i==null?void 0:i.message)||"").includes("RefererNotAllowedMapError");return console.error("Eroare la ncrcarea Google Maps:",i),l.jsx("div",{className:"p-4 text-red-600",children:c?l.jsxs(l.Fragment,{children:["Cheia Google Maps refuz referer-ul "," ",l.jsx("strong",{children:typeof window<"u"?window.location.origin:""}),"."," ","Adaug aceast origine n restriciile cheii sau seteaz o cheie local prin"," ",l.jsx("code",{children:"VITE_GMAPS_KEY_LOCAL"})," / ",l.jsx("code",{children:"VITE_GMAPS_KEY_DEV"}),"."]}):l.jsx(l.Fragment,{children:"Eroare la ncrcarea hrii."})})}return r?t:l.jsx("div",{className:"p-4 text-gray-500",children:"Se ncarc harta..."})}Y_.createRoot(document.getElementById("root")).render(l.jsx(h.StrictMode,{children:l.jsx(l4,{children:l.jsx(i4,{})})}));
